/*
 *  Name : Navigation
 *  Description : Floating Arrows navigation
 *  Author : John Barounis
 *  Version : 0.0.4
*/

THEASYS.theme.autoLoadFunction("navigation","init"),THEASYS.theme.modules.navigation.initialized=!1,THEASYS.theme.modules.navigation.hotspots={},THEASYS.theme.modules.navigation.arrows=0,THEASYS.theme.modules.navigation.perspective=1,THEASYS.theme.modules.navigation.arrows_scale=1,THEASYS.theme.modules.navigation.arrows_hide_level=0,THEASYS.theme.modules.navigation.height_placement=0,THEASYS.theme.modules.navigation.dowiv=0,THEASYS.theme.modules.navigation.titles=0,THEASYS.theme.modules.navigation.circle=0,THEASYS.theme.modules.navigation.shadow=0,THEASYS.theme.modules.navigation.titles_visible_on_hover=0,THEASYS.theme.modules.navigation.titles_text=0,THEASYS.theme.modules.navigation.titles_placement="top",THEASYS.theme.modules.navigation.titles_offsetX=0,THEASYS.theme.modules.navigation.titles_offsetY=0,THEASYS.theme.modules.navigation.init=function(){var a=THEASYS.renderer.vars.get("options"),b=THEASYS.renderer.vars.get("editing");return!("disable_nav_arrows"in a)&&void(~~b?this.initialized=!0:~~a.nav_arrows&&(this.initialized=!0),this.initialized&&(THEASYS.theme.appendHtml("<div id=\"navigation\" class=\"hidden\"></div>",document.getElementById("viewer_wrapper")),this.events()))},THEASYS.theme.modules.navigation.listenToEdits=function(a){for(var b in a)switch(b){case"nav_arrows":var c=~~a[b];THEASYS.renderer.vars.set("options.nav_arrows",c),c?($("#navigation").fadeIn(200),this.arrows=1):($("#navigation").fadeOut(200),this.arrows=0);break;case"nav_arrows_type":var c=a[b];THEASYS.renderer.vars.set("options.nav_arrows_type",c),this.adjustArrows();break;case"nav_arrows_type_d":var c=a[b],d=c.split("|");$("#navigation").find("path").not(".pathaki-circle").attr("d",d[0]),$("#navigation").find("path.pathaki-circle").attr("d",d[1]),THEASYS.renderer.vars.set("options.nav_arrows_type_d",c),this.adjustArrows();break;case"nav_arrows_dowiv":var c=parseInt(a[b],10);if(THEASYS.renderer.vars.set("options.nav_arrows_dowiv",c),this.dowiv=c,!this.dowiv){var e=THEASYS.renderer.vars.get("options"),f=$("#navigation");f.find(".pathaki").fadeIn(200),~~e.nav_arrows_titles&&f.find(".pathaki-text").fadeIn(200),~~e.nav_arrows_circle&&f.find("path.pathaki-circle").fadeIn(200),~~e.nav_arrows_shadow&&f.find("path.pathaki-shadow").fadeIn(200)}THEASYS.renderer.vars.set("isObjectInViewportCheck",this.dowiv),this.adjustArrows();break;case"nav_arrows_hide_level":var c=parseFloat(a[b],10);THEASYS.renderer.vars.set("options.nav_arrows_hide_level",c),this.arrows_hide_level=c,this.adjustArrows();break;case"nav_arrows_height_placement":var c=~~a[b];THEASYS.renderer.vars.set("options.nav_arrows_height_placement",c),this.height_placement=c,this.adjustArrows(),this.adjustArrows();break;case"nav_arrows_scale":var c=parseFloat(a[b],10);THEASYS.renderer.vars.set("options.nav_arrows_scale",c),this.arrows_scale=c,this.adjustArrows(),this.adjustArrows();break;case"nav_arrows_opacity":var c=parseFloat(a[b],10);THEASYS.renderer.vars.set("options.nav_arrows_opacity",c),$("#navigation").find("path.pathaki-shape").attr("fill-opacity",c);break;case"nav_arrows_hover_opacity":var c=parseFloat(a[b],10);THEASYS.renderer.vars.set("options.nav_arrows_hover_opacity",c);break;case"nav_arrows_color":var c=a[b];THEASYS.renderer.vars.set("options.nav_arrows_color",c),$("#navigation").find("path.pathaki-shape").attr("fill",c);break;case"nav_arrows_hover_color":var c=a[b];THEASYS.renderer.vars.set("options.nav_arrows_hover_color",c);break;case"nav_arrows_stroke_color":var c=a[b];THEASYS.renderer.vars.set("options.nav_arrows_stroke_color",c),$("#navigation").find("path.pathaki-shape").attr("stroke",c);break;case"nav_arrows_hover_stroke_color":var c=a[b];THEASYS.renderer.vars.set("options.nav_arrows_hover_stroke_color",c);break;case"nav_arrows_stroke_width":var c=~~a[b];THEASYS.renderer.vars.set("options.nav_arrows_stroke_width",c),$("#navigation").find("path.pathaki-shape").attr("stroke-width",c),this.adjustArrows();break;case"nav_arrows_hover_stroke_width":var c=~~a[b];THEASYS.renderer.vars.set("options.nav_arrows_hover_stroke_width",c);break;case"nav_arrows_shadow":var c=~~a[b],g=THEASYS.renderer.vars.get("options.nav_arrows_type_d"),d=g.split("|");$("#navigation").find("path.pathaki-shadow").attr("d",d[0]),c?$("#navigation").find("path[data-type=\"shadow\"]").fadeIn():$("#navigation").find("path[data-type=\"shadow\"]").fadeOut(),THEASYS.renderer.vars.set("options.nav_arrows_shadow",c);break;case"nav_arrows_shadow_opacity":var c=parseFloat(a[b],10);THEASYS.renderer.vars.set("options.nav_arrows_shadow_opacity",c),$("#navigation").find("path.pathaki-shadow").attr("fill-opacity",c);break;case"nav_arrows_hover_shadow_opacity":var c=parseFloat(a[b],10);THEASYS.renderer.vars.set("options.nav_arrows_hover_shadow_opacity",c);break;case"nav_arrows_shadow_color":var c=a[b];THEASYS.renderer.vars.set("options.nav_arrows_shadow_color",c),$("#navigation").find("path.pathaki-shadow").attr("fill",c);break;case"nav_arrows_hover_shadow_color":var c=a[b];THEASYS.renderer.vars.set("options.nav_arrows_hover_shadow_color",c);break;case"nav_arrows_circle":var c=~~a[b],g=THEASYS.renderer.vars.get("options.nav_arrows_type_d"),d=g.split("|");$("#navigation").find("path.pathaki-circle").attr("d",d[1]),c?$("#navigation").find("path[data-type=\"circle\"]").fadeIn():$("#navigation").find("path[data-type=\"circle\"]").fadeOut(),THEASYS.renderer.vars.set("options.nav_arrows_circle",c),this.processArrows(),this.adjustArrows();break;case"nav_arrows_circle_opacity":var c=parseFloat(a[b],10);THEASYS.renderer.vars.set("options.nav_arrows_circle_opacity",c),$("#navigation").find("path.pathaki-circle").attr("fill-opacity",c);break;case"nav_arrows_hover_circle_opacity":var c=parseFloat(a[b],10);THEASYS.renderer.vars.set("options.nav_arrows_hover_circle_opacity",c);break;case"nav_arrows_circle_color":var c=a[b];THEASYS.renderer.vars.set("options.nav_arrows_circle_color",c),$("#navigation").find("path.pathaki-circle").attr("fill",c);break;case"nav_arrows_hover_circle_color":var c=a[b];THEASYS.renderer.vars.set("options.nav_arrows_hover_circle_color",c);break;case"nav_arrows_circle_stroke_color":var c=a[b];THEASYS.renderer.vars.set("options.nav_arrows_circle_stroke_color",c),$("#navigation").find("path.pathaki-circle").attr("stroke",c);break;case"nav_arrows_hover_circle_stroke_color":var c=a[b];THEASYS.renderer.vars.set("options.nav_arrows_hover_circle_stroke_color",c);break;case"nav_arrows_circle_stroke_width":var c=~~a[b];THEASYS.renderer.vars.set("options.nav_arrows_circle_stroke_width",c),$("#navigation").find("path.pathaki-circle").attr("stroke-width",c);break;case"nav_arrows_hover_circle_stroke_width":var c=~~a[b];THEASYS.renderer.vars.set("options.nav_arrows_hover_circle_stroke_width",c);break;case"nav_arrows_titles_color":var c=a[b];$("#navigation").find(".pathaki-text").css("color",c),THEASYS.renderer.vars.set("options.nav_arrows_titles_color",c);break;case"nav_arrows_titles_size":var c=~~a[b];$("#navigation").find(".pathaki-text").css("font-size",c+"px"),this.adjustArrows(),THEASYS.renderer.vars.set("options.nav_arrows_titles_size",c);break;case"nav_arrows_titles_offsetX":var c=~~a[b];this.titles_offsetX=c,this.adjustArrows(),THEASYS.renderer.vars.set("options.nav_arrows_titles_offsetX",c);break;case"nav_arrows_titles_offsetY":var c=~~a[b];this.titles_offsetY=c,this.adjustArrows(),THEASYS.renderer.vars.set("options.nav_arrows_titles_offsetY",c);break;case"nav_arrows_titles_paddingX":var c=~~a[b],h=THEASYS.renderer.vars.get("options.nav_arrows_titles_paddingY");$("#navigation").find(".pathaki-text").css("padding",h+"px "+c+"px"),this.adjustArrows(),THEASYS.renderer.vars.set("options.nav_arrows_titles_paddingX",c);break;case"nav_arrows_titles_paddingY":var c=~~a[b],i=THEASYS.renderer.vars.get("options.nav_arrows_titles_paddingX");$("#navigation").find(".pathaki-text").css("padding",c+"px "+i+"px"),this.adjustArrows(),THEASYS.renderer.vars.set("options.nav_arrows_titles_paddingY",c);break;case"nav_arrows_titles_background_color":var c=a[b],j=THEASYS.renderer.vars.get("options.nav_arrows_titles_background_opacity"),k=THEASYS.fn.hexToRgb(c),l={r:0,g:0,b:0};k&&(l=k),$("#navigation").find(".pathaki-text").css("background","rgba("+l.r+", "+l.g+", "+l.b+", "+j+")"),THEASYS.renderer.vars.set("options.nav_arrows_titles_background_color",c);break;case"nav_arrows_titles_background_opacity":var c=parseFloat(a[b],10),m=THEASYS.renderer.vars.get("options.nav_arrows_titles_background_color"),k=THEASYS.fn.hexToRgb(m),l={r:0,g:0,b:0};k&&(l=k),$("#navigation").find(".pathaki-text").css("background","rgba("+l.r+", "+l.g+", "+l.b+", "+c+")"),THEASYS.renderer.vars.set("options.nav_arrows_titles_background_opacity",c);break;case"nav_arrows_titles_background_border_size":var c=~~a[b],n=THEASYS.renderer.vars.get("options.nav_arrows_titles_background_border_color"),o=THEASYS.renderer.vars.get("options.nav_arrows_titles_background_border_style");$("#navigation").find(".pathaki-text").css("border",c+"px "+o+" "+n),this.adjustArrows(),THEASYS.renderer.vars.set("options.nav_arrows_titles_background_border_size",c);break;case"nav_arrows_titles_background_border_color":var c=a[b],p=THEASYS.renderer.vars.get("options.nav_arrows_titles_background_border_size"),o=THEASYS.renderer.vars.get("options.nav_arrows_titles_background_border_style");$("#navigation").find(".pathaki-text").css("border",p+"px "+o+" "+c),THEASYS.renderer.vars.set("options.nav_arrows_titles_background_border_color",c);break;case"nav_arrows_titles_background_border_style":var c=a[b],p=THEASYS.renderer.vars.get("options.nav_arrows_titles_background_border_size"),n=THEASYS.renderer.vars.get("options.nav_arrows_titles_background_border_color");$("#navigation").find(".pathaki-text").css("border",p+"px "+c+" "+n),this.adjustArrows(),THEASYS.renderer.vars.set("options.nav_arrows_titles_background_border_style",c);break;case"nav_arrows_titles_background_radius":var c=~~a[b];$("#navigation").find(".pathaki-text").css("border-radius",c+"px"),THEASYS.renderer.vars.set("options.nav_arrows_titles_background_radius",c);break;case"nav_arrows_titles_text":var c=~~a[b];this.titles_text=c,THEASYS.renderer.vars.set("options.nav_arrows_titles_text",c),this.processArrows(),this.adjustArrows();break;case"nav_arrows_titles_placement":var c=a[b];this.titles_placement=c,this.adjustArrows(),THEASYS.renderer.vars.set("options.nav_arrows_titles_placement",c);break;case"nav_arrows_perspective":var c=~~a[b];this.perspective=c,this.adjustArrows(),THEASYS.renderer.vars.set("options.nav_arrows_perspective",c);}},THEASYS.theme.modules.navigation.events=function(){$("#navigation").on("click","path",function(){var a=$(this).data("id");THEASYS.renderer.cif("executeObjectAction",a)}),$("#navigation").on("mouseenter","path",function(){var a=$(this),b=a.data("id"),c=THEASYS.renderer.vars.get("options"),d=$("#navigation_"+b+"_shape"),e=c.nav_arrows_hover_color;d.attr("fill",e);var e=parseFloat(c.nav_arrows_hover_opacity,10);d.attr("fill-opacity",e);var e=c.nav_arrows_hover_stroke_color;d.attr("stroke",e);var e=parseInt(c.nav_arrows_hover_stroke_width,10);d.attr("stroke-width",e);var f=$("#navigation_"+b+"_shadow"),e=c.nav_arrows_hover_shadow_color;f.attr("fill",e);var e=parseFloat(c.nav_arrows_hover_shadow_opacity,10);f.attr("fill-opacity",e);var g=$("#navigation_"+b+"_circle"),e=c.nav_arrows_hover_circle_color;g.attr("fill",e);var e=parseFloat(c.nav_arrows_hover_circle_opacity,10);g.attr("fill-opacity",e);var e=c.nav_arrows_hover_circle_stroke_color;g.attr("stroke",e);var e=parseInt(c.nav_arrows_hover_circle_stroke_width,10);if(g.attr("stroke-width",e),~~c.nav_arrows_titles&&~~c.nav_arrows_titles_visible_on_hover){var h=$("#navigation_"+b+"_text");h.show(),THEASYS.theme.modules.navigation.adjustArrows()}}).on("mouseleave","path",function(){var a=$(this),b=a.data("id"),c=THEASYS.renderer.vars.get("options"),d=$("#navigation_"+b+"_shape"),e=c.nav_arrows_color;d.attr("fill",e);var e=parseFloat(c.nav_arrows_opacity,10);d.attr("fill-opacity",e);var e=c.nav_arrows_stroke_color;d.attr("stroke",e);var e=parseInt(c.nav_arrows_stroke_width,10);d.attr("stroke-width",e);var f=$("#navigation_"+b+"_shadow"),e=c.nav_arrows_shadow_color;f.attr("fill",e);var e=parseFloat(c.nav_arrows_shadow_opacity,10);f.attr("fill-opacity",e);var g=$("#navigation_"+b+"_circle"),e=c.nav_arrows_circle_color;g.attr("fill",e);var e=parseFloat(c.nav_arrows_circle_opacity,10);g.attr("fill-opacity",e);var e=c.nav_arrows_circle_stroke_color;g.attr("stroke",e);var e=parseInt(c.nav_arrows_circle_stroke_width,10);if(g.attr("stroke-width",e),~~c.nav_arrows_titles&&~~c.nav_arrows_titles_visible_on_hover){var h=$("#navigation_"+b+"_text");h.hide()}})},THEASYS.theme.modules.navigation.processArrows=function(){if(!this.initialized)return!1;var a=THEASYS.renderer.vars.get("options");if(this.arrows=~~a.nav_arrows,!this.arrows)return!1;var b=$("#navigation");b.addClass("hidden").html(""),this.arrows_scale=parseFloat(a.nav_arrows_scale,10),this.arrows_hide_level=parseFloat(a.nav_arrows_hide_level,10),this.height_placement=parseFloat(a.nav_arrows_height_placement,10),this.perspective=~~a.nav_arrows_perspective,this.dowiv=~~a.nav_arrows_dowiv,this.setOption_isObjectInViewportCheck(),this.titles=~~a.nav_arrows_titles,this.circle=~~a.nav_arrows_circle,this.shadow=~~a.nav_arrows_shadow,this.titles_text=~~a.nav_arrows_titles_text,this.titles_placement=a.nav_arrows_titles_placement,this.titles_offsetX=~~a.nav_arrows_titles_offsetX,this.titles_offsetY=~~a.nav_arrows_titles_offsetY,this.titles_visible_on_hover=~~a.nav_arrows_titles_visible_on_hover;var c=a.nav_arrows_type_d.split("|"),d=a.nav_arrows_color,e=parseFloat(a.nav_arrows_opacity,10),f=a.nav_arrows_stroke_color,g=~~a.nav_arrows_stroke_width,h=a.nav_arrows_shadow_color,j=parseFloat(a.nav_arrows_shadow_opacity,10),k=a.nav_arrows_circle_color,l=parseFloat(a.nav_arrows_circle_opacity,10),m=a.nav_arrows_circle_stroke_color,n=~~a.nav_arrows_circle_stroke_width,o=THEASYS.renderer.vars.get("rendererWidth"),p=THEASYS.renderer.vars.get("rendererHeight"),q="<svg version=\"1.1\" class=\"arrows\" width=\""+o+"\" height=\""+p+"\" viewBox=\"0 0 "+o+" "+p+"\">",r="",s=THEASYS.renderer.panoramas(),t=THEASYS.renderer.vars.get("objects"),u=THEASYS.fn.hexToRgb(a.nav_arrows_titles_background_color),v={r:0,g:0,b:0};u&&(v=u);var w="style=\"font-size:"+~~a.nav_arrows_titles_size+"px;color:"+a.nav_arrows_titles_color+";padding:"+a.nav_arrows_titles_paddingY+"px "+a.nav_arrows_titles_paddingX+"px;background:rgba("+v.r+", "+v.g+", "+v.b+", "+a.nav_arrows_titles_background_opacity+");border-radius:"+a.nav_arrows_titles_background_radius+"px;border:"+a.nav_arrows_titles_background_border_size+"px "+a.nav_arrows_titles_background_border_style+" "+a.nav_arrows_titles_background_border_color+" \"";for(var x in t)"link_to_panorama"===t[x].data.action_type&&(q+="<path data-type=\"circle\" class=\"pathaki pathaki-circle\" data-id=\""+x+"\" id=\"navigation_"+x+"_circle\" fill=\""+k+"\" fill-rule=\"evenodd\" stroke=\""+m+"\" stroke-width=\""+n+"\" fill-opacity=\""+l+"\" d=\""+c[1]+"\"></path>",q+="<path data-type=\"shadow\" class=\"pathaki pathaki-shadow\" data-id=\""+x+"\" id=\"navigation_"+x+"_shadow\" fill=\""+h+"\" fill-rule=\"nonzero\" fill-opacity=\""+j+"\" d=\""+c[0]+"\"></path>",q+="<path data-type=\"shape\" class=\"pathaki pathaki-shape\" data-id=\""+x+"\" id=\"navigation_"+x+"_shape\" fill=\""+d+"\" fill-rule=\"nonzero\" stroke=\""+f+"\" stroke-width=\""+g+"\" fill-opacity=\""+e+"\" d=\""+c[0]+"\"></path>",this.titles_text?""!==t[x].data.tooltip&&(r+="<div class=\"pathaki pathaki-text\" data-id=\""+x+"\" "+w+" id=\"navigation_"+x+"_text\"><span>"+t[x].data.tooltip+"</span></div>"):t[x].data.action.panorama_rnd in s&&"title"in s[t[x].data.action.panorama_rnd]&&""!==s[t[x].data.action.panorama_rnd].title&&(r+="<div class=\"pathaki pathaki-text\" data-id=\""+x+"\" "+w+" id=\"navigation_"+x+"_text\"><span>"+s[t[x].data.action.panorama_rnd].title+"</span></div>"));q+="</svg>",b.html(q),b.append(r),this.dowiv||(~~a.nav_arrows_circle&&b.find("path.pathaki-circle").show(),~~a.nav_arrows_shadow&&b.find("path.pathaki-shadow").show()),~~a.nav_arrows_titles&&(THEASYS.theme.modules.navigation.adjustArrows(),!~~a.nav_arrows_titles_visible_on_hover&&b.find(".pathaki-text").show());var i=THEASYS.renderer.vars.get("vr"),y=THEASYS.renderer.vars.get("gyroscope");i||y||(this.dowiv?0==a.panoramas_transition?window.setTimeout(function(){THEASYS.renderer.cif("_updatePanoramaPosition"),THEASYS.theme.modules.navigation.adjustArrows(),b.removeClass("hidden")},100):b.removeClass("hidden"):b.removeClass("hidden"))},THEASYS.theme.modules.navigation.adjustArrows=function(){if(!this.initialized)return!1;if(!this.arrows)return!1;var a=THEASYS.renderer.vars.get("lat"),b=THEASYS.renderer.vars.get("deg"),c=THEASYS.renderer.vars.get("hotspots_degrees_position"),d=THEASYS.renderer.vars.get("rendererWidth"),e=THEASYS.renderer.vars.get("rendererHeight"),f=$("#navigation");if(this.dowiv){var g=THEASYS.renderer.vars.get("objects");for(var h in g)h in c||f.find(".pathaki[data-id=\""+h+"\"]").hide()}if(Object.keys(c).length){var j=0,k=0,l=null,m=null,n=null,o=null,p=0,q=0,r=0,s=.85,t=this.arrows_scale,u=this.height_placement;0>this.height_placement?e<=Math.abs(this.height_placement)&&(u=-(e-100)):e<=Math.abs(this.height_placement)&&(u=e-100);var v=800;for(var w in this.circle&&(v+=100),t=e/v,1.5<t&&(t=1.5),this.arrows_scale>t&&(s=t),c)(j=c[w]-b,tY=e/2+0,o=$("#navigation_"+w+"_shape"),!!o.length)&&(l=o[0].getBoundingClientRect(),o.attr("transform","translate("+d/2+" "+tY+") rotate("+j+") scale("+s+")"),$("#navigation_"+w+"_shadow").attr("transform","translate("+d/2+" "+(tY+5)+") rotate("+j+") scale("+s+")"),$("#navigation_"+w+"_circle").attr("transform","translate("+d/2+" "+(tY+6)+") rotate("+j+") scale("+s+")"),this.titles&&(n=$("#navigation_"+w+"_text"),n.length&&(m=n[0].getBoundingClientRect(),k=0,k=m.width>l.width?-((m.width-l.width)/2):(l.width-m.width)/2,q=0,r=0,"top"===this.titles_placement?(q=l.top-m.height-~~this.titles_offsetY,r=l.left+k+~~this.titles_offsetX):"bottom"===this.titles_placement?(q=l.top+(m.height+l.height/2)+~~this.titles_offsetY,r=l.left+k+~~this.titles_offsetX):"left"===this.titles_placement?(q=l.top+l.height/2-m.height/2-~~this.titles_offsetY,r=l.left-(m.width+~~this.titles_offsetX)):"right"===this.titles_placement&&(q=l.top+l.height/2-m.height/2-~~this.titles_offsetY,r=l.left+l.width+~~this.titles_offsetX),n.css({top:q,left:r}))),this.dowiv&&(f.find("path.pathaki-shape[data-id=\""+w+"\"]").show(),this.titles&&!this.titles_visible_on_hover&&f.find(".pathaki-text[data-id=\""+w+"\"]").show(),this.circle&&f.find("path.pathaki-circle[data-id=\""+w+"\"]").show(),this.shadow&&f.find("path.pathaki-shadow[data-id=\""+w+"\"]").show()));var a=parseFloat(THEASYS.renderer.vars.get("lat"),10);if(a>this.arrows_hide_level)f.find("svg").hide();else{if(this.perspective){var i=Math.abs(a/100);.4>i&&(i=.4)}else i=1;p=e/2-u,f.find("svg").css({transform:"scale(1, "+i+") translate(0px,"+(p+a*p/90)+"px)"}).show()}}else;},THEASYS.theme.modules.navigation.setOption_isObjectInViewportCheck=function(){this.dowiv?THEASYS.renderer.vars.set("isObjectInViewportCheck",1):THEASYS.renderer.vars.set("isObjectInViewportCheck",0)},THEASYS.theme.modules.navigation.forceHotspotVisibleStatus={},THEASYS.theme.modules.navigation.forceHotspotsVisibility=function(){if(this.initialized){var a=THEASYS.renderer.vars.get("vr"),b=THEASYS.renderer.vars.get("gyroscope"),c=THEASYS.renderer.vars.get("objects");THEASYS.renderer.hotspotsVisibleApply();for(var d in c)"link_to_panorama"===c[d].data.action_type&&(a||b?(this.forceHotspotVisibleStatus[d]=c[d].visible,c[d].visible=!0):d in this.forceHotspotVisibleStatus&&(c[d].visible=this.forceHotspotVisibleStatus[d]))}},THEASYS.renderer.event.on("userMovePanorama",function(){THEASYS.theme.modules.navigation.initialized&&$("#navigation svg path").css({"pointer-events":"none"})}),THEASYS.renderer.event.on("panoramaMouseUp",function(){THEASYS.theme.modules.navigation.initialized&&$("#navigation svg path").css({"pointer-events":"all"})}),THEASYS.renderer.event.on("hotspotClick",function(a){THEASYS.theme.modules.navigation.initialized&&"link_to_panorama"===a.type&&$("#navigation").addClass("hidden")}),THEASYS.renderer.event.on("fetchPanorama",function(){THEASYS.theme.modules.navigation.initialized&&$("#navigation").addClass("hidden")}),THEASYS.renderer.event.on("loadedPanorama",function(){THEASYS.theme.modules.navigation.initialized&&(THEASYS.theme.modules.navigation.processArrows(),THEASYS.theme.modules.navigation.adjustArrows(),Object.keys(THEASYS.theme.modules.navigation.forceHotspotVisibleStatus).forEach(function(a){delete THEASYS.theme.modules.navigation.forceHotspotVisibleStatus[a]}),THEASYS.theme.modules.navigation.forceHotspotsVisibility())}),THEASYS.renderer.event.on("updatePanoramaPosition",function(){THEASYS.theme.modules.navigation.adjustArrows()}),THEASYS.renderer.event.on("animate",function(){THEASYS.theme.modules.navigation.adjustArrows()}),THEASYS.renderer.event.on("finishedPanoramaMovement",function(){THEASYS.theme.modules.navigation.adjustArrows()}),THEASYS.renderer.event.on("fovChange",function(){THEASYS.theme.modules.navigation.adjustArrows()}),THEASYS.renderer.event.on("resize",function(){if(THEASYS.theme.modules.navigation.initialized){var a=THEASYS.renderer.vars.get("rendererWidth"),b=THEASYS.renderer.vars.get("rendererHeight"),c=$("#navigation svg");c.attr("width",a),c.attr("height",b),c.attr("viewBox","0 0 "+a+" "+b),THEASYS.theme.modules.navigation.adjustArrows(),THEASYS.theme.modules.navigation.adjustArrows()}}),THEASYS.renderer.event.on("toggleVr",function(a){if(THEASYS.theme.modules.navigation.initialized){var b=a||~~THEASYS.renderer.vars.get("gyroscope");b?$("#navigation").addClass("hidden"):$("#navigation").removeClass("hidden"),THEASYS.theme.modules.navigation.adjustArrows(),THEASYS.theme.modules.navigation.forceHotspotsVisibility()}}),THEASYS.renderer.event.on("gyroscope",function(a){THEASYS.theme.modules.navigation.initialized&&(a?$("#navigation").addClass("hidden"):$("#navigation").removeClass("hidden"),THEASYS.theme.modules.navigation.adjustArrows(),THEASYS.theme.modules.navigation.forceHotspotsVisibility())});