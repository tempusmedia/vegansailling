/*
* Theasys
* Generated on: Monday 18th of January 2021 06:16:08 PM
*/
 
var lastChar=vars.path.substr(-1);if(lastChar!=='/'){vars.path+='/';};vars.paths={}; vars.paths.img=vars.path+'assets/img';vars.paths.js=vars.path+'assets/js';vars.paths.css=vars.path+'assets/css';vars.paths.website=vars.path;vars.paths.websiteLanguage=vars.path;vars.paths.static=vars.path+'assets';vars.paths.panoramas=vars.path+'assets/panoramas';vars.paths.media=vars.path+'assets/media';vars.paths.hotspots=vars.path+'assets/hotspots';vars.paths.options=vars.path+'assets/options';vars.paths.user_hotspots='';vars.paths.watermarked_panoramas='';vars.url=vars.path;vars.pro_server_name=vars.path;vars.exported=true;vars.category='viewer';vars.page='viewer';vars.short_url='';vars.short_url_embed_rnd='';vars.language='';vars.trailing_slash='1';vars.has_panorama_enhancements='0';vars.options={};vars.icon_libs=[];
 
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var n=[],r=e.document,i=Object.getPrototypeOf,o=n.slice,a=n.concat,s=n.push,u=n.indexOf,l={},c=l.toString,f=l.hasOwnProperty,p=f.toString,d=p.call(Object),h={},g=function e(t){return"function"==typeof t&&"number"!=typeof t.nodeType},y=function e(t){return null!=t&&t===t.window},v={type:!0,src:!0,noModule:!0};function m(e,t,n){var i,o=(t=t||r).createElement("script");if(o.text=e,n)for(i in v)n[i]&&(o[i]=n[i]);t.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[c.call(e)]||"object":typeof e}var b="3.3.1",w=function(e,t){return new w.fn.init(e,t)},T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.fn=w.prototype={jquery:"3.3.1",constructor:w,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||g(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(l&&r&&(w.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&w.isPlainObject(n)?n:{},a[t]=w.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},w.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==c.call(e))&&(!(t=i(e))||"function"==typeof(n=f.call(t,"constructor")&&t.constructor)&&p.call(n)===d)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){m(e)},each:function(e,t){var n,r=0;if(C(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(C(Object(e))?w.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;o<a;o++)(r=!t(e[o],o))!==s&&i.push(e[o]);return i},map:function(e,t,n){var r,i,o=0,s=[];if(C(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return a.apply([],s)},guid:1,support:h}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function C(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!g(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}var E=function(e){var t,n,r,i,o,a,s,u,l,c,f,p,d,h,g,y,v,m,x,b="sizzle"+1*new Date,w=e.document,T=0,C=0,E=ae(),k=ae(),S=ae(),D=function(e,t){return e===t&&(f=!0),0},N={}.hasOwnProperty,A=[],j=A.pop,q=A.push,L=A.push,H=A.slice,O=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",I="\\["+M+"*("+R+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+M+"*\\]",W=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+I+")*)|.*)\\)|)",$=new RegExp(M+"+","g"),B=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),F=new RegExp("^"+M+"*,"+M+"*"),_=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),z=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),X=new RegExp(W),U=new RegExp("^"+R+"$"),V={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+W),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){p()},ie=me(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{L.apply(A=H.call(w.childNodes),w.childNodes),A[w.childNodes.length].nodeType}catch(e){L={apply:A.length?function(e,t){q.apply(e,H.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function oe(e,t,r,i){var o,s,l,c,f,h,v,m=t&&t.ownerDocument,T=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==T&&9!==T&&11!==T)return r;if(!i&&((t?t.ownerDocument||t:w)!==d&&p(t),t=t||d,g)){if(11!==T&&(f=J.exec(e)))if(o=f[1]){if(9===T){if(!(l=t.getElementById(o)))return r;if(l.id===o)return r.push(l),r}else if(m&&(l=m.getElementById(o))&&x(t,l)&&l.id===o)return r.push(l),r}else{if(f[2])return L.apply(r,t.getElementsByTagName(e)),r;if((o=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return L.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!S[e+" "]&&(!y||!y.test(e))){if(1!==T)m=t,v=e;else if("object"!==t.nodeName.toLowerCase()){(c=t.getAttribute("id"))?c=c.replace(te,ne):t.setAttribute("id",c=b),s=(h=a(e)).length;while(s--)h[s]="#"+c+" "+ve(h[s]);v=h.join(","),m=K.test(e)&&ge(t.parentNode)||t}if(v)try{return L.apply(r,m.querySelectorAll(v)),r}catch(e){}finally{c===b&&t.removeAttribute("id")}}}return u(e.replace(B,"$1"),t,r,i)}function ae(){var e=[];function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}return t}function se(e){return e[b]=!0,e}function ue(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){var n=e.split("|"),i=n.length;while(i--)r.attrHandle[n[i]]=t}function ce(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function de(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function he(e){return se(function(t){return t=+t,se(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function ge(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}n=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},p=oe.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!==d&&9===a.nodeType&&a.documentElement?(d=a,h=d.documentElement,g=!o(d),w!==d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",re,!1):i.attachEvent&&i.attachEvent("onunload",re)),n.attributes=ue(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ue(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Q.test(d.getElementsByClassName),n.getById=ue(function(e){return h.appendChild(e).id=b,!d.getElementsByName||!d.getElementsByName(b).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],y=[],(n.qsa=Q.test(d.querySelectorAll))&&(ue(function(e){h.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||y.push("\\["+M+"*(?:value|"+P+")"),e.querySelectorAll("[id~="+b+"-]").length||y.push("~="),e.querySelectorAll(":checked").length||y.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||y.push(".#.+[+~]")}),ue(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&y.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&y.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&y.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),y.push(",.*:")})),(n.matchesSelector=Q.test(m=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ue(function(e){n.disconnectedMatch=m.call(e,"*"),m.call(e,"[s!='']:x"),v.push("!=",W)}),y=y.length&&new RegExp(y.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(h.compareDocumentPosition),x=t||Q.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===d||e.ownerDocument===w&&x(w,e)?-1:t===d||t.ownerDocument===w&&x(w,t)?1:c?O(c,e)-O(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===d?-1:t===d?1:i?-1:o?1:c?O(c,e)-O(c,t):0;if(i===o)return ce(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?ce(a[r],s[r]):a[r]===w?-1:s[r]===w?1:0},d):d},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&p(e),t=t.replace(z,"='$1']"),n.matchesSelector&&g&&!S[t+" "]&&(!v||!v.test(t))&&(!y||!y.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return oe(t,d,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==d&&p(e),x(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==d&&p(e);var i=r.attrHandle[t.toLowerCase()],o=i&&N.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.escape=function(e){return(e+"").replace(te,ne)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,r=[],i=0,o=0;if(f=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(D),f){while(t=e[o++])t===e[o]&&(i=r.push(o));while(i--)e.splice(r[i],1)}return c=null,e},i=oe.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},(r=oe.selectors={cacheLength:50,createPseudo:se,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return V.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&E(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=oe.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace($," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==a?"nextSibling":"previousSibling",y=t.parentNode,v=s&&t.nodeName.toLowerCase(),m=!u&&!s,x=!1;if(y){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?y.firstChild:y.lastChild],a&&m){x=(d=(l=(c=(f=(p=y)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1])&&l[2],p=d&&y.childNodes[d];while(p=++d&&p&&p[g]||(x=d=0)||h.pop())if(1===p.nodeType&&++x&&p===t){c[e]=[T,d,x];break}}else if(m&&(x=d=(l=(c=(f=(p=t)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1]),!1===x)while(p=++d&&p&&p[g]||(x=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===v:1===p.nodeType)&&++x&&(m&&((c=(f=p[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]=[T,x]),p===t))break;return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){var r,o=i(e,t),a=o.length;while(a--)e[r=O(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:se(function(e){var t=[],n=[],r=s(e.replace(B,"$1"));return r[b]?se(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return oe(e,t).length>0}}),contains:se(function(e){return e=e.replace(Z,ee),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:se(function(e){return U.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(Z,ee).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:de(!1),disabled:de(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[n<0?n+t:n]}),even:he(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:he(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pe(t);function ye(){}ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,a=oe.tokenize=function(e,t){var n,i,o,a,s,u,l,c=k[e+" "];if(c)return t?0:c.slice(0);s=e,u=[],l=r.preFilter;while(s){n&&!(i=F.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=_.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(B," ")}),s=s.slice(n.length));for(a in r.filter)!(i=V[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?oe.error(e):k(e,u).slice(0)};function ve(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function me(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=C++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,u){var l,c,f,p=[T,s];if(u){while(t=t[r])if((1===t.nodeType||a)&&e(t,n,u))return!0}else while(t=t[r])if(1===t.nodeType||a)if(f=t[b]||(t[b]={}),c=f[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=c[o])&&l[0]===T&&l[1]===s)return p[2]=l[2];if(c[o]=p,p[2]=e(t,n,u))return!0}return!1}}function xe(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function be(e,t,n){for(var r=0,i=t.length;r<i;r++)oe(e,t[r],n);return n}function we(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Te(e,t,n,r,i,o){return r&&!r[b]&&(r=Te(r)),i&&!i[b]&&(i=Te(i,o)),se(function(o,a,s,u){var l,c,f,p=[],d=[],h=a.length,g=o||be(t||"*",s.nodeType?[s]:s,[]),y=!e||!o&&t?g:we(g,p,e,s,u),v=n?i||(o?e:h||r)?[]:a:y;if(n&&n(y,v,s,u),r){l=we(v,d),r(l,[],s,u),c=l.length;while(c--)(f=l[c])&&(v[d[c]]=!(y[d[c]]=f))}if(o){if(i||e){if(i){l=[],c=v.length;while(c--)(f=v[c])&&l.push(y[c]=f);i(null,v=[],l,u)}c=v.length;while(c--)(f=v[c])&&(l=i?O(o,f):p[c])>-1&&(o[l]=!(a[l]=f))}}else v=we(v===a?v.splice(h,v.length):v),i?i(null,a,v,u):L.apply(a,v)})}function Ce(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,c=me(function(e){return e===t},s,!0),f=me(function(e){return O(t,e)>-1},s,!0),p=[function(e,n,r){var i=!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):f(e,n,r));return t=null,i}];u<o;u++)if(n=r.relative[e[u].type])p=[me(xe(p),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[b]){for(i=++u;i<o;i++)if(r.relative[e[i].type])break;return Te(u>1&&xe(p),u>1&&ve(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(B,"$1"),n,u<i&&Ce(e.slice(u,i)),i<o&&Ce(e=e.slice(i)),i<o&&ve(e))}p.push(n)}return xe(p)}function Ee(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,u,c){var f,h,y,v=0,m="0",x=o&&[],b=[],w=l,C=o||i&&r.find.TAG("*",c),E=T+=null==w?1:Math.random()||.1,k=C.length;for(c&&(l=a===d||a||c);m!==k&&null!=(f=C[m]);m++){if(i&&f){h=0,a||f.ownerDocument===d||(p(f),s=!g);while(y=e[h++])if(y(f,a||d,s)){u.push(f);break}c&&(T=E)}n&&((f=!y&&f)&&v--,o&&x.push(f))}if(v+=m,n&&m!==v){h=0;while(y=t[h++])y(x,b,a,s);if(o){if(v>0)while(m--)x[m]||b[m]||(b[m]=j.call(u));b=we(b)}L.apply(u,b),c&&!o&&b.length>0&&v+t.length>1&&oe.uniqueSort(u)}return c&&(T=E,l=w),x};return n?se(o):o}return s=oe.compile=function(e,t){var n,r=[],i=[],o=S[e+" "];if(!o){t||(t=a(e)),n=t.length;while(n--)(o=Ce(t[n]))[b]?r.push(o):i.push(o);(o=S(e,Ee(i,r))).selector=e}return o},u=oe.select=function(e,t,n,i){var o,u,l,c,f,p="function"==typeof e&&e,d=!i&&a(e=p.selector||e);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===t.nodeType&&g&&r.relative[u[1].type]){if(!(t=(r.find.ID(l.matches[0].replace(Z,ee),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(u.shift().value.length)}o=V.needsContext.test(e)?0:u.length;while(o--){if(l=u[o],r.relative[c=l.type])break;if((f=r.find[c])&&(i=f(l.matches[0].replace(Z,ee),K.test(u[0].type)&&ge(t.parentNode)||t))){if(u.splice(o,1),!(e=i.length&&ve(u)))return L.apply(n,i),n;break}}}return(p||s(e,d))(i,t,!g,n,!t||K.test(e)&&ge(t.parentNode)||t),n},n.sortStable=b.split("").sort(D).join("")===b,n.detectDuplicates=!!f,p(),n.sortDetached=ue(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),ue(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ue(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ue(function(e){return null==e.getAttribute("disabled")})||le(P,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),oe}(e);w.find=E,w.expr=E.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=E.uniqueSort,w.text=E.getText,w.isXMLDoc=E.isXML,w.contains=E.contains,w.escapeSelector=E.escape;var k=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&w(e).is(n))break;r.push(e)}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},D=w.expr.match.needsContext;function N(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,t,n){return g(t)?w.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?w.grep(e,function(e){return e===t!==n}):"string"!=typeof t?w.grep(e,function(e){return u.call(t,e)>-1!==n}):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<r;t++)if(w.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)w.find(e,i[t],n);return r>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&D.test(e)?w(e):e||[],!1).length}});var q,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||q,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:L.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:r,!0)),A.test(i[1])&&w.isPlainObject(t))for(i in t)g(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(o=r.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,q=w(r);var H=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&w(e);if(!D.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?w.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?u.call(w(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});function P(e,t){while((e=e[t])&&1!==e.nodeType);return e}w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,n){return k(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,n){return k(e,"nextSibling",n)},prevUntil:function(e,t,n){return k(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return N(e,"iframe")?e.contentDocument:(N(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(O[e]||w.uniqueSort(i),H.test(e)&&i.reverse()),this.pushStack(i)}});var M=/[^\x20\t\r\n\f]+/g;function R(e){var t={};return w.each(e.match(M)||[],function(e,n){t[n]=!0}),t}w.Callbacks=function(e){e="string"==typeof e?R(e):w.extend({},e);var t,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;a.length;s=-1){n=a.shift();while(++s<o.length)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1)}e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){w.each(n,function(n,r){g(r)?e.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==x(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return w.each(arguments,function(e,t){var n;while((n=w.inArray(t,o,n))>-1)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?w.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l};function I(e){return e}function W(e){throw e}function $(e,t,n,r){var i;try{e&&g(i=e.promise)?i.call(e).done(t).fail(n):e&&g(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}w.extend({Deferred:function(t){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},"catch":function(e){return i.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(n,function(n,r){var i=g(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&g(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){var o=0;function a(t,n,r,i){return function(){var s=this,u=arguments,l=function(){var e,l;if(!(t<o)){if((e=r.apply(s,u))===n.promise())throw new TypeError("Thenable self-resolution");l=e&&("object"==typeof e||"function"==typeof e)&&e.then,g(l)?i?l.call(e,a(o,n,I,i),a(o,n,W,i)):(o++,l.call(e,a(o,n,I,i),a(o,n,W,i),a(o,n,I,n.notifyWith))):(r!==I&&(s=void 0,u=[e]),(i||n.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,c.stackTrace),t+1>=o&&(r!==W&&(s=void 0,u=[e]),n.rejectWith(s,u))}};t?c():(w.Deferred.getStackHook&&(c.stackTrace=w.Deferred.getStackHook()),e.setTimeout(c))}}return w.Deferred(function(e){n[0][3].add(a(0,e,g(i)?i:I,e.notifyWith)),n[1][3].add(a(0,e,g(t)?t:I)),n[2][3].add(a(0,e,g(r)?r:W))}).promise()},promise:function(e){return null!=e?w.extend(e,i):i}},o={};return w.each(n,function(e,t){var a=t[2],s=t[5];i[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=o.call(arguments),a=w.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?o.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&($(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||g(i[n]&&i[n].then)))return a.then();while(n--)$(i[n],s(n),a.reject);return a.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&B.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},w.readyException=function(t){e.setTimeout(function(){throw t})};var F=w.Deferred();w.fn.ready=function(e){return F.then(e)["catch"](function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||F.resolveWith(r,[w]))}}),w.ready.then=F.then;function _(){r.removeEventListener("DOMContentLoaded",_),e.removeEventListener("load",_),w.ready()}"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?e.setTimeout(w.ready):(r.addEventListener("DOMContentLoaded",_),e.addEventListener("load",_));var z=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===x(n)){i=!0;for(s in n)z(e,t,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,g(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(w(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},X=/^-ms-/,U=/-([a-z])/g;function V(e,t){return t.toUpperCase()}function G(e){return e.replace(X,"ms-").replace(U,V)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Q(){this.expando=w.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[G(t)]=n;else for(r in t)i[G(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][G(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(G):(t=G(t))in r?[t]:t.match(M)||[]).length;while(n--)delete r[t[n]]}(void 0===t||w.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var J=new Q,K=new Q,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ee=/[A-Z]/g;function te(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Z.test(e)?JSON.parse(e):e)}function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ee,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=te(n)}catch(e){}K.set(e,t,n)}else n=void 0;return n}w.extend({hasData:function(e){return K.hasData(e)||J.hasData(e)},data:function(e,t,n){return K.access(e,t,n)},removeData:function(e,t){K.remove(e,t)},_data:function(e,t,n){return J.access(e,t,n)},_removeData:function(e,t){J.remove(e,t)}}),w.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=K.get(o),1===o.nodeType&&!J.get(o,"hasDataAttrs"))){n=a.length;while(n--)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=G(r.slice(5)),ne(o,r,i[r]));J.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){K.set(this,e)}):z(this,function(t){var n;if(o&&void 0===t){if(void 0!==(n=K.get(o,e)))return n;if(void 0!==(n=ne(o,e)))return n}else this.each(function(){K.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){K.remove(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=J.get(e,t),n&&(!r||Array.isArray(n)?r=J.access(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),o=w._queueHooks(e,t),a=function(){w.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return J.get(e,n)||J.access(e,n,{empty:w.Callbacks("once memory").add(function(){J.remove(e,[t+"queue",n])})})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):void 0===t?this:this.each(function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=w.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=J.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&w.contains(e.ownerDocument,e)&&"none"===w.css(e,"display")},se=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i};function ue(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return w.css(e,t,"")},u=s(),l=n&&n[3]||(w.cssNumber[t]?"":"px"),c=(w.cssNumber[t]||"px"!==l&&+u)&&ie.exec(w.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)w.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,w.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var le={};function ce(e){var t,n=e.ownerDocument,r=e.nodeName,i=le[r];return i||(t=n.body.appendChild(n.createElement(r)),i=w.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),le[r]=i,i)}function fe(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=J.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ae(r)&&(i[o]=ce(r))):"none"!==n&&(i[o]="none",J.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}w.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?w(this).show():w(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,he=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;function ye(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&N(e,t)?w.merge([e],n):n}function ve(e,t){for(var n=0,r=e.length;n<r;n++)J.set(e[n],"globalEval",!t||J.get(t[n],"globalEval"))}var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===x(o))w.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+w.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;w.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&w.inArray(o,r)>-1)i&&i.push(o);else if(l=w.contains(o.ownerDocument,o),a=ye(f.appendChild(o),"script"),l&&ve(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}!function(){var e=r.createDocumentFragment().appendChild(r.createElement("div")),t=r.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),h.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var be=r.documentElement,we=/^key/,Te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ce=/^([^.]*)(?:\.(.+)|)/;function Ee(){return!0}function ke(){return!1}function Se(){try{return r.activeElement}catch(e){}}function De(e,t,n,r,i,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)De(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=ke;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return w().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=w.guid++)),e.each(function(){w.event.add(this,t,i,r,n)})}w.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=J.get(e);if(y){n.handler&&(n=(o=n).handler,i=o.selector),i&&w.find.matchesSelector(be,i),n.guid||(n.guid=w.guid++),(u=y.events)||(u=y.events={}),(a=y.handle)||(a=y.handle=function(t){return"undefined"!=typeof w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(M)||[""]).length;while(l--)d=g=(s=Ce.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=w.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=w.event.special[d]||{},c=w.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(d,a)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),w.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=J.hasData(e)&&J.get(e);if(y&&(u=y.events)){l=(t=(t||"").match(M)||[""]).length;while(l--)if(s=Ce.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){f=w.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,y.handle)||w.removeEvent(e,d,y.handle),delete u[d])}else for(d in u)w.event.remove(e,d+t[l],n,r,!0);w.isEmptyObject(u)&&J.remove(e,"handle events")}},dispatch:function(e){var t=w.event.fix(e),n,r,i,o,a,s,u=new Array(arguments.length),l=(J.get(this,"events")||{})[t.type]||[],c=w.event.special[t.type]||{};for(u[0]=t,n=1;n<arguments.length;n++)u[n]=arguments[n];if(t.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){s=w.event.handlers.call(this,t,l),n=0;while((o=s[n++])&&!t.isPropagationStopped()){t.currentTarget=o.elem,r=0;while((a=o.handlers[r++])&&!t.isImmediatePropagationStopped())t.rnamespace&&!t.rnamespace.test(a.namespace)||(t.handleObj=a,t.data=a.data,void 0!==(i=((w.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,u))&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?w(i,this).index(l)>-1:w.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Se()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Se()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&N(this,"input"))return this.click(),!1},_default:function(e){return N(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ee:ke,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ee,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ee,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ee,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Te.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},w.event.addProp),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||w.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),w.fn.extend({on:function(e,t,n,r){return De(this,e,t,n,r)},one:function(e,t,n,r){return De(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ke),this.each(function(){w.event.remove(this,e,n,t)})}});var Ne=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ae=/<script|<style|<link/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,qe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Le(e,t){return N(e,"table")&&N(11!==t.nodeType?t:t.firstChild,"tr")?w(e).children("tbody")[0]||e:e}function He(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Oe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Pe(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(J.hasData(e)&&(o=J.access(e),a=J.set(t,o),l=o.events)){delete a.handle,a.events={};for(i in l)for(n=0,r=l[i].length;n<r;n++)w.event.add(t,i,l[i][n])}K.hasData(e)&&(s=K.access(e),u=w.extend({},s),K.set(t,u))}}function Me(e,t){var n=t.nodeName.toLowerCase();"input"===n&&pe.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Re(e,t,n,r){t=a.apply([],t);var i,o,s,u,l,c,f=0,p=e.length,d=p-1,y=t[0],v=g(y);if(v||p>1&&"string"==typeof y&&!h.checkClone&&je.test(y))return e.each(function(i){var o=e.eq(i);v&&(t[0]=y.call(this,i,o.html())),Re(o,t,n,r)});if(p&&(i=xe(t,e[0].ownerDocument,!1,e,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(u=(s=w.map(ye(i,"script"),He)).length;f<p;f++)l=i,f!==d&&(l=w.clone(l,!0,!0),u&&w.merge(s,ye(l,"script"))),n.call(e[f],l,f);if(u)for(c=s[s.length-1].ownerDocument,w.map(s,Oe),f=0;f<u;f++)l=s[f],he.test(l.type||"")&&!J.access(l,"globalEval")&&w.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?w._evalUrl&&w._evalUrl(l.src):m(l.textContent.replace(qe,""),c,l))}return e}function Ie(e,t,n){for(var r,i=t?w.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||w.cleanData(ye(r)),r.parentNode&&(n&&w.contains(r.ownerDocument,r)&&ve(ye(r,"script")),r.parentNode.removeChild(r));return e}w.extend({htmlPrefilter:function(e){return e.replace(Ne,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),u=w.contains(e.ownerDocument,e);if(!(h.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(a=ye(s),r=0,i=(o=ye(e)).length;r<i;r++)Me(o[r],a[r]);if(t)if(n)for(o=o||ye(e),a=a||ye(s),r=0,i=o.length;r<i;r++)Pe(o[r],a[r]);else Pe(e,s);return(a=ye(s,"script")).length>0&&ve(a,!u&&ye(e,"script")),s},cleanData:function(e){for(var t,n,r,i=w.event.special,o=0;void 0!==(n=e[o]);o++)if(Y(n)){if(t=n[J.expando]){if(t.events)for(r in t.events)i[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle);n[J.expando]=void 0}n[K.expando]&&(n[K.expando]=void 0)}}}),w.fn.extend({detach:function(e){return Ie(this,e,!0)},remove:function(e){return Ie(this,e)},text:function(e){return z(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Re(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Le(this,e).appendChild(e)})},prepend:function(){return Re(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Le(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(ye(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return z(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ae.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Re(this,arguments,function(t){var n=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(ye(this)),n&&n.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var n,r=[],i=w(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),w(i[a])[t](n),s.apply(r,n.get());return this.pushStack(r)}});var We=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),$e=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Be=new RegExp(oe.join("|"),"i");!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",be.appendChild(l).appendChild(c);var t=e.getComputedStyle(c);i="1%"!==t.top,u=12===n(t.marginLeft),c.style.right="60%",s=36===n(t.right),o=36===n(t.width),c.style.position="absolute",a=36===c.offsetWidth||"absolute",be.removeChild(l),c=null}}function n(e){return Math.round(parseFloat(e))}var i,o,a,s,u,l=r.createElement("div"),c=r.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===c.style.backgroundClip,w.extend(h,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),a}}))}();function Fe(e,t,n){var r,i,o,a,s=e.style;return(n=n||$e(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||w.contains(e.ownerDocument,e)||(a=w.style(e,t)),!h.pixelBoxStyles()&&We.test(a)&&Be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function _e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}var ze=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ue={position:"absolute",visibility:"hidden",display:"block"},Ve={letterSpacing:"0",fontWeight:"400"},Ge=["Webkit","Moz","ms"],Ye=r.createElement("div").style;function Qe(e){if(e in Ye)return e;var t=e[0].toUpperCase()+e.slice(1),n=Ge.length;while(n--)if((e=Ge[n]+t)in Ye)return e}function Je(e){var t=w.cssProps[e];return t||(t=w.cssProps[e]=Qe(e)||e),t}function Ke(e,t,n){var r=ie.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ze(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=w.css(e,n+oe[a],!0,i)),r?("content"===n&&(u-=w.css(e,"padding"+oe[a],!0,i)),"margin"!==n&&(u-=w.css(e,"border"+oe[a]+"Width",!0,i))):(u+=w.css(e,"padding"+oe[a],!0,i),"padding"!==n?u+=w.css(e,"border"+oe[a]+"Width",!0,i):s+=w.css(e,"border"+oe[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))),u}function et(e,t,n){var r=$e(e),i=Fe(e,t,r),o="border-box"===w.css(e,"boxSizing",!1,r),a=o;if(We.test(i)){if(!n)return i;i="auto"}return a=a&&(h.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===w.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(i=parseFloat(i)||0)+Ze(e,t,n||(o?"border":"content"),a,r,i)+"px"}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Fe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=G(t),u=Xe.test(t),l=e.style;if(u||(t=Je(s)),a=w.cssHooks[t]||w.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"==(o=typeof n)&&(i=ie.exec(n))&&i[1]&&(n=ue(e,t,i),o="number"),null!=n&&n===n&&("number"===o&&(n+=i&&i[3]||(w.cssNumber[s]?"":"px")),h.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=G(t);return Xe.test(t)||(t=Je(s)),(a=w.cssHooks[t]||w.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Fe(e,t,r)),"normal"===i&&t in Ve&&(i=Ve[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return!ze.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?et(e,t,r):se(e,Ue,function(){return et(e,t,r)})},set:function(e,n,r){var i,o=$e(e),a="border-box"===w.css(e,"boxSizing",!1,o),s=r&&Ze(e,t,r,a,o);return a&&h.scrollboxSize()===o.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-Ze(e,t,"border",!1,o)-.5)),s&&(i=ie.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),Ke(e,n,s)}}}),w.cssHooks.marginLeft=_e(h.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Fe(e,"marginLeft"))||e.getBoundingClientRect().left-se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+oe[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(w.cssHooks[e+t].set=Ke)}),w.fn.extend({css:function(e,t){return z(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=$e(e),i=t.length;a<i;a++)o[t[a]]=w.css(e,t[a],!1,r);return o}return void 0!==n?w.style(e,t,n):w.css(e,t)},e,t,arguments.length>1)}});function tt(e,t,n,r,i){return new tt.prototype.init(e,t,n,r,i)}w.Tween=tt,tt.prototype={constructor:tt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(w.cssNumber[n]?"":"px")},cur:function(){var e=tt.propHooks[this.prop];return e&&e.get?e.get(this):tt.propHooks._default.get(this)},run:function(e){var t,n=tt.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):tt.propHooks._default.set(this),this}},tt.prototype.init.prototype=tt.prototype,tt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[w.cssProps[e.prop]]&&!w.cssHooks[e.prop]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},tt.propHooks.scrollTop=tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=tt.prototype.init,w.fx.step={};var nt,rt,it=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function at(){rt&&(!1===r.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(at):e.setTimeout(at,w.fx.interval),w.fx.tick())}function st(){return e.setTimeout(function(){nt=void 0}),nt=Date.now()}function ut(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=oe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function lt(e,t,n){for(var r,i=(pt.tweeners[t]||[]).concat(pt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ct(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),y=J.get(e,"fxshow");n.queue||(null==(a=w._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,w.queue(e,"fx").length||a.empty.fire()})}));for(r in t)if(i=t[r],it.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!y||void 0===y[r])continue;g=!0}d[r]=y&&y[r]||w.style(e,r)}if((u=!w.isEmptyObject(t))||!w.isEmptyObject(d)){f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=y&&y.display)&&(l=J.get(e,"display")),"none"===(c=w.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=w.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===w.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1;for(r in d)u||(y?"hidden"in y&&(g=y.hidden):y=J.access(e,"fxshow",{display:l}),o&&(y.hidden=!g),g&&fe([e],!0),p.done(function(){g||fe([e]),J.remove(e,"fxshow");for(r in d)w.style(e,r,d[r])})),u=lt(g?y[r]:0,r,p),r in y||(y[r]=u.start,g&&(u.end=u.start,u.start=0))}}function ft(e,t){var n,r,i,o,a;for(n in e)if(r=G(n),i=t[r],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=w.cssHooks[r])&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function pt(e,t,n){var r,i,o=0,a=pt.prefilters.length,s=w.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=nt||st(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return s.notifyWith(e,[l,r,n]),r<1&&a?n:(a||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:nt||st(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(ft(c,l.opts.specialEasing);o<a;o++)if(r=pt.prefilters[o].call(l,e,c,l.opts))return g(r.stop)&&(w._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return w.map(c,lt,l),g(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),w.fx.timer(w.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}w.Animation=w.extend(pt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,ie.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(M);for(var n,r=0,i=e.length;r<i;r++)n=e[r],pt.tweeners[n]=pt.tweeners[n]||[],pt.tweeners[n].unshift(t)},prefilters:[ct],prefilter:function(e,t){t?pt.prefilters.unshift(e):pt.prefilters.push(e)}}),w.speed=function(e,t,n){var r=e&&"object"==typeof e?w.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),o=w.speed(t,n,r),a=function(){var t=pt(this,w.extend({},e),o);(i||J.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=w.timers,a=J.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ot.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=J.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=w.timers,a=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ut(t,!0),e,r,i)}}),w.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(nt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),nt=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){rt||(rt=!0,at())},w.fx.stop=function(){rt=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,n){return t=w.fx?w.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=r.createElement("input"),t=r.createElement("select").appendChild(r.createElement("option"));e.type="checkbox",h.checkOn=""!==e.value,h.optSelected=t.selected,(e=r.createElement("input")).value="t",e.type="radio",h.radioValue="t"===e.value}();var dt,ht=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return z(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?w.prop(e,t,n):(1===o&&w.isXMLDoc(e)||(i=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?dt:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=w.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!h.radioValue&&"radio"===t&&N(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(M);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),dt={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ht[t]||w.find.attr;ht[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=ht[a],ht[a]=i,i=null!=n(e,t,r)?a:null,ht[a]=o),i}});var gt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;w.fn.extend({prop:function(e,t){return z(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&w.isXMLDoc(e)||(t=w.propFix[t]||t,i=w.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):gt.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),h.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this});function vt(e){return(e.match(M)||[]).join(" ")}function mt(e){return e.getAttribute&&e.getAttribute("class")||""}function xt(e){return Array.isArray(e)?e:"string"==typeof e?e.match(M)||[]:[]}w.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){w(this).addClass(e.call(this,t,mt(this)))});if((t=xt(e)).length)while(n=this[u++])if(i=mt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=t[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){w(this).removeClass(e.call(this,t,mt(this)))});if(!arguments.length)return this.attr("class","");if((t=xt(e)).length)while(n=this[u++])if(i=mt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=t[a++])while(r.indexOf(" "+o+" ")>-1)r=r.replace(" "+o+" "," ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):g(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,mt(this),t),t)}):this.each(function(){var t,i,o,a;if(r){i=0,o=w(this),a=xt(e);while(t=a[i++])o.hasClass(t)?o.removeClass(t):o.addClass(t)}else void 0!==e&&"boolean"!==n||((t=mt(this))&&J.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":J.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&(" "+vt(mt(n))+" ").indexOf(t)>-1)return!0;return!1}});var bt=/\r/g;w.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=g(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,w(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,function(e){return null==e?"":e+""})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return(t=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(bt,""):null==n?"":n}}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:vt(w.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!N(n.parentNode,"optgroup"))){if(t=w(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=w.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=w.inArray(w.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},h.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),h.focusin="onfocusin"in e;var wt=/^(?:focusinfocus|focusoutblur)$/,Tt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,n,i,o){var a,s,u,l,c,p,d,h,v=[i||r],m=f.call(t,"type")?t.type:t,x=f.call(t,"namespace")?t.namespace.split("."):[];if(s=h=u=i=i||r,3!==i.nodeType&&8!==i.nodeType&&!wt.test(m+w.event.triggered)&&(m.indexOf(".")>-1&&(m=(x=m.split(".")).shift(),x.sort()),c=m.indexOf(":")<0&&"on"+m,t=t[w.expando]?t:new w.Event(m,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=x.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+x.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:w.makeArray(n,[t]),d=w.event.special[m]||{},o||!d.trigger||!1!==d.trigger.apply(i,n))){if(!o&&!d.noBubble&&!y(i)){for(l=d.delegateType||m,wt.test(l+m)||(s=s.parentNode);s;s=s.parentNode)v.push(s),u=s;u===(i.ownerDocument||r)&&v.push(u.defaultView||u.parentWindow||e)}a=0;while((s=v[a++])&&!t.isPropagationStopped())h=s,t.type=a>1?l:d.bindType||m,(p=(J.get(s,"events")||{})[t.type]&&J.get(s,"handle"))&&p.apply(s,n),(p=c&&s[c])&&p.apply&&Y(s)&&(t.result=p.apply(s,n),!1===t.result&&t.preventDefault());return t.type=m,o||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(v.pop(),n)||!Y(i)||c&&g(i[m])&&!y(i)&&((u=i[c])&&(i[c]=null),w.event.triggered=m,t.isPropagationStopped()&&h.addEventListener(m,Tt),i[m](),t.isPropagationStopped()&&h.removeEventListener(m,Tt),w.event.triggered=void 0,u&&(i[c]=u)),t.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}}),h.focusin||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=J.access(r,t);i||r.addEventListener(e,n,!0),J.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=J.access(r,t)-1;i?J.access(r,t,i):(r.removeEventListener(e,n,!0),J.remove(r,t))}}});var Ct=e.location,Et=Date.now(),kt=/\?/;w.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),n};var St=/\[\]$/,Dt=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function jt(e,t,n,r){var i;if(Array.isArray(t))w.each(t,function(t,i){n||St.test(e)?r(e,i):jt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==x(t))r(e,t);else for(i in t)jt(e+"["+i+"]",t[i],n,r)}w.param=function(e,t){var n,r=[],i=function(e,t){var n=g(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){i(this.name,this.value)});else for(n in e)jt(n,e[n],t,i);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&At.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(Dt,"\r\n")}}):{name:t.name,value:n.replace(Dt,"\r\n")}}).get()}});var qt=/%20/g,Lt=/#.*$/,Ht=/([?&])_=[^&]*/,Ot=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mt=/^(?:GET|HEAD)$/,Rt=/^\/\//,It={},Wt={},$t="*/".concat("*"),Bt=r.createElement("a");Bt.href=Ct.href;function Ft(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(M)||[];if(g(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function _t(e,t,n,r){var i={},o=e===Wt;function a(s){var u;return i[s]=!0,w.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function zt(e,t){var n,r,i=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&w.extend(!0,e,r),e}function Xt(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}function Ut(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct.href,type:"GET",isLocal:Pt.test(Ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,w.ajaxSettings),t):zt(w.ajaxSettings,e)},ajaxPrefilter:Ft(It),ajaxTransport:Ft(Wt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,o,a,s,u,l,c,f,p,d,h=w.ajaxSetup({},n),g=h.context||h,y=h.context&&(g.nodeType||g.jquery)?w(g):w.event,v=w.Deferred(),m=w.Callbacks("once memory"),x=h.statusCode||{},b={},T={},C="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s){s={};while(t=Ot.exec(a))s[t[1].toLowerCase()]=t[2]}t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=T[e.toLowerCase()]=T[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)E.always(e[E.status]);else for(t in e)x[t]=[x[t],e[t]];return this},abort:function(e){var t=e||C;return i&&i.abort(t),k(0,t),this}};if(v.promise(E),h.url=((t||h.url||Ct.href)+"").replace(Rt,Ct.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(M)||[""],null==h.crossDomain){l=r.createElement("a");try{l.href=h.url,l.href=l.href,h.crossDomain=Bt.protocol+"//"+Bt.host!=l.protocol+"//"+l.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=w.param(h.data,h.traditional)),_t(It,h,n,E),c)return E;(f=w.event&&h.global)&&0==w.active++&&w.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Mt.test(h.type),o=h.url.replace(Lt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(qt,"+")):(d=h.url.slice(o.length),h.data&&(h.processData||"string"==typeof h.data)&&(o+=(kt.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(o=o.replace(Ht,"$1"),d=(kt.test(o)?"&":"?")+"_="+Et+++d),h.url=o+d),h.ifModified&&(w.lastModified[o]&&E.setRequestHeader("If-Modified-Since",w.lastModified[o]),w.etag[o]&&E.setRequestHeader("If-None-Match",w.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&E.setRequestHeader("Content-Type",h.contentType),E.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+$t+"; q=0.01":""):h.accepts["*"]);for(p in h.headers)E.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(!1===h.beforeSend.call(g,E,h)||c))return E.abort();if(C="abort",m.add(h.complete),E.done(h.success),E.fail(h.error),i=_t(Wt,h,n,E)){if(E.readyState=1,f&&y.trigger("ajaxSend",[E,h]),c)return E;h.async&&h.timeout>0&&(u=e.setTimeout(function(){E.abort("timeout")},h.timeout));try{c=!1,i.send(b,k)}catch(e){if(c)throw e;k(-1,e)}}else k(-1,"No Transport");function k(t,n,r,s){var l,p,d,b,T,C=n;c||(c=!0,u&&e.clearTimeout(u),i=void 0,a=s||"",E.readyState=t>0?4:0,l=t>=200&&t<300||304===t,r&&(b=Xt(h,E,r)),b=Ut(h,b,E,l),l?(h.ifModified&&((T=E.getResponseHeader("Last-Modified"))&&(w.lastModified[o]=T),(T=E.getResponseHeader("etag"))&&(w.etag[o]=T)),204===t||"HEAD"===h.type?C="nocontent":304===t?C="notmodified":(C=b.state,p=b.data,l=!(d=b.error))):(d=C,!t&&C||(C="error",t<0&&(t=0))),E.status=t,E.statusText=(n||C)+"",l?v.resolveWith(g,[p,C,E]):v.rejectWith(g,[E,C,d]),E.statusCode(x),x=void 0,f&&y.trigger(l?"ajaxSuccess":"ajaxError",[E,h,l?p:d]),m.fireWith(g,[E,C]),f&&(y.trigger("ajaxComplete",[E,h]),--w.active||w.event.trigger("ajaxStop")))}return E},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,n,r,i){return g(n)&&(i=i||r,r=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:i,data:n,success:r},w.isPlainObject(e)&&e))}}),w._evalUrl=function(e){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return g(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=g(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Vt={0:200,1223:204},Gt=w.ajaxSettings.xhr();h.cors=!!Gt&&"withCredentials"in Gt,h.ajax=Gt=!!Gt,w.ajaxTransport(function(t){var n,r;if(h.cors||Gt&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Vt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,o){t=w("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),r.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Yt=[],Qt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Yt.pop()||w.expando+"_"+Et++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=!1!==t.jsonp&&(Qt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=g(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Qt,"$1"+i):!1!==t.jsonp&&(t.url+=(kt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||w.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){void 0===o?w(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Yt.push(i)),a&&g(o)&&o(a[0]),a=o=void 0}),"script"}),h.createHTMLDocument=function(){var e=r.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),w.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var i,o,a;return t||(h.createHTMLDocument?((i=(t=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,t.head.appendChild(i)):t=r),o=A.exec(e),a=!n&&[],o?[t.createElement(o[1])]:(o=xe([e],t,a),a&&a.length&&w(a).remove(),w.merge([],o.childNodes))},w.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=vt(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&w.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l,c=w.css(e,"position"),f=w(e),p={};"static"===c&&(e.style.position="relative"),s=f.offset(),o=w.css(e,"top"),u=w.css(e,"left"),(l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1)?(a=(r=f.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),g(t)&&(t=t.call(e,n,w.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+i),"using"in t?t.using.call(e,p):f.css(p)}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,n,r=this[0];if(r)return r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===w.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),i.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-w.css(r,"marginTop",!0),left:t.left-i.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===w.css(e,"position"))e=e.offsetParent;return e||be})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;w.fn[e]=function(r){return z(this,function(e,r,i){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=_e(h.pixelPosition,function(e,n){if(n)return n=Fe(e,t),We.test(n)?w(e).position()[t]+"px":n})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){w.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return z(this,function(t,n,i){var o;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?w.css(t,n,s):w.style(t,n,i,s)},t,a?i:void 0,a)}})}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),w.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),g(e))return r=o.call(arguments,2),i=function(){return e.apply(t||this,r.concat(o.call(arguments)))},i.guid=e.guid=e.guid||w.guid++,i},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=N,w.isFunction=g,w.isWindow=y,w.camelCase=G,w.type=x,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var Jt=e.jQuery,Kt=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=Kt),t&&e.jQuery===w&&(e.jQuery=Jt),w},t||(e.jQuery=e.$=w),w});

(function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)})(function(t){t.ui=t.ui||{},t.ui.version="1.12.1";var e=0,i=Array.prototype.slice;t.cleanData=function(e){return function(i){var s,n,o;for(o=0;null!=(n=i[o]);o++)try{s=t._data(n,"events"),s&&s.remove&&t(n).triggerHandler("remove")}catch(a){}e(i)}}(t.cleanData),t.widget=function(e,i,s){var n,o,a,r={},l=e.split(".")[0];e=e.split(".")[1];var h=l+"-"+e;return s||(s=i,i=t.Widget),t.isArray(s)&&(s=t.extend.apply(null,[{}].concat(s))),t.expr[":"][h.toLowerCase()]=function(e){return!!t.data(e,h)},t[l]=t[l]||{},n=t[l][e],o=t[l][e]=function(t,e){return this._createWidget?(arguments.length&&this._createWidget(t,e),void 0):new o(t,e)},t.extend(o,n,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(s,function(e,s){return t.isFunction(s)?(r[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function n(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=n,e=s.apply(this,arguments),this._super=i,this._superApply=o,e}}(),void 0):(r[e]=s,void 0)}),o.prototype=t.widget.extend(a,{widgetEventPrefix:n?a.widgetEventPrefix||e:e},r,{constructor:o,namespace:l,widgetName:e,widgetFullName:h}),n?(t.each(n._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete n._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var s,n,o=i.call(arguments,1),a=0,r=o.length;r>a;a++)for(s in o[a])n=o[a][s],o[a].hasOwnProperty(s)&&void 0!==n&&(e[s]=t.isPlainObject(n)?t.isPlainObject(e[s])?t.widget.extend({},e[s],n):t.widget.extend({},n):n);return e},t.widget.bridge=function(e,s){var n=s.prototype.widgetFullName||e;t.fn[e]=function(o){var a="string"==typeof o,r=i.call(arguments,1),l=this;return a?this.length||"instance"!==o?this.each(function(){var i,s=t.data(this,n);return"instance"===o?(l=s,!1):s?t.isFunction(s[o])&&"_"!==o.charAt(0)?(i=s[o].apply(s,r),i!==s&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; "+"attempted to call method '"+o+"'")}):l=void 0:(r.length&&(o=t.widget.extend.apply(null,[o].concat(r))),this.each(function(){var e=t.data(this,n);e?(e.option(o||{}),e._init&&e._init()):t.data(this,n,new s(o,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(i,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=e++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,n,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},s=e.split("."),e=s.shift(),s.length){for(n=a[e]=t.widget.extend({},this.options[e]),o=0;s.length-1>o;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(e=s.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,s,n;for(i in e)n=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&n&&n.length&&(s=t(n.get()),this._removeClass(n,i),s.addClass(this._classes({element:s,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function i(i,o){var a,r;for(r=0;i.length>r;r++)a=n.classesElementLookup[i[r]]||t(),a=e.add?t(t.unique(a.get().concat(e.element.get()))):t(a.not(e.element).get()),n.classesElementLookup[i[r]]=a,s.push(i[r]),o&&e.classes[i[r]]&&s.push(e.classes[i[r]])}var s=[],n=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&i(e.keys.match(/\S+/g)||[],!0),e.extra&&i(e.extra.match(/\S+/g)||[]),s.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,function(s,n){-1!==t.inArray(e.target,n)&&(i.classesElementLookup[s]=t(n.not(e.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){s="boolean"==typeof s?s:i;var n="string"==typeof t||null===t,o={extra:n?e:i,keys:n?t:e,element:n?this.element:t,add:s};return o.element.toggleClass(this._classes(o),s),this},_on:function(e,i,s){var n,o=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,function(s,a){function r(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var l=s.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+o.eventNamespace,c=l[2];c?n.on(h,c,r):i.on(h,r)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}}),t.widget,t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])}}),t.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}}),t.fn.scrollParent=function(e){var i=this.css("position"),s="absolute"===i,n=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return s&&"static"===e.css("position")?!1:n.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&o.length?o:t(this[0].ownerDocument||document)},t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var s=!1;t(document).on("mouseup",function(){s=!1}),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!s){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,n=1===e.which,o="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return n&&!o&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),s=!0,!0)):!0}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,s=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,i,s){var n,o=t.ui[e].prototype;for(n in s)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([i,s[n]])},call:function(t,e,i,s){var n,o=t.plugins[e];if(o&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(n=0;o.length>n;n++)t.options[o[n][0]]&&o[n][1].apply(t.element,i)}},t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e},t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")},t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(this._blurActiveElement(e),this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]),s=t(e.target);s.closest(i).length||t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",e,s)===!1)return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper),n=s?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options,o=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===n.containment?(this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):n.containment.constructor===Array?(this.containment=n.containment,void 0):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=t(n.containment),s=i[0],s&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i),void 0):(this.containment=null,void 0)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,s,n,o,a=this.options,r=this._isRootNode(this.scrollParent[0]),l=t.pageX,h=t.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),a.grid&&(n=a.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,h=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-a.grid[1]:n+a.grid[1]:n,o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,s){var n=t.extend({},i,{item:s.element});s.sortables=[],t(s.options.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,n))})},stop:function(e,i,s){var n=t.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,t.each(s.sortables,function(){var t=this;t.isOver?(t.isOver=0,s.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,n))})},drag:function(e,i,s){t.each(s.sortables,function(){var n=!1,o=this;o.positionAbs=s.positionAbs,o.helperProportions=s.helperProportions,o.offset.click=s.offset.click,o._intersectsWith(o.containerCache)&&(n=!0,t.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&t.contains(o.element[0],this.element[0])&&(n=!1),n})),n?(o.isOver||(o.isOver=1,s._parent=i.helper.parent(),o.currentItem=i.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return i.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=s.offset.click.top,o.offset.click.left=s.offset.click.left,o.offset.parent.left-=s.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=s.offset.parent.top-o.offset.parent.top,s._trigger("toSortable",e),s.dropped=o.element,t.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,o.fromOutside=s),o.currentItem&&(o._mouseDrag(e),i.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(e),i.position=s._generatePosition(e,!0),s._trigger("fromSortable",e),s.dropped=!1,t.each(s.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,s){var n=t("body"),o=s.options;n.css("cursor")&&(o._cursor=n.css("cursor")),n.css("cursor",o.cursor)},stop:function(e,i,s){var n=s.options;n._cursor&&t("body").css("cursor",n._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(e,i,s){var n=s.options;n._opacity&&t(i.helper).css("opacity",n._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,s){var n=s.options,o=!1,a=s.scrollParentNotHidden[0],r=s.document[0];a!==r&&"HTML"!==a.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+a.offsetHeight-e.pageY<n.scrollSensitivity?a.scrollTop=o=a.scrollTop+n.scrollSpeed:e.pageY-s.overflowOffset.top<n.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+a.offsetWidth-e.pageX<n.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+n.scrollSpeed:e.pageX-s.overflowOffset.left<n.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(e.pageY-t(r).scrollTop()<n.scrollSensitivity?o=t(r).scrollTop(t(r).scrollTop()-n.scrollSpeed):t(window).height()-(e.pageY-t(r).scrollTop())<n.scrollSensitivity&&(o=t(r).scrollTop(t(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(e.pageX-t(r).scrollLeft()<n.scrollSensitivity?o=t(r).scrollLeft(t(r).scrollLeft()-n.scrollSpeed):t(window).width()-(e.pageX-t(r).scrollLeft())<n.scrollSensitivity&&(o=t(r).scrollLeft(t(r).scrollLeft()+n.scrollSpeed)))),o!==!1&&t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(s,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,s){var n=s.options;s.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var e=t(this),i=e.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,s){var n,o,a,r,l,h,c,u,d,p,f=s.options,g=f.snapTolerance,m=i.offset.left,_=m+s.helperProportions.width,v=i.offset.top,b=v+s.helperProportions.height;for(d=s.snapElements.length-1;d>=0;d--)l=s.snapElements[d].left-s.margins.left,h=l+s.snapElements[d].width,c=s.snapElements[d].top-s.margins.top,u=c+s.snapElements[d].height,l-g>_||m>h+g||c-g>b||v>u+g||!t.contains(s.snapElements[d].item.ownerDocument,s.snapElements[d].item)?(s.snapElements[d].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(n=g>=Math.abs(c-b),o=g>=Math.abs(u-v),a=g>=Math.abs(l-_),r=g>=Math.abs(h-m),n&&(i.position.top=s._convertPositionTo("relative",{top:c-s.helperProportions.height,left:0}).top),o&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left)),p=n||o||a||r,"outer"!==f.snapMode&&(n=g>=Math.abs(c-v),o=g>=Math.abs(u-b),a=g>=Math.abs(l-m),r=g>=Math.abs(h-_),n&&(i.position.top=s._convertPositionTo("relative",{top:c,left:0}).top),o&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left)),!s.snapElements[d].snapping&&(n||o||a||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=n||o||a||r||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,s){var n,o=s.options,a=t.makeArray(t(o.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});a.length&&(n=parseInt(t(a[0]).css("zIndex"),10)||0,t(a).each(function(e){t(this).css("zIndex",n+e)}),this.css("zIndex",n+a.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(e,i,s){var n=s.options;n._zIndex&&t(i.helper).css("zIndex",n._zIndex)}}),t.ui.draggable,t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return e[s]>0?!0:(e[s]=1,n=e[s]>0,e[s]=0,n)},_create:function(){var e,i=this.options,s=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),i.autoHide&&t(this.element).on("mouseenter",function(){i.disabled||(s._removeClass("ui-resizable-autohide"),s._handles.show())
}).on("mouseleave",function(){i.disabled||s.resizing||(s._addClass("ui-resizable-autohide"),s._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles();break;default:}},_setupHandles:function(){var e,i,s,n,o,a=this.options,r=this;if(this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),s=this.handles.split(","),this.handles={},i=0;s.length>i;i++)e=t.trim(s[i]),n="ui-resizable-"+e,o=t("<div>"),this._addClass(o,"ui-resizable-handle "+n),o.css({zIndex:a.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(o);this._renderAxis=function(e){var i,s,n,o;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:r._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(n,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){r.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var i,s,n=!1;for(i in this.handles)s=t(this.handles[i])[0],(s===e.target||t.contains(s,e.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(e){var i,s,n,o=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),o.containment&&(i+=t(o.containment).scrollLeft()||0,s+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===n?this.axis+"-resize":n),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,s,n=this.originalMousePosition,o=this.axis,a=e.pageX-n.left||0,r=e.pageY-n.top||0,l=this._change[o];return this._updatePrevProperties(),l?(i=l.apply(this,[e,a,r]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(e){this.resizing=!1;var i,s,n,o,a,r,l,h=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:c.sizeDiff.height,o=s?0:c.sizeDiff.width,a={width:c.helper.width()-o,height:c.helper.height()-n},r=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null,l=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null,h.animate||this.element.css(t.extend(a,{top:l,left:r})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!h.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,s,n,o,a=this.options;o={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,s=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,n=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),s>o.minHeight&&(o.minHeight=s),o.maxWidth>i&&(o.maxWidth=i),o.maxHeight>n&&(o.maxHeight=n)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,n=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,a=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,r=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,h=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),a&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),n&&(t.height=e.maxHeight),o&&h&&(t.left=r-e.minWidth),s&&h&&(t.left=r-e.maxWidth),a&&c&&(t.top=l-e.minHeight),n&&c&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],s=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],n=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];4>e;e++)i[e]=parseFloat(s[e])||0,i[e]+=parseFloat(n[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;this._proportionallyResizeElements.length>e;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),a=o&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-a},h=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,c=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,c&&h?{top:c,left:h}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};n&&n.length&&t(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,s,n,o,a,r,l=t(this).resizable("instance"),h=l.options,c=l.element,u=h.containment,d=u instanceof t?u.get(0):/parent/.test(u)?c.parent().get(0):u;d&&(l.containerElement=t(d),/document/.test(u)||u===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(d),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,s){i[t]=l._num(e.css("padding"+s))}),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},s=l.containerOffset,n=l.containerSize.height,o=l.containerSize.width,a=l._hasScroll(d,"left")?d.scrollWidth:o,r=l._hasScroll(d)?d.scrollHeight:n,l.parentData={element:d,left:s.left,top:s.top,width:a,height:r}))},resize:function(e){var i,s,n,o,a=t(this).resizable("instance"),r=a.options,l=a.containerOffset,h=a.position,c=a._aspectRatio||e.shiftKey,u={top:0,left:0},d=a.containerElement,p=!0;d[0]!==document&&/static/.test(d.css("position"))&&(u=l),h.left<(a._helper?l.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-l.left:a.position.left-u.left),c&&(a.size.height=a.size.width/a.aspectRatio,p=!1),a.position.left=r.helper?l.left:0),h.top<(a._helper?l.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-l.top:a.position.top),c&&(a.size.width=a.size.height*a.aspectRatio,p=!1),a.position.top=a._helper?l.top:0),n=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),n&&o?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),i=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-u.left:a.offset.left-l.left)),s=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-u.top:a.offset.top-l.top)),i+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-i,c&&(a.size.height=a.size.width/a.aspectRatio,p=!1)),s+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-s,c&&(a.size.width=a.size.height*a.aspectRatio,p=!1)),p||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,s=e.containerOffset,n=e.containerPosition,o=e.containerElement,a=t(e.helper),r=a.offset(),l=a.outerWidth()-e.sizeDiff.width,h=a.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:l,height:h}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:l,height:h})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),i=e.options;t(i.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,i){var s=t(this).resizable("instance"),n=s.options,o=s.originalSize,a=s.originalPosition,r={height:s.size.height-o.height||0,width:s.size.width-o.width||0,top:s.position.top-a.top||0,left:s.position.left-a.left||0};t(n.alsoResize).each(function(){var e=t(this),s=t(this).data("ui-resizable-alsoresize"),n={},o=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(s[e]||0)+(r[e]||0);i&&i>=0&&(n[e]=i||null)}),e.css(n)})},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),t.uiBackCompat!==!1&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),s=i.options,n=i.size,o=i.originalSize,a=i.originalPosition,r=i.axis,l="number"==typeof s.grid?[s.grid,s.grid]:s.grid,h=l[0]||1,c=l[1]||1,u=Math.round((n.width-o.width)/h)*h,d=Math.round((n.height-o.height)/c)*c,p=o.width+u,f=o.height+d,g=s.maxWidth&&p>s.maxWidth,m=s.maxHeight&&f>s.maxHeight,_=s.minWidth&&s.minWidth>p,v=s.minHeight&&s.minHeight>f;s.grid=l,_&&(p+=h),v&&(f+=c),g&&(p-=h),m&&(f-=c),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=a.top-d):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=a.left-u):((0>=f-c||0>=p-h)&&(e=i._getPaddingPlusBorderDimensions(this)),f-c>0?(i.size.height=f,i.position.top=a.top-d):(f=c-e.height,i.size.height=f,i.position.top=a.top+o.height-f),p-h>0?(i.size.width=p,i.position.left=a.left-u):(p=h-e.width,i.size.width=p,i.position.left=a.left+o.width-p))}}),t.ui.resizable});

!function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;b._touchStart=function(a){var b=this;!e&&b._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,b._touchMoved=!1,f(a,"mouseover"),f(a,"mousemove"),f(a,"mousedown"))},b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,"mousemove"))},b._touchEnd=function(a){e&&(f(a,"mouseup"),f(a,"mouseout"),this._touchMoved||f(a,"click"),e=!1)},b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),c.call(b)},b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),d.call(b)}}}(jQuery);

!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})});

!function(a,b){a(function(){"use strict";function a(a,b){return null!=a&&null!=b&&a.toLowerCase()===b.toLowerCase()}function c(a,b){var c,d,e=a.length;if(!e||!b)return!1;for(c=b.toLowerCase(),d=0;e>d;++d)if(c===a[d].toLowerCase())return!0;return!1}function d(a){for(var b in a)h.call(a,b)&&(a[b]=new RegExp(a[b],"i"))}function e(a,b){this.ua=a||"",this._cache={},this.maxPhoneWidth=b||600}var f={};f.mobileDetectRules={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6",Dell:"Dell.*Streak|Dell.*Aero|Dell.*Venue|DELL.*Venue Pro|Dell Flash|Dell Smoke|Dell Mini 3iX|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b",Samsung:"Samsung|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323)",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533",Asus:"Asus.*Galaxy|PadFone.*Mobile",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo 3DS",Amoi:"Amoi",INQ:"INQ",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI)\\b",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K017 |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP612|SOT31",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris E10)|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z99|z930|z999|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android.*\\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bJolla\\b|\\bTP750\\b"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Window Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+|Coast/[0-9.]+",Skyfire:"Skyfire",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version.*Mobile.*Safari|Safari.*Mobile|MobileSafari",Tizen:"Tizen",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Puffin:"Puffin",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:"Firefox/[VER]",Fennec:"Fennec/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]","UC Browser":"UC Browser[VER]",MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},f.detectMobileBrowsers={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i};var g,h=Object.prototype.hasOwnProperty;return f.FALLBACK_PHONE="UnknownPhone",f.FALLBACK_TABLET="UnknownTablet",f.FALLBACK_MOBILE="UnknownMobile",g="isArray"in Array?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},function(){var a,b,c,e,i,j,k=f.mobileDetectRules;for(a in k.props)if(h.call(k.props,a)){for(b=k.props[a],g(b)||(b=[b]),i=b.length,e=0;i>e;++e)c=b[e],j=c.indexOf("[VER]"),j>=0&&(c=c.substring(0,j)+"([\\w._\\+]+)"+c.substring(j+5)),b[e]=new RegExp(c,"i");k.props[a]=b}d(k.oss),d(k.phones),d(k.tablets),d(k.uas),d(k.utils),k.oss0={WindowsPhoneOS:k.oss.WindowsPhoneOS,WindowsMobileOS:k.oss.WindowsMobileOS}}(),
f.findMatch=function(a,b){for(var c in a)if(h.call(a,c)&&a[c].test(b))return c;return null},f.findMatches=function(a,b){var c=[];for(var d in a)h.call(a,d)&&a[d].test(b)&&c.push(d);return c},f.getVersionStr=function(a,b){var c,d,e,g,i=f.mobileDetectRules.props;if(h.call(i,a))for(c=i[a],e=c.length,d=0;e>d;++d)if(g=c[d].exec(b),null!==g)return g[1];return null},f.getVersion=function(a,b){var c=f.getVersionStr(a,b);return c?f.prepareVersionNo(c):NaN},f.prepareVersionNo=function(a){var b;return b=a.split(/[a-z._ \/\-]/i),1===b.length&&(a=b[0]),b.length>1&&(a=b[0]+".",b.shift(),a+=b.join("")),Number(a)},f.isMobileFallback=function(a){return f.detectMobileBrowsers.fullPattern.test(a)||f.detectMobileBrowsers.shortPattern.test(a.substr(0,4))},f.isTabletFallback=function(a){return f.detectMobileBrowsers.tabletPattern.test(a)},f.prepareDetectionCache=function(a,c,d){if(a.mobile===b){var g,h,i;return(h=f.findMatch(f.mobileDetectRules.tablets,c))?(a.mobile=a.tablet=h,void(a.phone=null)):(g=f.findMatch(f.mobileDetectRules.phones,c))?(a.mobile=a.phone=g,void(a.tablet=null)):void(f.isMobileFallback(c)?(i=e.isPhoneSized(d),i===b?(a.mobile=f.FALLBACK_MOBILE,a.tablet=a.phone=null):i?(a.mobile=a.phone=f.FALLBACK_PHONE,a.tablet=null):(a.mobile=a.tablet=f.FALLBACK_TABLET,a.phone=null)):f.isTabletFallback(c)?(a.mobile=a.tablet=f.FALLBACK_TABLET,a.phone=null):a.mobile=a.tablet=a.phone=null)}},f.mobileGrade=function(a){var b=null!==a.mobile();return a.os("iOS")&&a.version("iPad")>=4.3||a.os("iOS")&&a.version("iPhone")>=3.1||a.os("iOS")&&a.version("iPod")>=3.1||a.version("Android")>2.1&&a.is("Webkit")||a.version("Windows Phone OS")>=7||a.is("BlackBerry")&&a.version("BlackBerry")>=6||a.match("Playbook.*Tablet")||a.version("webOS")>=1.4&&a.match("Palm|Pre|Pixi")||a.match("hp.*TouchPad")||a.is("Firefox")&&a.version("Firefox")>=12||a.is("Chrome")&&a.is("AndroidOS")&&a.version("Android")>=4||a.is("Skyfire")&&a.version("Skyfire")>=4.1&&a.is("AndroidOS")&&a.version("Android")>=2.3||a.is("Opera")&&a.version("Opera Mobi")>11&&a.is("AndroidOS")||a.is("MeeGoOS")||a.is("Tizen")||a.is("Dolfin")&&a.version("Bada")>=2||(a.is("UC Browser")||a.is("Dolfin"))&&a.version("Android")>=2.3||a.match("Kindle Fire")||a.is("Kindle")&&a.version("Kindle")>=3||a.is("AndroidOS")&&a.is("NookTablet")||a.version("Chrome")>=11&&!b||a.version("Safari")>=5&&!b||a.version("Firefox")>=4&&!b||a.version("MSIE")>=7&&!b||a.version("Opera")>=10&&!b?"A":a.os("iOS")&&a.version("iPad")<4.3||a.os("iOS")&&a.version("iPhone")<3.1||a.os("iOS")&&a.version("iPod")<3.1||a.is("Blackberry")&&a.version("BlackBerry")>=5&&a.version("BlackBerry")<6||a.version("Opera Mini")>=5&&a.version("Opera Mini")<=6.5&&(a.version("Android")>=2.3||a.is("iOS"))||a.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||a.version("Opera Mobi")>=11&&a.is("SymbianOS")?"B":(a.version("BlackBerry")<5||a.match("MSIEMobile|Windows CE.*Mobile")||a.version("Windows Mobile")<=5.2,"C")},f.detectOS=function(a){return f.findMatch(f.mobileDetectRules.oss0,a)||f.findMatch(f.mobileDetectRules.oss,a)},f.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height},e.prototype={constructor:e,mobile:function(){return f.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return f.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return f.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===b&&(this._cache.userAgent=f.findMatch(f.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===b&&(this._cache.userAgents=f.findMatches(f.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===b&&(this._cache.os=f.detectOS(this.ua)),this._cache.os},version:function(a){return f.getVersion(a,this.ua)},versionStr:function(a){return f.getVersionStr(a,this.ua)},is:function(b){return c(this.userAgents(),b)||a(b,this.os())||a(b,this.phone())||a(b,this.tablet())||c(f.findMatches(f.mobileDetectRules.utils,this.ua),b)},match:function(a){return a instanceof RegExp||(a=new RegExp(a,"i")),a.test(this.ua)},isPhoneSized:function(a){return e.isPhoneSized(a||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===b&&(this._cache.grade=f.mobileGrade(this)),this._cache.grade}},"undefined"!=typeof window&&window.screen?e.isPhoneSized=function(a){return 0>a?b:f.getDeviceSmallerSide()<=a}:e.isPhoneSized=function(){},e._impl=f,e})}(function(a){if("undefined"!=typeof module&&module.exports)return function(a){module.exports=a()};if("function"==typeof define&&define.amd)return define;if("undefined"!=typeof window)return function(a){window.MobileDetect=a()};throw new Error("unknown environment")}());

var Detector={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.color="#000",e.style.padding="1.5em",e.style.width="400px",e.style.margin="auto",this.webgl||(e.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),e},addGetWebGLMessage:function(e){var t,o,r;e=e||{},t=void 0!==e.parent?e.parent:document.body,o=void 0!==e.id?e.id:"oldie",r=Detector.getWebGLErrorMessage(),r.id=o,t.appendChild(r)}};"object"==typeof module&&(module.exports=Detector);

(function(k,ha){"object"===typeof exports&&"undefined"!==typeof module?ha(exports):"function"===typeof define&&define.amd?define(["exports"],ha):ha(k.THREE={})})(this,function(k){function ha(){}function y(a,b){this.x=a||0;this.y=b||0}function F(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function X(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1}function p(a,
b,c){this.x=a||0;this.y=b||0;this.z=c||0}function ta(){this.elements=[1,0,0,0,1,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function ca(a,b,c,d,e,f,g,h,l,m){Object.defineProperty(this,"id",{value:Df++});this.uuid=P.generateUUID();this.name="";this.image=void 0!==a?a:ca.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:ca.DEFAULT_MAPPING;this.wrapS=void 0!==c?c:1001;this.wrapT=void 0!==d?d:1001;this.magFilter=void 0!==
e?e:1006;this.minFilter=void 0!==f?f:1008;this.anisotropy=void 0!==l?l:1;this.format=void 0!==g?g:1023;this.type=void 0!==h?h:1009;this.offset=new y(0,0);this.repeat=new y(1,1);this.center=new y(0,0);this.rotation=0;this.matrixAutoUpdate=!0;this.matrix=new ta;this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void 0!==m?m:3E3;this.version=0;this.onUpdate=null}function U(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1}function kb(a,
b,c){this.width=a;this.height=b;this.scissor=new U(0,0,a,b);this.scissorTest=!1;this.viewport=new U(0,0,a,b);c=c||{};void 0===c.minFilter&&(c.minFilter=1006);this.texture=new ca(void 0,void 0,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding);this.texture.generateMipmaps=void 0!==c.generateMipmaps?c.generateMipmaps:!0;this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.depthTexture=void 0!==c.depthTexture?
c.depthTexture:null}function Lb(a,b,c){kb.call(this,a,b,c);this.activeMipMapLevel=this.activeCubeFace=0}function lb(a,b,c,d,e,f,g,h,l,m,v,n){ca.call(this,null,f,g,h,l,m,d,e,v,n);this.image={data:a,width:b,height:c};this.magFilter=void 0!==l?l:1003;this.minFilter=void 0!==m?m:1003;this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1}function Wa(a,b){this.min=void 0!==a?a:new p(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new p(-Infinity,-Infinity,-Infinity)}function Ga(a,b){this.center=void 0!==
a?a:new p;this.radius=void 0!==b?b:0}function Ha(a,b){this.normal=void 0!==a?a:new p(1,0,0);this.constant=void 0!==b?b:0}function qd(a,b,c,d,e,f){this.planes=[void 0!==a?a:new Ha,void 0!==b?b:new Ha,void 0!==c?c:new Ha,void 0!==d?d:new Ha,void 0!==e?e:new Ha,void 0!==f?f:new Ha]}function K(a,b,c){return void 0===b&&void 0===c?this.set(a):this.setRGB(a,b,c)}function Td(){function a(e,f){!1!==c&&(d(e,f),b.requestAnimationFrame(a))}var b=null,c=!1,d=null;return{start:function(){!0!==c&&null!==d&&(b.requestAnimationFrame(a),
c=!0)},stop:function(){c=!1},setAnimationLoop:function(a){d=a},setContext:function(a){b=a}}}function Ef(a){function b(b,c){var d=b.array,e=b.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW,h=a.createBuffer();a.bindBuffer(c,h);a.bufferData(c,d,e);b.onUploadCallback();c=a.FLOAT;d instanceof Float32Array?c=a.FLOAT:d instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):d instanceof Uint16Array?c=a.UNSIGNED_SHORT:d instanceof Int16Array?c=a.SHORT:d instanceof
Uint32Array?c=a.UNSIGNED_INT:d instanceof Int32Array?c=a.INT:d instanceof Int8Array?c=a.BYTE:d instanceof Uint8Array&&(c=a.UNSIGNED_BYTE);return{buffer:h,type:c,bytesPerElement:d.BYTES_PER_ELEMENT,version:b.version}}var c=new WeakMap;return{get:function(a){a.isInterleavedBufferAttribute&&(a=a.data);return c.get(a)},remove:function(b){b.isInterleavedBufferAttribute&&(b=b.data);var d=c.get(b);d&&(a.deleteBuffer(d.buffer),c.delete(b))},update:function(d,e){d.isInterleavedBufferAttribute&&(d=d.data);
var f=c.get(d);if(void 0===f)c.set(d,b(d,e));else if(f.version<d.version){var g=d,h=g.array,l=g.updateRange;a.bindBuffer(e,f.buffer);!1===g.dynamic?a.bufferData(e,h,a.STATIC_DRAW):-1===l.count?a.bufferSubData(e,0,h):0===l.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(a.bufferSubData(e,l.offset*h.BYTES_PER_ELEMENT,h.subarray(l.offset,l.offset+l.count)),l.count=
-1);f.version=d.version}}}}function mb(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||mb.DefaultOrder}function Ud(){this.mask=1}function B(){Object.defineProperty(this,"id",{value:Ff++});this.uuid=P.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=B.DefaultUp.clone();var a=new p,b=new mb,c=new X,d=new p(1,1,1);b.onChange(function(){c.setFromEuler(b,!1)});c.onChange(function(){b.setFromQuaternion(c,void 0,!1)});Object.defineProperties(this,
{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:b},quaternion:{enumerable:!0,value:c},scale:{enumerable:!0,value:d},modelViewMatrix:{value:new F},normalMatrix:{value:new ta}});this.matrix=new F;this.matrixWorld=new F;this.matrixAutoUpdate=B.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new Ud;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={}}function Qa(){B.call(this);this.type="Camera";this.matrixWorldInverse=
new F;this.projectionMatrix=new F}function Mb(a,b,c,d,e,f){Qa.call(this);this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()}function Xa(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.normal=d&&d.isVector3?d:new p;this.vertexNormals=Array.isArray(d)?d:[];this.color=e&&e.isColor?e:new K;this.vertexColors=Array.isArray(e)?e:[];this.materialIndex=void 0!==f?f:0}function J(){Object.defineProperty(this,
"id",{value:Gf+=2});this.uuid=P.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function O(a,b,c){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");
this.name="";this.array=a;this.itemSize=b;this.count=void 0!==a?a.length/b:0;this.normalized=!0===c;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0}function vc(a,b,c){O.call(this,new Int8Array(a),b,c)}function wc(a,b,c){O.call(this,new Uint8Array(a),b,c)}function xc(a,b,c){O.call(this,new Uint8ClampedArray(a),b,c)}function yc(a,b,c){O.call(this,new Int16Array(a),b,c)}function nb(a,b,c){O.call(this,new Uint16Array(a),b,c)}function zc(a,b,c){O.call(this,new Int32Array(a),b,c)}function ob(a,
b,c){O.call(this,new Uint32Array(a),b,c)}function A(a,b,c){O.call(this,new Float32Array(a),b,c)}function Ac(a,b,c){O.call(this,new Float64Array(a),b,c)}function Ee(){this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function Fe(a){if(0===a.length)return-Infinity;
for(var b=a[0],c=1,d=a.length;c<d;++c)a[c]>b&&(b=a[c]);return b}function G(){Object.defineProperty(this,"id",{value:Hf+=2});this.uuid=P.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity};this.userData={}}function Nb(a,b,c,d,e,f){J.call(this);this.type="BoxGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,
depthSegments:f};this.fromBufferGeometry(new pb(a,b,c,d,e,f));this.mergeVertices()}function pb(a,b,c,d,e,f){function g(a,b,c,d,e,f,g,k,Q,E,Bc){var t=f/Q,u=g/E,V=f/2,z=g/2,w=k/2;g=Q+1;var x=E+1,H=f=0,C,y,A=new p;for(y=0;y<x;y++){var B=y*u-z;for(C=0;C<g;C++)A[a]=(C*t-V)*d,A[b]=B*e,A[c]=w,m.push(A.x,A.y,A.z),A[a]=0,A[b]=0,A[c]=0<k?1:-1,v.push(A.x,A.y,A.z),n.push(C/Q),n.push(1-y/E),f+=1}for(y=0;y<E;y++)for(C=0;C<Q;C++)a=r+C+g*(y+1),b=r+(C+1)+g*(y+1),c=r+(C+1)+g*y,l.push(r+C+g*y,a,c),l.push(a,b,c),H+=
6;h.addGroup(q,H,Bc);q+=H;r+=f}G.call(this);this.type="BoxBufferGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};var h=this;a=a||1;b=b||1;c=c||1;d=Math.floor(d)||1;e=Math.floor(e)||1;f=Math.floor(f)||1;var l=[],m=[],v=[],n=[],r=0,q=0;g("z","y","x",-1,-1,c,b,a,f,e,0);g("z","y","x",1,-1,c,b,-a,f,e,1);g("x","z","y",1,1,a,c,b,d,f,2);g("x","z","y",1,-1,a,c,-b,d,f,3);g("x","y","z",1,-1,a,b,c,d,e,4);g("x","y","z",-1,-1,a,b,-c,d,e,5);this.setIndex(l);this.addAttribute("position",
new A(m,3));this.addAttribute("normal",new A(v,3));this.addAttribute("uv",new A(n,2))}function Cc(a,b,c,d){J.call(this);this.type="PlaneGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};this.fromBufferGeometry(new rb(a,b,c,d));this.mergeVertices()}function rb(a,b,c,d){G.call(this);this.type="PlaneBufferGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};a=a||1;b=b||1;var e=a/2,f=b/2;c=Math.floor(c)||1;d=Math.floor(d)||1;var g=c+1,h=d+1,l=a/c,m=
b/d,v=[],n=[],r=[],q=[];for(a=0;a<h;a++){var t=a*m-f;for(b=0;b<g;b++)n.push(b*l-e,-t,0),r.push(0,0,1),q.push(b/c),q.push(1-a/d)}for(a=0;a<d;a++)for(b=0;b<c;b++)e=b+g*(a+1),f=b+1+g*(a+1),h=b+1+g*a,v.push(b+g*a,e,h),v.push(e,f,h);this.setIndex(v);this.addAttribute("position",new A(n,3));this.addAttribute("normal",new A(r,3));this.addAttribute("uv",new A(q,2))}function L(){Object.defineProperty(this,"id",{value:If++});this.uuid=P.generateUUID();this.name="";this.type="Material";this.lights=this.fog=
!0;this.blending=1;this.side=0;this.flatShading=!1;this.vertexColors=0;this.opacity=1;this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=3;this.depthWrite=this.depthTest=!0;this.clippingPlanes=null;this.clipShadows=this.clipIntersection=!1;this.shadowSide=null;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.dithering=!1;
this.alphaTest=0;this.premultipliedAlpha=!1;this.overdraw=0;this.visible=!0;this.userData={};this.needsUpdate=!0}function ka(a){L.call(this);this.type="MeshBasicMaterial";this.color=new K(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.lights=
this.morphTargets=this.skinning=!1;this.setValues(a)}function Ea(a){L.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions=
{derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;this.uniformsNeedUpdate=!1;void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))}function sb(a,b){this.origin=void 0!==a?a:new p;this.direction=void 0!==b?b:new p}function Ob(a,b){this.start=void 0!==a?a:new p;this.end=void 0!==b?b:new p}
function Aa(a,b,c){this.a=void 0!==a?a:new p;this.b=void 0!==b?b:new p;this.c=void 0!==c?c:new p}function pa(a,b){B.call(this);this.type="Mesh";this.geometry=void 0!==a?a:new G;this.material=void 0!==b?b:new ka({color:16777215*Math.random()});this.drawMode=0;this.updateMorphTargets()}function Jf(a,b,c,d){function e(a,c){b.buffers.color.setClear(a.r,a.g,a.b,c,d)}var f=new K(0),g=0,h,l,m;return{getClearColor:function(){return f},setClearColor:function(a,b){f.set(a);g=void 0!==b?b:1;e(f,g)},getClearAlpha:function(){return g},
setClearAlpha:function(a){g=a;e(f,g)},render:function(b,d,r,q){d=d.background;null===d?e(f,g):d&&d.isColor&&(e(d,1),q=!0);(a.autoClear||q)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil);d&&d.isCubeTexture?(void 0===m&&(m=new pa(new pb(1,1,1),new Ea({uniforms:tb.cube.uniforms,vertexShader:tb.cube.vertexShader,fragmentShader:tb.cube.fragmentShader,side:1,depthTest:!0,depthWrite:!1,fog:!1})),m.geometry.removeAttribute("normal"),m.geometry.removeAttribute("uv"),m.onBeforeRender=function(a,
b,c){this.matrixWorld.copyPosition(c.matrixWorld)},c.update(m)),m.material.uniforms.tCube.value=d,b.push(m,m.geometry,m.material,0,null)):d&&d.isTexture&&(void 0===h&&(h=new Mb(-1,1,1,-1,0,1),l=new pa(new rb(2,2),new ka({depthTest:!1,depthWrite:!1,fog:!1})),c.update(l)),l.material.map=d,a.renderBufferDirect(h,null,l.geometry,l.material,l,null))}}}function Kf(a,b,c){var d;this.setMode=function(a){d=a};this.render=function(b,f){a.drawArrays(d,b,f);c.update(f,d)};this.renderInstances=function(a,f,g){var e=
b.get("ANGLE_instanced_arrays");null===e?console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(e.drawArraysInstancedANGLE(d,f,g,a.maxInstancedCount),c.update(g,d,a.maxInstancedCount))}}function Lf(a,b,c){function d(b){if("highp"===b){if(0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision)return"highp";b="mediump"}return"mediump"===
b&&0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision?"mediump":"lowp"}var e,f=void 0!==c.precision?c.precision:"highp",g=d(f);g!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",g,"instead."),f=g);c=!0===c.logarithmicDepthBuffer;g=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);var h=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),l=a.getParameter(a.MAX_TEXTURE_SIZE),m=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),
v=a.getParameter(a.MAX_VERTEX_ATTRIBS),n=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),r=a.getParameter(a.MAX_VARYING_VECTORS),q=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),t=0<h,k=!!b.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==e)return e;var c=b.get("EXT_texture_filter_anisotropic");return e=null!==c?a.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:d,precision:f,logarithmicDepthBuffer:c,maxTextures:g,maxVertexTextures:h,maxTextureSize:l,maxCubemapSize:m,
maxAttributes:v,maxVertexUniforms:n,maxVaryings:r,maxFragmentUniforms:q,vertexTextures:t,floatFragmentTextures:k,floatVertexTextures:t&&k}}function Mf(){function a(){m.value!==d&&(m.value=d,m.needsUpdate=0<e);c.numPlanes=e;c.numIntersection=0}function b(a,b,d,e){var f=null!==a?a.length:0,g=null;if(0!==f){g=m.value;if(!0!==e||null===g){e=d+4*f;b=b.matrixWorldInverse;l.getNormalMatrix(b);if(null===g||g.length<e)g=new Float32Array(e);for(e=0;e!==f;++e,d+=4)h.copy(a[e]).applyMatrix4(b,l),h.normal.toArray(g,
d),g[d+3]=h.constant}m.value=g;m.needsUpdate=!0}c.numPlanes=f;return g}var c=this,d=null,e=0,f=!1,g=!1,h=new Ha,l=new ta,m={value:null,needsUpdate:!1};this.uniform=m;this.numIntersection=this.numPlanes=0;this.init=function(a,c,g){var h=0!==a.length||c||0!==e||f;f=c;d=b(a,g,0);e=a.length;return h};this.beginShadows=function(){g=!0;b(null)};this.endShadows=function(){g=!1;a()};this.setState=function(c,h,l,q,t,k){if(!f||null===c||0===c.length||g&&!l)g?b(null):a();else{l=g?0:e;var n=4*l,v=t.clippingState||
null;m.value=v;v=b(c,q,n,k);for(c=0;c!==n;++c)v[c]=d[c];t.clippingState=v;this.numIntersection=h?this.numPlanes:0;this.numPlanes+=l}}}function Nf(a){var b={};return{get:function(c){if(void 0!==b[c])return b[c];switch(c){case "WEBGL_depth_texture":var d=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case "EXT_texture_filter_anisotropic":d=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||
a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":d=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":d=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:d=a.getExtension(c)}null===d&&console.warn("THREE.WebGLRenderer: "+c+" extension not supported.");
return b[c]=d}}}function Of(a,b,c){function d(a){a=a.target;var g=e[a.id];null!==g.index&&b.remove(g.index);for(var l in g.attributes)b.remove(g.attributes[l]);a.removeEventListener("dispose",d);delete e[a.id];if(l=f[a.id])b.remove(l),delete f[a.id];if(l=f[g.id])b.remove(l),delete f[g.id];c.memory.geometries--}var e={},f={};return{get:function(a,b){var f=e[b.id];if(f)return f;b.addEventListener("dispose",d);b.isBufferGeometry?f=b:b.isGeometry&&(void 0===b._bufferGeometry&&(b._bufferGeometry=(new G).setFromObject(a)),
f=b._bufferGeometry);e[b.id]=f;c.memory.geometries++;return f},update:function(c){var d=c.index,e=c.attributes;null!==d&&b.update(d,a.ELEMENT_ARRAY_BUFFER);for(var f in e)b.update(e[f],a.ARRAY_BUFFER);c=c.morphAttributes;for(f in c){d=c[f];e=0;for(var g=d.length;e<g;e++)b.update(d[e],a.ARRAY_BUFFER)}},getWireframeAttribute:function(c){var d=f[c.id];if(d)return d;d=[];var e=c.index,g=c.attributes;if(null!==e){e=e.array;g=0;for(var v=e.length;g<v;g+=3){var n=e[g+0],r=e[g+1],q=e[g+2];d.push(n,r,r,q,
q,n)}}else for(e=g.position.array,g=0,v=e.length/3-1;g<v;g+=3)n=g+0,r=g+1,q=g+2,d.push(n,r,r,q,q,n);d=new (65535<Fe(d)?ob:nb)(d,1);b.update(d,a.ELEMENT_ARRAY_BUFFER);return f[c.id]=d}}}function Pf(a,b,c){var d,e,f;this.setMode=function(a){d=a};this.setIndex=function(a){e=a.type;f=a.bytesPerElement};this.render=function(b,h){a.drawElements(d,h,e,b*f);c.update(h,d)};this.renderInstances=function(a,h,l){var g=b.get("ANGLE_instanced_arrays");null===g?console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):
(g.drawElementsInstancedANGLE(d,l,e,h*f,a.maxInstancedCount),c.update(l,d,a.maxInstancedCount))}}function Qf(a){var b={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:b,programs:null,autoReset:!0,reset:function(){b.frame++;b.calls=0;b.triangles=0;b.points=0;b.lines=0},update:function(c,d,e){e=e||1;b.calls++;switch(d){case a.TRIANGLES:b.triangles+=c/3*e;break;case a.TRIANGLE_STRIP:case a.TRIANGLE_FAN:b.triangles+=e*(c-2);break;case a.LINES:b.lines+=c/2*
e;break;case a.LINE_STRIP:b.lines+=e*(c-1);break;case a.LINE_LOOP:b.lines+=e*c;break;case a.POINTS:b.points+=e*c;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",d)}}}}function Rf(a,b){return Math.abs(b[1])-Math.abs(a[1])}function Sf(a){var b={},c=new Float32Array(8);return{update:function(d,e,f,g){var h=d.morphTargetInfluences,l=h.length;d=b[e.id];if(void 0===d){d=[];for(var m=0;m<l;m++)d[m]=[m,0];b[e.id]=d}var v=f.morphTargets&&e.morphAttributes.position;f=f.morphNormals&&e.morphAttributes.normal;
for(m=0;m<l;m++){var n=d[m];0!==n[1]&&(v&&e.removeAttribute("morphTarget"+m),f&&e.removeAttribute("morphNormal"+m))}for(m=0;m<l;m++)n=d[m],n[0]=m,n[1]=h[m];d.sort(Rf);for(m=0;8>m;m++){if(n=d[m])if(h=n[0],l=n[1]){v&&e.addAttribute("morphTarget"+m,v[h]);f&&e.addAttribute("morphNormal"+m,f[h]);c[m]=l;continue}c[m]=0}g.getUniforms().setValue(a,"morphTargetInfluences",c)}}}function Tf(a,b){var c={};return{update:function(d){var e=b.render.frame,f=d.geometry,g=a.get(d,f);c[g.id]!==e&&(f.isGeometry&&g.updateFromObject(d),
a.update(g),c[g.id]=e);return g},dispose:function(){c={}}}}function cb(a,b,c,d,e,f,g,h,l,m){a=void 0!==a?a:[];ca.call(this,a,void 0!==b?b:301,c,d,e,f,g,h,l,m);this.flipY=!1}function Pb(a,b,c){var d=a[0];if(0>=d||0<d)return a;var e=b*c,f=Ge[e];void 0===f&&(f=new Float32Array(e),Ge[e]=f);if(0!==b)for(d.toArray(f,0),d=1,e=0;d!==b;++d)e+=c,a[d].toArray(f,e);return f}function R(a,b){if(a.length!==b.length)return!1;for(var c=0,d=a.length;c<d;c++)if(a[c]!==b[c])return!1;return!0}function qa(a,b){for(var c=
0,d=b.length;c<d;c++)a[c]=b[c]}function He(a,b){var c=Ie[b];void 0===c&&(c=new Int32Array(b),Ie[b]=c);for(var d=0;d!==b;++d)c[d]=a.allocTextureUnit();return c}function Uf(a,b){var c=this.cache;c[0]!==b&&(a.uniform1f(this.addr,b),c[0]=b)}function Vf(a,b){var c=this.cache;c[0]!==b&&(a.uniform1i(this.addr,b),c[0]=b)}function Wf(a,b){var c=this.cache;if(void 0!==b.x){if(c[0]!==b.x||c[1]!==b.y)a.uniform2f(this.addr,b.x,b.y),c[0]=b.x,c[1]=b.y}else R(c,b)||(a.uniform2fv(this.addr,b),qa(c,b))}function Xf(a,
b){var c=this.cache;if(void 0!==b.x){if(c[0]!==b.x||c[1]!==b.y||c[2]!==b.z)a.uniform3f(this.addr,b.x,b.y,b.z),c[0]=b.x,c[1]=b.y,c[2]=b.z}else if(void 0!==b.r){if(c[0]!==b.r||c[1]!==b.g||c[2]!==b.b)a.uniform3f(this.addr,b.r,b.g,b.b),c[0]=b.r,c[1]=b.g,c[2]=b.b}else R(c,b)||(a.uniform3fv(this.addr,b),qa(c,b))}function Yf(a,b){var c=this.cache;if(void 0!==b.x){if(c[0]!==b.x||c[1]!==b.y||c[2]!==b.z||c[3]!==b.w)a.uniform4f(this.addr,b.x,b.y,b.z,b.w),c[0]=b.x,c[1]=b.y,c[2]=b.z,c[3]=b.w}else R(c,b)||(a.uniform4fv(this.addr,
b),qa(c,b))}function Zf(a,b){var c=this.cache,d=b.elements;void 0===d?R(c,b)||(a.uniformMatrix2fv(this.addr,!1,b),qa(c,b)):R(c,d)||(Je.set(d),a.uniformMatrix2fv(this.addr,!1,Je),qa(c,d))}function $f(a,b){var c=this.cache,d=b.elements;void 0===d?R(c,b)||(a.uniformMatrix3fv(this.addr,!1,b),qa(c,b)):R(c,d)||(Ke.set(d),a.uniformMatrix3fv(this.addr,!1,Ke),qa(c,d))}function ag(a,b){var c=this.cache,d=b.elements;void 0===d?R(c,b)||(a.uniformMatrix4fv(this.addr,!1,b),qa(c,b)):R(c,d)||(Le.set(d),a.uniformMatrix4fv(this.addr,
!1,Le),qa(c,d))}function bg(a,b,c){var d=this.cache,e=c.allocTextureUnit();d[0]!==e&&(a.uniform1i(this.addr,e),d[0]=e);c.setTexture2D(b||Me,e)}function cg(a,b,c){var d=this.cache,e=c.allocTextureUnit();d[0]!==e&&(a.uniform1i(this.addr,e),d[0]=e);c.setTextureCube(b||Ne,e)}function Oe(a,b){var c=this.cache;R(c,b)||(a.uniform2iv(this.addr,b),qa(c,b))}function Pe(a,b){var c=this.cache;R(c,b)||(a.uniform3iv(this.addr,b),qa(c,b))}function Qe(a,b){var c=this.cache;R(c,b)||(a.uniform4iv(this.addr,b),qa(c,
b))}function dg(a){switch(a){case 5126:return Uf;case 35664:return Wf;case 35665:return Xf;case 35666:return Yf;case 35674:return Zf;case 35675:return $f;case 35676:return ag;case 35678:case 36198:return bg;case 35680:return cg;case 5124:case 35670:return Vf;case 35667:case 35671:return Oe;case 35668:case 35672:return Pe;case 35669:case 35673:return Qe}}function eg(a,b){var c=this.cache;R(c,b)||(a.uniform1fv(this.addr,b),qa(c,b))}function fg(a,b){var c=this.cache;R(c,b)||(a.uniform1iv(this.addr,b),
qa(c,b))}function gg(a,b){var c=this.cache;b=Pb(b,this.size,2);R(c,b)||(a.uniform2fv(this.addr,b),this.updateCache(b))}function hg(a,b){var c=this.cache;b=Pb(b,this.size,3);R(c,b)||(a.uniform3fv(this.addr,b),this.updateCache(b))}function ig(a,b){var c=this.cache;b=Pb(b,this.size,4);R(c,b)||(a.uniform4fv(this.addr,b),this.updateCache(b))}function jg(a,b){var c=this.cache;b=Pb(b,this.size,4);R(c,b)||(a.uniformMatrix2fv(this.addr,!1,b),this.updateCache(b))}function kg(a,b){var c=this.cache;b=Pb(b,this.size,
9);R(c,b)||(a.uniformMatrix3fv(this.addr,!1,b),this.updateCache(b))}function lg(a,b){var c=this.cache;b=Pb(b,this.size,16);R(c,b)||(a.uniformMatrix4fv(this.addr,!1,b),this.updateCache(b))}function mg(a,b,c){var d=this.cache,e=b.length,f=He(c,e);!1===R(d,f)&&(a.uniform1iv(this.addr,f),qa(d,f));for(a=0;a!==e;++a)c.setTexture2D(b[a]||Me,f[a])}function ng(a,b,c){var d=this.cache,e=b.length,f=He(c,e);!1===R(d,f)&&(a.uniform1iv(this.addr,f),qa(d,f));for(a=0;a!==e;++a)c.setTextureCube(b[a]||Ne,f[a])}function og(a){switch(a){case 5126:return eg;
case 35664:return gg;case 35665:return hg;case 35666:return ig;case 35674:return jg;case 35675:return kg;case 35676:return lg;case 35678:return mg;case 35680:return ng;case 5124:case 35670:return fg;case 35667:case 35671:return Oe;case 35668:case 35672:return Pe;case 35669:case 35673:return Qe}}function pg(a,b,c){this.id=a;this.addr=c;this.cache=[];this.setValue=dg(b.type)}function Re(a,b,c){this.id=a;this.addr=c;this.cache=[];this.size=b.size;this.setValue=og(b.type)}function Se(a){this.id=a;this.seq=
[];this.map={}}function db(a,b,c){this.seq=[];this.map={};this.renderer=c;c=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(var d=0;d<c;++d){var e=a.getActiveUniform(b,d),f=a.getUniformLocation(b,e.name),g=this,h=e.name,l=h.length;for(Wd.lastIndex=0;;){var m=Wd.exec(h),v=Wd.lastIndex,n=m[1],r=m[3];"]"===m[2]&&(n|=0);if(void 0===r||"["===r&&v+2===l){h=g;e=void 0===r?new pg(n,e,f):new Re(n,e,f);h.seq.push(e);h.map[e.id]=e;break}else r=g.map[n],void 0===r&&(r=new Se(n),n=g,g=r,n.seq.push(g),n.map[g.id]=
g),g=r}}}function qg(a){a=a.split("\n");for(var b=0;b<a.length;b++)a[b]=b+1+": "+a[b];return a.join("\n")}function Te(a,b,c){var d=a.createShader(b);a.shaderSource(d,c);a.compileShader(d);!1===a.getShaderParameter(d,a.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");""!==a.getShaderInfoLog(d)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",b===a.VERTEX_SHADER?"vertex":"fragment",a.getShaderInfoLog(d),qg(c));return d}function Ue(a){switch(a){case 3E3:return["Linear",
"( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+a);}}function Xd(a,b){b=Ue(b);return"vec4 "+a+"( vec4 value ) { return "+b[0]+"ToLinear"+b[1]+"; }"}function rg(a,b){b=Ue(b);return"vec4 "+a+"( vec4 value ) { return LinearTo"+b[0]+
b[1]+"; }"}function sg(a,b){switch(b){case 1:b="Linear";break;case 2:b="Reinhard";break;case 3:b="Uncharted2";break;case 4:b="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+b);}return"vec3 "+a+"( vec3 color ) { return "+b+"ToneMapping( color ); }"}function tg(a,b,c){a=a||{};return[a.derivatives||b.envMapCubeUV||b.bumpMap||b.normalMap||b.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(a.fragDepth||b.logarithmicDepthBuffer)&&c.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":
"",a.drawBuffers&&c.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(a.shaderTextureLOD||b.envMap)&&c.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Dc).join("\n")}function ug(a){var b=[],c;for(c in a){var d=a[c];!1!==d&&b.push("#define "+c+" "+d)}return b.join("\n")}function Dc(a){return""!==a}function Ve(a,b){return a.replace(/NUM_DIR_LIGHTS/g,b.numDirLights).replace(/NUM_SPOT_LIGHTS/g,b.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,
b.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,b.numPointLights).replace(/NUM_HEMI_LIGHTS/g,b.numHemiLights)}function We(a,b){return a.replace(/NUM_CLIPPING_PLANES/g,b.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,b.numClippingPlanes-b.numClipIntersection)}function Yd(a){return a.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(a,c){a=W[c];if(void 0===a)throw Error("Can not resolve #include <"+c+">");return Yd(a)})}function Xe(a){return a.replace(/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,
function(a,c,d,e){a="";for(c=parseInt(c);c<parseInt(d);c++)a+=e.replace(/\[ i \]/g,"[ "+c+" ]");return a})}function vg(a,b,c,d,e,f){var g=a.context,h=d.defines,l=e.vertexShader,m=e.fragmentShader,v="SHADOWMAP_TYPE_BASIC";1===f.shadowMapType?v="SHADOWMAP_TYPE_PCF":2===f.shadowMapType&&(v="SHADOWMAP_TYPE_PCF_SOFT");var n="ENVMAP_TYPE_CUBE",r="ENVMAP_MODE_REFLECTION",q="ENVMAP_BLENDING_MULTIPLY";if(f.envMap){switch(d.envMap.mapping){case 301:case 302:n="ENVMAP_TYPE_CUBE";break;case 306:case 307:n="ENVMAP_TYPE_CUBE_UV";
break;case 303:case 304:n="ENVMAP_TYPE_EQUIREC";break;case 305:n="ENVMAP_TYPE_SPHERE"}switch(d.envMap.mapping){case 302:case 304:r="ENVMAP_MODE_REFRACTION"}switch(d.combine){case 0:q="ENVMAP_BLENDING_MULTIPLY";break;case 1:q="ENVMAP_BLENDING_MIX";break;case 2:q="ENVMAP_BLENDING_ADD"}}var t=0<a.gammaFactor?a.gammaFactor:1,k=tg(d.extensions,f,b),p=ug(h),x=g.createProgram();d.isRawShaderMaterial?(h=[p].filter(Dc).join("\n"),0<h.length&&(h+="\n"),b=[k,p].filter(Dc).join("\n"),0<b.length&&(b+="\n")):(h=
["precision "+f.precision+" float;","precision "+f.precision+" int;","#define SHADER_NAME "+e.name,p,f.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+t,"#define MAX_BONES "+f.maxBones,f.useFog&&f.fog?"#define USE_FOG":"",f.useFog&&f.fogExp?"#define FOG_EXP2":"",f.map?"#define USE_MAP":"",f.envMap?"#define USE_ENVMAP":"",f.envMap?"#define "+r:"",f.lightMap?"#define USE_LIGHTMAP":"",f.aoMap?"#define USE_AOMAP":"",f.emissiveMap?"#define USE_EMISSIVEMAP":"",f.bumpMap?"#define USE_BUMPMAP":
"",f.normalMap?"#define USE_NORMALMAP":"",f.displacementMap&&f.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",f.specularMap?"#define USE_SPECULARMAP":"",f.roughnessMap?"#define USE_ROUGHNESSMAP":"",f.metalnessMap?"#define USE_METALNESSMAP":"",f.alphaMap?"#define USE_ALPHAMAP":"",f.vertexColors?"#define USE_COLOR":"",f.flatShading?"#define FLAT_SHADED":"",f.skinning?"#define USE_SKINNING":"",f.useVertexTexture?"#define BONE_TEXTURE":"",f.morphTargets?"#define USE_MORPHTARGETS":"",f.morphNormals&&
!1===f.flatShading?"#define USE_MORPHNORMALS":"",f.doubleSided?"#define DOUBLE_SIDED":"",f.flipSided?"#define FLIP_SIDED":"",f.shadowMapEnabled?"#define USE_SHADOWMAP":"",f.shadowMapEnabled?"#define "+v:"",f.sizeAttenuation?"#define USE_SIZEATTENUATION":"",f.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",f.logarithmicDepthBuffer&&b.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;",
"uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;",
"\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Dc).join("\n"),b=[k,"precision "+f.precision+" float;","precision "+f.precision+" int;","#define SHADER_NAME "+e.name,p,f.alphaTest?"#define ALPHATEST "+f.alphaTest+(f.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+t,f.useFog&&
f.fog?"#define USE_FOG":"",f.useFog&&f.fogExp?"#define FOG_EXP2":"",f.map?"#define USE_MAP":"",f.envMap?"#define USE_ENVMAP":"",f.envMap?"#define "+n:"",f.envMap?"#define "+r:"",f.envMap?"#define "+q:"",f.lightMap?"#define USE_LIGHTMAP":"",f.aoMap?"#define USE_AOMAP":"",f.emissiveMap?"#define USE_EMISSIVEMAP":"",f.bumpMap?"#define USE_BUMPMAP":"",f.normalMap?"#define USE_NORMALMAP":"",f.specularMap?"#define USE_SPECULARMAP":"",f.roughnessMap?"#define USE_ROUGHNESSMAP":"",f.metalnessMap?"#define USE_METALNESSMAP":
"",f.alphaMap?"#define USE_ALPHAMAP":"",f.vertexColors?"#define USE_COLOR":"",f.gradientMap?"#define USE_GRADIENTMAP":"",f.flatShading?"#define FLAT_SHADED":"",f.doubleSided?"#define DOUBLE_SIDED":"",f.flipSided?"#define FLIP_SIDED":"",f.shadowMapEnabled?"#define USE_SHADOWMAP":"",f.shadowMapEnabled?"#define "+v:"",f.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",f.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",f.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",f.logarithmicDepthBuffer&&
b.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",f.envMap&&b.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==f.toneMapping?"#define TONE_MAPPING":"",0!==f.toneMapping?W.tonemapping_pars_fragment:"",0!==f.toneMapping?sg("toneMapping",f.toneMapping):"",f.dithering?"#define DITHERING":"",f.outputEncoding||f.mapEncoding||f.envMapEncoding||f.emissiveMapEncoding?W.encodings_pars_fragment:"",f.mapEncoding?Xd("mapTexelToLinear",
f.mapEncoding):"",f.envMapEncoding?Xd("envMapTexelToLinear",f.envMapEncoding):"",f.emissiveMapEncoding?Xd("emissiveMapTexelToLinear",f.emissiveMapEncoding):"",f.outputEncoding?rg("linearToOutputTexel",f.outputEncoding):"",f.depthPacking?"#define DEPTH_PACKING "+d.depthPacking:"","\n"].filter(Dc).join("\n"));l=Yd(l);l=Ve(l,f);l=We(l,f);m=Yd(m);m=Ve(m,f);m=We(m,f);l=Xe(l);m=Xe(m);m=b+m;l=Te(g,g.VERTEX_SHADER,h+l);m=Te(g,g.FRAGMENT_SHADER,m);g.attachShader(x,l);g.attachShader(x,m);void 0!==d.index0AttributeName?
g.bindAttribLocation(x,0,d.index0AttributeName):!0===f.morphTargets&&g.bindAttribLocation(x,0,"position");g.linkProgram(x);f=g.getProgramInfoLog(x).trim();v=g.getShaderInfoLog(l).trim();n=g.getShaderInfoLog(m).trim();q=r=!0;if(!1===g.getProgramParameter(x,g.LINK_STATUS))r=!1,console.error("THREE.WebGLProgram: shader error: ",g.getError(),"gl.VALIDATE_STATUS",g.getProgramParameter(x,g.VALIDATE_STATUS),"gl.getProgramInfoLog",f,v,n);else if(""!==f)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",
f);else if(""===v||""===n)q=!1;q&&(this.diagnostics={runnable:r,material:d,programLog:f,vertexShader:{log:v,prefix:h},fragmentShader:{log:n,prefix:b}});g.deleteShader(l);g.deleteShader(m);var w;this.getUniforms=function(){void 0===w&&(w=new db(g,x,a));return w};var H;this.getAttributes=function(){if(void 0===H){for(var a={},b=g.getProgramParameter(x,g.ACTIVE_ATTRIBUTES),c=0;c<b;c++){var d=g.getActiveAttrib(x,c).name;a[d]=g.getAttribLocation(x,d)}H=a}return H};this.destroy=function(){g.deleteProgram(x);
this.program=void 0};Object.defineProperties(this,{uniforms:{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");return this.getAttributes()}}});this.name=e.name;this.id=wg++;this.code=c;this.usedTimes=1;this.program=x;this.vertexShader=l;this.fragmentShader=m;return this}function xg(a,b,c){function d(a,b){if(a)a.isTexture?c=a.encoding:a.isWebGLRenderTarget&&
(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),c=a.texture.encoding);else var c=3E3;3E3===c&&b&&(c=3007);return c}var e=[],f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",
LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},g="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering".split(" ");
this.getParameters=function(b,e,g,v,n,r,q){var h=f[b.type];if(q.isSkinnedMesh){var l=q.skeleton.bones;if(c.floatVertexTextures)l=1024;else{var m=Math.min(Math.floor((c.maxVertexUniforms-20)/4),l.length);m<l.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+l.length+" bones. This GPU supports "+m+"."),l=0):l=m}}else l=0;m=c.precision;null!==b.precision&&(m=c.getMaxPrecision(b.precision),m!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",m,"instead."));
var k=a.getRenderTarget();return{shaderID:h,precision:m,supportsVertexTextures:c.vertexTextures,outputEncoding:d(k?k.texture:null,a.gammaOutput),map:!!b.map,mapEncoding:d(b.map,a.gammaInput),envMap:!!b.envMap,envMapMode:b.envMap&&b.envMap.mapping,envMapEncoding:d(b.envMap,a.gammaInput),envMapCubeUV:!!b.envMap&&(306===b.envMap.mapping||307===b.envMap.mapping),lightMap:!!b.lightMap,aoMap:!!b.aoMap,emissiveMap:!!b.emissiveMap,emissiveMapEncoding:d(b.emissiveMap,a.gammaInput),bumpMap:!!b.bumpMap,normalMap:!!b.normalMap,
displacementMap:!!b.displacementMap,roughnessMap:!!b.roughnessMap,metalnessMap:!!b.metalnessMap,specularMap:!!b.specularMap,alphaMap:!!b.alphaMap,gradientMap:!!b.gradientMap,combine:b.combine,vertexColors:b.vertexColors,fog:!!v,useFog:b.fog,fogExp:v&&v.isFogExp2,flatShading:b.flatShading,sizeAttenuation:b.sizeAttenuation,logarithmicDepthBuffer:c.logarithmicDepthBuffer,skinning:b.skinning&&0<l,maxBones:l,useVertexTexture:c.floatVertexTextures,morphTargets:b.morphTargets,morphNormals:b.morphNormals,
maxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,numDirLights:e.directional.length,numPointLights:e.point.length,numSpotLights:e.spot.length,numRectAreaLights:e.rectArea.length,numHemiLights:e.hemi.length,numClippingPlanes:n,numClipIntersection:r,dithering:b.dithering,shadowMapEnabled:a.shadowMap.enabled&&q.receiveShadow&&0<g.length,shadowMapType:a.shadowMap.type,toneMapping:a.toneMapping,physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:b.premultipliedAlpha,
alphaTest:b.alphaTest,doubleSided:2===b.side,flipSided:1===b.side,depthPacking:void 0!==b.depthPacking?b.depthPacking:!1}};this.getProgramCode=function(b,c){var d=[];c.shaderID?d.push(c.shaderID):(d.push(b.fragmentShader),d.push(b.vertexShader));if(void 0!==b.defines)for(var e in b.defines)d.push(e),d.push(b.defines[e]);for(e=0;e<g.length;e++)d.push(c[g[e]]);d.push(b.onBeforeCompile.toString());d.push(a.gammaOutput);return d.join()};this.acquireProgram=function(c,d,f,g){for(var h,l=0,m=e.length;l<
m;l++){var v=e[l];if(v.code===g){h=v;++h.usedTimes;break}}void 0===h&&(h=new vg(a,b,g,c,d,f),e.push(h));return h};this.releaseProgram=function(a){if(0===--a.usedTimes){var b=e.indexOf(a);e[b]=e[e.length-1];e.pop();a.destroy()}};this.programs=e}function yg(){var a=new WeakMap;return{get:function(b){var c=a.get(b);void 0===c&&(c={},a.set(b,c));return c},remove:function(b){a.delete(b)},update:function(b,c,d){a.get(b)[c]=d},dispose:function(){a=new WeakMap}}}function zg(a,b){return a.renderOrder!==b.renderOrder?
a.renderOrder-b.renderOrder:a.program&&b.program&&a.program!==b.program?a.program.id-b.program.id:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function Ag(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function Bg(){var a=[],b=0,c=[],d=[];return{opaque:c,transparent:d,init:function(){b=0;c.length=0;d.length=0},push:function(e,f,g,h,l){var m=a[b];void 0===m?(m={id:e.id,object:e,geometry:f,material:g,program:g.program,
renderOrder:e.renderOrder,z:h,group:l},a[b]=m):(m.id=e.id,m.object=e,m.geometry=f,m.material=g,m.program=g.program,m.renderOrder=e.renderOrder,m.z=h,m.group=l);(!0===g.transparent?d:c).push(m);b++},sort:function(){1<c.length&&c.sort(zg);1<d.length&&d.sort(Ag)}}}function Cg(){var a={};return{get:function(b,c){b=b.id+","+c.id;c=a[b];void 0===c&&(c=new Bg,a[b]=c);return c},dispose:function(){a={}}}}function Dg(){var a={};return{get:function(b){if(void 0!==a[b.id])return a[b.id];switch(b.type){case "DirectionalLight":var c=
{direction:new p,color:new K,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new y};break;case "SpotLight":c={position:new p,direction:new p,color:new K,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new y};break;case "PointLight":c={position:new p,color:new K,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new y,shadowCameraNear:1,shadowCameraFar:1E3};break;case "HemisphereLight":c={direction:new p,skyColor:new K,groundColor:new K};
break;case "RectAreaLight":c={color:new K,position:new p,halfWidth:new p,halfHeight:new p}}return a[b.id]=c}}}function Eg(){var a=new Dg,b={id:Fg++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},c=new p,d=new F,e=new F;return{setup:function(f,g,h){var l=0,m=0,v=0,n=0,r=0,q=0,t=0,k=0;h=h.matrixWorldInverse;for(var p=0,x=f.length;p<x;p++){var w=
f[p],H=w.color,C=w.intensity,V=w.distance,Q=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)l+=H.r*C,m+=H.g*C,v+=H.b*C;else if(w.isDirectionalLight){var E=a.get(w);E.color.copy(w.color).multiplyScalar(w.intensity);E.direction.setFromMatrixPosition(w.matrixWorld);c.setFromMatrixPosition(w.target.matrixWorld);E.direction.sub(c);E.direction.transformDirection(h);if(E.shadow=w.castShadow)H=w.shadow,E.shadowBias=H.bias,E.shadowRadius=H.radius,E.shadowMapSize=H.mapSize;b.directionalShadowMap[n]=
Q;b.directionalShadowMatrix[n]=w.shadow.matrix;b.directional[n]=E;n++}else if(w.isSpotLight){E=a.get(w);E.position.setFromMatrixPosition(w.matrixWorld);E.position.applyMatrix4(h);E.color.copy(H).multiplyScalar(C);E.distance=V;E.direction.setFromMatrixPosition(w.matrixWorld);c.setFromMatrixPosition(w.target.matrixWorld);E.direction.sub(c);E.direction.transformDirection(h);E.coneCos=Math.cos(w.angle);E.penumbraCos=Math.cos(w.angle*(1-w.penumbra));E.decay=0===w.distance?0:w.decay;if(E.shadow=w.castShadow)H=
w.shadow,E.shadowBias=H.bias,E.shadowRadius=H.radius,E.shadowMapSize=H.mapSize;b.spotShadowMap[q]=Q;b.spotShadowMatrix[q]=w.shadow.matrix;b.spot[q]=E;q++}else if(w.isRectAreaLight)E=a.get(w),E.color.copy(H).multiplyScalar(C),E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(h),e.identity(),d.copy(w.matrixWorld),d.premultiply(h),e.extractRotation(d),E.halfWidth.set(.5*w.width,0,0),E.halfHeight.set(0,.5*w.height,0),E.halfWidth.applyMatrix4(e),E.halfHeight.applyMatrix4(e),b.rectArea[t]=
E,t++;else if(w.isPointLight){E=a.get(w);E.position.setFromMatrixPosition(w.matrixWorld);E.position.applyMatrix4(h);E.color.copy(w.color).multiplyScalar(w.intensity);E.distance=w.distance;E.decay=0===w.distance?0:w.decay;if(E.shadow=w.castShadow)H=w.shadow,E.shadowBias=H.bias,E.shadowRadius=H.radius,E.shadowMapSize=H.mapSize,E.shadowCameraNear=H.camera.near,E.shadowCameraFar=H.camera.far;b.pointShadowMap[r]=Q;b.pointShadowMatrix[r]=w.shadow.matrix;b.point[r]=E;r++}else w.isHemisphereLight&&(E=a.get(w),
E.direction.setFromMatrixPosition(w.matrixWorld),E.direction.transformDirection(h),E.direction.normalize(),E.skyColor.copy(w.color).multiplyScalar(C),E.groundColor.copy(w.groundColor).multiplyScalar(C),b.hemi[k]=E,k++)}b.ambient[0]=l;b.ambient[1]=m;b.ambient[2]=v;b.directional.length=n;b.spot.length=q;b.rectArea.length=t;b.point.length=r;b.hemi.length=k;b.hash=b.id+","+n+","+r+","+q+","+t+","+k+","+g.length},state:b}}function Gg(){var a=new Eg,b=[],c=[],d=[];return{init:function(){b.length=0;c.length=
0;d.length=0},state:{lightsArray:b,shadowsArray:c,spritesArray:d,lights:a},setupLights:function(d){a.setup(b,c,d)},pushLight:function(a){b.push(a)},pushShadow:function(a){c.push(a)},pushSprite:function(a){d.push(a)}}}function Hg(){var a={};return{get:function(b,c){b=b.id+","+c.id;c=a[b];void 0===c&&(c=new Gg,a[b]=c);return c},dispose:function(){a={}}}}function eb(a){L.call(this);this.type="MeshDepthMaterial";this.depthPacking=3200;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=
this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.setValues(a)}function fb(a){L.call(this);this.type="MeshDistanceMaterial";this.referencePosition=new p;this.nearDistance=1;this.farDistance=1E3;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.lights=this.fog=!1;this.setValues(a)}function Ye(a,b,c){function d(b,c,d,e,f,g){var h=
b.geometry;var l=n;var m=b.customDepthMaterial;d&&(l=r,m=b.customDistanceMaterial);m?l=m:(m=!1,c.morphTargets&&(h&&h.isBufferGeometry?m=h.morphAttributes&&h.morphAttributes.position&&0<h.morphAttributes.position.length:h&&h.isGeometry&&(m=h.morphTargets&&0<h.morphTargets.length)),b.isSkinnedMesh&&!1===c.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",b),b=b.isSkinnedMesh&&c.skinning,h=0,m&&(h|=1),b&&(h|=2),l=l[h]);a.localClippingEnabled&&!0===
c.clipShadows&&0!==c.clippingPlanes.length&&(h=l.uuid,m=c.uuid,b=q[h],void 0===b&&(b={},q[h]=b),h=b[m],void 0===h&&(h=l.clone(),b[m]=h),l=h);l.visible=c.visible;l.wireframe=c.wireframe;l.side=null!=c.shadowSide?c.shadowSide:t[c.side];l.clipShadows=c.clipShadows;l.clippingPlanes=c.clippingPlanes;l.clipIntersection=c.clipIntersection;l.wireframeLinewidth=c.wireframeLinewidth;l.linewidth=c.linewidth;d&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(e),l.nearDistance=f,l.farDistance=g);return l}
function e(c,g,h,l){if(!1!==c.visible){if(c.layers.test(g.layers)&&(c.isMesh||c.isLine||c.isPoints)&&c.castShadow&&(!c.frustumCulled||f.intersectsObject(c))){c.modelViewMatrix.multiplyMatrices(h.matrixWorldInverse,c.matrixWorld);var m=b.update(c),n=c.material;if(Array.isArray(n))for(var r=m.groups,q=0,t=r.length;q<t;q++){var k=r[q],u=n[k.materialIndex];u&&u.visible&&(u=d(c,u,l,v,h.near,h.far),a.renderBufferDirect(h,null,m,u,c,k))}else n.visible&&(u=d(c,n,l,v,h.near,h.far),a.renderBufferDirect(h,null,
m,u,c,null))}c=c.children;m=0;for(n=c.length;m<n;m++)e(c[m],g,h,l)}}var f=new qd,g=new F,h=new y,l=new y(c,c),m=new p,v=new p,n=Array(4),r=Array(4),q={},t={0:1,1:0,2:2},k=[new p(1,0,0),new p(-1,0,0),new p(0,0,1),new p(0,0,-1),new p(0,1,0),new p(0,-1,0)],z=[new p(0,1,0),new p(0,1,0),new p(0,1,0),new p(0,1,0),new p(0,0,1),new p(0,0,-1)],x=[new U,new U,new U,new U,new U,new U];for(c=0;4!==c;++c){var w=0!==(c&1),H=0!==(c&2),C=new eb({depthPacking:3201,morphTargets:w,skinning:H});n[c]=C;w=new fb({morphTargets:w,
skinning:H});r[c]=w}var V=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=1;this.render=function(b,c,d){if(!1!==V.enabled&&(!1!==V.autoUpdate||!1!==V.needsUpdate)&&0!==b.length){var n=a.state;n.disable(a.context.BLEND);n.buffers.color.setClear(1,1,1,1);n.buffers.depth.setTest(!0);n.setScissorTest(!1);for(var r,q=0,t=b.length;q<t;q++){var u=b[q];r=u.shadow;var p=u&&u.isPointLight;if(void 0===r)console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");else{var w=r.camera;h.copy(r.mapSize);
h.min(l);if(p){var Q=h.x,E=h.y;x[0].set(2*Q,E,Q,E);x[1].set(0,E,Q,E);x[2].set(3*Q,E,Q,E);x[3].set(Q,E,Q,E);x[4].set(3*Q,0,Q,E);x[5].set(Q,0,Q,E);h.x*=4;h.y*=2}null===r.map&&(r.map=new kb(h.x,h.y,{minFilter:1003,magFilter:1003,format:1023}),r.map.texture.name=u.name+".shadowMap",w.updateProjectionMatrix());r.isSpotLightShadow&&r.update(u);Q=r.map;E=r.matrix;v.setFromMatrixPosition(u.matrixWorld);w.position.copy(v);p?(r=6,E.makeTranslation(-v.x,-v.y,-v.z)):(r=1,m.setFromMatrixPosition(u.target.matrixWorld),
w.lookAt(m),w.updateMatrixWorld(),E.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),E.multiply(w.projectionMatrix),E.multiply(w.matrixWorldInverse));a.setRenderTarget(Q);a.clear();for(u=0;u<r;u++)p&&(m.copy(w.position),m.add(k[u]),w.up.copy(z[u]),w.lookAt(m),w.updateMatrixWorld(),n.viewport(x[u])),g.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),f.setFromMatrix(g),e(c,d,w,p)}}V.needsUpdate=!1}}}function Qb(a,b,c,d,e,f,g,h,l){ca.call(this,a,b,c,d,e,f,g,h,l);this.needsUpdate=!0}function Ig(a,
b,c,d,e){var f,g,h,l,m,v,n,r,q,t,k,z,x,w,H,C,V,Q;function E(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:b.id-a.id}var Bc,qb,y,A,B=new p,G=new X,K=new p;this.render=function(u,p,rd){if(0!==u.length){if(void 0===y){var S=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),Da=new Uint16Array([0,1,2,0,2,3]);Bc=b.createBuffer();qb=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,Bc);b.bufferData(b.ARRAY_BUFFER,S,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,
qb);b.bufferData(b.ELEMENT_ARRAY_BUFFER,Da,b.STATIC_DRAW);S=b.createProgram();Da=b.createShader(b.VERTEX_SHADER);var ia=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(Da,["precision "+e.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 center;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float fogDepth;\nvoid main() {\n\tvUV = uvOffset + uv * uvScale;\n\tvec2 alignedPosition = ( position - center ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tvec4 mvPosition;\n\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\tfogDepth = - mvPosition.z;\n}"].join("\n"));
b.shaderSource(ia,["precision "+e.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvarying float fogDepth;\nvoid main() {\n\tvec4 texture = texture2D( map, vUV );\n\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\n\tif ( gl_FragColor.a < alphaTest ) discard;\n\tif ( fogType > 0 ) {\n\t\tfloat fogFactor = 0.0;\n\t\tif ( fogType == 1 ) {\n\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t\t} else {\n\t\t\tconst float LOG2 = 1.442695;\n\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );\n\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\t\t}\n\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\t}\n}"].join("\n"));
b.compileShader(Da);b.compileShader(ia);b.attachShader(S,Da);b.attachShader(S,ia);b.linkProgram(S);y=S;V=b.getAttribLocation(y,"position");Q=b.getAttribLocation(y,"uv");f=b.getUniformLocation(y,"uvOffset");g=b.getUniformLocation(y,"uvScale");h=b.getUniformLocation(y,"rotation");l=b.getUniformLocation(y,"center");m=b.getUniformLocation(y,"scale");v=b.getUniformLocation(y,"color");n=b.getUniformLocation(y,"map");r=b.getUniformLocation(y,"opacity");q=b.getUniformLocation(y,"modelViewMatrix");t=b.getUniformLocation(y,
"projectionMatrix");k=b.getUniformLocation(y,"fogType");z=b.getUniformLocation(y,"fogDensity");x=b.getUniformLocation(y,"fogNear");w=b.getUniformLocation(y,"fogFar");H=b.getUniformLocation(y,"fogColor");b.getUniformLocation(y,"fogDepth");C=b.getUniformLocation(y,"alphaTest");S=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");S.width=8;S.height=8;Da=S.getContext("2d");Da.fillStyle="white";Da.fillRect(0,0,8,8);A=new Qb(S)}c.useProgram(y);c.initAttributes();c.enableAttribute(V);c.enableAttribute(Q);
c.disableUnusedAttributes();c.disable(b.CULL_FACE);c.enable(b.BLEND);b.bindBuffer(b.ARRAY_BUFFER,Bc);b.vertexAttribPointer(V,2,b.FLOAT,!1,16,0);b.vertexAttribPointer(Q,2,b.FLOAT,!1,16,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,qb);b.uniformMatrix4fv(t,!1,rd.projectionMatrix.elements);c.activeTexture(b.TEXTURE0);b.uniform1i(n,0);Da=S=0;(ia=p.fog)?(b.uniform3f(H,ia.color.r,ia.color.g,ia.color.b),ia.isFog?(b.uniform1f(x,ia.near),b.uniform1f(w,ia.far),b.uniform1i(k,1),Da=S=1):ia.isFogExp2&&(b.uniform1f(z,
ia.density),b.uniform1i(k,2),Da=S=2)):(b.uniform1i(k,0),Da=S=0);ia=0;for(var M=u.length;ia<M;ia++){var I=u[ia];I.modelViewMatrix.multiplyMatrices(rd.matrixWorldInverse,I.matrixWorld);I.z=-I.modelViewMatrix.elements[14]}u.sort(E);var Vd=[],J=[];ia=0;for(M=u.length;ia<M;ia++){I=u[ia];var F=I.material;if(!1!==F.visible){I.onBeforeRender(a,p,rd,void 0,F,void 0);b.uniform1f(C,F.alphaTest);b.uniformMatrix4fv(q,!1,I.modelViewMatrix.elements);I.matrixWorld.decompose(B,G,K);Vd[0]=K.x;Vd[1]=K.y;J[0]=I.center.x-
.5;J[1]=I.center.y-.5;var N=0;p.fog&&F.fog&&(N=Da);S!==N&&(b.uniform1i(k,N),S=N);null!==F.map?(b.uniform2f(f,F.map.offset.x,F.map.offset.y),b.uniform2f(g,F.map.repeat.x,F.map.repeat.y)):(b.uniform2f(f,0,0),b.uniform2f(g,1,1));b.uniform1f(r,F.opacity);b.uniform3f(v,F.color.r,F.color.g,F.color.b);b.uniform1f(h,F.rotation);b.uniform2fv(l,J);b.uniform2fv(m,Vd);c.setBlending(F.blending,F.blendEquation,F.blendSrc,F.blendDst,F.blendEquationAlpha,F.blendSrcAlpha,F.blendDstAlpha,F.premultipliedAlpha);c.buffers.depth.setTest(F.depthTest);
c.buffers.depth.setMask(F.depthWrite);c.buffers.color.setMask(F.colorWrite);d.setTexture2D(F.map||A,0);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);I.onAfterRender(a,p,rd,void 0,F,void 0)}}c.enable(b.CULL_FACE);c.reset()}}}function Jg(a,b,c){function d(b,c,d){var e=new Uint8Array(4),f=a.createTexture();a.bindTexture(b,f);a.texParameteri(b,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(b,a.TEXTURE_MAG_FILTER,a.NEAREST);for(b=0;b<d;b++)a.texImage2D(c+b,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,e);
return f}function e(c,d){p[c]=1;0===x[c]&&(a.enableVertexAttribArray(c),x[c]=1);w[c]!==d&&(b.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(c,d),w[c]=d)}function f(b){!0!==H[b]&&(a.enable(b),H[b]=!0)}function g(b){!1!==H[b]&&(a.disable(b),H[b]=!1)}function h(b,d,e,h,l,m,n,v){0!==b?f(a.BLEND):g(a.BLEND);if(5!==b){if(b!==Q||v!==B)switch(b){case 2:v?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE,a.ONE,a.ONE)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.SRC_ALPHA,
a.ONE));break;case 3:v?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.ONE_MINUS_SRC_COLOR));break;case 4:v?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.SRC_COLOR));break;default:v?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,
a.ONE,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA))}F=ia=A=qb=y=E=null}else{l=l||d;m=m||e;n=n||h;if(d!==E||l!==A)a.blendEquationSeparate(c.convert(d),c.convert(l)),E=d,A=l;if(e!==y||h!==qb||m!==ia||n!==F)a.blendFuncSeparate(c.convert(e),c.convert(h),c.convert(m),c.convert(n)),y=e,qb=h,ia=m,F=n}Q=b;B=v}function l(b){I!==b&&(b?a.frontFace(a.CW):a.frontFace(a.CCW),I=b)}function m(b){0!==b?(f(a.CULL_FACE),
b!==G&&(1===b?a.cullFace(a.BACK):2===b?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):g(a.CULL_FACE);G=b}function v(b,c,d){if(b){if(f(a.POLYGON_OFFSET_FILL),M!==c||S!==d)a.polygonOffset(c,d),M=c,S=d}else g(a.POLYGON_OFFSET_FILL)}function n(b){void 0===b&&(b=a.TEXTURE0+J-1);O!==b&&(a.activeTexture(b),O=b)}var r=new function(){var b=!1,c=new U,d=null,e=new U(0,0,0,0);return{setMask:function(c){d===c||b||(a.colorMask(c,c,c,c),d=c)},setLocked:function(a){b=a},setClear:function(b,d,f,g,h){!0===h&&
(b*=g,d*=g,f*=g);c.set(b,d,f,g);!1===e.equals(c)&&(a.clearColor(b,d,f,g),e.copy(c))},reset:function(){b=!1;d=null;e.set(-1,0,0,0)}}},q=new function(){var b=!1,c=null,d=null,e=null;return{setTest:function(b){b?f(a.DEPTH_TEST):g(a.DEPTH_TEST)},setMask:function(d){c===d||b||(a.depthMask(d),c=d)},setFunc:function(b){if(d!==b){if(b)switch(b){case 0:a.depthFunc(a.NEVER);break;case 1:a.depthFunc(a.ALWAYS);break;case 2:a.depthFunc(a.LESS);break;case 3:a.depthFunc(a.LEQUAL);break;case 4:a.depthFunc(a.EQUAL);
break;case 5:a.depthFunc(a.GEQUAL);break;case 6:a.depthFunc(a.GREATER);break;case 7:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}else a.depthFunc(a.LEQUAL);d=b}},setLocked:function(a){b=a},setClear:function(b){e!==b&&(a.clearDepth(b),e=b)},reset:function(){b=!1;e=d=c=null}}},k=new function(){var b=!1,c=null,d=null,e=null,h=null,l=null,m=null,n=null,v=null;return{setTest:function(b){b?f(a.STENCIL_TEST):g(a.STENCIL_TEST)},setMask:function(d){c===d||b||(a.stencilMask(d),c=d)},setFunc:function(b,
c,f){if(d!==b||e!==c||h!==f)a.stencilFunc(b,c,f),d=b,e=c,h=f},setOp:function(b,c,d){if(l!==b||m!==c||n!==d)a.stencilOp(b,c,d),l=b,m=c,n=d},setLocked:function(a){b=a},setClear:function(b){v!==b&&(a.clearStencil(b),v=b)},reset:function(){b=!1;v=n=m=l=h=e=d=c=null}}},u=a.getParameter(a.MAX_VERTEX_ATTRIBS),p=new Uint8Array(u),x=new Uint8Array(u),w=new Uint8Array(u),H={},C=null,V=null,Q=null,E=null,y=null,qb=null,A=null,ia=null,F=null,B=!1,I=null,G=null,K=null,M=null,S=null,J=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS),
L=!1;u=0;u=a.getParameter(a.VERSION);-1!==u.indexOf("WebGL")?(u=parseFloat(/^WebGL ([0-9])/.exec(u)[1]),L=1<=u):-1!==u.indexOf("OpenGL ES")&&(u=parseFloat(/^OpenGL ES ([0-9])/.exec(u)[1]),L=2<=u);var O=null,P={},W=new U,Y=new U,T={};T[a.TEXTURE_2D]=d(a.TEXTURE_2D,a.TEXTURE_2D,1);T[a.TEXTURE_CUBE_MAP]=d(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6);r.setClear(0,0,0,1);q.setClear(1);k.setClear(0);f(a.DEPTH_TEST);q.setFunc(3);l(!1);m(1);f(a.CULL_FACE);f(a.BLEND);h(1);return{buffers:{color:r,depth:q,
stencil:k},initAttributes:function(){for(var a=0,b=p.length;a<b;a++)p[a]=0},enableAttribute:function(a){e(a,0)},enableAttributeAndDivisor:e,disableUnusedAttributes:function(){for(var b=0,c=x.length;b!==c;++b)x[b]!==p[b]&&(a.disableVertexAttribArray(b),x[b]=0)},enable:f,disable:g,getCompressedTextureFormats:function(){if(null===C&&(C=[],b.get("WEBGL_compressed_texture_pvrtc")||b.get("WEBGL_compressed_texture_s3tc")||b.get("WEBGL_compressed_texture_etc1")||b.get("WEBGL_compressed_texture_astc")))for(var c=
a.getParameter(a.COMPRESSED_TEXTURE_FORMATS),d=0;d<c.length;d++)C.push(c[d]);return C},useProgram:function(b){return V!==b?(a.useProgram(b),V=b,!0):!1},setBlending:h,setMaterial:function(b,c){2===b.side?g(a.CULL_FACE):f(a.CULL_FACE);var d=1===b.side;c&&(d=!d);l(d);!0===b.transparent?h(b.blending,b.blendEquation,b.blendSrc,b.blendDst,b.blendEquationAlpha,b.blendSrcAlpha,b.blendDstAlpha,b.premultipliedAlpha):h(0);q.setFunc(b.depthFunc);q.setTest(b.depthTest);q.setMask(b.depthWrite);r.setMask(b.colorWrite);
v(b.polygonOffset,b.polygonOffsetFactor,b.polygonOffsetUnits)},setFlipSided:l,setCullFace:m,setLineWidth:function(b){b!==K&&(L&&a.lineWidth(b),K=b)},setPolygonOffset:v,setScissorTest:function(b){b?f(a.SCISSOR_TEST):g(a.SCISSOR_TEST)},activeTexture:n,bindTexture:function(b,c){null===O&&n();var d=P[O];void 0===d&&(d={type:void 0,texture:void 0},P[O]=d);if(d.type!==b||d.texture!==c)a.bindTexture(b,c||T[b]),d.type=b,d.texture=c},compressedTexImage2D:function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(N){console.error("THREE.WebGLState:",
N)}},texImage2D:function(){try{a.texImage2D.apply(a,arguments)}catch(N){console.error("THREE.WebGLState:",N)}},scissor:function(b){!1===W.equals(b)&&(a.scissor(b.x,b.y,b.z,b.w),W.copy(b))},viewport:function(b){!1===Y.equals(b)&&(a.viewport(b.x,b.y,b.z,b.w),Y.copy(b))},reset:function(){for(var b=0;b<x.length;b++)1===x[b]&&(a.disableVertexAttribArray(b),x[b]=0);H={};O=C=null;P={};G=I=Q=V=null;r.reset();q.reset();k.reset()}}}function Kg(a,b,c,d,e,f,g){function h(a,b){if(a.width>b||a.height>b){if("data"in
a){console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+a.width+"x"+a.height+").");return}b/=Math.max(a.width,a.height);var c=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");c.width=Math.floor(a.width*b);c.height=Math.floor(a.height*b);c.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,c.width,c.height);console.warn("THREE.WebGLRenderer: image is too big ("+a.width+"x"+a.height+"). Resized to "+c.width+"x"+c.height,a);return c}return a}function l(a){return P.isPowerOfTwo(a.width)&&
P.isPowerOfTwo(a.height)}function m(a,b){return a.generateMipmaps&&b&&1003!==a.minFilter&&1006!==a.minFilter}function v(b,c,e,f){a.generateMipmap(b);d.get(c).__maxMipLevel=Math.log(Math.max(e,f))*Math.LOG2E}function n(b){return 1003===b||1004===b||1005===b?a.NEAREST:a.LINEAR}function r(b){b=b.target;b.removeEventListener("dispose",r);a:{var c=d.get(b);if(b.image&&c.__image__webglTextureCube)a.deleteTexture(c.__image__webglTextureCube);else{if(void 0===c.__webglInit)break a;a.deleteTexture(c.__webglTexture)}d.remove(b)}b.isVideoTexture&&
delete H[b.id];g.memory.textures--}function q(b){b=b.target;b.removeEventListener("dispose",q);var c=d.get(b),e=d.get(b.texture);if(b){void 0!==e.__webglTexture&&a.deleteTexture(e.__webglTexture);b.depthTexture&&b.depthTexture.dispose();if(b.isWebGLRenderTargetCube)for(e=0;6>e;e++)a.deleteFramebuffer(c.__webglFramebuffer[e]),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer[e]);else a.deleteFramebuffer(c.__webglFramebuffer),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer);
d.remove(b.texture);d.remove(b)}g.memory.textures--}function k(b,n){var q=d.get(b);if(b.isVideoTexture){var k=b.id,t=g.render.frame;H[k]!==t&&(H[k]=t,b.update())}if(0<b.version&&q.__version!==b.version)if(k=b.image,void 0===k)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",b);else if(!1===k.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",b);else{void 0===q.__webglInit&&(q.__webglInit=!0,b.addEventListener("dispose",
r),q.__webglTexture=a.createTexture(),g.memory.textures++);c.activeTexture(a.TEXTURE0+n);c.bindTexture(a.TEXTURE_2D,q.__webglTexture);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.flipY);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b.premultiplyAlpha);a.pixelStorei(a.UNPACK_ALIGNMENT,b.unpackAlignment);n=h(b.image,e.maxTextureSize);(1001!==b.wrapS||1001!==b.wrapT||1003!==b.minFilter&&1006!==b.minFilter)&&!1===l(n)&&(n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof ImageBitmap)&&
(void 0===C&&(C=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),C.width=P.floorPowerOfTwo(n.width),C.height=P.floorPowerOfTwo(n.height),C.getContext("2d").drawImage(n,0,0,C.width,C.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+n.width+"x"+n.height+"). Resized to "+C.width+"x"+C.height,n),n=C);k=l(n);t=f.convert(b.format);var p=f.convert(b.type);u(a.TEXTURE_2D,b,k);var z=b.mipmaps;if(b.isDepthTexture){var V=a.DEPTH_COMPONENT;if(1015===b.type){if(!w)throw Error("Float Depth Texture only supported in WebGL2.0");
V=a.DEPTH_COMPONENT32F}else w&&(V=a.DEPTH_COMPONENT16);1026===b.format&&V===a.DEPTH_COMPONENT&&1012!==b.type&&1014!==b.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),b.type=1012,p=f.convert(b.type));1027===b.format&&(V=a.DEPTH_STENCIL,1020!==b.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),b.type=1020,p=f.convert(b.type)));c.texImage2D(a.TEXTURE_2D,0,V,n.width,n.height,0,t,
p,null)}else if(b.isDataTexture)if(0<z.length&&k){for(var x=0,Q=z.length;x<Q;x++)V=z[x],c.texImage2D(a.TEXTURE_2D,x,t,V.width,V.height,0,t,p,V.data);b.generateMipmaps=!1;q.__maxMipLevel=z.length-1}else c.texImage2D(a.TEXTURE_2D,0,t,n.width,n.height,0,t,p,n.data),q.__maxMipLevel=0;else if(b.isCompressedTexture){x=0;for(Q=z.length;x<Q;x++)V=z[x],1023!==b.format&&1022!==b.format?-1<c.getCompressedTextureFormats().indexOf(t)?c.compressedTexImage2D(a.TEXTURE_2D,x,t,V.width,V.height,0,V.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):
c.texImage2D(a.TEXTURE_2D,x,t,V.width,V.height,0,t,p,V.data);q.__maxMipLevel=z.length-1}else if(0<z.length&&k){x=0;for(Q=z.length;x<Q;x++)V=z[x],c.texImage2D(a.TEXTURE_2D,x,t,t,p,V);b.generateMipmaps=!1;q.__maxMipLevel=z.length-1}else c.texImage2D(a.TEXTURE_2D,0,t,t,p,n),q.__maxMipLevel=0;m(b,k)&&v(a.TEXTURE_2D,b,n.width,n.height);q.__version=b.version;if(b.onUpdate)b.onUpdate(b);return}c.activeTexture(a.TEXTURE0+n);c.bindTexture(a.TEXTURE_2D,q.__webglTexture)}function u(c,g,h){h?(a.texParameteri(c,
a.TEXTURE_WRAP_S,f.convert(g.wrapS)),a.texParameteri(c,a.TEXTURE_WRAP_T,f.convert(g.wrapT)),a.texParameteri(c,a.TEXTURE_MAG_FILTER,f.convert(g.magFilter)),a.texParameteri(c,a.TEXTURE_MIN_FILTER,f.convert(g.minFilter))):(a.texParameteri(c,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(c,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),1001===g.wrapS&&1001===g.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",g),a.texParameteri(c,
a.TEXTURE_MAG_FILTER,n(g.magFilter)),a.texParameteri(c,a.TEXTURE_MIN_FILTER,n(g.minFilter)),1003!==g.minFilter&&1006!==g.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",g));!(h=b.get("EXT_texture_filter_anisotropic"))||1015===g.type&&null===b.get("OES_texture_float_linear")||1016===g.type&&null===b.get("OES_texture_half_float_linear")||!(1<g.anisotropy||d.get(g).__currentAnisotropy)||(a.texParameterf(c,
h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(g.anisotropy,e.getMaxAnisotropy())),d.get(g).__currentAnisotropy=g.anisotropy)}function p(b,e,g,h){var l=f.convert(e.texture.format),m=f.convert(e.texture.type);c.texImage2D(h,0,l,e.width,e.height,0,l,m,null);a.bindFramebuffer(a.FRAMEBUFFER,b);a.framebufferTexture2D(a.FRAMEBUFFER,g,h,d.get(e.texture).__webglTexture,0);a.bindFramebuffer(a.FRAMEBUFFER,null)}function x(b,c){a.bindRenderbuffer(a.RENDERBUFFER,b);c.depthBuffer&&!c.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,
a.DEPTH_COMPONENT16,c.width,c.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,b)):c.depthBuffer&&c.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,c.width,c.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,b)):a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,c.width,c.height);a.bindRenderbuffer(a.RENDERBUFFER,null)}var w="undefined"!==typeof WebGL2RenderingContext&&a instanceof WebGL2RenderingContext,H={},C;
this.setTexture2D=k;this.setTextureCube=function(b,n){var q=d.get(b);if(6===b.image.length)if(0<b.version&&q.__version!==b.version){q.__image__webglTextureCube||(b.addEventListener("dispose",r),q.__image__webglTextureCube=a.createTexture(),g.memory.textures++);c.activeTexture(a.TEXTURE0+n);c.bindTexture(a.TEXTURE_CUBE_MAP,q.__image__webglTextureCube);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.flipY);n=b&&b.isCompressedTexture;for(var k=b.image[0]&&b.image[0].isDataTexture,t=[],p=0;6>p;p++)t[p]=n||k?k?
b.image[p].image:b.image[p]:h(b.image[p],e.maxCubemapSize);var w=t[0],z=l(w),x=f.convert(b.format),V=f.convert(b.type);u(a.TEXTURE_CUBE_MAP,b,z);for(p=0;6>p;p++)if(n)for(var H,C=t[p].mipmaps,Q=0,y=C.length;Q<y;Q++)H=C[Q],1023!==b.format&&1022!==b.format?-1<c.getCompressedTextureFormats().indexOf(x)?c.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+p,Q,x,H.width,H.height,0,H.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+
p,Q,x,H.width,H.height,0,x,V,H.data);else k?c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,x,t[p].width,t[p].height,0,x,V,t[p].data):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,x,x,V,t[p]);q.__maxMipLevel=n?C.length-1:0;m(b,z)&&v(a.TEXTURE_CUBE_MAP,b,w.width,w.height);q.__version=b.version;if(b.onUpdate)b.onUpdate(b)}else c.activeTexture(a.TEXTURE0+n),c.bindTexture(a.TEXTURE_CUBE_MAP,q.__image__webglTextureCube)};this.setTextureCubeDynamic=function(b,e){c.activeTexture(a.TEXTURE0+e);c.bindTexture(a.TEXTURE_CUBE_MAP,
d.get(b).__webglTexture)};this.setupRenderTarget=function(b){var e=d.get(b),f=d.get(b.texture);b.addEventListener("dispose",q);f.__webglTexture=a.createTexture();g.memory.textures++;var h=!0===b.isWebGLRenderTargetCube,n=l(b);if(h){e.__webglFramebuffer=[];for(var r=0;6>r;r++)e.__webglFramebuffer[r]=a.createFramebuffer()}else e.__webglFramebuffer=a.createFramebuffer();if(h){c.bindTexture(a.TEXTURE_CUBE_MAP,f.__webglTexture);u(a.TEXTURE_CUBE_MAP,b.texture,n);for(r=0;6>r;r++)p(e.__webglFramebuffer[r],
b,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+r);m(b.texture,n)&&v(a.TEXTURE_CUBE_MAP,b.texture,b.width,b.height);c.bindTexture(a.TEXTURE_CUBE_MAP,null)}else c.bindTexture(a.TEXTURE_2D,f.__webglTexture),u(a.TEXTURE_2D,b.texture,n),p(e.__webglFramebuffer,b,a.COLOR_ATTACHMENT0,a.TEXTURE_2D),m(b.texture,n)&&v(a.TEXTURE_2D,b.texture,b.width,b.height),c.bindTexture(a.TEXTURE_2D,null);if(b.depthBuffer){e=d.get(b);f=!0===b.isWebGLRenderTargetCube;if(b.depthTexture){if(f)throw Error("target.depthTexture not supported in Cube render targets");
if(b&&b.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported");a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer);if(!b.depthTexture||!b.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");d.get(b.depthTexture).__webglTexture&&b.depthTexture.image.width===b.width&&b.depthTexture.image.height===b.height||(b.depthTexture.image.width=b.width,b.depthTexture.image.height=b.height,b.depthTexture.needsUpdate=
!0);k(b.depthTexture,0);e=d.get(b.depthTexture).__webglTexture;if(1026===b.depthTexture.format)a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,e,0);else if(1027===b.depthTexture.format)a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,e,0);else throw Error("Unknown depthTexture format");}else if(f)for(e.__webglDepthbuffer=[],f=0;6>f;f++)a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer[f]),e.__webglDepthbuffer[f]=a.createRenderbuffer(),x(e.__webglDepthbuffer[f],
b);else a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer),e.__webglDepthbuffer=a.createRenderbuffer(),x(e.__webglDepthbuffer,b);a.bindFramebuffer(a.FRAMEBUFFER,null)}};this.updateRenderTargetMipmap=function(b){var e=b.texture,f=l(b);if(m(e,f)){f=b.isWebGLRenderTargetCube?a.TEXTURE_CUBE_MAP:a.TEXTURE_2D;var g=d.get(e).__webglTexture;c.bindTexture(f,g);v(f,e,b.width,b.height);c.bindTexture(f,null)}}}function Ze(a,b){return{convert:function(c){if(1E3===c)return a.REPEAT;if(1001===c)return a.CLAMP_TO_EDGE;
if(1002===c)return a.MIRRORED_REPEAT;if(1003===c)return a.NEAREST;if(1004===c)return a.NEAREST_MIPMAP_NEAREST;if(1005===c)return a.NEAREST_MIPMAP_LINEAR;if(1006===c)return a.LINEAR;if(1007===c)return a.LINEAR_MIPMAP_NEAREST;if(1008===c)return a.LINEAR_MIPMAP_LINEAR;if(1009===c)return a.UNSIGNED_BYTE;if(1017===c)return a.UNSIGNED_SHORT_4_4_4_4;if(1018===c)return a.UNSIGNED_SHORT_5_5_5_1;if(1019===c)return a.UNSIGNED_SHORT_5_6_5;if(1010===c)return a.BYTE;if(1011===c)return a.SHORT;if(1012===c)return a.UNSIGNED_SHORT;
if(1013===c)return a.INT;if(1014===c)return a.UNSIGNED_INT;if(1015===c)return a.FLOAT;if(1016===c){var d=b.get("OES_texture_half_float");if(null!==d)return d.HALF_FLOAT_OES}if(1021===c)return a.ALPHA;if(1022===c)return a.RGB;if(1023===c)return a.RGBA;if(1024===c)return a.LUMINANCE;if(1025===c)return a.LUMINANCE_ALPHA;if(1026===c)return a.DEPTH_COMPONENT;if(1027===c)return a.DEPTH_STENCIL;if(100===c)return a.FUNC_ADD;if(101===c)return a.FUNC_SUBTRACT;if(102===c)return a.FUNC_REVERSE_SUBTRACT;if(200===
c)return a.ZERO;if(201===c)return a.ONE;if(202===c)return a.SRC_COLOR;if(203===c)return a.ONE_MINUS_SRC_COLOR;if(204===c)return a.SRC_ALPHA;if(205===c)return a.ONE_MINUS_SRC_ALPHA;if(206===c)return a.DST_ALPHA;if(207===c)return a.ONE_MINUS_DST_ALPHA;if(208===c)return a.DST_COLOR;if(209===c)return a.ONE_MINUS_DST_COLOR;if(210===c)return a.SRC_ALPHA_SATURATE;if(33776===c||33777===c||33778===c||33779===c)if(d=b.get("WEBGL_compressed_texture_s3tc"),null!==d){if(33776===c)return d.COMPRESSED_RGB_S3TC_DXT1_EXT;
if(33777===c)return d.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===c)return d.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===c)return d.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===c||35841===c||35842===c||35843===c)if(d=b.get("WEBGL_compressed_texture_pvrtc"),null!==d){if(35840===c)return d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===c)return d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===c)return d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===c)return d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===c&&(d=b.get("WEBGL_compressed_texture_etc1"),
null!==d))return d.COMPRESSED_RGB_ETC1_WEBGL;if(37808===c||37809===c||37810===c||37811===c||37812===c||37813===c||37814===c||37815===c||37816===c||37817===c||37818===c||37819===c||37820===c||37821===c)if(d=b.get("WEBGL_compressed_texture_astc"),null!==d)return c;if(103===c||104===c)if(d=b.get("EXT_blend_minmax"),null!==d){if(103===c)return d.MIN_EXT;if(104===c)return d.MAX_EXT}return 1020===c&&(d=b.get("WEBGL_depth_texture"),null!==d)?d.UNSIGNED_INT_24_8_WEBGL:0}}}function ea(a,b,c,d){Qa.call(this);
this.type="PerspectiveCamera";this.fov=void 0!==a?a:50;this.zoom=1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:2E3;this.focus=10;this.aspect=void 0!==b?b:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}function Ec(a){ea.call(this);this.cameras=a||[]}function $e(a){function b(){return null!==e&&!0===e.isPresenting}function c(){if(b()){var c=e.getEyeParameters("left"),f=c.renderWidth;c=c.renderHeight;z=a.getPixelRatio();u=a.getSize();a.setDrawingBufferSize(2*f,
c,1);x.start()}else d.enabled&&(a.setDrawingBufferSize(u.width,u.height,z),x.stop())}var d=this,e=null,f=null,g=null,h=new F,l=new F;"undefined"!==typeof window&&"VRFrameData"in window&&(f=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",c,!1));var m=new F,v=new X,n=new p,r=new ea;r.bounds=new U(0,0,.5,1);r.layers.enable(1);var q=new ea;q.bounds=new U(.5,0,.5,1);q.layers.enable(2);var k=new Ec([r,q]);k.layers.enable(1);k.layers.enable(2);var u,z;this.enabled=!1;this.userHeight=
1.6;this.getDevice=function(){return e};this.setDevice=function(a){void 0!==a&&(e=a);x.setContext(a)};this.setPoseTarget=function(a){void 0!==a&&(g=a)};this.getCamera=function(a){if(null===e)return a;e.depthNear=a.near;e.depthFar=a.far;e.getFrameData(f);var b=e.stageParameters;b?h.fromArray(b.sittingToStandingTransform):h.makeTranslation(0,d.userHeight,0);b=f.pose;var c=null!==g?g:a;c.matrix.copy(h);c.matrix.decompose(c.position,c.quaternion,c.scale);null!==b.orientation&&(v.fromArray(b.orientation),
c.quaternion.multiply(v));null!==b.position&&(v.setFromRotationMatrix(h),n.fromArray(b.position),n.applyQuaternion(v),c.position.add(n));c.updateMatrixWorld();if(!1===e.isPresenting)return a;r.near=a.near;q.near=a.near;r.far=a.far;q.far=a.far;k.matrixWorld.copy(a.matrixWorld);k.matrixWorldInverse.copy(a.matrixWorldInverse);r.matrixWorldInverse.fromArray(f.leftViewMatrix);q.matrixWorldInverse.fromArray(f.rightViewMatrix);l.getInverse(h);r.matrixWorldInverse.multiply(l);q.matrixWorldInverse.multiply(l);
a=c.parent;null!==a&&(m.getInverse(a.matrixWorld),r.matrixWorldInverse.multiply(m),q.matrixWorldInverse.multiply(m));r.matrixWorld.getInverse(r.matrixWorldInverse);q.matrixWorld.getInverse(q.matrixWorldInverse);r.projectionMatrix.fromArray(f.leftProjectionMatrix);q.projectionMatrix.fromArray(f.rightProjectionMatrix);k.projectionMatrix.copy(r.projectionMatrix);a=e.getLayers();a.length&&(a=a[0],null!==a.leftBounds&&4===a.leftBounds.length&&r.bounds.fromArray(a.leftBounds),null!==a.rightBounds&&4===
a.rightBounds.length&&q.bounds.fromArray(a.rightBounds));return k};this.getStandingMatrix=function(){return h};this.isPresenting=b;var x=new Td;this.setAnimationLoop=function(a){x.setAnimationLoop(a)};this.submitFrame=function(){b()&&e.submitFrame()};this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",c)}}function Lg(a){function b(){return null!==f&&null!==g}function c(a,b){null===b?a.matrixWorld.copy(a.matrix):a.matrixWorld.multiplyMatrices(b.matrixWorld,
a.matrix);a.matrixWorldInverse.getInverse(a.matrixWorld)}var d=a.context,e=null,f=null,g=null,h=null,l=new ea;l.layers.enable(1);l.viewport=new U;var m=new ea;m.layers.enable(2);m.viewport=new U;var v=new Ec([l,m]);v.layers.enable(1);v.layers.enable(2);this.enabled=!1;this.getDevice=function(){return e};this.setDevice=function(a){void 0!==a&&(e=a);d.setCompatibleXRDevice(a)};this.setSession=function(b,c){f=b;null!==f&&(f.addEventListener("end",function(){a.setFramebuffer(null);r.stop()}),f.baseLayer=
new XRWebGLLayer(f,d),f.requestFrameOfReference(c.frameOfReferenceType).then(function(b){g=b;a.setFramebuffer(f.baseLayer.framebuffer);r.setContext(f);r.start()}))};this.getCamera=function(a){if(b()){var d=a.parent,e=v.cameras;c(v,d);for(var f=0;f<e.length;f++)c(e[f],d);a.matrixWorld.copy(v.matrixWorld);a=a.children;f=0;for(d=a.length;f<d;f++)a[f].updateMatrixWorld(!0);return v}return a};this.isPresenting=b;var n=null,r=new Td;r.setAnimationLoop(function(a,b){h=b.getDevicePose(g);a=f.baseLayer;b=
b.views;for(var c=0;c<b.length;c++){var d=b[c],e=a.getViewport(d),l=h.getViewMatrix(d),m=v.cameras[c];m.matrix.fromArray(l).getInverse(m.matrix);m.projectionMatrix.fromArray(d.projectionMatrix);m.viewport.set(e.x,e.y,e.width,e.height);0===c&&(v.matrix.copy(m.matrix),v.projectionMatrix.copy(m.projectionMatrix))}n&&n()});this.setAnimationLoop=function(a){n=a};this.getStandingMatrix=function(){console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed.");return new THREE.Matrix4};this.submitFrame=
function(){}}function Zd(a){function b(){la=new Nf(D);la.get("WEBGL_depth_texture");la.get("OES_texture_float");la.get("OES_texture_float_linear");la.get("OES_texture_half_float");la.get("OES_texture_half_float_linear");la.get("OES_standard_derivatives");la.get("OES_element_index_uint");la.get("ANGLE_instanced_arrays");ha=new Ze(D,la);Ra=new Lf(D,la,a);Z=new Jg(D,la,ha);Z.scissor(T.copy(N).multiplyScalar(Y));Z.viewport(S.copy(ba).multiplyScalar(Y));gb=new Qf(D);Ba=new yg;hb=new Kg(D,la,Z,Ba,Ra,ha,
gb);ra=new Ef(D);sa=new Of(D,ra,gb);oa=new Tf(sa,gb);va=new Sf(D);na=new xg(A,la,Ra);ta=new Cg;pa=new Hg;ma=new Jf(A,Z,oa,C);wa=new Kf(D,la,gb);ya=new Pf(D,la,gb);za=new Ig(A,D,Z,hb,Ra);gb.programs=na.programs;A.context=D;A.capabilities=Ra;A.extensions=la;A.properties=Ba;A.renderLists=ta;A.state=Z;A.info=gb}function c(a){a.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");B=!0}function d(){console.log("THREE.WebGLRenderer: Context Restored.");B=!1;b()}function e(a){a=a.target;a.removeEventListener("dispose",
e);f(a);Ba.remove(a)}function f(a){var b=Ba.get(a).program;a.program=void 0;void 0!==b&&na.releaseProgram(b)}function g(a,b,c){a.render(function(a){A.renderBufferImmediate(a,b,c)})}function h(a,b,c){if(!1!==a.visible){if(a.layers.test(b.layers))if(a.isLight)y.pushLight(a),a.castShadow&&y.pushShadow(a);else if(a.isSprite)a.frustumCulled&&!ea.intersectsSprite(a)||y.pushSprite(a);else if(a.isImmediateRenderObject)c&&Rb.setFromMatrixPosition(a.matrixWorld).applyMatrix4(fa),E.push(a,null,a.material,Rb.z,
null);else if(a.isMesh||a.isLine||a.isPoints)if(a.isSkinnedMesh&&a.skeleton.update(),!a.frustumCulled||ea.intersectsObject(a)){c&&Rb.setFromMatrixPosition(a.matrixWorld).applyMatrix4(fa);var d=oa.update(a),e=a.material;if(Array.isArray(e))for(var f=d.groups,g=0,l=f.length;g<l;g++){var m=f[g],n=e[m.materialIndex];n&&n.visible&&E.push(a,d,n,Rb.z,m)}else e.visible&&E.push(a,d,e,Rb.z,null)}a=a.children;g=0;for(l=a.length;g<l;g++)h(a[g],b,c)}}function l(a,b,c,d){for(var e=0,f=a.length;e<f;e++){var g=a[e],
h=g.object,l=g.geometry,n=void 0===d?g.material:d;g=g.group;if(c.isArrayCamera){W=c;for(var v=c.cameras,r=0,k=v.length;r<k;r++){var q=v[r];if(h.layers.test(q.layers)){if("viewport"in q)Z.viewport(S.copy(q.viewport));else{var t=q.bounds;Z.viewport(S.set(t.x*Ya,t.y*R,t.z*Ya,t.w*R).multiplyScalar(Y))}m(h,b,q,l,n,g)}}}else W=null,m(h,b,c,l,n,g)}}function m(a,b,c,d,e,f){a.onBeforeRender(A,b,c,d,e,f);y=pa.get(b,W||c);a.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,a.matrixWorld);a.normalMatrix.getNormalMatrix(a.modelViewMatrix);
if(a.isImmediateRenderObject){var h=a.isMesh&&0>a.matrixWorld.determinant();Z.setMaterial(e,h);h=n(c,b.fog,e,a);O="";g(a,h,e)}else A.renderBufferDirect(c,b.fog,d,e,a,f);a.onAfterRender(A,b,c,d,e,f);y=pa.get(b,W||c)}function v(a,b,c){var d=Ba.get(a),g=y.state.lights;c=na.getParameters(a,g.state,y.state.shadowsArray,b,X.numPlanes,X.numIntersection,c);var h=na.getProgramCode(a,c),l=d.program,m=!0;if(void 0===l)a.addEventListener("dispose",e);else if(l.code!==h)f(a);else{if(d.lightsHash!==g.state.hash)Ba.update(a,
"lightsHash",g.state.hash);else if(void 0!==c.shaderID)return;m=!1}m&&(c.shaderID?(l=tb[c.shaderID],d.shader={name:a.type,uniforms:Ca.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}):d.shader={name:a.type,uniforms:a.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader},a.onBeforeCompile(d.shader,A),l=na.acquireProgram(a,d.shader,c,h),d.program=l,a.program=l);c=l.getAttributes();if(a.morphTargets)for(h=a.numSupportedMorphTargets=0;h<A.maxMorphTargets;h++)0<=
c["morphTarget"+h]&&a.numSupportedMorphTargets++;if(a.morphNormals)for(h=a.numSupportedMorphNormals=0;h<A.maxMorphNormals;h++)0<=c["morphNormal"+h]&&a.numSupportedMorphNormals++;c=d.shader.uniforms;if(!a.isShaderMaterial&&!a.isRawShaderMaterial||!0===a.clipping)d.numClippingPlanes=X.numPlanes,d.numIntersection=X.numIntersection,c.clippingPlanes=X.uniform;d.fog=b;d.lightsHash=g.state.hash;a.lights&&(c.ambientLightColor.value=g.state.ambient,c.directionalLights.value=g.state.directional,c.spotLights.value=
g.state.spot,c.rectAreaLights.value=g.state.rectArea,c.pointLights.value=g.state.point,c.hemisphereLights.value=g.state.hemi,c.directionalShadowMap.value=g.state.directionalShadowMap,c.directionalShadowMatrix.value=g.state.directionalShadowMatrix,c.spotShadowMap.value=g.state.spotShadowMap,c.spotShadowMatrix.value=g.state.spotShadowMatrix,c.pointShadowMap.value=g.state.pointShadowMap,c.pointShadowMatrix.value=g.state.pointShadowMatrix);a=d.program.getUniforms();a=db.seqWithValue(a.seq,c);d.uniformsList=
a}function n(a,b,c,d){ca=0;var e=Ba.get(c),f=y.state.lights;ja&&(qa||a!==L)&&X.setState(c.clippingPlanes,c.clipIntersection,c.clipShadows,a,e,a===L&&c.id===J);!1===c.needsUpdate&&(void 0===e.program?c.needsUpdate=!0:c.fog&&e.fog!==b?c.needsUpdate=!0:c.lights&&e.lightsHash!==f.state.hash?c.needsUpdate=!0:void 0===e.numClippingPlanes||e.numClippingPlanes===X.numPlanes&&e.numIntersection===X.numIntersection||(c.needsUpdate=!0));c.needsUpdate&&(v(c,b,d),c.needsUpdate=!1);var g=!1,h=!1,l=!1;f=e.program;
var m=f.getUniforms(),n=e.shader.uniforms;Z.useProgram(f.program)&&(l=h=g=!0);c.id!==J&&(J=c.id,h=!0);if(g||a!==L){m.setValue(D,"projectionMatrix",a.projectionMatrix);Ra.logarithmicDepthBuffer&&m.setValue(D,"logDepthBufFC",2/(Math.log(a.far+1)/Math.LN2));L!==(W||a)&&(L=W||a,l=h=!0);if(c.isShaderMaterial||c.isMeshPhongMaterial||c.isMeshStandardMaterial||c.envMap)g=m.map.cameraPosition,void 0!==g&&g.setValue(D,Rb.setFromMatrixPosition(a.matrixWorld));(c.isMeshPhongMaterial||c.isMeshLambertMaterial||
c.isMeshBasicMaterial||c.isMeshStandardMaterial||c.isShaderMaterial||c.skinning)&&m.setValue(D,"viewMatrix",a.matrixWorldInverse)}if(c.skinning&&(m.setOptional(D,d,"bindMatrix"),m.setOptional(D,d,"bindMatrixInverse"),a=d.skeleton))if(g=a.bones,Ra.floatVertexTextures){if(void 0===a.boneTexture){g=Math.sqrt(4*g.length);g=P.ceilPowerOfTwo(g);g=Math.max(g,4);var k=new Float32Array(g*g*4);k.set(a.boneMatrices);var t=new lb(k,g,g,1023,1015);t.needsUpdate=!0;a.boneMatrices=k;a.boneTexture=t;a.boneTextureSize=
g}m.setValue(D,"boneTexture",a.boneTexture);m.setValue(D,"boneTextureSize",a.boneTextureSize)}else m.setOptional(D,a,"boneMatrices");h&&(m.setValue(D,"toneMappingExposure",A.toneMappingExposure),m.setValue(D,"toneMappingWhitePoint",A.toneMappingWhitePoint),c.lights&&(h=l,n.ambientLightColor.needsUpdate=h,n.directionalLights.needsUpdate=h,n.pointLights.needsUpdate=h,n.spotLights.needsUpdate=h,n.rectAreaLights.needsUpdate=h,n.hemisphereLights.needsUpdate=h),b&&c.fog&&(n.fogColor.value=b.color,b.isFog?
(n.fogNear.value=b.near,n.fogFar.value=b.far):b.isFogExp2&&(n.fogDensity.value=b.density)),c.isMeshBasicMaterial?r(n,c):c.isMeshLambertMaterial?(r(n,c),c.emissiveMap&&(n.emissiveMap.value=c.emissiveMap)):c.isMeshPhongMaterial?(r(n,c),c.isMeshToonMaterial?(q(n,c),c.gradientMap&&(n.gradientMap.value=c.gradientMap)):q(n,c)):c.isMeshStandardMaterial?(r(n,c),c.isMeshPhysicalMaterial&&(n.clearCoat.value=c.clearCoat,n.clearCoatRoughness.value=c.clearCoatRoughness),n.roughness.value=c.roughness,n.metalness.value=
c.metalness,c.roughnessMap&&(n.roughnessMap.value=c.roughnessMap),c.metalnessMap&&(n.metalnessMap.value=c.metalnessMap),c.emissiveMap&&(n.emissiveMap.value=c.emissiveMap),c.bumpMap&&(n.bumpMap.value=c.bumpMap,n.bumpScale.value=c.bumpScale,1===c.side&&(n.bumpScale.value*=-1)),c.normalMap&&(n.normalMap.value=c.normalMap,n.normalScale.value.copy(c.normalScale),1===c.side&&n.normalScale.value.negate()),c.displacementMap&&(n.displacementMap.value=c.displacementMap,n.displacementScale.value=c.displacementScale,
n.displacementBias.value=c.displacementBias),c.envMap&&(n.envMapIntensity.value=c.envMapIntensity)):c.isMeshDepthMaterial?(r(n,c),c.displacementMap&&(n.displacementMap.value=c.displacementMap,n.displacementScale.value=c.displacementScale,n.displacementBias.value=c.displacementBias)):c.isMeshDistanceMaterial?(r(n,c),c.displacementMap&&(n.displacementMap.value=c.displacementMap,n.displacementScale.value=c.displacementScale,n.displacementBias.value=c.displacementBias),n.referencePosition.value.copy(c.referencePosition),
n.nearDistance.value=c.nearDistance,n.farDistance.value=c.farDistance):c.isMeshNormalMaterial?(r(n,c),c.bumpMap&&(n.bumpMap.value=c.bumpMap,n.bumpScale.value=c.bumpScale,1===c.side&&(n.bumpScale.value*=-1)),c.normalMap&&(n.normalMap.value=c.normalMap,n.normalScale.value.copy(c.normalScale),1===c.side&&n.normalScale.value.negate()),c.displacementMap&&(n.displacementMap.value=c.displacementMap,n.displacementScale.value=c.displacementScale,n.displacementBias.value=c.displacementBias)):c.isLineBasicMaterial?
(n.diffuse.value=c.color,n.opacity.value=c.opacity,c.isLineDashedMaterial&&(n.dashSize.value=c.dashSize,n.totalSize.value=c.dashSize+c.gapSize,n.scale.value=c.scale)):c.isPointsMaterial?(n.diffuse.value=c.color,n.opacity.value=c.opacity,n.size.value=c.size*Y,n.scale.value=.5*R,n.map.value=c.map,null!==c.map&&(!0===c.map.matrixAutoUpdate&&c.map.updateMatrix(),n.uvTransform.value.copy(c.map.matrix))):c.isShadowMaterial&&(n.color.value=c.color,n.opacity.value=c.opacity),void 0!==n.ltc_1&&(n.ltc_1.value=
M.LTC_1),void 0!==n.ltc_2&&(n.ltc_2.value=M.LTC_2),db.upload(D,e.uniformsList,n,A));c.isShaderMaterial&&!0===c.uniformsNeedUpdate&&(db.upload(D,e.uniformsList,n,A),c.uniformsNeedUpdate=!1);m.setValue(D,"modelViewMatrix",d.modelViewMatrix);m.setValue(D,"normalMatrix",d.normalMatrix);m.setValue(D,"modelMatrix",d.matrixWorld);return f}function r(a,b){a.opacity.value=b.opacity;b.color&&(a.diffuse.value=b.color);b.emissive&&a.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity);b.map&&(a.map.value=
b.map);b.alphaMap&&(a.alphaMap.value=b.alphaMap);b.specularMap&&(a.specularMap.value=b.specularMap);b.envMap&&(a.envMap.value=b.envMap,a.flipEnvMap.value=b.envMap&&b.envMap.isCubeTexture?-1:1,a.reflectivity.value=b.reflectivity,a.refractionRatio.value=b.refractionRatio,a.maxMipLevel.value=Ba.get(b.envMap).__maxMipLevel);b.lightMap&&(a.lightMap.value=b.lightMap,a.lightMapIntensity.value=b.lightMapIntensity);b.aoMap&&(a.aoMap.value=b.aoMap,a.aoMapIntensity.value=b.aoMapIntensity);if(b.map)var c=b.map;
else b.specularMap?c=b.specularMap:b.displacementMap?c=b.displacementMap:b.normalMap?c=b.normalMap:b.bumpMap?c=b.bumpMap:b.roughnessMap?c=b.roughnessMap:b.metalnessMap?c=b.metalnessMap:b.alphaMap?c=b.alphaMap:b.emissiveMap&&(c=b.emissiveMap);void 0!==c&&(c.isWebGLRenderTarget&&(c=c.texture),!0===c.matrixAutoUpdate&&c.updateMatrix(),a.uvTransform.value.copy(c.matrix))}function q(a,b){a.specular.value=b.specular;a.shininess.value=Math.max(b.shininess,1E-4);b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap);
b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale,1===b.side&&(a.bumpScale.value*=-1));b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale),1===b.side&&a.normalScale.value.negate());b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias)}console.log("THREE.WebGLRenderer","93");a=a||{};var k=void 0!==a.canvas?a.canvas:document.createElementNS("http://www.w3.org/1999/xhtml",
"canvas"),u=void 0!==a.context?a.context:null,z=void 0!==a.alpha?a.alpha:!1,x=void 0!==a.depth?a.depth:!0,w=void 0!==a.stencil?a.stencil:!0,H=void 0!==a.antialias?a.antialias:!1,C=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,V=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,Q=void 0!==a.powerPreference?a.powerPreference:"default",E=null,y=null;this.domElement=k;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.clippingPlanes=
[];this.localClippingEnabled=!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var A=this,B=!1,I=null,G=null,K=null,J=-1,O="",L=null,W=null,S=new U,T=new U,aa=null,ca=0,Ya=k.width,R=k.height,Y=1,ba=new U(0,0,Ya,R),N=new U(0,0,Ya,R),da=!1,ea=new qd,X=new Mf,ja=!1,qa=!1,fa=new F,Rb=new p;try{z={alpha:z,depth:x,stencil:w,antialias:H,premultipliedAlpha:C,
preserveDrawingBuffer:V,powerPreference:Q};k.addEventListener("webglcontextlost",c,!1);k.addEventListener("webglcontextrestored",d,!1);var D=u||k.getContext("webgl",z)||k.getContext("experimental-webgl",z);if(null===D){if(null!==k.getContext("webgl"))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.");}void 0===D.getShaderPrecisionFormat&&(D.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Mg){console.error("THREE.WebGLRenderer: "+
Mg.message)}var la,Ra,Z,gb,Ba,hb,ra,sa,oa,na,ta,pa,ma,va,wa,ya,za,ha;b();var ka="xr"in navigator?new Lg(A):new $e(A);this.vr=ka;var Aa=new Ye(A,oa,Ra.maxTextureSize);this.shadowMap=Aa;this.getContext=function(){return D};this.getContextAttributes=function(){return D.getContextAttributes()};this.forceContextLoss=function(){var a=la.get("WEBGL_lose_context");a&&a.loseContext()};this.forceContextRestore=function(){var a=la.get("WEBGL_lose_context");a&&a.restoreContext()};this.getPixelRatio=function(){return Y};
this.setPixelRatio=function(a){void 0!==a&&(Y=a,this.setSize(Ya,R,!1))};this.getSize=function(){return{width:Ya,height:R}};this.setSize=function(a,b,c){ka.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Ya=a,R=b,k.width=a*Y,k.height=b*Y,!1!==c&&(k.style.width=a+"px",k.style.height=b+"px"),this.setViewport(0,0,a,b))};this.getDrawingBufferSize=function(){return{width:Ya*Y,height:R*Y}};this.setDrawingBufferSize=function(a,b,c){Ya=a;R=b;Y=c;k.width=
a*c;k.height=b*c;this.setViewport(0,0,a,b)};this.getCurrentViewport=function(){return S};this.setViewport=function(a,b,c,d){ba.set(a,R-b-d,c,d);Z.viewport(S.copy(ba).multiplyScalar(Y))};this.setScissor=function(a,b,c,d){N.set(a,R-b-d,c,d);Z.scissor(T.copy(N).multiplyScalar(Y))};this.setScissorTest=function(a){Z.setScissorTest(da=a)};this.getClearColor=function(){return ma.getClearColor()};this.setClearColor=function(){ma.setClearColor.apply(ma,arguments)};this.getClearAlpha=function(){return ma.getClearAlpha()};
this.setClearAlpha=function(){ma.setClearAlpha.apply(ma,arguments)};this.clear=function(a,b,c){var d=0;if(void 0===a||a)d|=D.COLOR_BUFFER_BIT;if(void 0===b||b)d|=D.DEPTH_BUFFER_BIT;if(void 0===c||c)d|=D.STENCIL_BUFFER_BIT;D.clear(d)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};this.dispose=function(){k.removeEventListener("webglcontextlost",
c,!1);k.removeEventListener("webglcontextrestored",d,!1);ta.dispose();pa.dispose();Ba.dispose();oa.dispose();ka.dispose();ua.stop()};this.renderBufferImmediate=function(a,b,c){Z.initAttributes();var d=Ba.get(a);a.hasPositions&&!d.position&&(d.position=D.createBuffer());a.hasNormals&&!d.normal&&(d.normal=D.createBuffer());a.hasUvs&&!d.uv&&(d.uv=D.createBuffer());a.hasColors&&!d.color&&(d.color=D.createBuffer());b=b.getAttributes();a.hasPositions&&(D.bindBuffer(D.ARRAY_BUFFER,d.position),D.bufferData(D.ARRAY_BUFFER,
a.positionArray,D.DYNAMIC_DRAW),Z.enableAttribute(b.position),D.vertexAttribPointer(b.position,3,D.FLOAT,!1,0,0));if(a.hasNormals){D.bindBuffer(D.ARRAY_BUFFER,d.normal);if(!c.isMeshPhongMaterial&&!c.isMeshStandardMaterial&&!c.isMeshNormalMaterial&&!0===c.flatShading)for(var e=0,f=3*a.count;e<f;e+=9){var g=a.normalArray,h=(g[e+0]+g[e+3]+g[e+6])/3,l=(g[e+1]+g[e+4]+g[e+7])/3,m=(g[e+2]+g[e+5]+g[e+8])/3;g[e+0]=h;g[e+1]=l;g[e+2]=m;g[e+3]=h;g[e+4]=l;g[e+5]=m;g[e+6]=h;g[e+7]=l;g[e+8]=m}D.bufferData(D.ARRAY_BUFFER,
a.normalArray,D.DYNAMIC_DRAW);Z.enableAttribute(b.normal);D.vertexAttribPointer(b.normal,3,D.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(D.bindBuffer(D.ARRAY_BUFFER,d.uv),D.bufferData(D.ARRAY_BUFFER,a.uvArray,D.DYNAMIC_DRAW),Z.enableAttribute(b.uv),D.vertexAttribPointer(b.uv,2,D.FLOAT,!1,0,0));a.hasColors&&0!==c.vertexColors&&(D.bindBuffer(D.ARRAY_BUFFER,d.color),D.bufferData(D.ARRAY_BUFFER,a.colorArray,D.DYNAMIC_DRAW),Z.enableAttribute(b.color),D.vertexAttribPointer(b.color,3,D.FLOAT,!1,0,0));Z.disableUnusedAttributes();
D.drawArrays(D.TRIANGLES,0,a.count);a.count=0};this.renderBufferDirect=function(a,b,c,d,e,f){var g=e.isMesh&&0>e.matrixWorld.determinant();Z.setMaterial(d,g);var h=n(a,b,d,e);a=c.id+"_"+h.id+"_"+(!0===d.wireframe);var l=!1;a!==O&&(O=a,l=!0);e.morphTargetInfluences&&(va.update(e,c,d,h),l=!0);g=c.index;var m=c.attributes.position;b=1;!0===d.wireframe&&(g=sa.getWireframeAttribute(c),b=2);a=wa;if(null!==g){var v=ra.get(g);a=ya;a.setIndex(v)}if(l){if(c&&c.isInstancedBufferGeometry&&null===la.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
else{Z.initAttributes();l=c.attributes;h=h.getAttributes();var r=d.defaultAttributeValues;for(C in h){var k=h[C];if(0<=k){var q=l[C];if(void 0!==q){var t=q.normalized,u=q.itemSize,p=ra.get(q);if(void 0!==p){var z=p.buffer,w=p.type;p=p.bytesPerElement;if(q.isInterleavedBufferAttribute){var x=q.data,H=x.stride;q=q.offset;x&&x.isInstancedInterleavedBuffer?(Z.enableAttributeAndDivisor(k,x.meshPerAttribute),void 0===c.maxInstancedCount&&(c.maxInstancedCount=x.meshPerAttribute*x.count)):Z.enableAttribute(k);
D.bindBuffer(D.ARRAY_BUFFER,z);D.vertexAttribPointer(k,u,w,t,H*p,q*p)}else q.isInstancedBufferAttribute?(Z.enableAttributeAndDivisor(k,q.meshPerAttribute),void 0===c.maxInstancedCount&&(c.maxInstancedCount=q.meshPerAttribute*q.count)):Z.enableAttribute(k),D.bindBuffer(D.ARRAY_BUFFER,z),D.vertexAttribPointer(k,u,w,t,0,0)}}else if(void 0!==r&&(t=r[C],void 0!==t))switch(t.length){case 2:D.vertexAttrib2fv(k,t);break;case 3:D.vertexAttrib3fv(k,t);break;case 4:D.vertexAttrib4fv(k,t);break;default:D.vertexAttrib1fv(k,
t)}}}Z.disableUnusedAttributes()}null!==g&&D.bindBuffer(D.ELEMENT_ARRAY_BUFFER,v.buffer)}v=Infinity;null!==g?v=g.count:void 0!==m&&(v=m.count);g=c.drawRange.start*b;m=null!==f?f.start*b:0;var C=Math.max(g,m);f=Math.max(0,Math.min(v,g+c.drawRange.count*b,m+(null!==f?f.count*b:Infinity))-1-C+1);if(0!==f){if(e.isMesh)if(!0===d.wireframe)Z.setLineWidth(d.wireframeLinewidth*(null===G?Y:1)),a.setMode(D.LINES);else switch(e.drawMode){case 0:a.setMode(D.TRIANGLES);break;case 1:a.setMode(D.TRIANGLE_STRIP);
break;case 2:a.setMode(D.TRIANGLE_FAN)}else e.isLine?(d=d.linewidth,void 0===d&&(d=1),Z.setLineWidth(d*(null===G?Y:1)),e.isLineSegments?a.setMode(D.LINES):e.isLineLoop?a.setMode(D.LINE_LOOP):a.setMode(D.LINE_STRIP)):e.isPoints&&a.setMode(D.POINTS);c&&c.isInstancedBufferGeometry?0<c.maxInstancedCount&&a.renderInstances(c,C,f):a.render(C,f)}};this.compile=function(a,b){y=pa.get(a,b);y.init();a.traverse(function(a){a.isLight&&(y.pushLight(a),a.castShadow&&y.pushShadow(a))});y.setupLights(b);a.traverse(function(b){if(b.material)if(Array.isArray(b.material))for(var c=
0;c<b.material.length;c++)v(b.material[c],a.fog,b);else v(b.material,a.fog,b)})};var xa=null,ua=new Td;ua.setAnimationLoop(function(){ka.isPresenting()||xa&&xa()});ua.setContext(window);this.setAnimationLoop=function(a){xa=a;ka.setAnimationLoop(a);ua.start()};this.render=function(a,b,c,d){if(!b||!b.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else if(!B){O="";J=-1;L=null;!0===a.autoUpdate&&a.updateMatrixWorld();null===b.parent&&b.updateMatrixWorld();
ka.enabled&&(b=ka.getCamera(b));y=pa.get(a,b);y.init();a.onBeforeRender(A,a,b,c);fa.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);ea.setFromMatrix(fa);qa=this.localClippingEnabled;ja=X.init(this.clippingPlanes,qa,b);E=ta.get(a,b);E.init();h(a,b,A.sortObjects);!0===A.sortObjects&&E.sort();ja&&X.beginShadows();Aa.render(y.state.shadowsArray,a,b);y.setupLights(b);ja&&X.endShadows();this.info.autoReset&&this.info.reset();void 0===c&&(c=null);this.setRenderTarget(c);ma.render(E,a,b,d);d=E.opaque;
var e=E.transparent;if(a.overrideMaterial){var f=a.overrideMaterial;d.length&&l(d,a,b,f);e.length&&l(e,a,b,f)}else d.length&&l(d,a,b),e.length&&l(e,a,b);za.render(y.state.spritesArray,a,b);c&&hb.updateRenderTargetMipmap(c);Z.buffers.depth.setTest(!0);Z.buffers.depth.setMask(!0);Z.buffers.color.setMask(!0);Z.setPolygonOffset(!1);a.onAfterRender(A,a,b);ka.enabled&&ka.submitFrame();y=E=null}};this.allocTextureUnit=function(){var a=ca;a>=Ra.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+
a+" texture units while this GPU supports only "+Ra.maxTextures);ca+=1;return a};this.setTexture2D=function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTarget&&(a||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);hb.setTexture2D(b,c)}}();this.setTexture=function(){var a=!1;return function(b,c){a||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),a=!0);hb.setTexture2D(b,
c)}}();this.setTextureCube=function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTargetCube&&(a||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);b&&b.isCubeTexture||Array.isArray(b.image)&&6===b.image.length?hb.setTextureCube(b,c):hb.setTextureCubeDynamic(b,c)}}();this.setFramebuffer=function(a){I=a};this.getRenderTarget=function(){return G};this.setRenderTarget=function(a){(G=a)&&void 0===
Ba.get(a).__webglFramebuffer&&hb.setupRenderTarget(a);var b=I,c=!1;a?(b=Ba.get(a).__webglFramebuffer,a.isWebGLRenderTargetCube&&(b=b[a.activeCubeFace],c=!0),S.copy(a.viewport),T.copy(a.scissor),aa=a.scissorTest):(S.copy(ba).multiplyScalar(Y),T.copy(N).multiplyScalar(Y),aa=da);K!==b&&(D.bindFramebuffer(D.FRAMEBUFFER,b),K=b);Z.viewport(S);Z.scissor(T);Z.setScissorTest(aa);c&&(c=Ba.get(a.texture),D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_CUBE_MAP_POSITIVE_X+a.activeCubeFace,
c.__webglTexture,a.activeMipMapLevel))};this.readRenderTargetPixels=function(a,b,c,d,e,f){if(a&&a.isWebGLRenderTarget){var g=Ba.get(a).__webglFramebuffer;if(g){var h=!1;g!==K&&(D.bindFramebuffer(D.FRAMEBUFFER,g),h=!0);try{var l=a.texture,m=l.format,n=l.type;1023!==m&&ha.convert(m)!==D.getParameter(D.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===n||ha.convert(n)===D.getParameter(D.IMPLEMENTATION_COLOR_READ_TYPE)||
1015===n&&(la.get("OES_texture_float")||la.get("WEBGL_color_buffer_float"))||1016===n&&la.get("EXT_color_buffer_half_float")?D.checkFramebufferStatus(D.FRAMEBUFFER)===D.FRAMEBUFFER_COMPLETE?0<=b&&b<=a.width-d&&0<=c&&c<=a.height-e&&D.readPixels(b,c,d,e,ha.convert(m),ha.convert(n),f):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{h&&
D.bindFramebuffer(D.FRAMEBUFFER,K)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")};this.copyFramebufferToTexture=function(a,b,c){var d=b.image.width,e=b.image.height,f=ha.convert(b.format);this.setTexture2D(b,0);D.copyTexImage2D(D.TEXTURE_2D,c||0,f,a.x,a.y,d,e,0)};this.copyTextureToTexture=function(a,b,c,d){var e=b.image.width,f=b.image.height,g=ha.convert(c.format),h=ha.convert(c.type);this.setTexture2D(c,0);b.isDataTexture?D.texSubImage2D(D.TEXTURE_2D,
d||0,a.x,a.y,e,f,g,h,b.image.data):D.texSubImage2D(D.TEXTURE_2D,d||0,a.x,a.y,g,h,b.image)}}function Sb(a,b){this.name="";this.color=new K(a);this.density=void 0!==b?b:2.5E-4}function Tb(a,b,c){this.name="";this.color=new K(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3}function sd(){B.call(this);this.type="Scene";this.overrideMaterial=this.fog=this.background=null;this.autoUpdate=!0}function ib(a){L.call(this);this.type="SpriteMaterial";this.color=new K(16777215);this.map=null;this.rotation=
0;this.lights=this.fog=!1;this.setValues(a)}function Fc(a){B.call(this);this.type="Sprite";this.material=void 0!==a?a:new ib;this.center=new y(.5,.5)}function Gc(){B.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Hc(a,b){a=a||[];this.bones=a.slice(0);this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===b)this.calculateInverses();else if(this.bones.length===b.length)this.boneInverses=b.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),
this.boneInverses=[],a=0,b=this.bones.length;a<b;a++)this.boneInverses.push(new F)}function td(){B.call(this);this.type="Bone"}function ud(a,b){pa.call(this,a,b);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new F;this.bindMatrixInverse=new F;a=this.initBones();a=new Hc(a);this.bind(a,this.matrixWorld);this.normalizeSkinWeights()}function T(a){L.call(this);this.type="LineBasicMaterial";this.color=new K(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.lights=!1;
this.setValues(a)}function ma(a,b,c){if(1===c)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new aa(a,b);B.call(this);this.type="Line";this.geometry=void 0!==a?a:new G;this.material=void 0!==b?b:new T({color:16777215*Math.random()})}function aa(a,b){ma.call(this,a,b);this.type="LineSegments"}function vd(a,b){ma.call(this,a,b);this.type="LineLoop"}function Ia(a){L.call(this);this.type="PointsMaterial";this.color=new K(16777215);
this.map=null;this.size=1;this.sizeAttenuation=!0;this.lights=this.morphTargets=!1;this.setValues(a)}function Ub(a,b){B.call(this);this.type="Points";this.geometry=void 0!==a?a:new G;this.material=void 0!==b?b:new Ia({color:16777215*Math.random()})}function wd(){B.call(this);this.type="Group"}function $d(a,b,c,d,e,f,g,h,l){ca.call(this,a,b,c,d,e,f,g,h,l);this.generateMipmaps=!1}function Vb(a,b,c,d,e,f,g,h,l,m,v,n){ca.call(this,null,f,g,h,l,m,d,e,v,n);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=
this.flipY=!1}function Ic(a,b,c,d,e,f,g,h,l,m){m=void 0!==m?m:1026;if(1026!==m&&1027!==m)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===c&&1026===m&&(c=1012);void 0===c&&1027===m&&(c=1020);ca.call(this,null,d,e,f,g,h,m,c,l);this.image={width:a,height:b};this.magFilter=void 0!==g?g:1003;this.minFilter=void 0!==h?h:1003;this.generateMipmaps=this.flipY=!1}function Wb(a){G.call(this);this.type="WireframeGeometry";var b=[],c,d,e,f=[0,0],g={},h=
["a","b","c"];if(a&&a.isGeometry){var l=a.faces;var m=0;for(d=l.length;m<d;m++){var v=l[m];for(c=0;3>c;c++){var n=v[h[c]];var r=v[h[(c+1)%3]];f[0]=Math.min(n,r);f[1]=Math.max(n,r);n=f[0]+","+f[1];void 0===g[n]&&(g[n]={index1:f[0],index2:f[1]})}}for(n in g)m=g[n],h=a.vertices[m.index1],b.push(h.x,h.y,h.z),h=a.vertices[m.index2],b.push(h.x,h.y,h.z)}else if(a&&a.isBufferGeometry)if(h=new p,null!==a.index){l=a.attributes.position;v=a.index;var k=a.groups;0===k.length&&(k=[{start:0,count:v.count,materialIndex:0}]);
a=0;for(e=k.length;a<e;++a)for(m=k[a],c=m.start,d=m.count,m=c,d=c+d;m<d;m+=3)for(c=0;3>c;c++)n=v.getX(m+c),r=v.getX(m+(c+1)%3),f[0]=Math.min(n,r),f[1]=Math.max(n,r),n=f[0]+","+f[1],void 0===g[n]&&(g[n]={index1:f[0],index2:f[1]});for(n in g)m=g[n],h.fromBufferAttribute(l,m.index1),b.push(h.x,h.y,h.z),h.fromBufferAttribute(l,m.index2),b.push(h.x,h.y,h.z)}else for(l=a.attributes.position,m=0,d=l.count/3;m<d;m++)for(c=0;3>c;c++)g=3*m+c,h.fromBufferAttribute(l,g),b.push(h.x,h.y,h.z),g=3*m+(c+1)%3,h.fromBufferAttribute(l,
g),b.push(h.x,h.y,h.z);this.addAttribute("position",new A(b,3))}function Jc(a,b,c){J.call(this);this.type="ParametricGeometry";this.parameters={func:a,slices:b,stacks:c};this.fromBufferGeometry(new Xb(a,b,c));this.mergeVertices()}function Xb(a,b,c){G.call(this);this.type="ParametricBufferGeometry";this.parameters={func:a,slices:b,stacks:c};var d=[],e=[],f=[],g=[],h=new p,l=new p,m=new p,v=new p,n=new p,r,k;3>a.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");
var t=b+1;for(r=0;r<=c;r++){var u=r/c;for(k=0;k<=b;k++){var z=k/b;a(z,u,l);e.push(l.x,l.y,l.z);0<=z-1E-5?(a(z-1E-5,u,m),v.subVectors(l,m)):(a(z+1E-5,u,m),v.subVectors(m,l));0<=u-1E-5?(a(z,u-1E-5,m),n.subVectors(l,m)):(a(z,u+1E-5,m),n.subVectors(m,l));h.crossVectors(v,n).normalize();f.push(h.x,h.y,h.z);g.push(z,u)}}for(r=0;r<c;r++)for(k=0;k<b;k++)a=r*t+k+1,h=(r+1)*t+k+1,l=(r+1)*t+k,d.push(r*t+k,a,l),d.push(a,h,l);this.setIndex(d);this.addAttribute("position",new A(e,3));this.addAttribute("normal",
new A(f,3));this.addAttribute("uv",new A(g,2))}function Kc(a,b,c,d){J.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:a,indices:b,radius:c,detail:d};this.fromBufferGeometry(new va(a,b,c,d));this.mergeVertices()}function va(a,b,c,d){function e(a){h.push(a.x,a.y,a.z)}function f(b,c){b*=3;c.x=a[b+0];c.y=a[b+1];c.z=a[b+2]}function g(a,b,c,d){0>d&&1===a.x&&(l[b]=a.x-1);0===c.x&&0===c.z&&(l[b]=d/2/Math.PI+.5)}G.call(this);this.type="PolyhedronBufferGeometry";this.parameters={vertices:a,
indices:b,radius:c,detail:d};c=c||1;d=d||0;var h=[],l=[];(function(a){for(var c=new p,d=new p,g=new p,h=0;h<b.length;h+=3){f(b[h+0],c);f(b[h+1],d);f(b[h+2],g);var l,m,k=c,x=d,w=g,H=Math.pow(2,a),C=[];for(m=0;m<=H;m++){C[m]=[];var y=k.clone().lerp(w,m/H),Q=x.clone().lerp(w,m/H),E=H-m;for(l=0;l<=E;l++)C[m][l]=0===l&&m===H?y:y.clone().lerp(Q,l/E)}for(m=0;m<H;m++)for(l=0;l<2*(H-m)-1;l++)k=Math.floor(l/2),0===l%2?(e(C[m][k+1]),e(C[m+1][k]),e(C[m][k])):(e(C[m][k+1]),e(C[m+1][k+1]),e(C[m+1][k]))}})(d);(function(a){for(var b=
new p,c=0;c<h.length;c+=3)b.x=h[c+0],b.y=h[c+1],b.z=h[c+2],b.normalize().multiplyScalar(a),h[c+0]=b.x,h[c+1]=b.y,h[c+2]=b.z})(c);(function(){for(var a=new p,b=0;b<h.length;b+=3)a.x=h[b+0],a.y=h[b+1],a.z=h[b+2],l.push(Math.atan2(a.z,-a.x)/2/Math.PI+.5,1-(Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5));a=new p;b=new p;for(var c=new p,d=new p,e=new y,f=new y,k=new y,z=0,x=0;z<h.length;z+=9,x+=6){a.set(h[z+0],h[z+1],h[z+2]);b.set(h[z+3],h[z+4],h[z+5]);c.set(h[z+6],h[z+7],h[z+8]);e.set(l[x+0],
l[x+1]);f.set(l[x+2],l[x+3]);k.set(l[x+4],l[x+5]);d.copy(a).add(b).add(c).divideScalar(3);var w=Math.atan2(d.z,-d.x);g(e,x+0,a,w);g(f,x+2,b,w);g(k,x+4,c,w)}for(a=0;a<l.length;a+=6)b=l[a+0],c=l[a+2],d=l[a+4],e=Math.min(b,c,d),.9<Math.max(b,c,d)&&.1>e&&(.2>b&&(l[a+0]+=1),.2>c&&(l[a+2]+=1),.2>d&&(l[a+4]+=1))})();this.addAttribute("position",new A(h,3));this.addAttribute("normal",new A(h.slice(),3));this.addAttribute("uv",new A(l,2));0===d?this.computeVertexNormals():this.normalizeNormals()}function Lc(a,
b){J.call(this);this.type="TetrahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Yb(a,b));this.mergeVertices()}function Yb(a,b){va.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type="TetrahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Mc(a,b){J.call(this);this.type="OctahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new ub(a,b));this.mergeVertices()}function ub(a,b){va.call(this,[1,0,0,
-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type="OctahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Nc(a,b){J.call(this);this.type="IcosahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Zb(a,b));this.mergeVertices()}function Zb(a,b){var c=(1+Math.sqrt(5))/2;va.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,
11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type="IcosahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Oc(a,b){J.call(this);this.type="DodecahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new $b(a,b));this.mergeVertices()}function $b(a,b){var c=(1+Math.sqrt(5))/2,d=1/c;va.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,
0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,b);this.type="DodecahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Pc(a,b,c,d,e,f){J.call(this);this.type="TubeGeometry";this.parameters={path:a,tubularSegments:b,radius:c,radialSegments:d,
closed:e};void 0!==f&&console.warn("THREE.TubeGeometry: taper has been removed.");a=new ac(a,b,c,d,e);this.tangents=a.tangents;this.normals=a.normals;this.binormals=a.binormals;this.fromBufferGeometry(a);this.mergeVertices()}function ac(a,b,c,d,e){function f(e){v=a.getPointAt(e/b,v);var f=g.normals[e];e=g.binormals[e];for(k=0;k<=d;k++){var m=k/d*Math.PI*2,n=Math.sin(m);m=-Math.cos(m);l.x=m*f.x+n*e.x;l.y=m*f.y+n*e.y;l.z=m*f.z+n*e.z;l.normalize();t.push(l.x,l.y,l.z);h.x=v.x+c*l.x;h.y=v.y+c*l.y;h.z=
v.z+c*l.z;q.push(h.x,h.y,h.z)}}G.call(this);this.type="TubeBufferGeometry";this.parameters={path:a,tubularSegments:b,radius:c,radialSegments:d,closed:e};b=b||64;c=c||1;d=d||8;e=e||!1;var g=a.computeFrenetFrames(b,e);this.tangents=g.tangents;this.normals=g.normals;this.binormals=g.binormals;var h=new p,l=new p,m=new y,v=new p,n,k,q=[],t=[],u=[],z=[];for(n=0;n<b;n++)f(n);f(!1===e?b:0);for(n=0;n<=b;n++)for(k=0;k<=d;k++)m.x=n/b,m.y=k/d,u.push(m.x,m.y);(function(){for(k=1;k<=b;k++)for(n=1;n<=d;n++){var a=
(d+1)*k+(n-1),c=(d+1)*k+n,e=(d+1)*(k-1)+n;z.push((d+1)*(k-1)+(n-1),a,e);z.push(a,c,e)}})();this.setIndex(z);this.addAttribute("position",new A(q,3));this.addAttribute("normal",new A(t,3));this.addAttribute("uv",new A(u,2))}function Qc(a,b,c,d,e,f,g){J.call(this);this.type="TorusKnotGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};void 0!==g&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");this.fromBufferGeometry(new bc(a,
b,c,d,e,f));this.mergeVertices()}function bc(a,b,c,d,e,f){function g(a,b,c,d,e){var f=Math.sin(a);b=c/b*a;c=Math.cos(b);e.x=d*(2+c)*.5*Math.cos(a);e.y=d*(2+c)*f*.5;e.z=d*Math.sin(b)*.5}G.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};a=a||1;b=b||.4;c=Math.floor(c)||64;d=Math.floor(d)||8;e=e||2;f=f||3;var h=[],l=[],m=[],v=[],n,k=new p,q=new p,t=new p,u=new p,z=new p,x=new p,w=new p;for(n=0;n<=c;++n){var H=n/c*e*Math.PI*2;
g(H,e,f,a,t);g(H+.01,e,f,a,u);x.subVectors(u,t);w.addVectors(u,t);z.crossVectors(x,w);w.crossVectors(z,x);z.normalize();w.normalize();for(H=0;H<=d;++H){var C=H/d*Math.PI*2,y=-b*Math.cos(C);C=b*Math.sin(C);k.x=t.x+(y*w.x+C*z.x);k.y=t.y+(y*w.y+C*z.y);k.z=t.z+(y*w.z+C*z.z);l.push(k.x,k.y,k.z);q.subVectors(k,t).normalize();m.push(q.x,q.y,q.z);v.push(n/c);v.push(H/d)}}for(H=1;H<=c;H++)for(n=1;n<=d;n++)a=(d+1)*H+(n-1),b=(d+1)*H+n,e=(d+1)*(H-1)+n,h.push((d+1)*(H-1)+(n-1),a,e),h.push(a,b,e);this.setIndex(h);
this.addAttribute("position",new A(l,3));this.addAttribute("normal",new A(m,3));this.addAttribute("uv",new A(v,2))}function Rc(a,b,c,d,e){J.call(this);this.type="TorusGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};this.fromBufferGeometry(new cc(a,b,c,d,e));this.mergeVertices()}function cc(a,b,c,d,e){G.call(this);this.type="TorusBufferGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};a=a||1;b=b||.4;c=Math.floor(c)||8;d=Math.floor(d)||
6;e=e||2*Math.PI;var f=[],g=[],h=[],l=[],m=new p,v=new p,n=new p,k,q;for(k=0;k<=c;k++)for(q=0;q<=d;q++){var t=q/d*e,u=k/c*Math.PI*2;v.x=(a+b*Math.cos(u))*Math.cos(t);v.y=(a+b*Math.cos(u))*Math.sin(t);v.z=b*Math.sin(u);g.push(v.x,v.y,v.z);m.x=a*Math.cos(t);m.y=a*Math.sin(t);n.subVectors(v,m).normalize();h.push(n.x,n.y,n.z);l.push(q/d);l.push(k/c)}for(k=1;k<=c;k++)for(q=1;q<=d;q++)a=(d+1)*(k-1)+q-1,b=(d+1)*(k-1)+q,e=(d+1)*k+q,f.push((d+1)*k+q-1,a,e),f.push(a,b,e);this.setIndex(f);this.addAttribute("position",
new A(g,3));this.addAttribute("normal",new A(h,3));this.addAttribute("uv",new A(l,2))}function af(a,b,c,d,e){for(var f,g=0,h=b,l=c-d;h<c;h+=d)g+=(a[l]-a[h])*(a[h+1]+a[l+1]),l=h;if(e===0<g)for(e=b;e<c;e+=d)f=bf(e,a[e],a[e+1],f);else for(e=c-d;e>=b;e-=d)f=bf(e,a[e],a[e+1],f);f&&vb(f,f.next)&&(Sc(f),f=f.next);return f}function Tc(a,b){if(!a)return a;b||(b=a);do{var c=!1;if(a.steiner||!vb(a,a.next)&&0!==na(a.prev,a,a.next))a=a.next;else{Sc(a);a=b=a.prev;if(a===a.next)break;c=!0}}while(c||a!==b);return b}
function Uc(a,b,c,d,e,f,g){if(a){if(!g&&f){var h=a,l=h;do null===l.z&&(l.z=ae(l.x,l.y,d,e,f)),l.prevZ=l.prev,l=l.nextZ=l.next;while(l!==h);l.prevZ.nextZ=null;l.prevZ=null;h=l;var m,v,n,k,q=1;do{l=h;var t=h=null;for(v=0;l;){v++;var p=l;for(m=n=0;m<q&&(n++,p=p.nextZ,p);m++);for(k=q;0<n||0<k&&p;)0!==n&&(0===k||!p||l.z<=p.z)?(m=l,l=l.nextZ,n--):(m=p,p=p.nextZ,k--),t?t.nextZ=m:h=m,m.prevZ=t,t=m;l=p}t.nextZ=null;q*=2}while(1<v)}for(h=a;a.prev!==a.next;){l=a.prev;p=a.next;if(f)a:{t=a;k=d;var z=e,x=f;v=t.prev;
n=t;q=t.next;if(0<=na(v,n,q))t=!1;else{var w=v.x>n.x?v.x>q.x?v.x:q.x:n.x>q.x?n.x:q.x,H=v.y>n.y?v.y>q.y?v.y:q.y:n.y>q.y?n.y:q.y;m=ae(v.x<n.x?v.x<q.x?v.x:q.x:n.x<q.x?n.x:q.x,v.y<n.y?v.y<q.y?v.y:q.y:n.y<q.y?n.y:q.y,k,z,x);k=ae(w,H,k,z,x);for(z=t.nextZ;z&&z.z<=k;){if(z!==t.prev&&z!==t.next&&xd(v.x,v.y,n.x,n.y,q.x,q.y,z.x,z.y)&&0<=na(z.prev,z,z.next)){t=!1;break a}z=z.nextZ}for(z=t.prevZ;z&&z.z>=m;){if(z!==t.prev&&z!==t.next&&xd(v.x,v.y,n.x,n.y,q.x,q.y,z.x,z.y)&&0<=na(z.prev,z,z.next)){t=!1;break a}z=
z.prevZ}t=!0}}else a:if(t=a,v=t.prev,n=t,q=t.next,0<=na(v,n,q))t=!1;else{for(m=t.next.next;m!==t.prev;){if(xd(v.x,v.y,n.x,n.y,q.x,q.y,m.x,m.y)&&0<=na(m.prev,m,m.next)){t=!1;break a}m=m.next}t=!0}if(t)b.push(l.i/c),b.push(a.i/c),b.push(p.i/c),Sc(a),h=a=p.next;else if(a=p,a===h){if(!g)Uc(Tc(a),b,c,d,e,f,1);else if(1===g){g=b;h=c;l=a;do p=l.prev,t=l.next.next,!vb(p,t)&&cf(p,l,l.next,t)&&Vc(p,t)&&Vc(t,p)&&(g.push(p.i/h),g.push(l.i/h),g.push(t.i/h),Sc(l),Sc(l.next),l=a=t),l=l.next;while(l!==a);a=l;Uc(a,
b,c,d,e,f,2)}else if(2===g)a:{g=a;do{for(h=g.next.next;h!==g.prev;){if(l=g.i!==h.i){l=g;p=h;if(t=l.next.i!==p.i&&l.prev.i!==p.i){b:{t=l;do{if(t.i!==l.i&&t.next.i!==l.i&&t.i!==p.i&&t.next.i!==p.i&&cf(t,t.next,l,p)){t=!0;break b}t=t.next}while(t!==l);t=!1}t=!t}if(t=t&&Vc(l,p)&&Vc(p,l)){t=l;v=!1;n=(l.x+p.x)/2;p=(l.y+p.y)/2;do t.y>p!==t.next.y>p&&t.next.y!==t.y&&n<(t.next.x-t.x)*(p-t.y)/(t.next.y-t.y)+t.x&&(v=!v),t=t.next;while(t!==l);t=v}l=t}if(l){a=df(g,h);g=Tc(g,g.next);a=Tc(a,a.next);Uc(g,b,c,d,e,
f);Uc(a,b,c,d,e,f);break a}h=h.next}g=g.next}while(g!==a)}break}}}}function Ng(a,b){return a.x-b.x}function Og(a,b){var c=b,d=a.x,e=a.y,f=-Infinity;do{if(e<=c.y&&e>=c.next.y&&c.next.y!==c.y){var g=c.x+(e-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(g<=d&&g>f){f=g;if(g===d){if(e===c.y)return c;if(e===c.next.y)return c.next}var h=c.x<c.next.x?c:c.next}}c=c.next}while(c!==b);if(!h)return null;if(d===f)return h.prev;b=h;g=h.x;var l=h.y,m=Infinity;for(c=h.next;c!==b;){if(d>=c.x&&c.x>=g&&d!==c.x&&xd(e<l?d:f,e,
g,l,e<l?f:d,e,c.x,c.y)){var v=Math.abs(e-c.y)/(d-c.x);(v<m||v===m&&c.x>h.x)&&Vc(c,a)&&(h=c,m=v)}c=c.next}return h}function ae(a,b,c,d,e){a=32767*(a-c)*e;b=32767*(b-d)*e;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function Pg(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function xd(a,b,c,d,e,f,g,h){return 0<=(e-g)*(b-h)-(a-g)*(f-h)&&0<=(a-g)*(d-h)-(c-
g)*(b-h)&&0<=(c-g)*(f-h)-(e-g)*(d-h)}function na(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function vb(a,b){return a.x===b.x&&a.y===b.y}function cf(a,b,c,d){return vb(a,b)&&vb(c,d)||vb(a,d)&&vb(c,b)?!0:0<na(a,b,c)!==0<na(a,b,d)&&0<na(c,d,a)!==0<na(c,d,b)}function Vc(a,b){return 0>na(a.prev,a,a.next)?0<=na(a,b,a.next)&&0<=na(a,a.prev,b):0>na(a,b,a.prev)||0>na(a,a.next,b)}function df(a,b){var c=new be(a.i,a.x,a.y),d=new be(b.i,b.x,b.y),e=a.next,f=b.prev;a.next=b;b.prev=a;c.next=e;e.prev=
c;d.next=c;c.prev=d;f.next=d;d.prev=f;return d}function bf(a,b,c,d){a=new be(a,b,c);d?(a.next=d.next,a.prev=d,d.next.prev=a,d.next=a):(a.prev=a,a.next=a);return a}function Sc(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function be(a,b,c){this.i=a;this.x=b;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function ef(a){var b=a.length;2<b&&a[b-1].equals(a[0])&&a.pop()}function ff(a,b){for(var c=0;c<b.length;c++)a.push(b[c].x),
a.push(b[c].y)}function wb(a,b){J.call(this);this.type="ExtrudeGeometry";this.parameters={shapes:a,options:b};this.fromBufferGeometry(new Sa(a,b));this.mergeVertices()}function Sa(a,b){function c(a){function c(a,b,c){b||console.error("THREE.ExtrudeGeometry: vec does not exist");return b.clone().multiplyScalar(c).add(a)}function g(a,b,c){var d=a.x-b.x;var e=a.y-b.y;var f=c.x-a.x;var g=c.y-a.y,h=d*d+e*e;if(Math.abs(d*g-e*f)>Number.EPSILON){var l=Math.sqrt(h),m=Math.sqrt(f*f+g*g);h=b.x-e/l;b=b.y+d/l;
g=((c.x-g/m-h)*g-(c.y+f/m-b)*f)/(d*g-e*f);f=h+d*g-a.x;d=b+e*g-a.y;e=f*f+d*d;if(2>=e)return new y(f,d);e=Math.sqrt(e/2)}else a=!1,d>Number.EPSILON?f>Number.EPSILON&&(a=!0):d<-Number.EPSILON?f<-Number.EPSILON&&(a=!0):Math.sign(e)===Math.sign(g)&&(a=!0),a?(f=-e,e=Math.sqrt(h)):(f=d,d=e,e=Math.sqrt(h/2));return new y(f/e,d/e)}function h(a,b){for(N=a.length;0<=--N;){var c=N;var f=N-1;0>f&&(f=a.length-1);var g,h=w+2*E;for(g=0;g<h;g++){var l=X*g,m=X*(g+1),n=b+f+l,k=b+f+m;m=b+c+m;t(b+c+l);t(n);t(m);t(n);
t(k);t(m);l=e.length/3;l=B.generateSideWallUV(d,e,l-6,l-3,l-2,l-1);u(l[0]);u(l[1]);u(l[3]);u(l[1]);u(l[2]);u(l[3])}}}function l(a,b,c){z.push(a);z.push(b);z.push(c)}function k(a,b,c){t(a);t(b);t(c);a=e.length/3;a=B.generateTopUV(d,e,a-3,a-2,a-1);u(a[0]);u(a[1]);u(a[2])}function t(a){e.push(z[3*a]);e.push(z[3*a+1]);e.push(z[3*a+2])}function u(a){f.push(a.x);f.push(a.y)}var z=[],x=void 0!==b.curveSegments?b.curveSegments:12,w=void 0!==b.steps?b.steps:1,H=void 0!==b.depth?b.depth:100,C=void 0!==b.bevelEnabled?
b.bevelEnabled:!0,V=void 0!==b.bevelThickness?b.bevelThickness:6,Q=void 0!==b.bevelSize?b.bevelSize:V-2,E=void 0!==b.bevelSegments?b.bevelSegments:3,A=b.extrudePath,B=void 0!==b.UVGenerator?b.UVGenerator:Qg;void 0!==b.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),H=b.amount);var F=!1;if(A){var G=A.getSpacedPoints(w);F=!0;C=!1;var I=A.computeFrenetFrames(w,!1);var K=new p;var M=new p;var J=new p}C||(Q=V=E=0);var O;x=a.extractPoints(x);a=x.shape;var L=x.holes;
if(!Za.isClockWise(a)){a=a.reverse();var S=0;for(O=L.length;S<O;S++){var P=L[S];Za.isClockWise(P)&&(L[S]=P.reverse())}}var W=Za.triangulateShape(a,L),T=a;S=0;for(O=L.length;S<O;S++)P=L[S],a=a.concat(P);var R,X=a.length,Y,aa=W.length;x=[];var N=0;var da=T.length;var U=da-1;for(R=N+1;N<da;N++,U++,R++)U===da&&(U=0),R===da&&(R=0),x[N]=g(T[N],T[U],T[R]);A=[];var ca=x.concat();S=0;for(O=L.length;S<O;S++){P=L[S];var ba=[];N=0;da=P.length;U=da-1;for(R=N+1;N<da;N++,U++,R++)U===da&&(U=0),R===da&&(R=0),ba[N]=
g(P[N],P[U],P[R]);A.push(ba);ca=ca.concat(ba)}for(U=0;U<E;U++){da=U/E;var ea=V*Math.cos(da*Math.PI/2);R=Q*Math.sin(da*Math.PI/2);N=0;for(da=T.length;N<da;N++){var fa=c(T[N],x[N],R);l(fa.x,fa.y,-ea)}S=0;for(O=L.length;S<O;S++)for(P=L[S],ba=A[S],N=0,da=P.length;N<da;N++)fa=c(P[N],ba[N],R),l(fa.x,fa.y,-ea)}R=Q;for(N=0;N<X;N++)fa=C?c(a[N],ca[N],R):a[N],F?(M.copy(I.normals[0]).multiplyScalar(fa.x),K.copy(I.binormals[0]).multiplyScalar(fa.y),J.copy(G[0]).add(M).add(K),l(J.x,J.y,J.z)):l(fa.x,fa.y,0);for(da=
1;da<=w;da++)for(N=0;N<X;N++)fa=C?c(a[N],ca[N],R):a[N],F?(M.copy(I.normals[da]).multiplyScalar(fa.x),K.copy(I.binormals[da]).multiplyScalar(fa.y),J.copy(G[da]).add(M).add(K),l(J.x,J.y,J.z)):l(fa.x,fa.y,H/w*da);for(U=E-1;0<=U;U--){da=U/E;ea=V*Math.cos(da*Math.PI/2);R=Q*Math.sin(da*Math.PI/2);N=0;for(da=T.length;N<da;N++)fa=c(T[N],x[N],R),l(fa.x,fa.y,H+ea);S=0;for(O=L.length;S<O;S++)for(P=L[S],ba=A[S],N=0,da=P.length;N<da;N++)fa=c(P[N],ba[N],R),F?l(fa.x,fa.y+G[w-1].y,G[w-1].x+ea):l(fa.x,fa.y,H+ea)}(function(){var a=
e.length/3;if(C){var b=0*X;for(N=0;N<aa;N++)Y=W[N],k(Y[2]+b,Y[1]+b,Y[0]+b);b=X*(w+2*E);for(N=0;N<aa;N++)Y=W[N],k(Y[0]+b,Y[1]+b,Y[2]+b)}else{for(N=0;N<aa;N++)Y=W[N],k(Y[2],Y[1],Y[0]);for(N=0;N<aa;N++)Y=W[N],k(Y[0]+X*w,Y[1]+X*w,Y[2]+X*w)}d.addGroup(a,e.length/3-a,0)})();(function(){var a=e.length/3,b=0;h(T,b);b+=T.length;S=0;for(O=L.length;S<O;S++)P=L[S],h(P,b),b+=P.length;d.addGroup(a,e.length/3-a,1)})()}G.call(this);this.type="ExtrudeBufferGeometry";this.parameters={shapes:a,options:b};a=Array.isArray(a)?
a:[a];for(var d=this,e=[],f=[],g=0,h=a.length;g<h;g++)c(a[g]);this.addAttribute("position",new A(e,3));this.addAttribute("uv",new A(f,2));this.computeVertexNormals()}function gf(a,b,c){c.shapes=[];if(Array.isArray(a))for(var d=0,e=a.length;d<e;d++)c.shapes.push(a[d].uuid);else c.shapes.push(a.uuid);void 0!==b.extrudePath&&(c.options.extrudePath=b.extrudePath.toJSON());return c}function Wc(a,b){J.call(this);this.type="TextGeometry";this.parameters={text:a,parameters:b};this.fromBufferGeometry(new dc(a,
b));this.mergeVertices()}function dc(a,b){b=b||{};var c=b.font;if(!c||!c.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new J;a=c.generateShapes(a,b.size,b.curveSegments);b.depth=void 0!==b.height?b.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);Sa.call(this,a,b);this.type="TextBufferGeometry"}function Xc(a,b,c,d,e,f,g){J.call(this);this.type="SphereGeometry";
this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};this.fromBufferGeometry(new xb(a,b,c,d,e,f,g));this.mergeVertices()}function xb(a,b,c,d,e,f,g){G.call(this);this.type="SphereBufferGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};a=a||1;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);d=void 0!==d?d:0;e=void 0!==e?e:2*Math.PI;f=void 0!==f?f:0;g=void 0!==g?
g:Math.PI;var h=f+g,l,m,k=0,n=[],r=new p,q=new p,t=[],u=[],z=[],x=[];for(m=0;m<=c;m++){var w=[],H=m/c;for(l=0;l<=b;l++){var C=l/b;r.x=-a*Math.cos(d+C*e)*Math.sin(f+H*g);r.y=a*Math.cos(f+H*g);r.z=a*Math.sin(d+C*e)*Math.sin(f+H*g);u.push(r.x,r.y,r.z);q.set(r.x,r.y,r.z).normalize();z.push(q.x,q.y,q.z);x.push(C,1-H);w.push(k++)}n.push(w)}for(m=0;m<c;m++)for(l=0;l<b;l++)a=n[m][l+1],d=n[m][l],e=n[m+1][l],g=n[m+1][l+1],(0!==m||0<f)&&t.push(a,d,g),(m!==c-1||h<Math.PI)&&t.push(d,e,g);this.setIndex(t);this.addAttribute("position",
new A(u,3));this.addAttribute("normal",new A(z,3));this.addAttribute("uv",new A(x,2))}function Yc(a,b,c,d,e,f){J.call(this);this.type="RingGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};this.fromBufferGeometry(new ec(a,b,c,d,e,f));this.mergeVertices()}function ec(a,b,c,d,e,f){G.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};a=a||.5;b=b||
1;e=void 0!==e?e:0;f=void 0!==f?f:2*Math.PI;c=void 0!==c?Math.max(3,c):8;d=void 0!==d?Math.max(1,d):1;var g=[],h=[],l=[],m=[],k=a,n=(b-a)/d,r=new p,q=new y,t,u;for(t=0;t<=d;t++){for(u=0;u<=c;u++)a=e+u/c*f,r.x=k*Math.cos(a),r.y=k*Math.sin(a),h.push(r.x,r.y,r.z),l.push(0,0,1),q.x=(r.x/b+1)/2,q.y=(r.y/b+1)/2,m.push(q.x,q.y);k+=n}for(t=0;t<d;t++)for(b=t*(c+1),u=0;u<c;u++)a=u+b,e=a+c+1,f=a+c+2,k=a+1,g.push(a,e,k),g.push(e,f,k);this.setIndex(g);this.addAttribute("position",new A(h,3));this.addAttribute("normal",
new A(l,3));this.addAttribute("uv",new A(m,2))}function Zc(a,b,c,d){J.call(this);this.type="LatheGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};this.fromBufferGeometry(new fc(a,b,c,d));this.mergeVertices()}function fc(a,b,c,d){G.call(this);this.type="LatheBufferGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};b=Math.floor(b)||12;c=c||0;d=d||2*Math.PI;d=P.clamp(d,0,2*Math.PI);var e=[],f=[],g=[],h=1/b,l=new p,m=new y,k;for(k=0;k<=b;k++){var n=c+k*h*d;var r=
Math.sin(n),q=Math.cos(n);for(n=0;n<=a.length-1;n++)l.x=a[n].x*r,l.y=a[n].y,l.z=a[n].x*q,f.push(l.x,l.y,l.z),m.x=k/b,m.y=n/(a.length-1),g.push(m.x,m.y)}for(k=0;k<b;k++)for(n=0;n<a.length-1;n++)c=n+k*a.length,h=c+a.length,l=c+a.length+1,m=c+1,e.push(c,h,m),e.push(h,l,m);this.setIndex(e);this.addAttribute("position",new A(f,3));this.addAttribute("uv",new A(g,2));this.computeVertexNormals();if(d===2*Math.PI)for(d=this.attributes.normal.array,e=new p,f=new p,g=new p,c=b*a.length*3,n=k=0;k<a.length;k++,
n+=3)e.x=d[n+0],e.y=d[n+1],e.z=d[n+2],f.x=d[c+n+0],f.y=d[c+n+1],f.z=d[c+n+2],g.addVectors(e,f).normalize(),d[n+0]=d[c+n+0]=g.x,d[n+1]=d[c+n+1]=g.y,d[n+2]=d[c+n+2]=g.z}function yb(a,b){J.call(this);this.type="ShapeGeometry";"object"===typeof b&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),b=b.curveSegments);this.parameters={shapes:a,curveSegments:b};this.fromBufferGeometry(new zb(a,b));this.mergeVertices()}function zb(a,b){function c(a){var c,h=e.length/3;a=a.extractPoints(b);
var m=a.shape,k=a.holes;if(!1===Za.isClockWise(m))for(m=m.reverse(),a=0,c=k.length;a<c;a++){var v=k[a];!0===Za.isClockWise(v)&&(k[a]=v.reverse())}var p=Za.triangulateShape(m,k);a=0;for(c=k.length;a<c;a++)v=k[a],m=m.concat(v);a=0;for(c=m.length;a<c;a++)v=m[a],e.push(v.x,v.y,0),f.push(0,0,1),g.push(v.x,v.y);a=0;for(c=p.length;a<c;a++)m=p[a],d.push(m[0]+h,m[1]+h,m[2]+h),l+=3}G.call(this);this.type="ShapeBufferGeometry";this.parameters={shapes:a,curveSegments:b};b=b||12;var d=[],e=[],f=[],g=[],h=0,l=
0;if(!1===Array.isArray(a))c(a);else for(var m=0;m<a.length;m++)c(a[m]),this.addGroup(h,l,m),h+=l,l=0;this.setIndex(d);this.addAttribute("position",new A(e,3));this.addAttribute("normal",new A(f,3));this.addAttribute("uv",new A(g,2))}function hf(a,b){b.shapes=[];if(Array.isArray(a))for(var c=0,d=a.length;c<d;c++)b.shapes.push(a[c].uuid);else b.shapes.push(a.uuid);return b}function gc(a,b){G.call(this);this.type="EdgesGeometry";this.parameters={thresholdAngle:b};var c=[];b=Math.cos(P.DEG2RAD*(void 0!==
b?b:1));var d=[0,0],e={},f=["a","b","c"];if(a.isBufferGeometry){var g=new J;g.fromBufferGeometry(a)}else g=a.clone();g.mergeVertices();g.computeFaceNormals();a=g.vertices;g=g.faces;for(var h=0,l=g.length;h<l;h++)for(var m=g[h],k=0;3>k;k++){var n=m[f[k]];var r=m[f[(k+1)%3]];d[0]=Math.min(n,r);d[1]=Math.max(n,r);n=d[0]+","+d[1];void 0===e[n]?e[n]={index1:d[0],index2:d[1],face1:h,face2:void 0}:e[n].face2=h}for(n in e)if(d=e[n],void 0===d.face2||g[d.face1].normal.dot(g[d.face2].normal)<=b)f=a[d.index1],
c.push(f.x,f.y,f.z),f=a[d.index2],c.push(f.x,f.y,f.z);this.addAttribute("position",new A(c,3))}function Ab(a,b,c,d,e,f,g,h){J.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};this.fromBufferGeometry(new $a(a,b,c,d,e,f,g,h));this.mergeVertices()}function $a(a,b,c,d,e,f,g,h){function l(c){var e,f=new y,l=new p,v=0,u=!0===c?a:b,w=!0===c?1:-1;var A=t;for(e=1;e<=d;e++)n.push(0,z*w,0),r.push(0,
w,0),q.push(.5,.5),t++;var B=t;for(e=0;e<=d;e++){var F=e/d*h+g,G=Math.cos(F);F=Math.sin(F);l.x=u*F;l.y=z*w;l.z=u*G;n.push(l.x,l.y,l.z);r.push(0,w,0);f.x=.5*G+.5;f.y=.5*F*w+.5;q.push(f.x,f.y);t++}for(e=0;e<d;e++)f=A+e,l=B+e,!0===c?k.push(l,l+1,f):k.push(l+1,l,f),v+=3;m.addGroup(x,v,!0===c?1:2);x+=v}G.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};var m=this;a=void 0!==a?a:1;
b=void 0!==b?b:1;c=c||1;d=Math.floor(d)||8;e=Math.floor(e)||1;f=void 0!==f?f:!1;g=void 0!==g?g:0;h=void 0!==h?h:2*Math.PI;var k=[],n=[],r=[],q=[],t=0,u=[],z=c/2,x=0;(function(){var f,l,v=new p,y=new p,A=0,E=(b-a)/c;for(l=0;l<=e;l++){var F=[],B=l/e,G=B*(b-a)+a;for(f=0;f<=d;f++){var I=f/d,K=I*h+g,J=Math.sin(K);K=Math.cos(K);y.x=G*J;y.y=-B*c+z;y.z=G*K;n.push(y.x,y.y,y.z);v.set(J,E,K).normalize();r.push(v.x,v.y,v.z);q.push(I,1-B);F.push(t++)}u.push(F)}for(f=0;f<d;f++)for(l=0;l<e;l++)v=u[l+1][f],y=u[l+
1][f+1],E=u[l][f+1],k.push(u[l][f],v,E),k.push(v,y,E),A+=6;m.addGroup(x,A,0);x+=A})();!1===f&&(0<a&&l(!0),0<b&&l(!1));this.setIndex(k);this.addAttribute("position",new A(n,3));this.addAttribute("normal",new A(r,3));this.addAttribute("uv",new A(q,2))}function $c(a,b,c,d,e,f,g){Ab.call(this,0,a,b,c,d,e,f,g);this.type="ConeGeometry";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}function ad(a,b,c,d,e,f,g){$a.call(this,0,a,b,c,d,e,f,g);this.type=
"ConeBufferGeometry";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}function bd(a,b,c,d){J.call(this);this.type="CircleGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};this.fromBufferGeometry(new hc(a,b,c,d));this.mergeVertices()}function hc(a,b,c,d){G.call(this);this.type="CircleBufferGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};a=a||1;b=void 0!==b?Math.max(3,b):8;c=void 0!==c?c:
0;d=void 0!==d?d:2*Math.PI;var e=[],f=[],g=[],h=[],l,m=new p,k=new y;f.push(0,0,0);g.push(0,0,1);h.push(.5,.5);var n=0;for(l=3;n<=b;n++,l+=3){var r=c+n/b*d;m.x=a*Math.cos(r);m.y=a*Math.sin(r);f.push(m.x,m.y,m.z);g.push(0,0,1);k.x=(f[l]/a+1)/2;k.y=(f[l+1]/a+1)/2;h.push(k.x,k.y)}for(l=1;l<=b;l++)e.push(l,l+1,0);this.setIndex(e);this.addAttribute("position",new A(f,3));this.addAttribute("normal",new A(g,3));this.addAttribute("uv",new A(h,2))}function Bb(a){L.call(this);this.type="ShadowMaterial";this.color=
new K(0);this.transparent=!0;this.setValues(a)}function ic(a){Ea.call(this,a);this.type="RawShaderMaterial"}function Ta(a){L.call(this);this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new K(16777215);this.metalness=this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new K(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new y(1,1);this.displacementMap=
null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function Cb(a){Ta.call(this);this.defines={PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;this.clearCoatRoughness=this.clearCoat=0;this.setValues(a)}
function Ja(a){L.call(this);this.type="MeshPhongMaterial";this.color=new K(16777215);this.specular=new K(1118481);this.shininess=30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new K(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new y(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=
0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function Db(a){Ja.call(this);this.defines={TOON:""};this.type="MeshToonMaterial";this.gradientMap=null;this.setValues(a)}function Eb(a){L.call(this);this.type="MeshNormalMaterial";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new y(1,1);this.displacementMap=null;
this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1;this.setValues(a)}function Fb(a){L.call(this);this.type="MeshLambertMaterial";this.color=new K(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new K(0);this.emissiveIntensity=1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=0;this.reflectivity=
1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function Gb(a){T.call(this);this.type="LineDashedMaterial";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(a)}function ce(a,b,c){var d=this,e=!1,f=0,g=0,h=void 0;this.onStart=void 0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(a){g++;if(!1===e&&void 0!==d.onStart)d.onStart(a,
f,g);e=!0};this.itemEnd=function(a){f++;if(void 0!==d.onProgress)d.onProgress(a,f,g);if(f===g&&(e=!1,void 0!==d.onLoad))d.onLoad()};this.itemError=function(a){if(void 0!==d.onError)d.onError(a)};this.resolveURL=function(a){return h?h(a):a};this.setURLModifier=function(a){h=a;return this}}function Ka(a){this.manager=void 0!==a?a:wa}function jf(a){this.manager=void 0!==a?a:wa;this._parser=null}function de(a){this.manager=void 0!==a?a:wa;this._parser=null}function cd(a){this.manager=void 0!==a?a:wa}
function ee(a){this.manager=void 0!==a?a:wa}function yd(a){this.manager=void 0!==a?a:wa}function I(){this.type="Curve";this.arcLengthDivisions=200}function xa(a,b,c,d,e,f,g,h){I.call(this);this.type="EllipseCurve";this.aX=a||0;this.aY=b||0;this.xRadius=c||1;this.yRadius=d||1;this.aStartAngle=e||0;this.aEndAngle=f||2*Math.PI;this.aClockwise=g||!1;this.aRotation=h||0}function jc(a,b,c,d,e,f){xa.call(this,a,b,c,c,d,e,f);this.type="ArcCurve"}function fe(){var a=0,b=0,c=0,d=0;return{initCatmullRom:function(e,
f,g,h,l){e=l*(g-e);h=l*(h-f);a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},initNonuniformCatmullRom:function(e,f,g,h,l,m,k){e=((f-e)/l-(g-e)/(l+m)+(g-f)/m)*m;h=((g-f)/m-(h-f)/(m+k)+(h-g)/k)*m;a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},calc:function(e){var f=e*e;return a+b*e+c*f+d*f*e}}}function ra(a,b,c,d){I.call(this);this.type="CatmullRomCurve3";this.points=a||[];this.closed=b||!1;this.curveType=c||"centripetal";this.tension=d||.5}function kf(a,b,c,d,e){b=.5*(d-b);e=.5*(e-c);var f=a*a;return(2*c-2*d+b+e)*
a*f+(-3*c+3*d-2*b-e)*f+b*a+c}function dd(a,b,c,d){var e=1-a;return e*e*b+2*(1-a)*a*c+a*a*d}function ed(a,b,c,d,e){var f=1-a,g=1-a;return f*f*f*b+3*g*g*a*c+3*(1-a)*a*a*d+a*a*a*e}function La(a,b,c,d){I.call(this);this.type="CubicBezierCurve";this.v0=a||new y;this.v1=b||new y;this.v2=c||new y;this.v3=d||new y}function Ua(a,b,c,d){I.call(this);this.type="CubicBezierCurve3";this.v0=a||new p;this.v1=b||new p;this.v2=c||new p;this.v3=d||new p}function ya(a,b){I.call(this);this.type="LineCurve";this.v1=a||
new y;this.v2=b||new y}function Ma(a,b){I.call(this);this.type="LineCurve3";this.v1=a||new p;this.v2=b||new p}function Na(a,b,c){I.call(this);this.type="QuadraticBezierCurve";this.v0=a||new y;this.v1=b||new y;this.v2=c||new y}function Va(a,b,c){I.call(this);this.type="QuadraticBezierCurve3";this.v0=a||new p;this.v1=b||new p;this.v2=c||new p}function Oa(a){I.call(this);this.type="SplineCurve";this.points=a||[]}function ab(){I.call(this);this.type="CurvePath";this.curves=[];this.autoClose=!1}function Pa(a){ab.call(this);
this.type="Path";this.currentPoint=new y;a&&this.setFromPoints(a)}function jb(a){Pa.call(this,a);this.uuid=P.generateUUID();this.type="Shape";this.holes=[]}function ba(a,b){B.call(this);this.type="Light";this.color=new K(a);this.intensity=void 0!==b?b:1;this.receiveShadow=void 0}function zd(a,b,c){ba.call(this,a,c);this.type="HemisphereLight";this.castShadow=void 0;this.position.copy(B.DefaultUp);this.updateMatrix();this.groundColor=new K(b)}function Hb(a){this.camera=a;this.bias=0;this.radius=1;
this.mapSize=new y(512,512);this.map=null;this.matrix=new F}function Ad(){Hb.call(this,new ea(50,1,.5,500))}function Bd(a,b,c,d,e,f){ba.call(this,a,b);this.type="SpotLight";this.position.copy(B.DefaultUp);this.updateMatrix();this.target=new B;Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(a){this.intensity=a/Math.PI}});this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.penumbra=void 0!==e?e:0;this.decay=void 0!==f?f:1;this.shadow=new Ad}
function Cd(a,b,c,d){ba.call(this,a,b);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(a){this.intensity=a/(4*Math.PI)}});this.distance=void 0!==c?c:0;this.decay=void 0!==d?d:1;this.shadow=new Hb(new ea(90,1,.5,500))}function Dd(){Hb.call(this,new Mb(-5,5,5,-5,.5,500))}function Ed(a,b){ba.call(this,a,b);this.type="DirectionalLight";this.position.copy(B.DefaultUp);this.updateMatrix();this.target=new B;this.shadow=new Dd}function Fd(a,
b){ba.call(this,a,b);this.type="AmbientLight";this.castShadow=void 0}function Gd(a,b,c,d){ba.call(this,a,b);this.type="RectAreaLight";this.width=void 0!==c?c:10;this.height=void 0!==d?d:10}function Hd(a,b,c,d){ja.call(this,a,b,c,d)}function Id(a,b,c){ja.call(this,a,b,c)}function ua(a,b,c,d){this.parameterPositions=a;this._cachedIndex=0;this.resultBuffer=void 0!==d?d:new b.constructor(c);this.sampleValues=b;this.valueSize=c}function Jd(a,b,c,d){ua.call(this,a,b,c,d)}function fd(a,b,c,d){ja.call(this,
a,b,c,d)}function Kd(a,b,c,d){ja.call(this,a,b,c,d)}function kc(a,b,c,d){ja.call(this,a,b,c,d)}function Ld(a,b,c,d){ua.call(this,a,b,c,d);this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function gd(a,b,c,d){ua.call(this,a,b,c,d)}function Md(a,b,c,d){ua.call(this,a,b,c,d)}function ja(a,b,c,d){if(void 0===a)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===b||0===b.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+a);this.name=a;this.times=
sa.convertArray(b,this.TimeBufferType);this.values=sa.convertArray(c,this.ValueBufferType);this.setInterpolation(d||this.DefaultInterpolation);this.validate();this.optimize()}function lc(a,b,c,d){ja.call(this,a,b,c,d)}function Fa(a,b,c){this.name=a;this.tracks=c;this.duration=void 0!==b?b:-1;this.uuid=P.generateUUID();0>this.duration&&this.resetDuration();this.optimize()}function Nd(a){this.manager=void 0!==a?a:wa;this.textures={}}function ge(a){this.manager=void 0!==a?a:wa}function mc(){}function he(a){"boolean"===
typeof a&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),a=void 0);this.manager=void 0!==a?a:wa;this.withCredentials=!1}function lf(a){this.manager=void 0!==a?a:wa;this.texturePath=""}function ie(a){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");this.manager=void 0!==a?a:wa;this.options=void 0}function je(){this.type=
"ShapePath";this.color=new K;this.subPaths=[];this.currentPath=null}function ke(a){this.type="Font";this.data=a}function mf(a){this.manager=void 0!==a?a:wa}function le(a){this.manager=void 0!==a?a:wa}function nf(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new ea;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new ea;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1}function hd(a,b,c){B.call(this);this.type="CubeCamera";var d=new ea(90,
1,a,b);d.up.set(0,-1,0);d.lookAt(new p(1,0,0));this.add(d);var e=new ea(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new p(-1,0,0));this.add(e);var f=new ea(90,1,a,b);f.up.set(0,0,1);f.lookAt(new p(0,1,0));this.add(f);var g=new ea(90,1,a,b);g.up.set(0,0,-1);g.lookAt(new p(0,-1,0));this.add(g);var h=new ea(90,1,a,b);h.up.set(0,-1,0);h.lookAt(new p(0,0,1));this.add(h);var l=new ea(90,1,a,b);l.up.set(0,-1,0);l.lookAt(new p(0,0,-1));this.add(l);this.renderTarget=new Lb(c,c,{format:1022,magFilter:1006,minFilter:1006});
this.renderTarget.texture.name="CubeCamera";this.update=function(a,b){null===this.parent&&this.updateMatrixWorld();var c=this.renderTarget,m=c.texture.generateMipmaps;c.texture.generateMipmaps=!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=2;a.render(b,f,c);c.activeCubeFace=3;a.render(b,g,c);c.activeCubeFace=4;a.render(b,h,c);c.texture.generateMipmaps=m;c.activeCubeFace=5;a.render(b,l,c);a.setRenderTarget(null)};this.clear=function(a,b,c,d){for(var e=this.renderTarget,
f=0;6>f;f++)e.activeCubeFace=f,a.setRenderTarget(e),a.clear(b,c,d);a.setRenderTarget(null)}}function me(){B.call(this);this.type="AudioListener";this.context=ne.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null}function nc(a){B.call(this);this.type="Audio";this.context=a.context;this.gain=this.context.createGain();this.gain.connect(a.getInput());this.autoplay=!1;this.buffer=null;this.loop=!1;this.offset=this.startTime=0;this.playbackRate=
1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType="empty";this.filters=[]}function oe(a){nc.call(this,a);this.panner=this.context.createPanner();this.panner.connect(this.gain)}function pe(a,b){this.analyser=a.context.createAnalyser();this.analyser.fftSize=void 0!==b?b:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);a.getOutput().connect(this.analyser)}function qe(a,b,c){this.binding=a;this.valueSize=c;a=Float64Array;switch(b){case "quaternion":b=this._slerp;break;case "string":case "bool":a=
Array;b=this._select;break;default:b=this._lerp}this.buffer=new a(4*c);this._mixBufferRegion=b;this.referenceCount=this.useCount=this.cumulativeWeight=0}function of(a,b,c){c=c||oa.parseTrackName(b);this._targetGroup=a;this._bindings=a.subscribe_(b,c)}function oa(a,b,c){this.path=b;this.parsedPath=c||oa.parseTrackName(b);this.node=oa.findNode(a,this.parsedPath.nodeName)||a;this.rootNode=a}function pf(){this.uuid=P.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=
0;var a={};this._indicesByUUID=a;for(var b=0,c=arguments.length;b!==c;++b)a[arguments[b].uuid]=b;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var d=this;this.stats={objects:{get total(){return d._objects.length},get inUse(){return this.total-d.nCachedObjects_}},get bindingsPerObject(){return d._bindings.length}}}function qf(a,b,c){this._mixer=a;this._clip=b;this._localRoot=c||null;a=b.tracks;b=a.length;c=Array(b);for(var d={endingStart:2400,endingEnd:2400},
e=0;e!==b;++e){var f=a[e].createInterpolant(null);c[e]=f;f.settings=d}this._interpolantSettings=d;this._interpolants=c;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=2201;this._loopCount=-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=
!0}function re(a){this._root=a;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1}function Od(a,b){"string"===typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=b);this.value=a}function se(){G.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0}function te(a,b,c,d){this.data=a;this.itemSize=b;this.offset=c;this.normalized=!0===d}function oc(a,b){this.array=a;this.stride=b;this.count=void 0!==a?a.length/b:0;this.dynamic=!1;this.updateRange=
{offset:0,count:-1};this.version=0}function ue(a,b,c){oc.call(this,a,b);this.meshPerAttribute=c||1}function ve(a,b,c){O.call(this,a,b);this.meshPerAttribute=c||1}function rf(a,b,c,d){this.ray=new sb(a,b);this.near=c||0;this.far=d||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})}function sf(a,b){return a.distance-
b.distance}function we(a,b,c,d){if(!1!==a.visible&&(a.raycast(b,c),!0===d)){a=a.children;d=0;for(var e=a.length;d<e;d++)we(a[d],b,c,!0)}}function tf(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1}function uf(a,b,c){this.radius=void 0!==a?a:1;this.phi=void 0!==b?b:0;this.theta=void 0!==c?c:0;return this}function vf(a,b,c){this.radius=void 0!==a?a:1;this.theta=void 0!==b?b:0;this.y=void 0!==c?c:0;return this}function xe(a,b){this.min=void 0!==a?a:new y(Infinity,
Infinity);this.max=void 0!==b?b:new y(-Infinity,-Infinity)}function id(a){B.call(this);this.material=a;this.render=function(){}}function jd(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16711680;d=void 0!==d?d:1;b=0;(c=this.object.geometry)&&c.isGeometry?b=3*c.faces.length:c&&c.isBufferGeometry&&(b=c.attributes.normal.count);c=new G;b=new A(6*b,3);c.addAttribute("position",b);aa.call(this,c,new T({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()}function pc(a,b){B.call(this);
this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=b;a=new G;b=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var c=0,d=1;32>c;c++,d++){var e=c/32*Math.PI*2,f=d/32*Math.PI*2;b.push(Math.cos(e),Math.sin(e),1,Math.cos(f),Math.sin(f),1)}a.addAttribute("position",new A(b,3));b=new T({fog:!1});this.cone=new aa(a,b);this.add(this.cone);this.update()}function wf(a){var b=[];a&&a.isBone&&b.push(a);for(var c=0;c<a.children.length;c++)b.push.apply(b,
wf(a.children[c]));return b}function qc(a){for(var b=wf(a),c=new G,d=[],e=[],f=new K(0,0,1),g=new K(0,1,0),h=0;h<b.length;h++){var l=b[h];l.parent&&l.parent.isBone&&(d.push(0,0,0),d.push(0,0,0),e.push(f.r,f.g,f.b),e.push(g.r,g.g,g.b))}c.addAttribute("position",new A(d,3));c.addAttribute("color",new A(e,3));d=new T({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});aa.call(this,c,d);this.root=a;this.bones=b;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1}function rc(a,b,c){this.light=a;
this.light.updateMatrixWorld();this.color=c;a=new xb(b,4,2);b=new ka({wireframe:!0,fog:!1});pa.call(this,a,b);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1;this.update()}function sc(a,b){B.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=b;a=new T({fog:!1});b=new G;b.addAttribute("position",new O(new Float32Array(15),3));this.line=new ma(b,a);this.add(this.line);this.update()}function tc(a,b,c){B.call(this);this.light=
a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;a=new ub(b);a.rotateY(.5*Math.PI);this.material=new ka({wireframe:!0,fog:!1});void 0===this.color&&(this.material.vertexColors=2);b=a.getAttribute("position");b=new Float32Array(3*b.count);a.addAttribute("color",new O(b,3));this.add(new pa(a,this.material));this.update()}function kd(a,b,c,d){a=a||10;b=b||10;c=new K(void 0!==c?c:4473924);d=new K(void 0!==d?d:8947848);var e=b/2,f=a/b,g=a/2;a=[];for(var h=
[],l=0,m=0,k=-g;l<=b;l++,k+=f){a.push(-g,0,k,g,0,k);a.push(k,0,-g,k,0,g);var n=l===e?c:d;n.toArray(h,m);m+=3;n.toArray(h,m);m+=3;n.toArray(h,m);m+=3;n.toArray(h,m);m+=3}b=new G;b.addAttribute("position",new A(a,3));b.addAttribute("color",new A(h,3));c=new T({vertexColors:2});aa.call(this,b,c)}function Pd(a,b,c,d,e,f){a=a||10;b=b||16;c=c||8;d=d||64;e=new K(void 0!==e?e:4473924);f=new K(void 0!==f?f:8947848);var g=[],h=[],l;for(l=0;l<=b;l++){var m=l/b*2*Math.PI;var k=Math.sin(m)*a;m=Math.cos(m)*a;g.push(0,
0,0);g.push(k,0,m);var n=l&1?e:f;h.push(n.r,n.g,n.b);h.push(n.r,n.g,n.b)}for(l=0;l<=c;l++){n=l&1?e:f;var r=a-a/c*l;for(b=0;b<d;b++)m=b/d*2*Math.PI,k=Math.sin(m)*r,m=Math.cos(m)*r,g.push(k,0,m),h.push(n.r,n.g,n.b),m=(b+1)/d*2*Math.PI,k=Math.sin(m)*r,m=Math.cos(m)*r,g.push(k,0,m),h.push(n.r,n.g,n.b)}a=new G;a.addAttribute("position",new A(g,3));a.addAttribute("color",new A(h,3));g=new T({vertexColors:2});aa.call(this,a,g)}function ld(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16776960;
d=void 0!==d?d:1;b=0;(c=this.object.geometry)&&c.isGeometry?b=c.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");c=new G;b=new A(6*b,3);c.addAttribute("position",b);aa.call(this,c,new T({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()}function uc(a,b,c){B.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;void 0===b&&(b=1);a=new G;a.addAttribute("position",
new A([-b,b,0,b,b,0,b,-b,0,-b,-b,0,-b,b,0],3));b=new T({fog:!1});this.lightPlane=new ma(a,b);this.add(this.lightPlane);a=new G;a.addAttribute("position",new A([0,0,0,0,0,1],3));this.targetLine=new ma(a,b);this.add(this.targetLine);this.update()}function md(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){f.push(0,0,0);g.push(b.r,b.g,b.b);void 0===h[a]&&(h[a]=[]);h[a].push(f.length/3-1)}var d=new G,e=new T({color:16777215,vertexColors:1}),f=[],g=[],h={},l=new K(16755200),m=new K(16711680),k=new K(43775),
n=new K(16777215),r=new K(3355443);b("n1","n2",l);b("n2","n4",l);b("n4","n3",l);b("n3","n1",l);b("f1","f2",l);b("f2","f4",l);b("f4","f3",l);b("f3","f1",l);b("n1","f1",l);b("n2","f2",l);b("n3","f3",l);b("n4","f4",l);b("p","n1",m);b("p","n2",m);b("p","n3",m);b("p","n4",m);b("u1","u2",k);b("u2","u3",k);b("u3","u1",k);b("c","t",n);b("p","c",r);b("cn1","cn2",r);b("cn3","cn4",r);b("cf1","cf2",r);b("cf3","cf4",r);d.addAttribute("position",new A(f,3));d.addAttribute("color",new A(g,3));aa.call(this,d,e);
this.camera=a;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=h;this.update()}function Ib(a,b){this.object=a;void 0===b&&(b=16776960);a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var c=new Float32Array(24),d=new G;d.setIndex(new O(a,1));d.addAttribute("position",new O(c,3));aa.call(this,d,new T({color:b}));this.matrixAutoUpdate=!1;this.update()}function nd(a,b){this.type="Box3Helper";
this.box=a;a=void 0!==b?b:16776960;b=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var c=new G;c.setIndex(new O(b,1));c.addAttribute("position",new A([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));aa.call(this,c,new T({color:a}));this.geometry.computeBoundingSphere()}function od(a,b,c){this.type="PlaneHelper";this.plane=a;this.size=void 0===b?1:b;a=void 0!==c?c:16776960;b=new G;b.addAttribute("position",new A([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,
1,1,1,1,0,0,1,0,0,0],3));b.computeBoundingSphere();ma.call(this,b,new T({color:a}));b=new G;b.addAttribute("position",new A([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));b.computeBoundingSphere();this.add(new pa(b,new ka({color:a,opacity:.2,transparent:!0,depthWrite:!1})))}function Jb(a,b,c,d,e,f){B.call(this);void 0===d&&(d=16776960);void 0===c&&(c=1);void 0===e&&(e=.2*c);void 0===f&&(f=.2*e);void 0===Qd&&(Qd=new G,Qd.addAttribute("position",new A([0,0,0,0,1,0],3)),ye=new $a(0,.5,1,5,1),ye.translate(0,
-.5,0));this.position.copy(b);this.line=new ma(Qd,new T({color:d}));this.line.matrixAutoUpdate=!1;this.add(this.line);this.cone=new pa(ye,new ka({color:d}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(a);this.setLength(c,e,f)}function pd(a){a=a||1;var b=[0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a];a=new G;a.addAttribute("position",new A(b,3));a.addAttribute("color",new A([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));b=new T({vertexColors:2});aa.call(this,a,b)}function xf(a){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");
ra.call(this,a);this.type="catmullrom";this.closed=!0}function yf(a){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");ra.call(this,a);this.type="catmullrom"}function ze(a){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");ra.call(this,a);this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Number.isInteger&&(Number.isInteger=function(a){return"number"===typeof a&&isFinite(a)&&Math.floor(a)===
a});void 0===Math.sign&&(Math.sign=function(a){return 0>a?-1:0<a?1:+a});!1==="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});void 0===Object.assign&&function(){Object.assign=function(a){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(void 0!==d&&null!==d)for(var e in d)Object.prototype.hasOwnProperty.call(d,
e)&&(b[e]=d[e])}return b}}();Object.assign(ha.prototype,{addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)},removeEventListener:function(a,b){void 0!==this._listeners&&(a=this._listeners[a],void 0!==a&&(b=a.indexOf(b),-1!==b&&a.splice(b,1)))},dispatchEvent:function(a){if(void 0!==
this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;b=b.slice(0);for(var c=0,d=b.length;c<d;c++)b[c].call(this,a)}}}});var P={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var a=[],b=0;256>b;b++)a[b]=(16>b?"0":"")+b.toString(16);return function(){var b=4294967295*Math.random()|0,d=4294967295*Math.random()|0,e=4294967295*Math.random()|0,f=4294967295*Math.random()|0;return(a[b&255]+a[b>>8&255]+a[b>>16&255]+a[b>>24&255]+"-"+a[d&255]+a[d>>8&255]+"-"+a[d>>
16&15|64]+a[d>>24&255]+"-"+a[e&63|128]+a[e>>8&255]+"-"+a[e>>16&255]+a[e>>24&255]+a[f&255]+a[f>>8&255]+a[f>>16&255]+a[f>>24&255]).toUpperCase()}}(),clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},euclideanModulo:function(a,b){return(a%b+b)%b},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},lerp:function(a,b,c){return(1-c)*a+c*b},smoothstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;
a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(a){return a*P.DEG2RAD},radToDeg:function(a){return a*P.RAD2DEG},isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},ceilPowerOfTwo:function(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},floorPowerOfTwo:function(a){return Math.pow(2,Math.floor(Math.log(a)/
Math.LN2))}};Object.defineProperties(y.prototype,{width:{get:function(){return this.x},set:function(a){this.x=a}},height:{get:function(){return this.y},set:function(a){this.y=a}}});Object.assign(y.prototype,{isVector2:!0,set:function(a,b){this.x=a;this.y=b;return this},setScalar:function(a){this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+
a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},
addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=
a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},applyMatrix3:function(a){var b=this.x,c=this.y;a=a.elements;this.x=a[0]*b+a[3]*c+a[6];this.y=a[1]*b+a[4]*c+a[7];return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},clamp:function(a,
b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},clampScalar:function(){var a=new y,b=new y;return function(c,d){a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=
Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||
1)},angle:function(){var a=Math.atan2(this.y,this.x);0>a&&(a+=2*Math.PI);return a},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},manhattanDistanceTo:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,
a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);return this},rotateAround:function(a,b){var c=Math.cos(b);b=Math.sin(b);var d=
this.x-a.x,e=this.y-a.y;this.x=d*c-e*b+a.x;this.y=d*b+e*c+a.y;return this}});Object.assign(F.prototype,{isMatrix4:!0,set:function(a,b,c,d,e,f,g,h,l,m,k,n,r,q,t,p){var v=this.elements;v[0]=a;v[4]=b;v[8]=c;v[12]=d;v[1]=e;v[5]=f;v[9]=g;v[13]=h;v[2]=l;v[6]=m;v[10]=k;v[14]=n;v[3]=r;v[7]=q;v[11]=t;v[15]=p;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new F).fromArray(this.elements)},copy:function(a){var b=this.elements;a=a.elements;b[0]=
a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return this},copyPosition:function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function(a,b,c){a.setFromMatrixColumn(this,0);b.setFromMatrixColumn(this,1);c.setFromMatrixColumn(this,2);return this},makeBasis:function(a,b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,
1);return this},extractRotation:function(){var a=new p;return function(b){var c=this.elements,d=b.elements,e=1/a.setFromMatrixColumn(b,0).length(),f=1/a.setFromMatrixColumn(b,1).length();b=1/a.setFromMatrixColumn(b,2).length();c[0]=d[0]*e;c[1]=d[1]*e;c[2]=d[2]*e;c[3]=0;c[4]=d[4]*f;c[5]=d[5]*f;c[6]=d[6]*f;c[7]=0;c[8]=d[8]*b;c[9]=d[9]*b;c[10]=d[10]*b;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return this}}(),makeRotationFromEuler:function(a){a&&a.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
var b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c);c=Math.sin(c);var g=Math.cos(d);d=Math.sin(d);var h=Math.cos(e);e=Math.sin(e);if("XYZ"===a.order){a=f*h;var l=f*e,m=c*h,k=c*e;b[0]=g*h;b[4]=-g*e;b[8]=d;b[1]=l+m*d;b[5]=a-k*d;b[9]=-c*g;b[2]=k-a*d;b[6]=m+l*d;b[10]=f*g}else"YXZ"===a.order?(a=g*h,l=g*e,m=d*h,k=d*e,b[0]=a+k*c,b[4]=m*c-l,b[8]=f*d,b[1]=f*e,b[5]=f*h,b[9]=-c,b[2]=l*c-m,b[6]=k+a*c,b[10]=f*g):"ZXY"===a.order?(a=g*h,l=g*e,m=d*h,k=d*e,b[0]=a-k*c,b[4]=-f*e,b[8]=m+l*c,b[1]=l+m*c,b[5]=f*h,b[9]=
k-a*c,b[2]=-f*d,b[6]=c,b[10]=f*g):"ZYX"===a.order?(a=f*h,l=f*e,m=c*h,k=c*e,b[0]=g*h,b[4]=m*d-l,b[8]=a*d+k,b[1]=g*e,b[5]=k*d+a,b[9]=l*d-m,b[2]=-d,b[6]=c*g,b[10]=f*g):"YZX"===a.order?(a=f*g,l=f*d,m=c*g,k=c*d,b[0]=g*h,b[4]=k-a*e,b[8]=m*e+l,b[1]=e,b[5]=f*h,b[9]=-c*h,b[2]=-d*h,b[6]=l*e+m,b[10]=a-k*e):"XZY"===a.order&&(a=f*g,l=f*d,m=c*g,k=c*d,b[0]=g*h,b[4]=-e,b[8]=d*h,b[1]=a*e+k,b[5]=f*h,b[9]=l*e-m,b[2]=m*e-l,b[6]=c*h,b[10]=k*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},makeRotationFromQuaternion:function(){var a=
new p(0,0,0),b=new p(1,1,1);return function(c){return this.compose(a,c,b)}}(),lookAt:function(){var a=new p,b=new p,c=new p;return function(d,e,f){var g=this.elements;c.subVectors(d,e);0===c.lengthSq()&&(c.z=1);c.normalize();a.crossVectors(f,c);0===a.lengthSq()&&(1===Math.abs(f.z)?c.x+=1E-4:c.z+=1E-4,c.normalize(),a.crossVectors(f,c));a.normalize();b.crossVectors(c,a);g[0]=a.x;g[4]=b.x;g[8]=c.x;g[1]=a.y;g[5]=b.y;g[9]=c.y;g[2]=a.z;g[6]=b.z;g[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==
b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements;b=this.elements;a=c[0];var e=c[4],f=c[8],g=c[12],h=c[1],l=c[5],m=c[9],k=c[13],n=c[2],r=c[6],q=c[10],t=c[14],p=c[3],z=c[7],x=c[11];c=c[15];var w=d[0],y=d[4],C=d[8],A=d[12],Q=d[1],E=d[5],F=d[9],B=d[13],G=d[2],
I=d[6],K=d[10],J=d[14],L=d[3],M=d[7],O=d[11];d=d[15];b[0]=a*w+e*Q+f*G+g*L;b[4]=a*y+e*E+f*I+g*M;b[8]=a*C+e*F+f*K+g*O;b[12]=a*A+e*B+f*J+g*d;b[1]=h*w+l*Q+m*G+k*L;b[5]=h*y+l*E+m*I+k*M;b[9]=h*C+l*F+m*K+k*O;b[13]=h*A+l*B+m*J+k*d;b[2]=n*w+r*Q+q*G+t*L;b[6]=n*y+r*E+q*I+t*M;b[10]=n*C+r*F+q*K+t*O;b[14]=n*A+r*B+q*J+t*d;b[3]=p*w+z*Q+x*G+c*L;b[7]=p*y+z*E+x*I+c*M;b[11]=p*C+z*F+x*K+c*O;b[15]=p*A+z*B+x*J+c*d;return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=
a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},applyToBufferAttribute:function(){var a=new p;return function(b){for(var c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix4(this),b.setXYZ(c,a.x,a.y,a.z);return b}}(),determinant:function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],l=a[13],m=a[2],k=a[6],n=a[10],r=a[14];return a[3]*(+e*h*k-d*l*k-e*g*n+c*l*n+d*g*r-c*h*r)+a[7]*(+b*h*r-b*l*n+e*f*n-
d*f*r+d*l*m-e*h*m)+a[11]*(+b*l*k-b*g*r-e*f*k+c*f*r+e*g*m-c*l*m)+a[15]*(-d*g*m-b*h*k+b*g*n+d*f*k-c*f*n+c*h*m)},transpose:function(){var a=this.elements;var b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,d=a.elements;a=d[0];var e=d[1],f=d[2],g=d[3],h=d[4],
l=d[5],m=d[6],k=d[7],n=d[8],r=d[9],q=d[10],t=d[11],p=d[12],z=d[13],x=d[14];d=d[15];var w=r*x*k-z*q*k+z*m*t-l*x*t-r*m*d+l*q*d,y=p*q*k-n*x*k-p*m*t+h*x*t+n*m*d-h*q*d,C=n*z*k-p*r*k+p*l*t-h*z*t-n*l*d+h*r*d,A=p*r*m-n*z*m-p*l*q+h*z*q+n*l*x-h*r*x,Q=a*w+e*y+f*C+g*A;if(0===Q){if(!0===b)throw Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");console.warn("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return this.identity()}b=1/Q;c[0]=w*b;c[1]=(z*q*g-r*x*g-z*f*
t+e*x*t+r*f*d-e*q*d)*b;c[2]=(l*x*g-z*m*g+z*f*k-e*x*k-l*f*d+e*m*d)*b;c[3]=(r*m*g-l*q*g-r*f*k+e*q*k+l*f*t-e*m*t)*b;c[4]=y*b;c[5]=(n*x*g-p*q*g+p*f*t-a*x*t-n*f*d+a*q*d)*b;c[6]=(p*m*g-h*x*g-p*f*k+a*x*k+h*f*d-a*m*d)*b;c[7]=(h*q*g-n*m*g+n*f*k-a*q*k-h*f*t+a*m*t)*b;c[8]=C*b;c[9]=(p*r*g-n*z*g-p*e*t+a*z*t+n*e*d-a*r*d)*b;c[10]=(h*z*g-p*l*g+p*e*k-a*z*k-h*e*d+a*l*d)*b;c[11]=(n*l*g-h*r*g-n*e*k+a*r*k+h*e*t-a*l*t)*b;c[12]=A*b;c[13]=(n*z*f-p*r*f+p*e*q-a*z*q-n*e*x+a*r*x)*b;c[14]=(p*l*f-h*z*f-p*e*m+a*z*m+h*e*x-a*l*x)*
b;c[15]=(h*r*f-n*l*f+n*e*m-a*r*m-h*e*q+a*l*q)*b;return this},scale:function(a){var b=this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=
Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=Math.cos(b);b=Math.sin(b);var d=1-c,e=a.x,f=a.y;a=a.z;var g=d*e,h=d*f;this.set(g*e+c,g*f-b*a,g*a+b*f,0,g*f+b*a,h*f+c,h*a-b*e,0,g*a-b*f,h*a+b*e,d*a*a+c,0,0,
0,0,1);return this},makeScale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},makeShear:function(a,b,c){this.set(1,b,c,0,a,1,c,0,a,b,1,0,0,0,0,1);return this},compose:function(a,b,c){var d=this.elements,e=b._x,f=b._y,g=b._z,h=b._w,l=e+e,m=f+f,k=g+g;b=e*l;var n=e*m;e*=k;var r=f*m;f*=k;g*=k;l*=h;m*=h;h*=k;k=c.x;var q=c.y;c=c.z;d[0]=(1-(r+g))*k;d[1]=(n+h)*k;d[2]=(e-m)*k;d[3]=0;d[4]=(n-h)*q;d[5]=(1-(b+g))*q;d[6]=(f+l)*q;d[7]=0;d[8]=(e+m)*c;d[9]=(f-l)*c;d[10]=(1-(b+r))*c;d[11]=0;
d[12]=a.x;d[13]=a.y;d[14]=a.z;d[15]=1;return this},decompose:function(){var a=new p,b=new F;return function(c,d,e){var f=this.elements,g=a.set(f[0],f[1],f[2]).length(),h=a.set(f[4],f[5],f[6]).length(),l=a.set(f[8],f[9],f[10]).length();0>this.determinant()&&(g=-g);c.x=f[12];c.y=f[13];c.z=f[14];b.copy(this);c=1/g;f=1/h;var m=1/l;b.elements[0]*=c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=f;b.elements[5]*=f;b.elements[6]*=f;b.elements[8]*=m;b.elements[9]*=m;b.elements[10]*=m;d.setFromRotationMatrix(b);
e.x=g;e.y=h;e.z=l;return this}}(),makePerspective:function(a,b,c,d,e,f){void 0===f&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var g=this.elements;g[0]=2*e/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*e/(c-d);g[9]=(c+d)/(c-d);g[13]=0;g[2]=0;g[6]=0;g[10]=-(f+e)/(f-e);g[14]=-2*f*e/(f-e);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this},makeOrthographic:function(a,b,c,d,e,f){var g=this.elements,h=1/(b-a),l=1/(c-d),m=1/(f-e);g[0]=
2*h;g[4]=0;g[8]=0;g[12]=-((b+a)*h);g[1]=0;g[5]=2*l;g[9]=0;g[13]=-((c+d)*l);g[2]=0;g[6]=0;g[10]=-2*m;g[14]=-((f+e)*m);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;16>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];
a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a}});Object.assign(X,{slerp:function(a,b,c,d){return c.copy(a).slerp(b,d)},slerpFlat:function(a,b,c,d,e,f,g){var h=c[d+0],l=c[d+1],m=c[d+2];c=c[d+3];d=e[f+0];var k=e[f+1],n=e[f+2];e=e[f+3];if(c!==e||h!==d||l!==k||m!==n){f=1-g;var r=h*d+l*k+m*n+c*e,q=0<=r?1:-1,p=1-r*r;p>Number.EPSILON&&(p=Math.sqrt(p),r=Math.atan2(p,r*q),f=Math.sin(f*r)/p,g=Math.sin(g*
r)/p);q*=g;h=h*f+d*q;l=l*f+k*q;m=m*f+n*q;c=c*f+e*q;f===1-g&&(g=1/Math.sqrt(h*h+l*l+m*m+c*c),h*=g,l*=g,m*=g,c*=g)}a[b]=h;a[b+1]=l;a[b+2]=m;a[b+3]=c}});Object.defineProperties(X.prototype,{x:{get:function(){return this._x},set:function(a){this._x=a;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(a){this._y=a;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(a){this._z=a;this.onChangeCallback()}},w:{get:function(){return this._w},set:function(a){this._w=
a;this.onChangeCallback()}}});Object.assign(X.prototype,{set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!a||!a.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var c=a._x,
d=a._y,e=a._z;a=a.order;var f=Math.cos,g=Math.sin,h=f(c/2),l=f(d/2);f=f(e/2);c=g(c/2);d=g(d/2);e=g(e/2);"XYZ"===a?(this._x=c*l*f+h*d*e,this._y=h*d*f-c*l*e,this._z=h*l*e+c*d*f,this._w=h*l*f-c*d*e):"YXZ"===a?(this._x=c*l*f+h*d*e,this._y=h*d*f-c*l*e,this._z=h*l*e-c*d*f,this._w=h*l*f+c*d*e):"ZXY"===a?(this._x=c*l*f-h*d*e,this._y=h*d*f+c*l*e,this._z=h*l*e+c*d*f,this._w=h*l*f-c*d*e):"ZYX"===a?(this._x=c*l*f-h*d*e,this._y=h*d*f+c*l*e,this._z=h*l*e-c*d*f,this._w=h*l*f+c*d*e):"YZX"===a?(this._x=c*l*f+h*d*
e,this._y=h*d*f+c*l*e,this._z=h*l*e-c*d*f,this._w=h*l*f-c*d*e):"XZY"===a&&(this._x=c*l*f-h*d*e,this._y=h*d*f-c*l*e,this._z=h*l*e+c*d*f,this._w=h*l*f+c*d*e);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,b){b/=2;var c=Math.sin(b);this._x=a.x*c;this._y=a.y*c;this._z=a.z*c;this._w=Math.cos(b);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],f=b[5],g=b[9],h=b[2],l=b[6];b=b[10];var m=c+f+b;0<m?(c=.5/Math.sqrt(m+
1),this._w=.25/c,this._x=(l-g)*c,this._y=(d-h)*c,this._z=(e-a)*c):c>f&&c>b?(c=2*Math.sqrt(1+c-f-b),this._w=(l-g)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+h)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=.25*c,this._z=(g+l)/c):(c=2*Math.sqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(g+l)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a=new p,b;return function(c,d){void 0===a&&(a=new p);b=c.dot(d)+1;1E-6>b?(b=0,Math.abs(c.x)>
Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;return this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+
this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},premultiply:function(a){return this.multiplyQuaternions(a,
this)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z;a=a._w;var f=b._x,g=b._y,h=b._z;b=b._w;this._x=c*b+a*f+d*h-e*g;this._y=d*b+a*g+e*f-c*h;this._z=e*b+a*h+c*g-d*f;this._w=a*b-c*f-d*g-e*h;this.onChangeCallback();return this},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,f=this._w,g=f*a._w+c*a._x+d*a._y+e*a._z;0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a);if(1<=g)return this._w=f,this._x=c,this._y=
d,this._z=e,this;a=Math.sqrt(1-g*g);if(.001>Math.abs(a))return this._w=.5*(f+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),this;var h=Math.atan2(a,g);g=Math.sin((1-b)*h)/a;b=Math.sin(b*h)/a;this._w=f*g+this._w*b;this._x=c*g+this._x*b;this._y=d*g+this._y*b;this._z=e*g+this._z*b;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+
1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}});Object.assign(p.prototype,{isVector3:!0,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setScalar:function(a){this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=
a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},
add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=
a;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a=new X;return function(b){b&&b.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");return this.applyQuaternion(a.setFromEuler(b))}}(),applyAxisAngle:function(){var a=new X;return function(b,c){return this.applyQuaternion(a.setFromAxisAngle(b,c))}}(),applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z;
a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z;a=a.w;var h=a*b+f*d-g*c,l=a*c+g*b-e*d,m=a*d+e*c-f*b;b=-e*b-f*c-g*d;this.x=h*a+b*
-e+l*-g-m*-f;this.y=l*a+b*-f+m*-e-h*-g;this.z=m*a+b*-g+h*-f-l*-e;return this},project:function(){var a=new F;return function(b){a.multiplyMatrices(b.projectionMatrix,a.getInverse(b.matrixWorld));return this.applyMatrix4(a)}}(),unproject:function(){var a=new F;return function(b){a.multiplyMatrices(b.matrixWorld,a.getInverse(b.projectionMatrix));return this.applyMatrix4(a)}}(),transformDirection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+
a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;return this.normalize()},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,
this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},clampScalar:function(){var a=new p,b=new p;return function(c,d){a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},
round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},
length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},cross:function(a,b){return void 0!==
b?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b)):this.crossVectors(this,a)},crossVectors:function(a,b){var c=a.x,d=a.y;a=a.z;var e=b.x,f=b.y;b=b.z;this.x=d*b-a*f;this.y=a*e-c*b;this.z=c*f-d*e;return this},projectOnVector:function(a){var b=a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(b)},projectOnPlane:function(){var a=new p;return function(b){a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a=
new p;return function(b){return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(P.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},manhattanDistanceTo:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)},setFromSpherical:function(a){var b=Math.sin(a.phi)*
a.radius;this.x=b*Math.sin(a.theta);this.y=Math.cos(a.phi)*a.radius;this.z=b*Math.cos(a.theta);return this},setFromCylindrical:function(a){this.x=a.radius*Math.sin(a.theta);this.y=a.y;this.z=a.radius*Math.cos(a.theta);return this},setFromMatrixPosition:function(a){a=a.elements;this.x=a[12];this.y=a[13];this.z=a[14];return this},setFromMatrixScale:function(a){var b=this.setFromMatrixColumn(a,0).length(),c=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,2).length();this.x=b;this.y=
c;this.z=a;return this},setFromMatrixColumn:function(a,b){return this.fromArray(a.elements,4*b)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");
this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);return this}});Object.assign(ta.prototype,{isMatrix3:!0,set:function(a,b,c,d,e,f,g,h,l){var m=this.elements;m[0]=a;m[1]=d;m[2]=g;m[3]=b;m[4]=e;m[5]=h;m[6]=c;m[7]=f;m[8]=l;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(a){var b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=
a[8];return this},setFromMatrix4:function(a){a=a.elements;this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]);return this},applyToBufferAttribute:function(){var a=new p;return function(b){for(var c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix3(this),b.setXYZ(c,a.x,a.y,a.z);return b}}(),multiply:function(a){return this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements;
b=this.elements;a=c[0];var e=c[3],f=c[6],g=c[1],h=c[4],l=c[7],m=c[2],k=c[5];c=c[8];var n=d[0],r=d[3],q=d[6],p=d[1],u=d[4],z=d[7],x=d[2],w=d[5];d=d[8];b[0]=a*n+e*p+f*x;b[3]=a*r+e*u+f*w;b[6]=a*q+e*z+f*d;b[1]=g*n+h*p+l*x;b[4]=g*r+h*u+l*w;b[7]=g*q+h*z+l*d;b[2]=m*n+k*p+c*x;b[5]=m*r+k*u+c*w;b[8]=m*q+k*z+c*d;return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],
d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],l=a[7];a=a[8];return b*f*a-b*g*l-c*e*a+c*g*h+d*e*l-d*f*h},getInverse:function(a,b){a&&a.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var c=a.elements;a=this.elements;var d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],l=c[5],m=c[6],k=c[7];c=c[8];var n=c*h-l*k,r=l*m-c*g,q=k*g-h*m,p=d*n+e*r+f*q;if(0===p){if(!0===b)throw Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");console.warn("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");
return this.identity()}b=1/p;a[0]=n*b;a[1]=(f*k-c*e)*b;a[2]=(l*e-f*h)*b;a[3]=r*b;a[4]=(c*d-f*m)*b;a[5]=(f*g-l*d)*b;a[6]=q*b;a[7]=(e*m-k*d)*b;a[8]=(h*d-e*g)*b;return this},transpose:function(){var a=this.elements;var b=a[1];a[1]=a[3];a[3]=b;b=a[2];a[2]=a[6];a[6]=b;b=a[5];a[5]=a[7];a[7]=b;return this},getNormalMatrix:function(a){return this.setFromMatrix4(a).getInverse(this).transpose()},transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=
b[2];a[7]=b[5];a[8]=b[8];return this},setUvTransform:function(a,b,c,d,e,f,g){var h=Math.cos(e);e=Math.sin(e);this.set(c*h,c*e,-c*(h*f+e*g)+f+a,-d*e,d*h,-d*(-e*f+h*g)+g+b,0,0,1)},scale:function(a,b){var c=this.elements;c[0]*=a;c[3]*=a;c[6]*=a;c[1]*=b;c[4]*=b;c[7]*=b;return this},rotate:function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.elements,d=c[0],e=c[3],f=c[6],g=c[1],h=c[4],l=c[7];c[0]=b*d+a*g;c[3]=b*e+a*h;c[6]=b*f+a*l;c[1]=-a*d+b*g;c[4]=-a*e+b*h;c[7]=-a*f+b*l;return this},translate:function(a,
b){var c=this.elements;c[0]+=a*c[2];c[3]+=a*c[5];c[6]+=a*c[8];c[1]+=b*c[2];c[4]+=b*c[5];c[7]+=b*c[8];return this},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;9>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;9>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];
return a}});var Df=0;ca.DEFAULT_IMAGE=void 0;ca.DEFAULT_MAPPING=300;ca.prototype=Object.assign(Object.create(ha.prototype),{constructor:ca,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name;this.image=a.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;
this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.center.copy(a.center);this.rotation=a.rotation;this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrix.copy(a.matrix);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.encoding=a.encoding;return this},toJSON:function(a){var b=void 0===
a||"string"===typeof a;if(!b&&void 0!==a.textures[this.uuid])return a.textures[this.uuid];var c={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==
this.image){var d=this.image;void 0===d.uuid&&(d.uuid=P.generateUUID());if(!b&&void 0===a.images[d.uuid]){var e=a.images,f=d.uuid,g=d.uuid;if(d instanceof HTMLCanvasElement)var h=d;else{h=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");h.width=d.width;h.height=d.height;var l=h.getContext("2d");d instanceof ImageData?l.putImageData(d,0,0):l.drawImage(d,0,0,d.width,d.height)}h=2048<h.width||2048<h.height?h.toDataURL("image/jpeg",.6):h.toDataURL("image/png");e[f]={uuid:g,url:h}}c.image=
d.uuid}b||(a.textures[this.uuid]=c);return c},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(a){if(300===this.mapping){a.applyMatrix3(this.matrix);if(0>a.x||1<a.x)switch(this.wrapS){case 1E3:a.x-=Math.floor(a.x);break;case 1001:a.x=0>a.x?0:1;break;case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapT){case 1E3:a.y-=Math.floor(a.y);break;case 1001:a.y=0>a.y?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%
2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}});Object.defineProperty(ca.prototype,"needsUpdate",{set:function(a){!0===a&&this.version++}});Object.assign(U.prototype,{isVector4:!0,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setScalar:function(a){this.w=this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,
b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,
b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this},sub:function(a,b){if(void 0!==
b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;this.w-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,
e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){a=a.elements;var b=a[0];var c=a[4];var d=
a[8],e=a[1],f=a[5],g=a[9];var h=a[2];var l=a[6];var m=a[10];if(.01>Math.abs(c-e)&&.01>Math.abs(d-h)&&.01>Math.abs(g-l)){if(.1>Math.abs(c+e)&&.1>Math.abs(d+h)&&.1>Math.abs(g+l)&&.1>Math.abs(b+f+m-3))return this.set(1,0,0,0),this;a=Math.PI;b=(b+1)/2;f=(f+1)/2;m=(m+1)/2;c=(c+e)/4;d=(d+h)/4;g=(g+l)/4;b>f&&b>m?.01>b?(l=0,c=h=.707106781):(l=Math.sqrt(b),h=c/l,c=d/l):f>m?.01>f?(l=.707106781,h=0,c=.707106781):(h=Math.sqrt(f),l=c/h,c=g/h):.01>m?(h=l=.707106781,c=0):(c=Math.sqrt(m),l=d/c,h=g/c);this.set(l,
h,c,a);return this}a=Math.sqrt((l-g)*(l-g)+(d-h)*(d-h)+(e-c)*(e-c));.001>Math.abs(a)&&(a=1);this.x=(l-g)/a;this.y=(d-h)/a;this.z=(e-c)/a;this.w=Math.acos((b+f+m-1)/2);return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);this.w=Math.min(this.w,a.w);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);this.w=Math.max(this.w,a.w);return this},clamp:function(a,b){this.x=Math.max(a.x,
Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));this.w=Math.max(a.w,Math.min(b.w,this.w));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new U,b=new U);a.set(c,c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);
this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):
Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||
1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=
[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);this.w=a.getW(b);return this}});kb.prototype=Object.assign(Object.create(ha.prototype),{constructor:kb,isWebGLRenderTarget:!0,setSize:function(a,b){if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.dispose();this.viewport.set(0,
0,a,b);this.scissor.set(0,0,a,b)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.width=a.width;this.height=a.height;this.viewport.copy(a.viewport);this.texture=a.texture.clone();this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;this.depthTexture=a.depthTexture;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Lb.prototype=Object.create(kb.prototype);Lb.prototype.constructor=Lb;Lb.prototype.isWebGLRenderTargetCube=!0;lb.prototype=
Object.create(ca.prototype);lb.prototype.constructor=lb;lb.prototype.isDataTexture=!0;Object.assign(Wa.prototype,{isBox3:!0,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromArray:function(a){for(var b=Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,l=a.length;h<l;h+=3){var m=a[h],k=a[h+1],n=a[h+2];m<b&&(b=m);k<c&&(c=k);n<d&&(d=n);m>e&&(e=m);k>f&&(f=k);n>g&&(g=n)}this.min.set(b,c,d);this.max.set(e,f,g);return this},setFromBufferAttribute:function(a){for(var b=
Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,l=a.count;h<l;h++){var m=a.getX(h),k=a.getY(h),n=a.getZ(h);m<b&&(b=m);k<c&&(c=k);n<d&&(d=n);m>e&&(e=m);k>f&&(f=k);n>g&&(g=n)}this.min.set(b,c,d);this.max.set(e,f,g);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new p;return function(b,c){c=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);
return this}}(),setFromObject:function(a){this.makeEmpty();return this.expandByObject(a)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(a){void 0===a&&(console.warn("THREE.Box3: .getCenter() target is now required"),
a=new p);return this.isEmpty()?a.set(0,0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){void 0===a&&(console.warn("THREE.Box3: .getSize() target is now required"),a=new p);return this.isEmpty()?a.set(0,0,0):a.subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},expandByObject:function(){function a(a){var f=
a.geometry;if(void 0!==f)if(f.isGeometry)for(f=f.vertices,c=0,d=f.length;c<d;c++)e.copy(f[c]),e.applyMatrix4(a.matrixWorld),b.expandByPoint(e);else if(f.isBufferGeometry&&(f=f.attributes.position,void 0!==f))for(c=0,d=f.count;c<d;c++)e.fromBufferAttribute(f,c).applyMatrix4(a.matrixWorld),b.expandByPoint(e)}var b,c,d,e=new p;return function(c){b=this;c.updateMatrixWorld(!0);c.traverse(a);return this}}(),containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||
a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z},getParameter:function(a,b){void 0===b&&(console.warn("THREE.Box3: .getParameter() target is now required"),b=new p);return b.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(a){return a.max.x<this.min.x||
a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},intersectsSphere:function(){var a=new p;return function(b){this.clampPoint(b.center,a);return a.distanceToSquared(b.center)<=b.radius*b.radius}}(),intersectsPlane:function(a){if(0<a.normal.x){var b=a.normal.x*this.min.x;var c=a.normal.x*this.max.x}else b=a.normal.x*this.max.x,c=a.normal.x*this.min.x;0<a.normal.y?(b+=a.normal.y*this.min.y,c+=a.normal.y*this.max.y):(b+=a.normal.y*this.max.y,c+=
a.normal.y*this.min.y);0<a.normal.z?(b+=a.normal.z*this.min.z,c+=a.normal.z*this.max.z):(b+=a.normal.z*this.max.z,c+=a.normal.z*this.min.z);return b<=a.constant&&c>=a.constant},intersectsTriangle:function(){function a(a){var e;var f=0;for(e=a.length-3;f<=e;f+=3){h.fromArray(a,f);var g=m.x*Math.abs(h.x)+m.y*Math.abs(h.y)+m.z*Math.abs(h.z),l=b.dot(h),k=c.dot(h),n=d.dot(h);if(Math.max(-Math.max(l,k,n),Math.min(l,k,n))>g)return!1}return!0}var b=new p,c=new p,d=new p,e=new p,f=new p,g=new p,h=new p,l=
new p,m=new p,k=new p;return function(h){if(this.isEmpty())return!1;this.getCenter(l);m.subVectors(this.max,l);b.subVectors(h.a,l);c.subVectors(h.b,l);d.subVectors(h.c,l);e.subVectors(c,b);f.subVectors(d,c);g.subVectors(b,d);h=[0,-e.z,e.y,0,-f.z,f.y,0,-g.z,g.y,e.z,0,-e.x,f.z,0,-f.x,g.z,0,-g.x,-e.y,e.x,0,-f.y,f.x,0,-g.y,g.x,0];if(!a(h))return!1;h=[1,0,0,0,1,0,0,0,1];if(!a(h))return!1;k.crossVectors(e,f);h=[k.x,k.y,k.z];return a(h)}}(),clampPoint:function(a,b){void 0===b&&(console.warn("THREE.Box3: .clampPoint() target is now required"),
b=new p);return b.copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new p;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=new p;return function(b){void 0===b&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),b=new Ga);this.getCenter(b.center);b.radius=.5*this.getSize(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this},
union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(a){if(this.isEmpty())return this;a=a.elements;var b=a[0]*this.min.x,c=a[1]*this.min.x,d=a[2]*this.min.x,e=a[0]*this.max.x,f=a[1]*this.max.x,g=a[2]*this.max.x,h=a[4]*this.min.y,l=a[5]*this.min.y,m=a[6]*this.min.y,k=a[4]*this.max.y,n=a[5]*this.max.y,r=a[6]*this.max.y,q=a[8]*this.min.z,p=a[9]*this.min.z,u=a[10]*this.min.z,z=a[8]*this.max.z,x=a[9]*this.max.z,w=a[10]*this.max.z;this.min.x=Math.min(b,e)+Math.min(h,
k)+Math.min(q,z)+a[12];this.min.y=Math.min(c,f)+Math.min(l,n)+Math.min(p,x)+a[13];this.min.z=Math.min(d,g)+Math.min(m,r)+Math.min(u,w)+a[14];this.max.x=Math.max(b,e)+Math.max(h,k)+Math.max(q,z)+a[12];this.max.y=Math.max(c,f)+Math.max(l,n)+Math.max(p,x)+a[13];this.max.z=Math.max(d,g)+Math.max(m,r)+Math.max(u,w)+a[14];return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}});Object.assign(Ga.prototype,
{set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new Wa;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).getCenter(d);for(var e=c=0,f=b.length;e<f;e++)c=Math.max(c,d.distanceToSquared(b[e]));this.radius=Math.sqrt(c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=
this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},intersectsBox:function(a){return a.intersectsSphere(this)},intersectsPlane:function(a){return Math.abs(a.distanceToPoint(this.center))<=this.radius},clampPoint:function(a,b){var c=this.center.distanceToSquared(a);void 0===b&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),
b=new p);b.copy(a);c>this.radius*this.radius&&(b.sub(this.center).normalize(),b.multiplyScalar(this.radius).add(this.center));return b},getBoundingBox:function(a){void 0===a&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),a=new Wa);a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&
a.radius===this.radius}});Object.assign(Ha.prototype,{set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new p,b=new p;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,c);return this}}(),
clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){void 0===
b&&(console.warn("THREE.Plane: .projectPoint() target is now required"),b=new p);return b.copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)},intersectLine:function(){var a=new p;return function(b,c){void 0===c&&(console.warn("THREE.Plane: .intersectLine() target is now required"),c=new p);var d=b.delta(a),e=this.normal.dot(d);if(0===e){if(0===this.distanceToPoint(b.start))return c.copy(b.start)}else if(e=-(b.start.dot(this.normal)+this.constant)/e,!(0>e||1<e))return c.copy(d).multiplyScalar(e).add(b.start)}}(),
intersectsLine:function(a){var b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectsBox:function(a){return a.intersectsPlane(this)},intersectsSphere:function(a){return a.intersectsPlane(this)},coplanarPoint:function(a){void 0===a&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),a=new p);return a.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new p,b=new ta;return function(c,d){d=d||b.getNormalMatrix(c);
c=this.coplanarPoint(a).applyMatrix4(c);d=this.normal.applyMatrix3(d).normalize();this.constant=-c.dot(d);return this}}(),translate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant}});Object.assign(qd.prototype,{set:function(a,b,c,d,e,f){var g=this.planes;g[0].copy(a);g[1].copy(b);g[2].copy(c);g[3].copy(d);g[4].copy(e);g[5].copy(f);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var b=
this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var d=c[1],e=c[2],f=c[3],g=c[4],h=c[5],l=c[6],m=c[7],k=c[8],n=c[9],r=c[10],q=c[11],p=c[12],u=c[13],z=c[14];c=c[15];b[0].setComponents(f-a,m-g,q-k,c-p).normalize();b[1].setComponents(f+a,m+g,q+k,c+p).normalize();b[2].setComponents(f+d,m+h,q+n,c+u).normalize();b[3].setComponents(f-d,m-h,q-n,c-u).normalize();b[4].setComponents(f-e,m-l,q-r,c-z).normalize();b[5].setComponents(f+e,
m+l,q+r,c+z).normalize();return this},intersectsObject:function(){var a=new Ga;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere).applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSprite:function(){var a=new Ga;return function(b){a.center.set(0,0,0);a.radius=.7071067811865476;a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function(a){var b=this.planes,c=a.center;a=-a.radius;for(var d=
0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new p,b=new p;return function(c){for(var d=this.planes,e=0;6>e;e++){var f=d[e];a.x=0<f.normal.x?c.min.x:c.max.x;b.x=0<f.normal.x?c.max.x:c.min.x;a.y=0<f.normal.y?c.min.y:c.max.y;b.y=0<f.normal.y?c.max.y:c.min.y;a.z=0<f.normal.z?c.min.z:c.max.z;b.z=0<f.normal.z?c.max.z:c.min.z;var g=f.distanceToPoint(a);f=f.distanceToPoint(b);if(0>g&&0>f)return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>
c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0}});var W={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",
aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",
bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",
clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",
clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",
color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",
cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",
defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",
emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",
envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",
envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",
envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",
fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",
gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",
lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",
lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",
lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",
lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",
lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",
lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",
lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",
lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",
lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",
logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",
map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",
metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",
morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",
normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",
normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy *= normalScale;\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",
packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",
premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",
roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",
shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",
shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",
shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",
skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",
skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",
specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",
uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",
uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",
uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",
cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",
depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",
distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",
distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",
equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",
linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",
meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",
meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",
normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",
points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}\n",
shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},
Ca={merge:function(a){for(var b={},c=0;c<a.length;c++){var d=this.clone(a[c]),e;for(e in d)b[e]=d[e]}return b},clone:function(a){var b={},c;for(c in a){b[c]={};for(var d in a[c]){var e=a[c][d];e&&(e.isColor||e.isMatrix3||e.isMatrix4||e.isVector2||e.isVector3||e.isVector4||e.isTexture)?b[c][d]=e.clone():Array.isArray(e)?b[c][d]=e.slice():b[c][d]=e}}return b}},Rg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,
blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,
darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,
lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,
mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,
rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(K.prototype,
{isColor:!0,r:1,g:1,b:1,set:function(a){a&&a.isColor?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this},setScalar:function(a){this.b=this.g=this.r=a;return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(){function a(a,c,d){0>d&&(d+=1);1<d&&--d;return d<1/6?a+6*(c-a)*d:.5>d?c:d<2/3?a+6*(c-a)*(2/3-d):a}return function(b,
c,d){b=P.euclideanModulo(b,1);c=P.clamp(c,0,1);d=P.clamp(d,0,1);0===c?this.r=this.g=this.b=d:(c=.5>=d?d*(1+c):d+c-d*c,d=2*d-c,this.r=a(d,c,b+1/3),this.g=a(d,c,b),this.b=a(d,c,b-1/3));return this}}(),setStyle:function(a){function b(b){void 0!==b&&1>parseFloat(b)&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var c;if(c=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var d=c[2];switch(c[1]){case "rgb":case "rgba":if(c=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=
Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,b(c[5]),this;if(c=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,b(c[5]),this;break;case "hsl":case "hsla":if(c=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d)){d=parseFloat(c[1])/
360;var e=parseInt(c[2],10)/100,f=parseInt(c[3],10)/100;b(c[5]);return this.setHSL(d,e,f)}}}else if(c=/^#([A-Fa-f0-9]+)$/.exec(a)){c=c[1];d=c.length;if(3===d)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}a&&0<a.length&&(c=Rg[a],
void 0!==c?this.setHex(c):console.warn("THREE.Color: Unknown color "+a));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this},copyGammaToLinear:function(a,b){void 0===b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},copyLinearToGamma:function(a,b){void 0===b&&(b=2);b=0<b?1/b:1;this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},convertGammaToLinear:function(a){this.copyGammaToLinear(this,
a);return this},convertLinearToGamma:function(a){this.copyLinearToGamma(this,a);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){void 0===a&&(console.warn("THREE.Color: .getHSL() target is now required"),a={h:0,s:0,l:0});var b=this.r,c=this.g,d=this.b,e=Math.max(b,c,d),f=Math.min(b,c,d),g,h=(f+e)/2;if(f===e)f=g=0;else{var l=e-f;f=.5>=h?l/(e+f):l/(2-e-f);switch(e){case b:g=
(c-d)/l+(c<d?6:0);break;case c:g=(d-b)/l+2;break;case d:g=(b-c)/l+4}g/=6}a.h=g;a.s=f;a.l=h;return a},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var a={};return function(b,c,d){this.getHSL(a);a.h+=b;a.s+=c;a.l+=d;this.setHSL(a.h,a.s,a.l);return this}}(),add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},addScalar:function(a){this.r+=a;
this.g+=a;this.b+=a;return this},sub:function(a){this.r=Math.max(0,this.r-a.r);this.g=Math.max(0,this.g-a.g);this.b=Math.max(0,this.b-a.b);return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a,b){void 0===b&&(b=0);
this.r=a[b];this.g=a[b+1];this.b=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.r;a[b+1]=this.g;a[b+2]=this.b;return a},toJSON:function(){return this.getHex()}});var M={common:{diffuse:{value:new K(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new ta},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},
aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new y(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},
fogFar:{value:2E3},fogColor:{value:new K(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},
pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new K(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new ta}}},
tb={basic:{uniforms:Ca.merge([M.common,M.specularmap,M.envmap,M.aomap,M.lightmap,M.fog]),vertexShader:W.meshbasic_vert,fragmentShader:W.meshbasic_frag},lambert:{uniforms:Ca.merge([M.common,M.specularmap,M.envmap,M.aomap,M.lightmap,M.emissivemap,M.fog,M.lights,{emissive:{value:new K(0)}}]),vertexShader:W.meshlambert_vert,fragmentShader:W.meshlambert_frag},phong:{uniforms:Ca.merge([M.common,M.specularmap,M.envmap,M.aomap,M.lightmap,M.emissivemap,M.bumpmap,M.normalmap,M.displacementmap,M.gradientmap,
M.fog,M.lights,{emissive:{value:new K(0)},specular:{value:new K(1118481)},shininess:{value:30}}]),vertexShader:W.meshphong_vert,fragmentShader:W.meshphong_frag},standard:{uniforms:Ca.merge([M.common,M.envmap,M.aomap,M.lightmap,M.emissivemap,M.bumpmap,M.normalmap,M.displacementmap,M.roughnessmap,M.metalnessmap,M.fog,M.lights,{emissive:{value:new K(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:W.meshphysical_vert,fragmentShader:W.meshphysical_frag},points:{uniforms:Ca.merge([M.points,
M.fog]),vertexShader:W.points_vert,fragmentShader:W.points_frag},dashed:{uniforms:Ca.merge([M.common,M.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:W.linedashed_vert,fragmentShader:W.linedashed_frag},depth:{uniforms:Ca.merge([M.common,M.displacementmap]),vertexShader:W.depth_vert,fragmentShader:W.depth_frag},normal:{uniforms:Ca.merge([M.common,M.bumpmap,M.normalmap,M.displacementmap,{opacity:{value:1}}]),vertexShader:W.normal_vert,fragmentShader:W.normal_frag},cube:{uniforms:{tCube:{value:null},
tFlip:{value:-1},opacity:{value:1}},vertexShader:W.cube_vert,fragmentShader:W.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:W.equirect_vert,fragmentShader:W.equirect_frag},distanceRGBA:{uniforms:Ca.merge([M.common,M.displacementmap,{referencePosition:{value:new p},nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:W.distanceRGBA_vert,fragmentShader:W.distanceRGBA_frag},shadow:{uniforms:Ca.merge([M.lights,M.fog,{color:{value:new K(0)},opacity:{value:1}}]),vertexShader:W.shadow_vert,
fragmentShader:W.shadow_frag}};tb.physical={uniforms:Ca.merge([tb.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:W.meshphysical_vert,fragmentShader:W.meshphysical_frag};mb.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");mb.DefaultOrder="XYZ";Object.defineProperties(mb.prototype,{x:{get:function(){return this._x},set:function(a){this._x=a;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(a){this._y=a;this.onChangeCallback()}},z:{get:function(){return this._z},
set:function(a){this._z=a;this.onChangeCallback()}},order:{get:function(){return this._order},set:function(a){this._order=a;this.onChangeCallback()}}});Object.assign(mb.prototype,{isEuler:!0,set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},
setFromRotationMatrix:function(a,b,c){var d=P.clamp,e=a.elements;a=e[0];var f=e[4],g=e[8],h=e[1],l=e[5],m=e[9],k=e[2],n=e[6];e=e[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(d(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(-m,e),this._z=Math.atan2(-f,a)):(this._x=Math.atan2(n,l),this._z=0)):"YXZ"===b?(this._x=Math.asin(-d(m,-1,1)),.99999>Math.abs(m)?(this._y=Math.atan2(g,e),this._z=Math.atan2(h,l)):(this._y=Math.atan2(-k,a),this._z=0)):"ZXY"===b?(this._x=Math.asin(d(n,-1,1)),.99999>Math.abs(n)?
(this._y=Math.atan2(-k,e),this._z=Math.atan2(-f,l)):(this._y=0,this._z=Math.atan2(h,a))):"ZYX"===b?(this._y=Math.asin(-d(k,-1,1)),.99999>Math.abs(k)?(this._x=Math.atan2(n,e),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-f,l))):"YZX"===b?(this._z=Math.asin(d(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(-m,l),this._y=Math.atan2(-k,a)):(this._x=0,this._y=Math.atan2(g,e))):"XZY"===b?(this._z=Math.asin(-d(f,-1,1)),.99999>Math.abs(f)?(this._x=Math.atan2(n,l),this._y=Math.atan2(g,a)):(this._x=
Math.atan2(-m,e),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var a=new F;return function(b,c,d){a.makeRotationFromQuaternion(b);return this.setFromRotationMatrix(a,c,d)}}(),setFromVector3:function(a,b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new X;return function(b){a.setFromEuler(this);return this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===
this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._order;return a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new p(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}});
Object.assign(Ud.prototype,{set:function(a){this.mask=1<<a|0},enable:function(a){this.mask=this.mask|1<<a|0},toggle:function(a){this.mask^=1<<a|0},disable:function(a){this.mask&=~(1<<a|0)},test:function(a){return 0!==(this.mask&a.mask)}});var Ff=0;B.DefaultUp=new p(0,1,0);B.DefaultMatrixAutoUpdate=!0;B.prototype=Object.assign(Object.create(ha.prototype),{constructor:B,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);
this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(a){this.quaternion.premultiply(a);return this},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new X;return function(b,c){a.setFromAxisAngle(b,
c);this.quaternion.multiply(a);return this}}(),rotateOnWorldAxis:function(){var a=new X;return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.premultiply(a);return this}}(),rotateX:function(){var a=new p(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new p(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new p(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new p;return function(b,
c){a.copy(b).applyQuaternion(this.quaternion);this.position.add(a.multiplyScalar(c));return this}}(),translateX:function(){var a=new p(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new p(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=new p(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new F;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),
lookAt:function(){var a=new F,b=new p;return function(c,d,e){c.isVector3?b.copy(c):b.set(c,d,e);this.isCamera?a.lookAt(this.position,b,this.up):a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this;a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=
this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a);return this},remove:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);return this}b=this.children.indexOf(a);-1!==b&&(a.parent=null,a.dispatchEvent({type:"removed"}),this.children.splice(b,1));return this},getObjectById:function(a){return this.getObjectByProperty("id",a)},getObjectByName:function(a){return this.getObjectByProperty("name",
a)},getObjectByProperty:function(a,b){if(this[a]===b)return this;for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c].getObjectByProperty(a,b);if(void 0!==e)return e}},getWorldPosition:function(a){void 0===a&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),a=new p);this.updateMatrixWorld(!0);return a.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new p,b=new p;return function(c){void 0===c&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),
c=new X);this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,c,b);return c}}(),getWorldScale:function(){var a=new p,b=new X;return function(c){void 0===c&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),c=new p);this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,b,c);return c}}(),getWorldDirection:function(){var a=new X;return function(b){void 0===b&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),b=new p);this.getWorldQuaternion(a);return b.set(0,
0,1).applyQuaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverseVisible(a)}},traverseAncestors:function(a){var b=this.parent;null!==b&&(a(b),b.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){this.matrixAutoUpdate&&
this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].updateMatrixWorld(a)},toJSON:function(a){function b(b,c){void 0===b[c.uuid]&&(b[c.uuid]=c.toJSON(a));return c.uuid}function c(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var d=void 0===a||"string"===typeof a,
e={};d&&(a={geometries:{},materials:{},textures:{},images:{},shapes:{}},e.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var f={};f.uuid=this.uuid;f.type=this.type;""!==this.name&&(f.name=this.name);!0===this.castShadow&&(f.castShadow=!0);!0===this.receiveShadow&&(f.receiveShadow=!0);!1===this.visible&&(f.visible=!1);!1===this.frustumCulled&&(f.frustumCulled=!1);0!==this.renderOrder&&(f.renderOrder=this.renderOrder);"{}"!==JSON.stringify(this.userData)&&(f.userData=this.userData);
f.matrix=this.matrix.toArray();!1===this.matrixAutoUpdate&&(f.matrixAutoUpdate=!1);if(void 0!==this.geometry){f.geometry=b(a.geometries,this.geometry);var g=this.geometry.parameters;if(void 0!==g&&void 0!==g.shapes)if(g=g.shapes,Array.isArray(g))for(var h=0,l=g.length;h<l;h++)b(a.shapes,g[h]);else b(a.shapes,g)}if(void 0!==this.material)if(Array.isArray(this.material)){g=[];h=0;for(l=this.material.length;h<l;h++)g.push(b(a.materials,this.material[h]));f.material=g}else f.material=b(a.materials,this.material);
if(0<this.children.length)for(f.children=[],h=0;h<this.children.length;h++)f.children.push(this.children[h].toJSON(a).object);if(d){d=c(a.geometries);h=c(a.materials);l=c(a.textures);var m=c(a.images);g=c(a.shapes);0<d.length&&(e.geometries=d);0<h.length&&(e.materials=h);0<l.length&&(e.textures=l);0<m.length&&(e.images=m);0<g.length&&(e.shapes=g)}e.object=f;return e},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,b){void 0===b&&(b=!0);this.name=a.name;this.up.copy(a.up);
this.position.copy(a.position);this.quaternion.copy(a.quaternion);this.scale.copy(a.scale);this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.layers.mask=a.layers.mask;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(b=
0;b<a.children.length;b++)this.add(a.children[b].clone());return this}});Qa.prototype=Object.assign(Object.create(B.prototype),{constructor:Qa,isCamera:!0,copy:function(a,b){B.prototype.copy.call(this,a,b);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);return this},getWorldDirection:function(){var a=new X;return function(b){void 0===b&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),b=new p);this.getWorldQuaternion(a);return b.set(0,
0,-1).applyQuaternion(a)}}(),updateMatrixWorld:function(a){B.prototype.updateMatrixWorld.call(this,a);this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}});Mb.prototype=Object.assign(Object.create(Qa.prototype),{constructor:Mb,isOrthographicCamera:!0,copy:function(a,b){Qa.prototype.copy.call(this,a,b);this.left=a.left;this.right=a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;this.view=null===
a.view?null:Object.assign({},a.view);return this},setViewOffset:function(a,b,c,d,e,f){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=c;this.view.offsetY=d;this.view.width=e;this.view.height=f;this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=
(this.right-this.left)/(2*this.zoom),b=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,d=(this.top+this.bottom)/2,e=c-a;c+=a;a=d+b;b=d-b;if(null!==this.view&&this.view.enabled){c=this.zoom/(this.view.width/this.view.fullWidth);b=this.zoom/(this.view.height/this.view.fullHeight);var f=(this.right-this.left)/this.view.width;d=(this.top-this.bottom)/this.view.height;e+=this.view.offsetX/c*f;c=e+this.view.width/c*f;a-=this.view.offsetY/b*d;b=a-this.view.height/b*d}this.projectionMatrix.makeOrthographic(e,
c,a,b,this.near,this.far)},toJSON:function(a){a=B.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;null!==this.view&&(a.object.view=Object.assign({},this.view));return a}});Object.assign(Xa.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);
this.materialIndex=a.materialIndex;for(var b=0,c=a.vertexNormals.length;b<c;b++)this.vertexNormals[b]=a.vertexNormals[b].clone();b=0;for(c=a.vertexColors.length;b<c;b++)this.vertexColors[b]=a.vertexColors[b].clone();return this}});var Gf=0;J.prototype=Object.assign(Object.create(ha.prototype),{constructor:J,isGeometry:!0,applyMatrix:function(a){for(var b=(new ta).getNormalMatrix(a),c=0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];
a.normal.applyMatrix3(b).normalize();for(var e=0,f=a.vertexNormals.length;e<f;e++)a.vertexNormals[e].applyMatrix3(b).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=this.verticesNeedUpdate=!0;return this},rotateX:function(){var a=new F;return function(b){a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a=new F;return function(b){a.makeRotationY(b);this.applyMatrix(a);return this}}(),
rotateZ:function(){var a=new F;return function(b){a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a=new F;return function(b,c,d){a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a=new F;return function(b,c,d){a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a=new B;return function(b){a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(a){function b(a,b,d,e){var f=void 0!==
g?[k[a].clone(),k[b].clone(),k[d].clone()]:[],q=void 0!==h?[c.colors[a].clone(),c.colors[b].clone(),c.colors[d].clone()]:[];e=new Xa(a,b,d,f,q,e);c.faces.push(e);void 0!==l&&c.faceVertexUvs[0].push([n[a].clone(),n[b].clone(),n[d].clone()]);void 0!==m&&c.faceVertexUvs[1].push([r[a].clone(),r[b].clone(),r[d].clone()])}var c=this,d=null!==a.index?a.index.array:void 0,e=a.attributes,f=e.position.array,g=void 0!==e.normal?e.normal.array:void 0,h=void 0!==e.color?e.color.array:void 0,l=void 0!==e.uv?e.uv.array:
void 0,m=void 0!==e.uv2?e.uv2.array:void 0;void 0!==m&&(this.faceVertexUvs[1]=[]);for(var k=[],n=[],r=[],q=e=0;e<f.length;e+=3,q+=2)c.vertices.push(new p(f[e],f[e+1],f[e+2])),void 0!==g&&k.push(new p(g[e],g[e+1],g[e+2])),void 0!==h&&c.colors.push(new K(h[e],h[e+1],h[e+2])),void 0!==l&&n.push(new y(l[q],l[q+1])),void 0!==m&&r.push(new y(m[q],m[q+1]));var t=a.groups;if(0<t.length)for(e=0;e<t.length;e++){f=t[e];var u=f.start,z=f.count;q=u;for(u+=z;q<u;q+=3)void 0!==d?b(d[q],d[q+1],d[q+2],f.materialIndex):
b(q,q+1,q+2,f.materialIndex)}else if(void 0!==d)for(e=0;e<d.length;e+=3)b(d[e],d[e+1],d[e+2]);else for(e=0;e<f.length/3;e+=3)b(e,e+1,e+2);this.computeFaceNormals();null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());return this},center:function(){var a=new p;return function(){this.computeBoundingBox();this.boundingBox.getCenter(a).negate();this.translate(a.x,a.y,a.z);return this}}(),normalize:function(){this.computeBoundingSphere();
var a=this.boundingSphere.center,b=this.boundingSphere.radius;b=0===b?1:1/b;var c=new F;c.set(b,0,0,-b*a.x,0,b,0,-b*a.y,0,0,b,-b*a.z,0,0,0,1);this.applyMatrix(c);return this},computeFaceNormals:function(){for(var a=new p,b=new p,c=0,d=this.faces.length;c<d;c++){var e=this.faces[c],f=this.vertices[e.a],g=this.vertices[e.b];a.subVectors(this.vertices[e.c],g);b.subVectors(f,g);a.cross(b);a.normalize();e.normal.copy(a)}},computeVertexNormals:function(a){void 0===a&&(a=!0);var b;var c=Array(this.vertices.length);
var d=0;for(b=this.vertices.length;d<b;d++)c[d]=new p;if(a){var e=new p,f=new p;a=0;for(d=this.faces.length;a<d;a++){b=this.faces[a];var g=this.vertices[b.a];var h=this.vertices[b.b];var l=this.vertices[b.c];e.subVectors(l,h);f.subVectors(g,h);e.cross(f);c[b.a].add(e);c[b.b].add(e);c[b.c].add(e)}}else for(this.computeFaceNormals(),a=0,d=this.faces.length;a<d;a++)b=this.faces[a],c[b.a].add(b.normal),c[b.b].add(b.normal),c[b.c].add(b.normal);d=0;for(b=this.vertices.length;d<b;d++)c[d].normalize();a=
0;for(d=this.faces.length;a<d;a++)b=this.faces[a],g=b.vertexNormals,3===g.length?(g[0].copy(c[b.a]),g[1].copy(c[b.b]),g[2].copy(c[b.c])):(g[0]=c[b.a].clone(),g[1]=c[b.b].clone(),g[2]=c[b.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var a;this.computeFaceNormals();var b=0;for(a=this.faces.length;b<a;b++){var c=this.faces[b];var d=c.vertexNormals;3===d.length?(d[0].copy(c.normal),d[1].copy(c.normal),d[2].copy(c.normal)):(d[0]=c.normal.clone(),d[1]=
c.normal.clone(),d[2]=c.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var a,b;var c=0;for(b=this.faces.length;c<b;c++){var d=this.faces[c];d.__originalFaceNormal?d.__originalFaceNormal.copy(d.normal):d.__originalFaceNormal=d.normal.clone();d.__originalVertexNormals||(d.__originalVertexNormals=[]);var e=0;for(a=d.vertexNormals.length;e<a;e++)d.__originalVertexNormals[e]?d.__originalVertexNormals[e].copy(d.vertexNormals[e]):d.__originalVertexNormals[e]=
d.vertexNormals[e].clone()}var f=new J;f.faces=this.faces;e=0;for(a=this.morphTargets.length;e<a;e++){if(!this.morphNormals[e]){this.morphNormals[e]={};this.morphNormals[e].faceNormals=[];this.morphNormals[e].vertexNormals=[];d=this.morphNormals[e].faceNormals;var g=this.morphNormals[e].vertexNormals;c=0;for(b=this.faces.length;c<b;c++){var h=new p;var l={a:new p,b:new p,c:new p};d.push(h);g.push(l)}}g=this.morphNormals[e];f.vertices=this.morphTargets[e].vertices;f.computeFaceNormals();f.computeVertexNormals();
c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],h=g.faceNormals[c],l=g.vertexNormals[c],h.copy(d.normal),l.a.copy(d.vertexNormals[0]),l.b.copy(d.vertexNormals[1]),l.c.copy(d.vertexNormals[2])}c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],d.normal=d.__originalFaceNormal,d.vertexNormals=d.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Wa);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&
(this.boundingSphere=new Ga);this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,b,c){if(a&&a.isGeometry){var d,e=this.vertices.length,f=this.vertices,g=a.vertices,h=this.faces,l=a.faces,m=this.faceVertexUvs[0],k=a.faceVertexUvs[0],n=this.colors,r=a.colors;void 0===c&&(c=0);void 0!==b&&(d=(new ta).getNormalMatrix(b));a=0;for(var q=g.length;a<q;a++){var p=g[a].clone();void 0!==b&&p.applyMatrix4(b);f.push(p)}a=0;for(q=r.length;a<q;a++)n.push(r[a].clone());a=0;for(q=l.length;a<q;a++){g=
l[a];var u=g.vertexNormals;r=g.vertexColors;n=new Xa(g.a+e,g.b+e,g.c+e);n.normal.copy(g.normal);void 0!==d&&n.normal.applyMatrix3(d).normalize();b=0;for(f=u.length;b<f;b++)p=u[b].clone(),void 0!==d&&p.applyMatrix3(d).normalize(),n.vertexNormals.push(p);n.color.copy(g.color);b=0;for(f=r.length;b<f;b++)p=r[b],n.vertexColors.push(p.clone());n.materialIndex=g.materialIndex+c;h.push(n)}a=0;for(q=k.length;a<q;a++)if(c=k[a],d=[],void 0!==c){b=0;for(f=c.length;b<f;b++)d.push(c[b].clone());m.push(d)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",
a)},mergeMesh:function(a){a&&a.isMesh?(a.matrixAutoUpdate&&a.updateMatrix(),this.merge(a.geometry,a.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",a)},mergeVertices:function(){var a={},b=[],c=[],d=Math.pow(10,4),e;var f=0;for(e=this.vertices.length;f<e;f++){var g=this.vertices[f];g=Math.round(g.x*d)+"_"+Math.round(g.y*d)+"_"+Math.round(g.z*d);void 0===a[g]?(a[g]=f,b.push(this.vertices[f]),c[f]=b.length-1):c[f]=c[a[g]]}a=[];f=0;for(e=this.faces.length;f<e;f++)for(d=
this.faces[f],d.a=c[d.a],d.b=c[d.b],d.c=c[d.c],d=[d.a,d.b,d.c],g=0;3>g;g++)if(d[g]===d[(g+1)%3]){a.push(f);break}for(f=a.length-1;0<=f;f--)for(d=a[f],this.faces.splice(d,1),c=0,e=this.faceVertexUvs.length;c<e;c++)this.faceVertexUvs[c].splice(d,1);f=this.vertices.length-b.length;this.vertices=b;return f},setFromPoints:function(a){this.vertices=[];for(var b=0,c=a.length;b<c;b++){var d=a[b];this.vertices.push(new p(d.x,d.y,d.z||0))}return this},sortFacesByMaterialIndex:function(){for(var a=this.faces,
b=a.length,c=0;c<b;c++)a[c]._id=c;a.sort(function(a,b){return a.materialIndex-b.materialIndex});var d=this.faceVertexUvs[0],e=this.faceVertexUvs[1],f,g;d&&d.length===b&&(f=[]);e&&e.length===b&&(g=[]);for(c=0;c<b;c++){var h=a[c]._id;f&&f.push(d[h]);g&&g.push(e[h])}f&&(this.faceVertexUvs[0]=f);g&&(this.faceVertexUvs[1]=g)},toJSON:function(){function a(a,b,c){return c?a|1<<b:a&~(1<<b)}function b(a){var b=a.x.toString()+a.y.toString()+a.z.toString();if(void 0!==m[b])return m[b];m[b]=l.length/3;l.push(a.x,
a.y,a.z);return m[b]}function c(a){var b=a.r.toString()+a.g.toString()+a.b.toString();if(void 0!==n[b])return n[b];n[b]=k.length;k.push(a.getHex());return n[b]}function d(a){var b=a.x.toString()+a.y.toString();if(void 0!==p[b])return p[b];p[b]=r.length/2;r.push(a.x,a.y);return p[b]}var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);if(void 0!==this.parameters){var f=this.parameters,g;for(g in f)void 0!==f[g]&&
(e[g]=f[g]);return e}f=[];for(g=0;g<this.vertices.length;g++){var h=this.vertices[g];f.push(h.x,h.y,h.z)}h=[];var l=[],m={},k=[],n={},r=[],p={};for(g=0;g<this.faces.length;g++){var t=this.faces[g],u=void 0!==this.faceVertexUvs[0][g],z=0<t.normal.length(),x=0<t.vertexNormals.length,w=1!==t.color.r||1!==t.color.g||1!==t.color.b,y=0<t.vertexColors.length,C=0;C=a(C,0,0);C=a(C,1,!0);C=a(C,2,!1);C=a(C,3,u);C=a(C,4,z);C=a(C,5,x);C=a(C,6,w);C=a(C,7,y);h.push(C);h.push(t.a,t.b,t.c);h.push(t.materialIndex);
u&&(u=this.faceVertexUvs[0][g],h.push(d(u[0]),d(u[1]),d(u[2])));z&&h.push(b(t.normal));x&&(z=t.vertexNormals,h.push(b(z[0]),b(z[1]),b(z[2])));w&&h.push(c(t.color));y&&(t=t.vertexColors,h.push(c(t[0]),c(t[1]),c(t[2])))}e.data={};e.data.vertices=f;e.data.normals=l;0<k.length&&(e.data.colors=k);0<r.length&&(e.data.uvs=[r]);e.data.faces=h;return e},clone:function(){return(new J).copy(this)},copy:function(a){var b,c,d;this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=
[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var e=a.vertices;var f=0;for(b=e.length;f<b;f++)this.vertices.push(e[f].clone());e=a.colors;f=0;for(b=e.length;f<b;f++)this.colors.push(e[f].clone());e=a.faces;f=0;for(b=e.length;f<b;f++)this.faces.push(e[f].clone());f=0;for(b=a.faceVertexUvs.length;f<b;f++){var g=a.faceVertexUvs[f];void 0===this.faceVertexUvs[f]&&(this.faceVertexUvs[f]=[]);e=0;for(c=g.length;e<
c;e++){var h=g[e],l=[];var m=0;for(d=h.length;m<d;m++)l.push(h[m].clone());this.faceVertexUvs[f].push(l)}}m=a.morphTargets;f=0;for(b=m.length;f<b;f++){d={};d.name=m[f].name;if(void 0!==m[f].vertices)for(d.vertices=[],e=0,c=m[f].vertices.length;e<c;e++)d.vertices.push(m[f].vertices[e].clone());if(void 0!==m[f].normals)for(d.normals=[],e=0,c=m[f].normals.length;e<c;e++)d.normals.push(m[f].normals[e].clone());this.morphTargets.push(d)}m=a.morphNormals;f=0;for(b=m.length;f<b;f++){d={};if(void 0!==m[f].vertexNormals)for(d.vertexNormals=
[],e=0,c=m[f].vertexNormals.length;e<c;e++)g=m[f].vertexNormals[e],h={},h.a=g.a.clone(),h.b=g.b.clone(),h.c=g.c.clone(),d.vertexNormals.push(h);if(void 0!==m[f].faceNormals)for(d.faceNormals=[],e=0,c=m[f].faceNormals.length;e<c;e++)d.faceNormals.push(m[f].faceNormals[e].clone());this.morphNormals.push(d)}e=a.skinWeights;f=0;for(b=e.length;f<b;f++)this.skinWeights.push(e[f].clone());e=a.skinIndices;f=0;for(b=e.length;f<b;f++)this.skinIndices.push(e[f].clone());e=a.lineDistances;f=0;for(b=e.length;f<
b;f++)this.lineDistances.push(e[f]);f=a.boundingBox;null!==f&&(this.boundingBox=f.clone());f=a.boundingSphere;null!==f&&(this.boundingSphere=f.clone());this.elementsNeedUpdate=a.elementsNeedUpdate;this.verticesNeedUpdate=a.verticesNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.lineDistancesNeedUpdate=a.lineDistancesNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
Object.defineProperty(O.prototype,"needsUpdate",{set:function(a){!0===a&&this.version++}});Object.assign(O.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(a){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==a?a.length/this.itemSize:0;this.array=a;return this},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.name=a.name;this.array=new a.array.constructor(a.array);this.itemSize=
a.itemSize;this.count=a.count;this.normalized=a.normalized;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.itemSize;c*=b.itemSize;for(var d=0,e=this.itemSize;d<e;d++)this.array[a+d]=b.array[c+d];return this},copyArray:function(a){this.array.set(a);return this},copyColorsArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",d),f=new K);b[c++]=f.r;b[c++]=f.g;b[c++]=f.b}return this},
copyVector2sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",d),f=new y);b[c++]=f.x;b[c++]=f.y}return this},copyVector3sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",d),f=new p);b[c++]=f.x;b[c++]=f.y;b[c++]=f.z}return this},copyVector4sArray:function(a){for(var b=
this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",d),f=new U);b[c++]=f.x;b[c++]=f.y;b[c++]=f.z;b[c++]=f.w}return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},getX:function(a){return this.array[a*this.itemSize]},setX:function(a,b){this.array[a*this.itemSize]=b;return this},getY:function(a){return this.array[a*this.itemSize+1]},setY:function(a,b){this.array[a*this.itemSize+1]=b;return this},
getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,b){this.array[a*this.itemSize+2]=b;return this},getW:function(a){return this.array[a*this.itemSize+3]},setW:function(a,b){this.array[a*this.itemSize+3]=b;return this},setXY:function(a,b,c){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;return this},setXYZ:function(a,b,c,d){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a*=this.itemSize;this.array[a+0]=b;this.array[a+
1]=c;this.array[a+2]=d;this.array[a+3]=e;return this},onUpload:function(a){this.onUploadCallback=a;return this},clone:function(){return(new this.constructor(this.array,this.itemSize)).copy(this)}});vc.prototype=Object.create(O.prototype);vc.prototype.constructor=vc;wc.prototype=Object.create(O.prototype);wc.prototype.constructor=wc;xc.prototype=Object.create(O.prototype);xc.prototype.constructor=xc;yc.prototype=Object.create(O.prototype);yc.prototype.constructor=yc;nb.prototype=Object.create(O.prototype);
nb.prototype.constructor=nb;zc.prototype=Object.create(O.prototype);zc.prototype.constructor=zc;ob.prototype=Object.create(O.prototype);ob.prototype.constructor=ob;A.prototype=Object.create(O.prototype);A.prototype.constructor=A;Ac.prototype=Object.create(O.prototype);Ac.prototype.constructor=Ac;Object.assign(Ee.prototype,{computeGroups:function(a){var b=[],c=void 0;a=a.faces;for(var d=0;d<a.length;d++){var e=a[d];if(e.materialIndex!==c){c=e.materialIndex;void 0!==f&&(f.count=3*d-f.start,b.push(f));
var f={start:3*d,materialIndex:c}}}void 0!==f&&(f.count=3*d-f.start,b.push(f));this.groups=b},fromGeometry:function(a){var b=a.faces,c=a.vertices,d=a.faceVertexUvs,e=d[0]&&0<d[0].length,f=d[1]&&0<d[1].length,g=a.morphTargets,h=g.length;if(0<h){var l=[];for(var m=0;m<h;m++)l[m]=[];this.morphTargets.position=l}var k=a.morphNormals,n=k.length;if(0<n){var p=[];for(m=0;m<n;m++)p[m]=[];this.morphTargets.normal=p}var q=a.skinIndices,t=a.skinWeights,u=q.length===c.length,z=t.length===c.length;0===b.length&&
console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(m=0;m<b.length;m++){var x=b[m];this.vertices.push(c[x.a],c[x.b],c[x.c]);var w=x.vertexNormals;3===w.length?this.normals.push(w[0],w[1],w[2]):(w=x.normal,this.normals.push(w,w,w));w=x.vertexColors;3===w.length?this.colors.push(w[0],w[1],w[2]):(w=x.color,this.colors.push(w,w,w));!0===e&&(w=d[0][m],void 0!==w?this.uvs.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",m),this.uvs.push(new y,
new y,new y)));!0===f&&(w=d[1][m],void 0!==w?this.uvs2.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",m),this.uvs2.push(new y,new y,new y)));for(w=0;w<h;w++){var A=g[w].vertices;l[w].push(A[x.a],A[x.b],A[x.c])}for(w=0;w<n;w++)A=k[w].vertexNormals[m],p[w].push(A.a,A.b,A.c);u&&this.skinIndices.push(q[x.a],q[x.b],q[x.c]);z&&this.skinWeights.push(t[x.a],t[x.b],t[x.c])}this.computeGroups(a);this.verticesNeedUpdate=a.verticesNeedUpdate;this.normalsNeedUpdate=
a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this}});var Hf=1;G.prototype=Object.assign(Object.create(ha.prototype),{constructor:G,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(a){Array.isArray(a)?this.index=new (65535<Fe(a)?ob:nb)(a,1):this.index=a},addAttribute:function(a,b,c){if(!(b&&b.isBufferAttribute||b&&b.isInterleavedBufferAttribute))return console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),
this.addAttribute(a,new O(b,c));if("index"===a)return console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(b),this;this.attributes[a]=b;return this},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){delete this.attributes[a];return this},addGroup:function(a,b,c){this.groups.push({start:a,count:b,materialIndex:void 0!==c?c:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,b){this.drawRange.start=a;this.drawRange.count=
b},applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToBufferAttribute(b),b.needsUpdate=!0);b=this.attributes.normal;void 0!==b&&((new ta).getNormalMatrix(a).applyToBufferAttribute(b),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(){var a=new F;return function(b){a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a=new F;return function(b){a.makeRotationY(b);
this.applyMatrix(a);return this}}(),rotateZ:function(){var a=new F;return function(b){a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a=new F;return function(b,c,d){a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a=new F;return function(b,c,d){a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a=new B;return function(b){a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),center:function(){var a=new p;
return function(){this.computeBoundingBox();this.boundingBox.getCenter(a).negate();this.translate(a.x,a.y,a.z);return this}}(),setFromObject:function(a){var b=a.geometry;if(a.isPoints||a.isLine){a=new A(3*b.vertices.length,3);var c=new A(3*b.colors.length,3);this.addAttribute("position",a.copyVector3sArray(b.vertices));this.addAttribute("color",c.copyColorsArray(b.colors));b.lineDistances&&b.lineDistances.length===b.vertices.length&&(a=new A(b.lineDistances.length,1),this.addAttribute("lineDistance",
a.copyArray(b.lineDistances)));null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else a.isMesh&&b&&b.isGeometry&&this.fromGeometry(b);return this},setFromPoints:function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];b.push(e.x,e.y,e.z||0)}this.addAttribute("position",new A(b,3));return this},updateFromObject:function(a){var b=a.geometry;if(a.isMesh){var c=b.__directGeometry;!0===b.elementsNeedUpdate&&(c=void 0,
b.elementsNeedUpdate=!1);if(void 0===c)return this.fromGeometry(b);c.verticesNeedUpdate=b.verticesNeedUpdate;c.normalsNeedUpdate=b.normalsNeedUpdate;c.colorsNeedUpdate=b.colorsNeedUpdate;c.uvsNeedUpdate=b.uvsNeedUpdate;c.groupsNeedUpdate=b.groupsNeedUpdate;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=c}!0===b.verticesNeedUpdate&&(c=this.attributes.position,void 0!==c&&(c.copyVector3sArray(b.vertices),c.needsUpdate=!0),b.verticesNeedUpdate=
!1);!0===b.normalsNeedUpdate&&(c=this.attributes.normal,void 0!==c&&(c.copyVector3sArray(b.normals),c.needsUpdate=!0),b.normalsNeedUpdate=!1);!0===b.colorsNeedUpdate&&(c=this.attributes.color,void 0!==c&&(c.copyColorsArray(b.colors),c.needsUpdate=!0),b.colorsNeedUpdate=!1);b.uvsNeedUpdate&&(c=this.attributes.uv,void 0!==c&&(c.copyVector2sArray(b.uvs),c.needsUpdate=!0),b.uvsNeedUpdate=!1);b.lineDistancesNeedUpdate&&(c=this.attributes.lineDistance,void 0!==c&&(c.copyArray(b.lineDistances),c.needsUpdate=
!0),b.lineDistancesNeedUpdate=!1);b.groupsNeedUpdate&&(b.computeGroups(a.geometry),this.groups=b.groups,b.groupsNeedUpdate=!1);return this},fromGeometry:function(a){a.__directGeometry=(new Ee).fromGeometry(a);return this.fromDirectGeometry(a.__directGeometry)},fromDirectGeometry:function(a){var b=new Float32Array(3*a.vertices.length);this.addAttribute("position",(new O(b,3)).copyVector3sArray(a.vertices));0<a.normals.length&&(b=new Float32Array(3*a.normals.length),this.addAttribute("normal",(new O(b,
3)).copyVector3sArray(a.normals)));0<a.colors.length&&(b=new Float32Array(3*a.colors.length),this.addAttribute("color",(new O(b,3)).copyColorsArray(a.colors)));0<a.uvs.length&&(b=new Float32Array(2*a.uvs.length),this.addAttribute("uv",(new O(b,2)).copyVector2sArray(a.uvs)));0<a.uvs2.length&&(b=new Float32Array(2*a.uvs2.length),this.addAttribute("uv2",(new O(b,2)).copyVector2sArray(a.uvs2)));this.groups=a.groups;for(var c in a.morphTargets){b=[];for(var d=a.morphTargets[c],e=0,f=d.length;e<f;e++){var g=
d[e],h=new A(3*g.length,3);b.push(h.copyVector3sArray(g))}this.morphAttributes[c]=b}0<a.skinIndices.length&&(c=new A(4*a.skinIndices.length,4),this.addAttribute("skinIndex",c.copyVector4sArray(a.skinIndices)));0<a.skinWeights.length&&(c=new A(4*a.skinWeights.length,4),this.addAttribute("skinWeight",c.copyVector4sArray(a.skinWeights)));null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return this},computeBoundingBox:function(){null===
this.boundingBox&&(this.boundingBox=new Wa);var a=this.attributes.position;void 0!==a?this.boundingBox.setFromBufferAttribute(a):this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var a=new Wa,b=new p;return function(){null===this.boundingSphere&&
(this.boundingSphere=new Ga);var c=this.attributes.position;if(c){var d=this.boundingSphere.center;a.setFromBufferAttribute(c);a.getCenter(d);for(var e=0,f=0,g=c.count;f<g;f++)b.x=c.getX(f),b.y=c.getY(f),b.z=c.getZ(f),e=Math.max(e,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(e);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},
computeVertexNormals:function(){var a=this.index,b=this.attributes,c=this.groups;if(b.position){var d=b.position.array;if(void 0===b.normal)this.addAttribute("normal",new O(new Float32Array(d.length),3));else for(var e=b.normal.array,f=0,g=e.length;f<g;f++)e[f]=0;e=b.normal.array;var h=new p,l=new p,m=new p,k=new p,n=new p;if(a){a=a.array;0===c.length&&this.addGroup(0,a.length);for(var r=0,q=c.length;r<q;++r){f=c[r];g=f.start;var t=f.count;f=g;for(g+=t;f<g;f+=3){t=3*a[f+0];var u=3*a[f+1];var z=3*
a[f+2];h.fromArray(d,t);l.fromArray(d,u);m.fromArray(d,z);k.subVectors(m,l);n.subVectors(h,l);k.cross(n);e[t]+=k.x;e[t+1]+=k.y;e[t+2]+=k.z;e[u]+=k.x;e[u+1]+=k.y;e[u+2]+=k.z;e[z]+=k.x;e[z+1]+=k.y;e[z+2]+=k.z}}}else for(f=0,g=d.length;f<g;f+=9)h.fromArray(d,f),l.fromArray(d,f+3),m.fromArray(d,f+6),k.subVectors(m,l),n.subVectors(h,l),k.cross(n),e[f]=k.x,e[f+1]=k.y,e[f+2]=k.z,e[f+3]=k.x,e[f+4]=k.y,e[f+5]=k.z,e[f+6]=k.x,e[f+7]=k.y,e[f+8]=k.z;this.normalizeNormals();b.normal.needsUpdate=!0}},merge:function(a,
b){if(a&&a.isBufferGeometry){void 0===b&&(b=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var c=this.attributes,d;for(d in c)if(void 0!==a.attributes[d]){var e=c[d].array,f=a.attributes[d],g=f.array,h=0;for(f=f.itemSize*b;h<g.length;h++,f++)e[f]=g[h]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a)},normalizeNormals:function(){var a=
new p;return function(){for(var b=this.attributes.normal,c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.normalize(),b.setXYZ(c,a.x,a.y,a.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var a=new G,b=this.index.array,c=this.attributes,d;for(d in c){var e=c[d],f=e.array,g=e.itemSize,h=new f.constructor(b.length*g),l=0;e=0;for(var m=b.length;e<m;e++){var k=b[e]*g;for(var n=0;n<g;n++)h[l++]=
f[k++]}a.addAttribute(d,new O(h,g))}b=this.groups;e=0;for(m=b.length;e<m;e++)c=b[e],a.addGroup(c.start,c.count,c.materialIndex);return a},toJSON:function(){var a={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};a.uuid=this.uuid;a.type=this.type;""!==this.name&&(a.name=this.name);0<Object.keys(this.userData).length&&(a.userData=this.userData);if(void 0!==this.parameters){var b=this.parameters;for(e in b)void 0!==b[e]&&(a[e]=b[e]);return a}a.data={attributes:{}};var c=
this.index;null!==c&&(b=Array.prototype.slice.call(c.array),a.data.index={type:c.array.constructor.name,array:b});c=this.attributes;for(e in c){var d=c[e];b=Array.prototype.slice.call(d.array);a.data.attributes[e]={itemSize:d.itemSize,type:d.array.constructor.name,array:b,normalized:d.normalized}}var e=this.groups;0<e.length&&(a.data.groups=JSON.parse(JSON.stringify(e)));e=this.boundingSphere;null!==e&&(a.data.boundingSphere={center:e.center.toArray(),radius:e.radius});return a},clone:function(){return(new G).copy(this)},
copy:function(a){var b;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var c=a.index;null!==c&&this.setIndex(c.clone());c=a.attributes;for(g in c)this.addAttribute(g,c[g].clone());var d=a.morphAttributes;for(g in d){var e=[],f=d[g];c=0;for(b=f.length;c<b;c++)e.push(f[c].clone());this.morphAttributes[g]=e}var g=a.groups;c=0;for(b=g.length;c<b;c++)d=g[c],this.addGroup(d.start,d.count,d.materialIndex);g=a.boundingBox;
null!==g&&(this.boundingBox=g.clone());g=a.boundingSphere;null!==g&&(this.boundingSphere=g.clone());this.drawRange.start=a.drawRange.start;this.drawRange.count=a.drawRange.count;this.userData=a.userData;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Nb.prototype=Object.create(J.prototype);Nb.prototype.constructor=Nb;pb.prototype=Object.create(G.prototype);pb.prototype.constructor=pb;Cc.prototype=Object.create(J.prototype);Cc.prototype.constructor=Cc;rb.prototype=Object.create(G.prototype);
rb.prototype.constructor=rb;var If=0;L.prototype=Object.assign(Object.create(ha.prototype),{constructor:L,isMaterial:!0,onBeforeCompile:function(){},setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===c)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else if("shading"===b)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===c?!0:!1;else{var d=this[b];void 0===d?console.warn("THREE."+this.type+
": '"+b+"' is not a property of this material."):d&&d.isColor?d.set(c):d&&d.isVector3&&c&&c.isVector3?d.copy(c):this[b]="overdraw"===b?Number(c):c}}},toJSON:function(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var c=void 0===a||"string"===typeof a;c&&(a={textures:{},images:{}});var d={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};d.uuid=this.uuid;d.type=this.type;""!==this.name&&(d.name=this.name);this.color&&this.color.isColor&&(d.color=
this.color.getHex());void 0!==this.roughness&&(d.roughness=this.roughness);void 0!==this.metalness&&(d.metalness=this.metalness);this.emissive&&this.emissive.isColor&&(d.emissive=this.emissive.getHex());1!==this.emissiveIntensity&&(d.emissiveIntensity=this.emissiveIntensity);this.specular&&this.specular.isColor&&(d.specular=this.specular.getHex());void 0!==this.shininess&&(d.shininess=this.shininess);void 0!==this.clearCoat&&(d.clearCoat=this.clearCoat);void 0!==this.clearCoatRoughness&&(d.clearCoatRoughness=
this.clearCoatRoughness);this.map&&this.map.isTexture&&(d.map=this.map.toJSON(a).uuid);this.alphaMap&&this.alphaMap.isTexture&&(d.alphaMap=this.alphaMap.toJSON(a).uuid);this.lightMap&&this.lightMap.isTexture&&(d.lightMap=this.lightMap.toJSON(a).uuid);this.aoMap&&this.aoMap.isTexture&&(d.aoMap=this.aoMap.toJSON(a).uuid,d.aoMapIntensity=this.aoMapIntensity);this.bumpMap&&this.bumpMap.isTexture&&(d.bumpMap=this.bumpMap.toJSON(a).uuid,d.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&
(d.normalMap=this.normalMap.toJSON(a).uuid,d.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(d.displacementMap=this.displacementMap.toJSON(a).uuid,d.displacementScale=this.displacementScale,d.displacementBias=this.displacementBias);this.roughnessMap&&this.roughnessMap.isTexture&&(d.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(d.metalnessMap=this.metalnessMap.toJSON(a).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&
(d.emissiveMap=this.emissiveMap.toJSON(a).uuid);this.specularMap&&this.specularMap.isTexture&&(d.specularMap=this.specularMap.toJSON(a).uuid);this.envMap&&this.envMap.isTexture&&(d.envMap=this.envMap.toJSON(a).uuid,d.reflectivity=this.reflectivity);this.gradientMap&&this.gradientMap.isTexture&&(d.gradientMap=this.gradientMap.toJSON(a).uuid);void 0!==this.size&&(d.size=this.size);void 0!==this.sizeAttenuation&&(d.sizeAttenuation=this.sizeAttenuation);1!==this.blending&&(d.blending=this.blending);!0===
this.flatShading&&(d.flatShading=this.flatShading);0!==this.side&&(d.side=this.side);0!==this.vertexColors&&(d.vertexColors=this.vertexColors);1>this.opacity&&(d.opacity=this.opacity);!0===this.transparent&&(d.transparent=this.transparent);d.depthFunc=this.depthFunc;d.depthTest=this.depthTest;d.depthWrite=this.depthWrite;0!==this.rotation&&(d.rotation=this.rotation);1!==this.linewidth&&(d.linewidth=this.linewidth);void 0!==this.dashSize&&(d.dashSize=this.dashSize);void 0!==this.gapSize&&(d.gapSize=
this.gapSize);void 0!==this.scale&&(d.scale=this.scale);!0===this.dithering&&(d.dithering=!0);0<this.alphaTest&&(d.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(d.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&(d.wireframe=this.wireframe);1<this.wireframeLinewidth&&(d.wireframeLinewidth=this.wireframeLinewidth);"round"!==this.wireframeLinecap&&(d.wireframeLinecap=this.wireframeLinecap);"round"!==this.wireframeLinejoin&&(d.wireframeLinejoin=this.wireframeLinejoin);!0===
this.morphTargets&&(d.morphTargets=!0);!0===this.skinning&&(d.skinning=!0);!1===this.visible&&(d.visible=!1);"{}"!==JSON.stringify(this.userData)&&(d.userData=this.userData);c&&(c=b(a.textures),a=b(a.images),0<c.length&&(d.textures=c),0<a.length&&(d.images=a));return d},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name;this.fog=a.fog;this.lights=a.lights;this.blending=a.blending;this.side=a.side;this.flatShading=a.flatShading;this.vertexColors=a.vertexColors;
this.opacity=a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;this.blendEquationAlpha=a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;
this.dithering=a.dithering;this.alphaTest=a.alphaTest;this.premultipliedAlpha=a.premultipliedAlpha;this.overdraw=a.overdraw;this.visible=a.visible;this.userData=JSON.parse(JSON.stringify(a.userData));this.clipShadows=a.clipShadows;this.clipIntersection=a.clipIntersection;var b=a.clippingPlanes,c=null;if(null!==b){var d=b.length;c=Array(d);for(var e=0;e!==d;++e)c[e]=b[e].clone()}this.clippingPlanes=c;this.shadowSide=a.shadowSide;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
ka.prototype=Object.create(L.prototype);ka.prototype.constructor=ka;ka.prototype.isMeshBasicMaterial=!0;ka.prototype.copy=function(a){L.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=
a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;return this};Ea.prototype=Object.create(L.prototype);Ea.prototype.constructor=Ea;Ea.prototype.isShaderMaterial=!0;Ea.prototype.copy=function(a){L.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=Ca.clone(a.uniforms);this.defines=Object.assign({},
a.defines);this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.lights=a.lights;this.clipping=a.clipping;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;this.extensions=a.extensions;return this};Ea.prototype.toJSON=function(a){a=L.prototype.toJSON.call(this,a);a.uniforms=this.uniforms;a.vertexShader=this.vertexShader;a.fragmentShader=this.fragmentShader;return a};Object.assign(sb.prototype,{set:function(a,b){this.origin.copy(a);this.direction.copy(b);
return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){void 0===b&&(console.warn("THREE.Ray: .at() target is now required"),b=new p);return b.copy(this.direction).multiplyScalar(a).add(this.origin)},lookAt:function(a){this.direction.copy(a).sub(this.origin).normalize();return this},recast:function(){var a=new p;return function(b){this.origin.copy(this.at(b,a));return this}}(),
closestPointToPoint:function(a,b){void 0===b&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),b=new p);b.subVectors(a,this.origin);a=b.dot(this.direction);return 0>a?b.copy(this.origin):b.copy(this.direction).multiplyScalar(a).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new p;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(b);
a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceToSquared(b)}}(),distanceSqToSegment:function(){var a=new p,b=new p,c=new p;return function(d,e,f,g){a.copy(d).add(e).multiplyScalar(.5);b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var h=.5*d.distanceTo(e),l=-this.direction.dot(b),m=c.dot(this.direction),k=-c.dot(b),n=c.lengthSq(),p=Math.abs(1-l*l);if(0<p){d=l*k-m;e=l*m-k;var q=h*p;0<=d?e>=-q?e<=q?(h=1/p,d*=h,e*=h,l=d*(d+l*e+2*m)+e*(l*d+e+2*k)+n):(e=h,d=Math.max(0,
-(l*e+m)),l=-d*d+e*(e+2*k)+n):(e=-h,d=Math.max(0,-(l*e+m)),l=-d*d+e*(e+2*k)+n):e<=-q?(d=Math.max(0,-(-l*h+m)),e=0<d?-h:Math.min(Math.max(-h,-k),h),l=-d*d+e*(e+2*k)+n):e<=q?(d=0,e=Math.min(Math.max(-h,-k),h),l=e*(e+2*k)+n):(d=Math.max(0,-(l*h+m)),e=0<d?h:Math.min(Math.max(-h,-k),h),l=-d*d+e*(e+2*k)+n)}else e=0<l?-h:h,d=Math.max(0,-(l*e+m)),l=-d*d+e*(e+2*k)+n;f&&f.copy(this.direction).multiplyScalar(d).add(this.origin);g&&g.copy(b).multiplyScalar(e).add(a);return l}}(),intersectSphere:function(){var a=
new p;return function(b,c){a.subVectors(b.center,this.origin);var d=a.dot(this.direction),e=a.dot(a)-d*d;b=b.radius*b.radius;if(e>b)return null;b=Math.sqrt(b-e);e=d-b;d+=b;return 0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c)}}(),intersectsSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null},intersectPlane:function(a,
b){a=this.distanceToPlane(a);return null===a?null:this.at(a,b)},intersectsPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},intersectBox:function(a,b){var c=1/this.direction.x;var d=1/this.direction.y;var e=1/this.direction.z,f=this.origin;if(0<=c){var g=(a.min.x-f.x)*c;c*=a.max.x-f.x}else g=(a.max.x-f.x)*c,c*=a.min.x-f.x;if(0<=d){var h=(a.min.y-f.y)*d;d*=a.max.y-f.y}else h=(a.max.y-f.y)*d,d*=a.min.y-f.y;if(g>d||h>c)return null;if(h>g||g!==
g)g=h;if(d<c||c!==c)c=d;0<=e?(h=(a.min.z-f.z)*e,a=(a.max.z-f.z)*e):(h=(a.max.z-f.z)*e,a=(a.min.z-f.z)*e);if(g>a||h>c)return null;if(h>g||g!==g)g=h;if(a<c||c!==c)c=a;return 0>c?null:this.at(0<=g?g:c,b)},intersectsBox:function(){var a=new p;return function(b){return null!==this.intersectBox(b,a)}}(),intersectTriangle:function(){var a=new p,b=new p,c=new p,d=new p;return function(e,f,g,h,l){b.subVectors(f,e);c.subVectors(g,e);d.crossVectors(b,c);f=this.direction.dot(d);if(0<f){if(h)return null;h=1}else if(0>
f)h=-1,f=-f;else return null;a.subVectors(this.origin,e);e=h*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;g=h*this.direction.dot(b.cross(a));if(0>g||e+g>f)return null;e=-h*a.dot(d);return 0>e?null:this.at(e/f,l)}}(),applyMatrix4:function(a){this.origin.applyMatrix4(a);this.direction.transformDirection(a);return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}});Object.assign(Ob.prototype,{set:function(a,b){this.start.copy(a);this.end.copy(b);
return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},getCenter:function(a){void 0===a&&(console.warn("THREE.Line3: .getCenter() target is now required"),a=new p);return a.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){void 0===a&&(console.warn("THREE.Line3: .delta() target is now required"),a=new p);return a.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},
distance:function(){return this.start.distanceTo(this.end)},at:function(a,b){void 0===b&&(console.warn("THREE.Line3: .at() target is now required"),b=new p);return this.delta(b).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new p,b=new p;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);c=b.dot(b);c=b.dot(a)/c;d&&(c=P.clamp(c,0,1));return c}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);void 0===c&&
(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),c=new p);return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)}});Object.assign(Aa,{getNormal:function(){var a=new p;return function(b,c,d,e){void 0===e&&(console.warn("THREE.Triangle: .getNormal() target is now required"),e=new p);e.subVectors(d,c);a.subVectors(b,
c);e.cross(a);b=e.lengthSq();return 0<b?e.multiplyScalar(1/Math.sqrt(b)):e.set(0,0,0)}}(),getBarycoord:function(){var a=new p,b=new p,c=new p;return function(d,e,f,g,h){a.subVectors(g,e);b.subVectors(f,e);c.subVectors(d,e);d=a.dot(a);e=a.dot(b);f=a.dot(c);var l=b.dot(b);g=b.dot(c);var m=d*l-e*e;void 0===h&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),h=new p);if(0===m)return h.set(-2,-1,-1);m=1/m;l=(l*f-e*g)*m;d=(d*g-e*f)*m;return h.set(1-l-d,d,l)}}(),containsPoint:function(){var a=
new p;return function(b,c,d,e){Aa.getBarycoord(b,c,d,e,a);return 0<=a.x&&0<=a.y&&1>=a.x+a.y}}()});Object.assign(Aa.prototype,{set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},getArea:function(){var a=new p,b=new p;return function(){a.subVectors(this.c,
this.b);b.subVectors(this.a,this.b);return.5*a.cross(b).length()}}(),getMidpoint:function(a){void 0===a&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),a=new p);return a.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(a){return Aa.getNormal(this.a,this.b,this.c,a)},getPlane:function(a){void 0===a&&(console.warn("THREE.Triangle: .getPlane() target is now required"),a=new p);return a.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(a,
b){return Aa.getBarycoord(a,this.a,this.b,this.c,b)},containsPoint:function(a){return Aa.containsPoint(a,this.a,this.b,this.c)},intersectsBox:function(a){return a.intersectsTriangle(this)},closestPointToPoint:function(){var a=new Ha,b=[new Ob,new Ob,new Ob],c=new p,d=new p;return function(e,f){void 0===f&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),f=new p);var g=Infinity;a.setFromCoplanarPoints(this.a,this.b,this.c);a.projectPoint(e,c);if(!0===this.containsPoint(c))f.copy(c);
else for(b[0].set(this.a,this.b),b[1].set(this.b,this.c),b[2].set(this.c,this.a),e=0;e<b.length;e++){b[e].closestPointToPoint(c,!0,d);var h=c.distanceToSquared(d);h<g&&(g=h,f.copy(d))}return f}}(),equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}});pa.prototype=Object.assign(Object.create(B.prototype),{constructor:pa,isMesh:!0,setDrawMode:function(a){this.drawMode=a},copy:function(a){B.prototype.copy.call(this,a);this.drawMode=a.drawMode;void 0!==a.morphTargetInfluences&&
(this.morphTargetInfluences=a.morphTargetInfluences.slice());void 0!==a.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},a.morphTargetDictionary));return this},updateMorphTargets:function(){var a=this.geometry;if(a.isBufferGeometry){a=a.morphAttributes;var b=Object.keys(a);if(0<b.length){var c=a[b[0]];if(void 0!==c)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},a=0,b=c.length;a<b;a++){var d=c[a].name||String(a);this.morphTargetInfluences.push(0);this.morphTargetDictionary[d]=
a}}}else if(c=a.morphTargets,void 0!==c&&0<c.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},a=0,b=c.length;a<b;a++)d=c[a].name||String(a),this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=a},raycast:function(){function a(a,b,c,d,e,f,g){Aa.getBarycoord(a,b,c,d,u);e.multiplyScalar(u.x);f.multiplyScalar(u.y);g.multiplyScalar(u.z);e.add(f).add(g);return e.clone()}function b(a,b,c,d,e,f,g,h){if(null===(1===b.side?d.intersectTriangle(g,f,e,!0,h):d.intersectTriangle(e,
f,g,2!==b.side,h)))return null;x.copy(h);x.applyMatrix4(a.matrixWorld);b=c.ray.origin.distanceTo(x);return b<c.near||b>c.far?null:{distance:b,point:x.clone(),object:a}}function c(c,d,e,f,m,k,n,p){g.fromBufferAttribute(f,k);h.fromBufferAttribute(f,n);l.fromBufferAttribute(f,p);if(c=b(c,c.material,d,e,g,h,l,z))m&&(r.fromBufferAttribute(m,k),q.fromBufferAttribute(m,n),t.fromBufferAttribute(m,p),c.uv=a(z,g,h,l,r,q,t)),m=new Xa(k,n,p),Aa.getNormal(g,h,l,m.normal),c.face=m;return c}var d=new F,e=new sb,
f=new Ga,g=new p,h=new p,l=new p,m=new p,k=new p,n=new p,r=new y,q=new y,t=new y,u=new p,z=new p,x=new p;return function(p,v){var u=this.geometry,w=this.material,x=this.matrixWorld;if(void 0!==w&&(null===u.boundingSphere&&u.computeBoundingSphere(),f.copy(u.boundingSphere),f.applyMatrix4(x),!1!==p.ray.intersectsSphere(f)&&(d.getInverse(x),e.copy(p.ray).applyMatrix4(d),null===u.boundingBox||!1!==e.intersectsBox(u.boundingBox)))){var y;if(u.isBufferGeometry){w=u.index;var A=u.attributes.position;u=u.attributes.uv;
var H;if(null!==w)for(x=0,H=w.count;x<H;x+=3){var F=w.getX(x);var B=w.getX(x+1);var G=w.getX(x+2);if(y=c(this,p,e,A,u,F,B,G))y.faceIndex=Math.floor(x/3),v.push(y)}else if(void 0!==A)for(x=0,H=A.count;x<H;x+=3)if(F=x,B=x+1,G=x+2,y=c(this,p,e,A,u,F,B,G))y.faceIndex=Math.floor(x/3),v.push(y)}else if(u.isGeometry){x=Array.isArray(w);H=u.vertices;F=u.faces;B=u.faceVertexUvs[0];0<B.length&&(A=B);for(var I=0,K=F.length;I<K;I++){var J=F[I];y=x?w[J.materialIndex]:w;if(void 0!==y){B=H[J.a];G=H[J.b];var L=H[J.c];
if(!0===y.morphTargets){var M=u.morphTargets,O=this.morphTargetInfluences;g.set(0,0,0);h.set(0,0,0);l.set(0,0,0);for(var P=0,R=M.length;P<R;P++){var T=O[P];if(0!==T){var U=M[P].vertices;g.addScaledVector(m.subVectors(U[J.a],B),T);h.addScaledVector(k.subVectors(U[J.b],G),T);l.addScaledVector(n.subVectors(U[J.c],L),T)}}g.add(B);h.add(G);l.add(L);B=g;G=h;L=l}if(y=b(this,y,p,e,B,G,L,z))A&&A[I]&&(M=A[I],r.copy(M[0]),q.copy(M[1]),t.copy(M[2]),y.uv=a(z,B,G,L,r,q,t)),y.face=J,y.faceIndex=I,v.push(y)}}}}}}(),
clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});cb.prototype=Object.create(ca.prototype);cb.prototype.constructor=cb;cb.prototype.isCubeTexture=!0;Object.defineProperty(cb.prototype,"images",{get:function(){return this.image},set:function(a){this.image=a}});var Me=new ca,Ne=new cb,Ge=[],Ie=[],Le=new Float32Array(16),Ke=new Float32Array(9),Je=new Float32Array(4);Re.prototype.updateCache=function(a){var b=this.cache;a instanceof Float32Array&&b.length!==a.length&&
(this.cache=new Float32Array(a.length));qa(b,a)};Se.prototype.setValue=function(a,b){for(var c=this.seq,d=0,e=c.length;d!==e;++d){var f=c[d];f.setValue(a,b[f.id])}};var Wd=/([\w\d_]+)(\])?(\[|\.)?/g;db.prototype.setValue=function(a,b,c){b=this.map[b];void 0!==b&&b.setValue(a,c,this.renderer)};db.prototype.setOptional=function(a,b,c){b=b[c];void 0!==b&&this.setValue(a,c,b)};db.upload=function(a,b,c,d){for(var e=0,f=b.length;e!==f;++e){var g=b[e],h=c[g.id];!1!==h.needsUpdate&&g.setValue(a,h.value,d)}};
db.seqWithValue=function(a,b){for(var c=[],d=0,e=a.length;d!==e;++d){var f=a[d];f.id in b&&c.push(f)}return c};var wg=0,Fg=0;eb.prototype=Object.create(L.prototype);eb.prototype.constructor=eb;eb.prototype.isMeshDepthMaterial=!0;eb.prototype.copy=function(a){L.prototype.copy.call(this,a);this.depthPacking=a.depthPacking;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;
this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};fb.prototype=Object.create(L.prototype);fb.prototype.constructor=fb;fb.prototype.isMeshDistanceMaterial=!0;fb.prototype.copy=function(a){L.prototype.copy.call(this,a);this.referencePosition.copy(a.referencePosition);this.nearDistance=a.nearDistance;this.farDistance=a.farDistance;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;
this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;return this};Qb.prototype=Object.create(ca.prototype);Qb.prototype.constructor=Qb;Qb.prototype.isCanvasTexture=!0;ea.prototype=Object.assign(Object.create(Qa.prototype),{constructor:ea,isPerspectiveCamera:!0,copy:function(a,b){Qa.prototype.copy.call(this,a,b);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=null===
a.view?null:Object.assign({},a.view);this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return this},setFocalLength:function(a){a=.5*this.getFilmHeight()/a;this.fov=2*P.RAD2DEG*Math.atan(a);this.updateProjectionMatrix()},getFocalLength:function(){var a=Math.tan(.5*P.DEG2RAD*this.fov);return.5*this.getFilmHeight()/a},getEffectiveFOV:function(){return 2*P.RAD2DEG*Math.atan(Math.tan(.5*P.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/
Math.max(this.aspect,1)},setViewOffset:function(a,b,c,d,e,f){this.aspect=a/b;null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=c;this.view.offsetY=d;this.view.width=e;this.view.height=f;this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=this.near,
b=a*Math.tan(.5*P.DEG2RAD*this.fov)/this.zoom,c=2*b,d=this.aspect*c,e=-.5*d,f=this.view;if(null!==this.view&&this.view.enabled){var g=f.fullWidth,h=f.fullHeight;e+=f.offsetX*d/g;b-=f.offsetY*c/h;d*=f.width/g;c*=f.height/h}f=this.filmOffset;0!==f&&(e+=a*f/this.getFilmWidth());this.projectionMatrix.makePerspective(e,e+d,b,b-c,a,this.far)},toJSON:function(a){a=B.prototype.toJSON.call(this,a);a.object.fov=this.fov;a.object.zoom=this.zoom;a.object.near=this.near;a.object.far=this.far;a.object.focus=this.focus;
a.object.aspect=this.aspect;null!==this.view&&(a.object.view=Object.assign({},this.view));a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;return a}});Ec.prototype=Object.assign(Object.create(ea.prototype),{constructor:Ec,isArrayCamera:!0});Sb.prototype.isFogExp2=!0;Sb.prototype.clone=function(){return new Sb(this.color,this.density)};Sb.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};Tb.prototype.isFog=!0;Tb.prototype.clone=
function(){return new Tb(this.color,this.near,this.far)};Tb.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}};sd.prototype=Object.assign(Object.create(B.prototype),{constructor:sd,copy:function(a,b){B.prototype.copy.call(this,a,b);null!==a.background&&(this.background=a.background.clone());null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=
a.matrixAutoUpdate;return this},toJSON:function(a){var b=B.prototype.toJSON.call(this,a);null!==this.background&&(b.object.background=this.background.toJSON(a));null!==this.fog&&(b.object.fog=this.fog.toJSON());return b}});ib.prototype=Object.create(L.prototype);ib.prototype.constructor=ib;ib.prototype.isSpriteMaterial=!0;ib.prototype.copy=function(a){L.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.rotation=a.rotation;return this};Fc.prototype=Object.assign(Object.create(B.prototype),
{constructor:Fc,isSprite:!0,raycast:function(){var a=new p,b=new p,c=new p;return function(d,e){b.setFromMatrixPosition(this.matrixWorld);d.ray.closestPointToPoint(b,a);c.setFromMatrixScale(this.matrixWorld);var f=c.x*c.y/4;b.distanceToSquared(a)>f||(f=d.ray.origin.distanceTo(a),f<d.near||f>d.far||e.push({distance:f,point:a.clone(),face:null,object:this}))}}(),clone:function(){return(new this.constructor(this.material)).copy(this)},copy:function(a){B.prototype.copy.call(this,a);void 0!==a.center&&
this.center.copy(a.center);return this}});Gc.prototype=Object.assign(Object.create(B.prototype),{constructor:Gc,copy:function(a){B.prototype.copy.call(this,a,!1);a=a.levels;for(var b=0,c=a.length;b<c;b++){var d=a[b];this.addLevel(d.object.clone(),d.distance)}return this},addLevel:function(a,b){void 0===b&&(b=0);b=Math.abs(b);for(var c=this.levels,d=0;d<c.length&&!(b<c[d].distance);d++);c.splice(d,0,{distance:b,object:a});this.add(a)},getObjectForDistance:function(a){for(var b=this.levels,c=1,d=b.length;c<
d&&!(a<b[c].distance);c++);return b[c-1].object},raycast:function(){var a=new p;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.origin.distanceTo(a);this.getObjectForDistance(d).raycast(b,c)}}(),update:function(){var a=new p,b=new p;return function(c){var d=this.levels;if(1<d.length){a.setFromMatrixPosition(c.matrixWorld);b.setFromMatrixPosition(this.matrixWorld);c=a.distanceTo(b);d[0].object.visible=!0;for(var e=1,f=d.length;e<f;e++)if(c>=d[e].distance)d[e-1].object.visible=
!1,d[e].object.visible=!0;else break;for(;e<f;e++)d[e].object.visible=!1}}}(),toJSON:function(a){a=B.prototype.toJSON.call(this,a);a.object.levels=[];for(var b=this.levels,c=0,d=b.length;c<d;c++){var e=b[c];a.object.levels.push({object:e.object.uuid,distance:e.distance})}return a}});Object.assign(Hc.prototype,{calculateInverses:function(){this.boneInverses=[];for(var a=0,b=this.bones.length;a<b;a++){var c=new F;this.bones[a]&&c.getInverse(this.bones[a].matrixWorld);this.boneInverses.push(c)}},pose:function(){var a,
b;var c=0;for(b=this.bones.length;c<b;c++)(a=this.bones[c])&&a.matrixWorld.getInverse(this.boneInverses[c]);c=0;for(b=this.bones.length;c<b;c++)if(a=this.bones[c])a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)},update:function(){var a=new F,b=new F;return function(){for(var c=this.bones,d=this.boneInverses,e=this.boneMatrices,f=this.boneTexture,g=0,h=c.length;g<
h;g++)a.multiplyMatrices(c[g]?c[g].matrixWorld:b,d[g]),a.toArray(e,16*g);void 0!==f&&(f.needsUpdate=!0)}}(),clone:function(){return new Hc(this.bones,this.boneInverses)},getBoneByName:function(a){for(var b=0,c=this.bones.length;b<c;b++){var d=this.bones[b];if(d.name===a)return d}}});td.prototype=Object.assign(Object.create(B.prototype),{constructor:td,isBone:!0});ud.prototype=Object.assign(Object.create(pa.prototype),{constructor:ud,isSkinnedMesh:!0,initBones:function(){var a=[],b;if(this.geometry&&
void 0!==this.geometry.bones){var c=0;for(b=this.geometry.bones.length;c<b;c++){var d=this.geometry.bones[c];var e=new td;a.push(e);e.name=d.name;e.position.fromArray(d.pos);e.quaternion.fromArray(d.rotq);void 0!==d.scl&&e.scale.fromArray(d.scl)}c=0;for(b=this.geometry.bones.length;c<b;c++)d=this.geometry.bones[c],-1!==d.parent&&null!==d.parent&&void 0!==a[d.parent]?a[d.parent].add(a[c]):this.add(a[c])}this.updateMatrixWorld(!0);return a},bind:function(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),
this.skeleton.calculateInverses(),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var a;if(this.geometry&&this.geometry.isGeometry)for(a=0;a<this.geometry.skinWeights.length;a++){var b=this.geometry.skinWeights[a];var c=1/b.manhattanLength();Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){b=new U;var d=this.geometry.attributes.skinWeight;for(a=
0;a<d.count;a++)b.x=d.getX(a),b.y=d.getY(a),b.z=d.getZ(a),b.w=d.getW(a),c=1/b.manhattanLength(),Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0),d.setXYZW(a,b.x,b.y,b.z,b.w)}},updateMatrixWorld:function(a){pa.prototype.updateMatrixWorld.call(this,a);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return(new this.constructor(this.geometry,
this.material)).copy(this)}});T.prototype=Object.create(L.prototype);T.prototype.constructor=T;T.prototype.isLineBasicMaterial=!0;T.prototype.copy=function(a){L.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;return this};ma.prototype=Object.assign(Object.create(B.prototype),{constructor:ma,isLine:!0,computeLineDistances:function(){var a=new p,b=new p;return function(){var c=this.geometry;if(c.isBufferGeometry)if(null===
c.index){for(var d=c.attributes.position,e=[0],f=1,g=d.count;f<g;f++)a.fromBufferAttribute(d,f-1),b.fromBufferAttribute(d,f),e[f]=e[f-1],e[f]+=a.distanceTo(b);c.addAttribute("lineDistance",new A(e,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(c.isGeometry)for(d=c.vertices,e=c.lineDistances,e[0]=0,f=1,g=d.length;f<g;f++)e[f]=e[f-1],e[f]+=d[f-1].distanceTo(d[f]);return this}}(),raycast:function(){var a=new F,b=new sb,c=
new Ga;return function(d,e){var f=d.linePrecision;f*=f;var g=this.geometry,h=this.matrixWorld;null===g.boundingSphere&&g.computeBoundingSphere();c.copy(g.boundingSphere);c.applyMatrix4(h);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(h);b.copy(d.ray).applyMatrix4(a);var l=new p,m=new p;h=new p;var k=new p,n=this&&this.isLineSegments?2:1;if(g.isBufferGeometry){var r=g.index,q=g.attributes.position.array;if(null!==r){r=r.array;g=0;for(var t=r.length-1;g<t;g+=n){var u=r[g+1];l.fromArray(q,3*r[g]);
m.fromArray(q,3*u);u=b.distanceSqToSegment(l,m,k,h);u>f||(k.applyMatrix4(this.matrixWorld),u=d.ray.origin.distanceTo(k),u<d.near||u>d.far||e.push({distance:u,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}else for(g=0,t=q.length/3-1;g<t;g+=n)l.fromArray(q,3*g),m.fromArray(q,3*g+3),u=b.distanceSqToSegment(l,m,k,h),u>f||(k.applyMatrix4(this.matrixWorld),u=d.ray.origin.distanceTo(k),u<d.near||u>d.far||e.push({distance:u,point:h.clone().applyMatrix4(this.matrixWorld),
index:g,face:null,faceIndex:null,object:this}))}else if(g.isGeometry)for(l=g.vertices,m=l.length,g=0;g<m-1;g+=n)u=b.distanceSqToSegment(l[g],l[g+1],k,h),u>f||(k.applyMatrix4(this.matrixWorld),u=d.ray.origin.distanceTo(k),u<d.near||u>d.far||e.push({distance:u,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});aa.prototype=Object.assign(Object.create(ma.prototype),
{constructor:aa,isLineSegments:!0,computeLineDistances:function(){var a=new p,b=new p;return function(){var c=this.geometry;if(c.isBufferGeometry)if(null===c.index){for(var d=c.attributes.position,e=[],f=0,g=d.count;f<g;f+=2)a.fromBufferAttribute(d,f),b.fromBufferAttribute(d,f+1),e[f]=0===f?0:e[f-1],e[f+1]=e[f]+a.distanceTo(b);c.addAttribute("lineDistance",new A(e,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(c.isGeometry)for(d=
c.vertices,e=c.lineDistances,f=0,g=d.length;f<g;f+=2)a.copy(d[f]),b.copy(d[f+1]),e[f]=0===f?0:e[f-1],e[f+1]=e[f]+a.distanceTo(b);return this}}()});vd.prototype=Object.assign(Object.create(ma.prototype),{constructor:vd,isLineLoop:!0});Ia.prototype=Object.create(L.prototype);Ia.prototype.constructor=Ia;Ia.prototype.isPointsMaterial=!0;Ia.prototype.copy=function(a){L.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;this.morphTargets=
a.morphTargets;return this};Ub.prototype=Object.assign(Object.create(B.prototype),{constructor:Ub,isPoints:!0,raycast:function(){var a=new F,b=new sb,c=new Ga;return function(d,e){function f(a,c){var f=b.distanceSqToPoint(a);f<k&&(b.closestPointToPoint(a,n),n.applyMatrix4(l),a=d.ray.origin.distanceTo(n),a<d.near||a>d.far||e.push({distance:a,distanceToRay:Math.sqrt(f),point:n.clone(),index:c,face:null,object:g}))}var g=this,h=this.geometry,l=this.matrixWorld,m=d.params.Points.threshold;null===h.boundingSphere&&
h.computeBoundingSphere();c.copy(h.boundingSphere);c.applyMatrix4(l);c.radius+=m;if(!1!==d.ray.intersectsSphere(c)){a.getInverse(l);b.copy(d.ray).applyMatrix4(a);m/=(this.scale.x+this.scale.y+this.scale.z)/3;var k=m*m;m=new p;var n=new p;if(h.isBufferGeometry){var r=h.index;h=h.attributes.position.array;if(null!==r){var q=r.array;r=0;for(var t=q.length;r<t;r++){var u=q[r];m.fromArray(h,3*u);f(m,u)}}else for(r=0,q=h.length/3;r<q;r++)m.fromArray(h,3*r),f(m,r)}else for(m=h.vertices,r=0,q=m.length;r<
q;r++)f(m[r],r)}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});wd.prototype=Object.assign(Object.create(B.prototype),{constructor:wd,isGroup:!0});$d.prototype=Object.assign(Object.create(ca.prototype),{constructor:$d,isVideoTexture:!0,update:function(){var a=this.image;a.readyState>=a.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});Vb.prototype=Object.create(ca.prototype);Vb.prototype.constructor=Vb;Vb.prototype.isCompressedTexture=!0;Ic.prototype=Object.create(ca.prototype);
Ic.prototype.constructor=Ic;Ic.prototype.isDepthTexture=!0;Wb.prototype=Object.create(G.prototype);Wb.prototype.constructor=Wb;Jc.prototype=Object.create(J.prototype);Jc.prototype.constructor=Jc;Xb.prototype=Object.create(G.prototype);Xb.prototype.constructor=Xb;Kc.prototype=Object.create(J.prototype);Kc.prototype.constructor=Kc;va.prototype=Object.create(G.prototype);va.prototype.constructor=va;Lc.prototype=Object.create(J.prototype);Lc.prototype.constructor=Lc;Yb.prototype=Object.create(va.prototype);
Yb.prototype.constructor=Yb;Mc.prototype=Object.create(J.prototype);Mc.prototype.constructor=Mc;ub.prototype=Object.create(va.prototype);ub.prototype.constructor=ub;Nc.prototype=Object.create(J.prototype);Nc.prototype.constructor=Nc;Zb.prototype=Object.create(va.prototype);Zb.prototype.constructor=Zb;Oc.prototype=Object.create(J.prototype);Oc.prototype.constructor=Oc;$b.prototype=Object.create(va.prototype);$b.prototype.constructor=$b;Pc.prototype=Object.create(J.prototype);Pc.prototype.constructor=
Pc;ac.prototype=Object.create(G.prototype);ac.prototype.constructor=ac;Qc.prototype=Object.create(J.prototype);Qc.prototype.constructor=Qc;bc.prototype=Object.create(G.prototype);bc.prototype.constructor=bc;Rc.prototype=Object.create(J.prototype);Rc.prototype.constructor=Rc;cc.prototype=Object.create(G.prototype);cc.prototype.constructor=cc;var Sg={triangulate:function(a,b,c){c=c||2;var d=b&&b.length,e=d?b[0]*c:a.length,f=af(a,0,e,c,!0),g=[];if(!f)return g;var h;if(d){var l=c;d=[];var m;var k=0;for(m=
b.length;k<m;k++){var n=b[k]*l;var p=k<m-1?b[k+1]*l:a.length;n=af(a,n,p,l,!1);n===n.next&&(n.steiner=!0);d.push(Pg(n))}d.sort(Ng);for(k=0;k<d.length;k++){b=d[k];l=f;if(l=Og(b,l))b=df(l,b),Tc(b,b.next);f=Tc(f,f.next)}}if(a.length>80*c){var q=h=a[0];var t=d=a[1];for(l=c;l<e;l+=c)k=a[l],b=a[l+1],k<q&&(q=k),b<t&&(t=b),k>h&&(h=k),b>d&&(d=b);h=Math.max(h-q,d-t);h=0!==h?1/h:0}Uc(f,g,c,q,t,h);return g}},Za={area:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d].x*a[e].y-a[e].x*a[d].y;return.5*
c},isClockWise:function(a){return 0>Za.area(a)},triangulateShape:function(a,b){var c=[],d=[],e=[];ef(a);ff(c,a);var f=a.length;b.forEach(ef);for(a=0;a<b.length;a++)d.push(f),f+=b[a].length,ff(c,b[a]);b=Sg.triangulate(c,d);for(a=0;a<b.length;a+=3)e.push(b.slice(a,a+3));return e}};wb.prototype=Object.create(J.prototype);wb.prototype.constructor=wb;wb.prototype.toJSON=function(){var a=J.prototype.toJSON.call(this);return gf(this.parameters.shapes,this.parameters.options,a)};Sa.prototype=Object.create(G.prototype);
Sa.prototype.constructor=Sa;Sa.prototype.toJSON=function(){var a=G.prototype.toJSON.call(this);return gf(this.parameters.shapes,this.parameters.options,a)};var Qg={generateTopUV:function(a,b,c,d,e){a=b[3*d];d=b[3*d+1];var f=b[3*e];e=b[3*e+1];return[new y(b[3*c],b[3*c+1]),new y(a,d),new y(f,e)]},generateSideWallUV:function(a,b,c,d,e,f){a=b[3*c];var g=b[3*c+1];c=b[3*c+2];var h=b[3*d],l=b[3*d+1];d=b[3*d+2];var m=b[3*e],k=b[3*e+1];e=b[3*e+2];var n=b[3*f],p=b[3*f+1];b=b[3*f+2];return.01>Math.abs(g-l)?
[new y(a,1-c),new y(h,1-d),new y(m,1-e),new y(n,1-b)]:[new y(g,1-c),new y(l,1-d),new y(k,1-e),new y(p,1-b)]}};Wc.prototype=Object.create(J.prototype);Wc.prototype.constructor=Wc;dc.prototype=Object.create(Sa.prototype);dc.prototype.constructor=dc;Xc.prototype=Object.create(J.prototype);Xc.prototype.constructor=Xc;xb.prototype=Object.create(G.prototype);xb.prototype.constructor=xb;Yc.prototype=Object.create(J.prototype);Yc.prototype.constructor=Yc;ec.prototype=Object.create(G.prototype);ec.prototype.constructor=
ec;Zc.prototype=Object.create(J.prototype);Zc.prototype.constructor=Zc;fc.prototype=Object.create(G.prototype);fc.prototype.constructor=fc;yb.prototype=Object.create(J.prototype);yb.prototype.constructor=yb;yb.prototype.toJSON=function(){var a=J.prototype.toJSON.call(this);return hf(this.parameters.shapes,a)};zb.prototype=Object.create(G.prototype);zb.prototype.constructor=zb;zb.prototype.toJSON=function(){var a=G.prototype.toJSON.call(this);return hf(this.parameters.shapes,a)};gc.prototype=Object.create(G.prototype);
gc.prototype.constructor=gc;Ab.prototype=Object.create(J.prototype);Ab.prototype.constructor=Ab;$a.prototype=Object.create(G.prototype);$a.prototype.constructor=$a;$c.prototype=Object.create(Ab.prototype);$c.prototype.constructor=$c;ad.prototype=Object.create($a.prototype);ad.prototype.constructor=ad;bd.prototype=Object.create(J.prototype);bd.prototype.constructor=bd;hc.prototype=Object.create(G.prototype);hc.prototype.constructor=hc;var za=Object.freeze({WireframeGeometry:Wb,ParametricGeometry:Jc,
ParametricBufferGeometry:Xb,TetrahedronGeometry:Lc,TetrahedronBufferGeometry:Yb,OctahedronGeometry:Mc,OctahedronBufferGeometry:ub,IcosahedronGeometry:Nc,IcosahedronBufferGeometry:Zb,DodecahedronGeometry:Oc,DodecahedronBufferGeometry:$b,PolyhedronGeometry:Kc,PolyhedronBufferGeometry:va,TubeGeometry:Pc,TubeBufferGeometry:ac,TorusKnotGeometry:Qc,TorusKnotBufferGeometry:bc,TorusGeometry:Rc,TorusBufferGeometry:cc,TextGeometry:Wc,TextBufferGeometry:dc,SphereGeometry:Xc,SphereBufferGeometry:xb,RingGeometry:Yc,
RingBufferGeometry:ec,PlaneGeometry:Cc,PlaneBufferGeometry:rb,LatheGeometry:Zc,LatheBufferGeometry:fc,ShapeGeometry:yb,ShapeBufferGeometry:zb,ExtrudeGeometry:wb,ExtrudeBufferGeometry:Sa,EdgesGeometry:gc,ConeGeometry:$c,ConeBufferGeometry:ad,CylinderGeometry:Ab,CylinderBufferGeometry:$a,CircleGeometry:bd,CircleBufferGeometry:hc,BoxGeometry:Nb,BoxBufferGeometry:pb});Bb.prototype=Object.create(L.prototype);Bb.prototype.constructor=Bb;Bb.prototype.isShadowMaterial=!0;Bb.prototype.copy=function(a){L.prototype.copy.call(this,
a);this.color.copy(a.color);return this};ic.prototype=Object.create(Ea.prototype);ic.prototype.constructor=ic;ic.prototype.isRawShaderMaterial=!0;Ta.prototype=Object.create(L.prototype);Ta.prototype.constructor=Ta;Ta.prototype.isMeshStandardMaterial=!0;Ta.prototype.copy=function(a){L.prototype.copy.call(this,a);this.defines={STANDARD:""};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;
this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=a.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=
a.envMap;this.envMapIntensity=a.envMapIntensity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Cb.prototype=Object.create(Ta.prototype);Cb.prototype.constructor=Cb;Cb.prototype.isMeshPhysicalMaterial=!0;Cb.prototype.copy=function(a){Ta.prototype.copy.call(this,
a);this.defines={PHYSICAL:""};this.reflectivity=a.reflectivity;this.clearCoat=a.clearCoat;this.clearCoatRoughness=a.clearCoatRoughness;return this};Ja.prototype=Object.create(L.prototype);Ja.prototype.constructor=Ja;Ja.prototype.isMeshPhongMaterial=!0;Ja.prototype.copy=function(a){L.prototype.copy.call(this,a);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess=a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=
a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=
a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Db.prototype=Object.create(Ja.prototype);Db.prototype.constructor=Db;Db.prototype.isMeshToonMaterial=!0;Db.prototype.copy=function(a){Ja.prototype.copy.call(this,a);this.gradientMap=a.gradientMap;return this};Eb.prototype=Object.create(L.prototype);
Eb.prototype.constructor=Eb;Eb.prototype.isMeshNormalMaterial=!0;Eb.prototype.copy=function(a){L.prototype.copy.call(this,a);this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=
a.morphNormals;return this};Fb.prototype=Object.create(L.prototype);Fb.prototype.constructor=Fb;Fb.prototype.isMeshLambertMaterial=!0;Fb.prototype.copy=function(a){L.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.specularMap=a.specularMap;this.alphaMap=
a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Gb.prototype=Object.create(T.prototype);Gb.prototype.constructor=Gb;Gb.prototype.isLineDashedMaterial=!0;Gb.prototype.copy=
function(a){T.prototype.copy.call(this,a);this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return this};var Tg=Object.freeze({ShadowMaterial:Bb,SpriteMaterial:ib,RawShaderMaterial:ic,ShaderMaterial:Ea,PointsMaterial:Ia,MeshPhysicalMaterial:Cb,MeshStandardMaterial:Ta,MeshPhongMaterial:Ja,MeshToonMaterial:Db,MeshNormalMaterial:Eb,MeshLambertMaterial:Fb,MeshDepthMaterial:eb,MeshDistanceMaterial:fb,MeshBasicMaterial:ka,LineDashedMaterial:Gb,LineBasicMaterial:T,Material:L}),Kb={enabled:!1,
files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}},wa=new ce,bb={};Object.assign(Ka.prototype,{load:function(a,b,c,d){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var e=this,f=Kb.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;if(void 0!==bb[a])bb[a].push({onLoad:b,
onProgress:c,onError:d});else{var g=a.match(/^data:(.*?)(;base64)?,(.*)$/);if(g){c=g[1];var h=!!g[2];g=g[3];g=window.decodeURIComponent(g);h&&(g=window.atob(g));try{var l=(this.responseType||"").toLowerCase();switch(l){case "arraybuffer":case "blob":var m=new Uint8Array(g.length);for(h=0;h<g.length;h++)m[h]=g.charCodeAt(h);var k="blob"===l?new Blob([m.buffer],{type:c}):m.buffer;break;case "document":k=(new DOMParser).parseFromString(g,c);break;case "json":k=JSON.parse(g);break;default:k=g}window.setTimeout(function(){b&&
b(k);e.manager.itemEnd(a)},0)}catch(r){window.setTimeout(function(){d&&d(r);e.manager.itemEnd(a);e.manager.itemError(a)},0)}}else{bb[a]=[];bb[a].push({onLoad:b,onProgress:c,onError:d});var n=new XMLHttpRequest;n.open("GET",a,!0);n.addEventListener("load",function(b){var c=this.response;Kb.add(a,c);var d=bb[a];delete bb[a];if(200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var f=0,g=d.length;f<g;f++){var h=d[f];if(h.onLoad)h.onLoad(c)}e.manager.itemEnd(a)}else{f=
0;for(g=d.length;f<g;f++)if(h=d[f],h.onError)h.onError(b);e.manager.itemEnd(a);e.manager.itemError(a)}},!1);n.addEventListener("progress",function(b){for(var c=bb[a],d=0,e=c.length;d<e;d++){var f=c[d];if(f.onProgress)f.onProgress(b)}},!1);n.addEventListener("error",function(b){var c=bb[a];delete bb[a];for(var d=0,f=c.length;d<f;d++){var g=c[d];if(g.onError)g.onError(b)}e.manager.itemEnd(a);e.manager.itemError(a)},!1);void 0!==this.responseType&&(n.responseType=this.responseType);void 0!==this.withCredentials&&
(n.withCredentials=this.withCredentials);n.overrideMimeType&&n.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(h in this.requestHeader)n.setRequestHeader(h,this.requestHeader[h]);n.send(null)}e.manager.itemStart(a);return n}},setPath:function(a){this.path=a;return this},setResponseType:function(a){this.responseType=a;return this},setWithCredentials:function(a){this.withCredentials=a;return this},setMimeType:function(a){this.mimeType=a;return this},setRequestHeader:function(a){this.requestHeader=
a;return this}});Object.assign(jf.prototype,{load:function(a,b,c,d){function e(e){l.load(a[e],function(a){a=f._parser(a,!0);g[e]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps};m+=1;6===m&&(1===a.mipmapCount&&(h.minFilter=1006),h.format=a.format,h.needsUpdate=!0,b&&b(h))},c,d)}var f=this,g=[],h=new Vb;h.image=g;var l=new Ka(this.manager);l.setPath(this.path);l.setResponseType("arraybuffer");if(Array.isArray(a))for(var m=0,k=0,n=a.length;k<n;++k)e(k);else l.load(a,function(a){a=f._parser(a,
!0);if(a.isCubemap)for(var c=a.mipmaps.length/a.mipmapCount,d=0;d<c;d++){g[d]={mipmaps:[]};for(var e=0;e<a.mipmapCount;e++)g[d].mipmaps.push(a.mipmaps[d*a.mipmapCount+e]),g[d].format=a.format,g[d].width=a.width,g[d].height=a.height}else h.image.width=a.width,h.image.height=a.height,h.mipmaps=a.mipmaps;1===a.mipmapCount&&(h.minFilter=1006);h.format=a.format;h.needsUpdate=!0;b&&b(h)},c,d);return h},setPath:function(a){this.path=a;return this}});Object.assign(de.prototype,{load:function(a,b,c,d){var e=
this,f=new lb,g=new Ka(this.manager);g.setResponseType("arraybuffer");g.load(a,function(a){if(a=e._parser(a))void 0!==a.image?f.image=a.image:void 0!==a.data&&(f.image.width=a.width,f.image.height=a.height,f.image.data=a.data),f.wrapS=void 0!==a.wrapS?a.wrapS:1001,f.wrapT=void 0!==a.wrapT?a.wrapT:1001,f.magFilter=void 0!==a.magFilter?a.magFilter:1006,f.minFilter=void 0!==a.minFilter?a.minFilter:1008,f.anisotropy=void 0!==a.anisotropy?a.anisotropy:1,void 0!==a.format&&(f.format=a.format),void 0!==
a.type&&(f.type=a.type),void 0!==a.mipmaps&&(f.mipmaps=a.mipmaps),1===a.mipmapCount&&(f.minFilter=1006),f.needsUpdate=!0,b&&b(f,a)},c,d);return f}});Object.assign(cd.prototype,{crossOrigin:"Anonymous",load:function(a,b,c,d){function e(){l.removeEventListener("load",e,!1);l.removeEventListener("error",f,!1);Kb.add(a,this);b&&b(this);g.manager.itemEnd(a)}function f(b){l.removeEventListener("load",e,!1);l.removeEventListener("error",f,!1);d&&d(b);g.manager.itemEnd(a);g.manager.itemError(a)}void 0===
a&&(a="");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var g=this,h=Kb.get(a);if(void 0!==h)return g.manager.itemStart(a),setTimeout(function(){b&&b(h);g.manager.itemEnd(a)},0),h;var l=document.createElementNS("http://www.w3.org/1999/xhtml","img");l.addEventListener("load",e,!1);l.addEventListener("error",f,!1);"data:"!==a.substr(0,5)&&void 0!==this.crossOrigin&&(l.crossOrigin=this.crossOrigin);g.manager.itemStart(a);l.src=a;return l},setCrossOrigin:function(a){this.crossOrigin=
a;return this},setPath:function(a){this.path=a;return this}});Object.assign(ee.prototype,{crossOrigin:"Anonymous",load:function(a,b,c,d){function e(c){g.load(a[c],function(a){f.images[c]=a;h++;6===h&&(f.needsUpdate=!0,b&&b(f))},void 0,d)}var f=new cb,g=new cd(this.manager);g.setCrossOrigin(this.crossOrigin);g.setPath(this.path);var h=0;for(c=0;c<a.length;++c)e(c);return f},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});Object.assign(yd.prototype,
{crossOrigin:"Anonymous",load:function(a,b,c,d){var e=new ca,f=new cd(this.manager);f.setCrossOrigin(this.crossOrigin);f.setPath(this.path);f.load(a,function(c){e.image=c;c=0<a.search(/\.(jpg|jpeg)$/)||0===a.search(/^data:image\/jpeg/);e.format=c?1022:1023;e.needsUpdate=!0;void 0!==b&&b(e)},c,d);return e},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});Object.assign(I.prototype,{getPoint:function(){console.warn("THREE.Curve: .getPoint() not implemented.");
return null},getPointAt:function(a,b){a=this.getUtoTmapping(a);return this.getPoint(a,b)},getPoints:function(a){void 0===a&&(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));return b},getSpacedPoints:function(a){void 0===a&&(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPointAt(c/a));return b},getLength:function(){var a=this.getLengths();return a[a.length-1]},getLengths:function(a){void 0===a&&(a=this.arcLengthDivisions);if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;
this.needsUpdate=!1;var b=[],c=this.getPoint(0),d,e=0;b.push(0);for(d=1;d<=a;d++){var f=this.getPoint(d/a);e+=f.distanceTo(c);b.push(e);c=f}return this.cacheArcLengths=b},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(a,b){var c=this.getLengths(),d=c.length;b=b?b:a*c[d-1];for(var e=0,f=d-1,g;e<=f;)if(a=Math.floor(e+(f-e)/2),g=c[a]-b,0>g)e=a+1;else if(0<g)f=a-1;else{f=a;break}a=f;if(c[a]===b)return a/(d-1);e=c[a];return(a+(b-e)/(c[a+1]-e))/(d-1)},getTangent:function(a){var b=
a-1E-4;a+=1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()},getTangentAt:function(a){a=this.getUtoTmapping(a);return this.getTangent(a)},computeFrenetFrames:function(a,b){var c=new p,d=[],e=[],f=[],g=new p,h=new F,l;for(l=0;l<=a;l++){var m=l/a;d[l]=this.getTangentAt(m);d[l].normalize()}e[0]=new p;f[0]=new p;l=Number.MAX_VALUE;m=Math.abs(d[0].x);var k=Math.abs(d[0].y),n=Math.abs(d[0].z);m<=l&&(l=m,c.set(1,0,0));k<=l&&(l=k,c.set(0,1,0));n<=l&&c.set(0,
0,1);g.crossVectors(d[0],c).normalize();e[0].crossVectors(d[0],g);f[0].crossVectors(d[0],e[0]);for(l=1;l<=a;l++)e[l]=e[l-1].clone(),f[l]=f[l-1].clone(),g.crossVectors(d[l-1],d[l]),g.length()>Number.EPSILON&&(g.normalize(),c=Math.acos(P.clamp(d[l-1].dot(d[l]),-1,1)),e[l].applyMatrix4(h.makeRotationAxis(g,c))),f[l].crossVectors(d[l],e[l]);if(!0===b)for(c=Math.acos(P.clamp(e[0].dot(e[a]),-1,1)),c/=a,0<d[0].dot(g.crossVectors(e[0],e[a]))&&(c=-c),l=1;l<=a;l++)e[l].applyMatrix4(h.makeRotationAxis(d[l],
c*l)),f[l].crossVectors(d[l],e[l]);return{tangents:d,normals:e,binormals:f}},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.arcLengthDivisions=a.arcLengthDivisions;return this},toJSON:function(){var a={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};a.arcLengthDivisions=this.arcLengthDivisions;a.type=this.type;return a},fromJSON:function(a){this.arcLengthDivisions=a.arcLengthDivisions;return this}});xa.prototype=Object.create(I.prototype);xa.prototype.constructor=
xa;xa.prototype.isEllipseCurve=!0;xa.prototype.getPoint=function(a,b){b=b||new y;for(var c=2*Math.PI,d=this.aEndAngle-this.aStartAngle,e=Math.abs(d)<Number.EPSILON;0>d;)d+=c;for(;d>c;)d-=c;d<Number.EPSILON&&(d=e?0:c);!0!==this.aClockwise||e||(d=d===c?-c:d-c);c=this.aStartAngle+a*d;a=this.aX+this.xRadius*Math.cos(c);var f=this.aY+this.yRadius*Math.sin(c);0!==this.aRotation&&(c=Math.cos(this.aRotation),d=Math.sin(this.aRotation),e=a-this.aX,f-=this.aY,a=e*c-f*d+this.aX,f=e*d+f*c+this.aY);return b.set(a,
f)};xa.prototype.copy=function(a){I.prototype.copy.call(this,a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this};xa.prototype.toJSON=function(){var a=I.prototype.toJSON.call(this);a.aX=this.aX;a.aY=this.aY;a.xRadius=this.xRadius;a.yRadius=this.yRadius;a.aStartAngle=this.aStartAngle;a.aEndAngle=this.aEndAngle;a.aClockwise=this.aClockwise;a.aRotation=
this.aRotation;return a};xa.prototype.fromJSON=function(a){I.prototype.fromJSON.call(this,a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this};jc.prototype=Object.create(xa.prototype);jc.prototype.constructor=jc;jc.prototype.isArcCurve=!0;var Rd=new p,Ae=new fe,Be=new fe,Ce=new fe;ra.prototype=Object.create(I.prototype);ra.prototype.constructor=ra;ra.prototype.isCatmullRomCurve3=
!0;ra.prototype.getPoint=function(a,b){b=b||new p;var c=this.points,d=c.length;a*=d-(this.closed?0:1);var e=Math.floor(a);a-=e;this.closed?e+=0<e?0:(Math.floor(Math.abs(e)/d)+1)*d:0===a&&e===d-1&&(e=d-2,a=1);if(this.closed||0<e)var f=c[(e-1)%d];else Rd.subVectors(c[0],c[1]).add(c[0]),f=Rd;var g=c[e%d];var h=c[(e+1)%d];this.closed||e+2<d?c=c[(e+2)%d]:(Rd.subVectors(c[d-1],c[d-2]).add(c[d-1]),c=Rd);if("centripetal"===this.curveType||"chordal"===this.curveType){var l="chordal"===this.curveType?.5:.25;
d=Math.pow(f.distanceToSquared(g),l);e=Math.pow(g.distanceToSquared(h),l);l=Math.pow(h.distanceToSquared(c),l);1E-4>e&&(e=1);1E-4>d&&(d=e);1E-4>l&&(l=e);Ae.initNonuniformCatmullRom(f.x,g.x,h.x,c.x,d,e,l);Be.initNonuniformCatmullRom(f.y,g.y,h.y,c.y,d,e,l);Ce.initNonuniformCatmullRom(f.z,g.z,h.z,c.z,d,e,l)}else"catmullrom"===this.curveType&&(Ae.initCatmullRom(f.x,g.x,h.x,c.x,this.tension),Be.initCatmullRom(f.y,g.y,h.y,c.y,this.tension),Ce.initCatmullRom(f.z,g.z,h.z,c.z,this.tension));b.set(Ae.calc(a),
Be.calc(a),Ce.calc(a));return b};ra.prototype.copy=function(a){I.prototype.copy.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++)this.points.push(a.points[b].clone());this.closed=a.closed;this.curveType=a.curveType;this.tension=a.tension;return this};ra.prototype.toJSON=function(){var a=I.prototype.toJSON.call(this);a.points=[];for(var b=0,c=this.points.length;b<c;b++)a.points.push(this.points[b].toArray());a.closed=this.closed;a.curveType=this.curveType;a.tension=this.tension;return a};
ra.prototype.fromJSON=function(a){I.prototype.fromJSON.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++){var d=a.points[b];this.points.push((new p).fromArray(d))}this.closed=a.closed;this.curveType=a.curveType;this.tension=a.tension;return this};La.prototype=Object.create(I.prototype);La.prototype.constructor=La;La.prototype.isCubicBezierCurve=!0;La.prototype.getPoint=function(a,b){b=b||new y;var c=this.v0,d=this.v1,e=this.v2,f=this.v3;b.set(ed(a,c.x,d.x,e.x,f.x),ed(a,c.y,d.y,e.y,
f.y));return b};La.prototype.copy=function(a){I.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this};La.prototype.toJSON=function(){var a=I.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return a};La.prototype.fromJSON=function(a){I.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this};
Ua.prototype=Object.create(I.prototype);Ua.prototype.constructor=Ua;Ua.prototype.isCubicBezierCurve3=!0;Ua.prototype.getPoint=function(a,b){b=b||new p;var c=this.v0,d=this.v1,e=this.v2,f=this.v3;b.set(ed(a,c.x,d.x,e.x,f.x),ed(a,c.y,d.y,e.y,f.y),ed(a,c.z,d.z,e.z,f.z));return b};Ua.prototype.copy=function(a){I.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this};Ua.prototype.toJSON=function(){var a=I.prototype.toJSON.call(this);a.v0=this.v0.toArray();
a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return a};Ua.prototype.fromJSON=function(a){I.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this};ya.prototype=Object.create(I.prototype);ya.prototype.constructor=ya;ya.prototype.isLineCurve=!0;ya.prototype.getPoint=function(a,b){b=b||new y;1===a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return b};ya.prototype.getPointAt=
function(a,b){return this.getPoint(a,b)};ya.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()};ya.prototype.copy=function(a){I.prototype.copy.call(this,a);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};ya.prototype.toJSON=function(){var a=I.prototype.toJSON.call(this);a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};ya.prototype.fromJSON=function(a){I.prototype.fromJSON.call(this,a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Ma.prototype=
Object.create(I.prototype);Ma.prototype.constructor=Ma;Ma.prototype.isLineCurve3=!0;Ma.prototype.getPoint=function(a,b){b=b||new p;1===a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return b};Ma.prototype.getPointAt=function(a,b){return this.getPoint(a,b)};Ma.prototype.copy=function(a){I.prototype.copy.call(this,a);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};Ma.prototype.toJSON=function(){var a=I.prototype.toJSON.call(this);a.v1=this.v1.toArray();a.v2=this.v2.toArray();
return a};Ma.prototype.fromJSON=function(a){I.prototype.fromJSON.call(this,a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Na.prototype=Object.create(I.prototype);Na.prototype.constructor=Na;Na.prototype.isQuadraticBezierCurve=!0;Na.prototype.getPoint=function(a,b){b=b||new y;var c=this.v0,d=this.v1,e=this.v2;b.set(dd(a,c.x,d.x,e.x),dd(a,c.y,d.y,e.y));return b};Na.prototype.copy=function(a){I.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};
Na.prototype.toJSON=function(){var a=I.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};Na.prototype.fromJSON=function(a){I.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Va.prototype=Object.create(I.prototype);Va.prototype.constructor=Va;Va.prototype.isQuadraticBezierCurve3=!0;Va.prototype.getPoint=function(a,b){b=b||new p;var c=this.v0,d=this.v1,e=this.v2;b.set(dd(a,c.x,
d.x,e.x),dd(a,c.y,d.y,e.y),dd(a,c.z,d.z,e.z));return b};Va.prototype.copy=function(a){I.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};Va.prototype.toJSON=function(){var a=I.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};Va.prototype.fromJSON=function(a){I.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Oa.prototype=Object.create(I.prototype);
Oa.prototype.constructor=Oa;Oa.prototype.isSplineCurve=!0;Oa.prototype.getPoint=function(a,b){b=b||new y;var c=this.points,d=(c.length-1)*a;a=Math.floor(d);d-=a;var e=c[0===a?a:a-1],f=c[a],g=c[a>c.length-2?c.length-1:a+1];c=c[a>c.length-3?c.length-1:a+2];b.set(kf(d,e.x,f.x,g.x,c.x),kf(d,e.y,f.y,g.y,c.y));return b};Oa.prototype.copy=function(a){I.prototype.copy.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++)this.points.push(a.points[b].clone());return this};Oa.prototype.toJSON=function(){var a=
I.prototype.toJSON.call(this);a.points=[];for(var b=0,c=this.points.length;b<c;b++)a.points.push(this.points[b].toArray());return a};Oa.prototype.fromJSON=function(a){I.prototype.fromJSON.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++){var d=a.points[b];this.points.push((new y).fromArray(d))}return this};var zf=Object.freeze({ArcCurve:jc,CatmullRomCurve3:ra,CubicBezierCurve:La,CubicBezierCurve3:Ua,EllipseCurve:xa,LineCurve:ya,LineCurve3:Ma,QuadraticBezierCurve:Na,QuadraticBezierCurve3:Va,
SplineCurve:Oa});ab.prototype=Object.assign(Object.create(I.prototype),{constructor:ab,add:function(a){this.curves.push(a)},closePath:function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new ya(b,a))},getPoint:function(a){var b=a*this.getLength(),c=this.getCurveLengths();for(a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.curves[a],c=a.getLength(),a.getPointAt(0===c?0:1-b/c);a++}return null},getLength:function(){var a=this.getCurveLengths();
return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=!0;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],b=0,c=0,d=this.curves.length;c<d;c++)b+=this.curves[c].getLength(),a.push(b);return this.cacheLengths=a},getSpacedPoints:function(a){void 0===a&&(a=40);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));this.autoClose&&b.push(b[0]);return b},getPoints:function(a){a=
a||12;for(var b=[],c,d=0,e=this.curves;d<e.length;d++){var f=e[d];f=f.getPoints(f&&f.isEllipseCurve?2*a:f&&f.isLineCurve?1:f&&f.isSplineCurve?a*f.points.length:a);for(var g=0;g<f.length;g++){var h=f[g];c&&c.equals(h)||(b.push(h),c=h)}}this.autoClose&&1<b.length&&!b[b.length-1].equals(b[0])&&b.push(b[0]);return b},copy:function(a){I.prototype.copy.call(this,a);this.curves=[];for(var b=0,c=a.curves.length;b<c;b++)this.curves.push(a.curves[b].clone());this.autoClose=a.autoClose;return this},toJSON:function(){var a=
I.prototype.toJSON.call(this);a.autoClose=this.autoClose;a.curves=[];for(var b=0,c=this.curves.length;b<c;b++)a.curves.push(this.curves[b].toJSON());return a},fromJSON:function(a){I.prototype.fromJSON.call(this,a);this.autoClose=a.autoClose;this.curves=[];for(var b=0,c=a.curves.length;b<c;b++){var d=a.curves[b];this.curves.push((new zf[d.type]).fromJSON(d))}return this}});Pa.prototype=Object.assign(Object.create(ab.prototype),{constructor:Pa,setFromPoints:function(a){this.moveTo(a[0].x,a[0].y);for(var b=
1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)},moveTo:function(a,b){this.currentPoint.set(a,b)},lineTo:function(a,b){var c=new ya(this.currentPoint.clone(),new y(a,b));this.curves.push(c);this.currentPoint.set(a,b)},quadraticCurveTo:function(a,b,c,d){a=new Na(this.currentPoint.clone(),new y(a,b),new y(c,d));this.curves.push(a);this.currentPoint.set(c,d)},bezierCurveTo:function(a,b,c,d,e,f){a=new La(this.currentPoint.clone(),new y(a,b),new y(c,d),new y(e,f));this.curves.push(a);this.currentPoint.set(e,
f)},splineThru:function(a){var b=[this.currentPoint.clone()].concat(a);b=new Oa(b);this.curves.push(b);this.currentPoint.copy(a[a.length-1])},arc:function(a,b,c,d,e,f){this.absarc(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,f)},absarc:function(a,b,c,d,e,f){this.absellipse(a,b,c,c,d,e,f)},ellipse:function(a,b,c,d,e,f,g,h){this.absellipse(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,f,g,h)},absellipse:function(a,b,c,d,e,f,g,h){a=new xa(a,b,c,d,e,f,g,h);0<this.curves.length&&(b=a.getPoint(0),
b.equals(this.currentPoint)||this.lineTo(b.x,b.y));this.curves.push(a);a=a.getPoint(1);this.currentPoint.copy(a)},copy:function(a){ab.prototype.copy.call(this,a);this.currentPoint.copy(a.currentPoint);return this},toJSON:function(){var a=ab.prototype.toJSON.call(this);a.currentPoint=this.currentPoint.toArray();return a},fromJSON:function(a){ab.prototype.fromJSON.call(this,a);this.currentPoint.fromArray(a.currentPoint);return this}});jb.prototype=Object.assign(Object.create(Pa.prototype),{constructor:jb,
getPointsHoles:function(a){for(var b=[],c=0,d=this.holes.length;c<d;c++)b[c]=this.holes[c].getPoints(a);return b},extractPoints:function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}},copy:function(a){Pa.prototype.copy.call(this,a);this.holes=[];for(var b=0,c=a.holes.length;b<c;b++)this.holes.push(a.holes[b].clone());return this},toJSON:function(){var a=Pa.prototype.toJSON.call(this);a.uuid=this.uuid;a.holes=[];for(var b=0,c=this.holes.length;b<c;b++)a.holes.push(this.holes[b].toJSON());
return a},fromJSON:function(a){Pa.prototype.fromJSON.call(this,a);this.uuid=a.uuid;this.holes=[];for(var b=0,c=a.holes.length;b<c;b++){var d=a.holes[b];this.holes.push((new Pa).fromJSON(d))}return this}});ba.prototype=Object.assign(Object.create(B.prototype),{constructor:ba,isLight:!0,copy:function(a){B.prototype.copy.call(this,a);this.color.copy(a.color);this.intensity=a.intensity;return this},toJSON:function(a){a=B.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();a.object.intensity=
this.intensity;void 0!==this.groundColor&&(a.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(a.object.distance=this.distance);void 0!==this.angle&&(a.object.angle=this.angle);void 0!==this.decay&&(a.object.decay=this.decay);void 0!==this.penumbra&&(a.object.penumbra=this.penumbra);void 0!==this.shadow&&(a.object.shadow=this.shadow.toJSON());return a}});zd.prototype=Object.assign(Object.create(ba.prototype),{constructor:zd,isHemisphereLight:!0,copy:function(a){ba.prototype.copy.call(this,
a);this.groundColor.copy(a.groundColor);return this}});Object.assign(Hb.prototype,{copy:function(a){this.camera=a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var a={};0!==this.bias&&(a.bias=this.bias);1!==this.radius&&(a.radius=this.radius);if(512!==this.mapSize.x||512!==this.mapSize.y)a.mapSize=this.mapSize.toArray();a.camera=this.camera.toJSON(!1).object;delete a.camera.matrix;
return a}});Ad.prototype=Object.assign(Object.create(Hb.prototype),{constructor:Ad,isSpotLightShadow:!0,update:function(a){var b=this.camera,c=2*P.RAD2DEG*a.angle,d=this.mapSize.width/this.mapSize.height;a=a.distance||b.far;if(c!==b.fov||d!==b.aspect||a!==b.far)b.fov=c,b.aspect=d,b.far=a,b.updateProjectionMatrix()}});Bd.prototype=Object.assign(Object.create(ba.prototype),{constructor:Bd,isSpotLight:!0,copy:function(a){ba.prototype.copy.call(this,a);this.distance=a.distance;this.angle=a.angle;this.penumbra=
a.penumbra;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});Cd.prototype=Object.assign(Object.create(ba.prototype),{constructor:Cd,isPointLight:!0,copy:function(a){ba.prototype.copy.call(this,a);this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return this}});Dd.prototype=Object.assign(Object.create(Hb.prototype),{constructor:Dd});Ed.prototype=Object.assign(Object.create(ba.prototype),{constructor:Ed,isDirectionalLight:!0,copy:function(a){ba.prototype.copy.call(this,
a);this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});Fd.prototype=Object.assign(Object.create(ba.prototype),{constructor:Fd,isAmbientLight:!0});Gd.prototype=Object.assign(Object.create(ba.prototype),{constructor:Gd,isRectAreaLight:!0,copy:function(a){ba.prototype.copy.call(this,a);this.width=a.width;this.height=a.height;return this},toJSON:function(a){a=ba.prototype.toJSON.call(this,a);a.object.width=this.width;a.object.height=this.height;return a}});Hd.prototype=Object.assign(Object.create(ja.prototype),
{constructor:Hd,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});Id.prototype=Object.assign(Object.create(ja.prototype),{constructor:Id,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});Object.assign(ua.prototype,{evaluate:function(a){var b=this.parameterPositions,c=this._cachedIndex,d=b[c],e=b[c-1];a:{b:{c:{d:if(!(a<
d)){for(var f=c+2;;){if(void 0===d){if(a<e)break d;this._cachedIndex=c=b.length;return this.afterEnd_(c-1,a,e)}if(c===f)break;e=d;d=b[++c];if(a<d)break b}d=b.length;break c}if(a>=e)break a;else{f=b[1];a<f&&(c=2,e=f);for(f=c-2;;){if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(c===f)break;d=e;e=b[--c-1];if(a>=e)break b}d=c;c=0}}for(;c<d;)e=c+d>>>1,a<b[e]?d=e:c=e+1;d=b[c];e=b[c-1];if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(void 0===d)return this._cachedIndex=
c=b.length,this.afterEnd_(c-1,e,a)}this._cachedIndex=c;this.intervalChanged_(c,e,d)}return this.interpolate_(c,e,a,d)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(a){var b=this.resultBuffer,c=this.sampleValues,d=this.valueSize;a*=d;for(var e=0;e!==d;++e)b[e]=c[a+e];return b},interpolate_:function(){throw Error("call to abstract method");},intervalChanged_:function(){}});Object.assign(ua.prototype,{beforeStart_:ua.prototype.copySampleValue_,
afterEnd_:ua.prototype.copySampleValue_});Jd.prototype=Object.assign(Object.create(ua.prototype),{constructor:Jd,interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;b=(c-b)/(d-b);for(c=a+g;a!==c;a+=4)X.slerpFlat(e,0,f,a-g,f,a,b);return e}});fd.prototype=Object.assign(Object.create(ja.prototype),{constructor:fd,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(a){return new Jd(this.times,this.values,this.getValueSize(),
a)},InterpolantFactoryMethodSmooth:void 0});Kd.prototype=Object.assign(Object.create(ja.prototype),{constructor:Kd,ValueTypeName:"color"});kc.prototype=Object.assign(Object.create(ja.prototype),{constructor:kc,ValueTypeName:"number"});Ld.prototype=Object.assign(Object.create(ua.prototype),{constructor:Ld,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(a,b,c){var d=this.parameterPositions,e=a-2,f=a+1,g=d[e],h=d[f];if(void 0===g)switch(this.getSettings_().endingStart){case 2401:e=
a;g=2*b-c;break;case 2402:e=d.length-2;g=b+d[e]-d[e+1];break;default:e=a,g=c}if(void 0===h)switch(this.getSettings_().endingEnd){case 2401:f=a;h=2*c-b;break;case 2402:f=1;h=c+d[1]-d[0];break;default:f=a-1,h=b}a=.5*(c-b);d=this.valueSize;this._weightPrev=a/(b-g);this._weightNext=a/(h-c);this._offsetPrev=e*d;this._offsetNext=f*d},interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;var h=a-g,l=this._offsetPrev,m=this._offsetNext,k=this._weightPrev,n=this._weightNext,
p=(c-b)/(d-b);c=p*p;d=c*p;b=-k*d+2*k*c-k*p;k=(1+k)*d+(-1.5-2*k)*c+(-.5+k)*p+1;p=(-1-n)*d+(1.5+n)*c+.5*p;n=n*d-n*c;for(c=0;c!==g;++c)e[c]=b*f[l+c]+k*f[h+c]+p*f[a+c]+n*f[m+c];return e}});gd.prototype=Object.assign(Object.create(ua.prototype),{constructor:gd,interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;var h=a-g;b=(c-b)/(d-b);c=1-b;for(d=0;d!==g;++d)e[d]=f[h+d]*c+f[a+d]*b;return e}});Md.prototype=Object.assign(Object.create(ua.prototype),{constructor:Md,
interpolate_:function(a){return this.copySampleValue_(a-1)}});var sa={arraySlice:function(a,b,c){return sa.isTypedArray(a)?new a.constructor(a.subarray(b,void 0!==c?c:a.length)):a.slice(b,c)},convertArray:function(a,b,c){return!a||!c&&a.constructor===b?a:"number"===typeof b.BYTES_PER_ELEMENT?new b(a):Array.prototype.slice.call(a)},isTypedArray:function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)},getKeyframeOrder:function(a){for(var b=a.length,c=Array(b),d=0;d!==b;++d)c[d]=d;c.sort(function(b,
c){return a[b]-a[c]});return c},sortedArray:function(a,b,c){for(var d=a.length,e=new a.constructor(d),f=0,g=0;g!==d;++f)for(var h=c[f]*b,l=0;l!==b;++l)e[g++]=a[h+l];return e},flattenJSON:function(a,b,c,d){for(var e=1,f=a[0];void 0!==f&&void 0===f[d];)f=a[e++];if(void 0!==f){var g=f[d];if(void 0!==g)if(Array.isArray(g)){do g=f[d],void 0!==g&&(b.push(f.time),c.push.apply(c,g)),f=a[e++];while(void 0!==f)}else if(void 0!==g.toArray){do g=f[d],void 0!==g&&(b.push(f.time),g.toArray(c,c.length)),f=a[e++];
while(void 0!==f)}else{do g=f[d],void 0!==g&&(b.push(f.time),c.push(g)),f=a[e++];while(void 0!==f)}}}};Object.assign(ja,{parse:function(a){if(void 0===a.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var b=ja._getTrackTypeForValueTypeName(a.type);if(void 0===a.times){var c=[],d=[];sa.flattenJSON(a.keys,c,d,"value");a.times=c;a.values=d}return void 0!==b.parse?b.parse(a):new b(a.name,a.times,a.values,a.interpolation)},toJSON:function(a){var b=a.constructor;if(void 0!==
b.toJSON)b=b.toJSON(a);else{b={name:a.name,times:sa.convertArray(a.times,Array),values:sa.convertArray(a.values,Array)};var c=a.getInterpolation();c!==a.DefaultInterpolation&&(b.interpolation=c)}b.type=a.ValueTypeName;return b},_getTrackTypeForValueTypeName:function(a){switch(a.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return kc;case "vector":case "vector2":case "vector3":case "vector4":return lc;case "color":return Kd;case "quaternion":return fd;case "bool":case "boolean":return Id;
case "string":return Hd}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+a);}});Object.assign(ja.prototype,{constructor:ja,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(a){return new Md(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodLinear:function(a){return new gd(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:function(a){return new Ld(this.times,this.values,
this.getValueSize(),a)},setInterpolation:function(a){switch(a){case 2300:var b=this.InterpolantFactoryMethodDiscrete;break;case 2301:b=this.InterpolantFactoryMethodLinear;break;case 2302:b=this.InterpolantFactoryMethodSmooth}if(void 0===b){b="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(a!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(b);console.warn("THREE.KeyframeTrack:",
b)}else this.createInterpolant=b},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(a){if(0!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]+=a;return this},scale:function(a){if(1!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]*=a;return this},
trim:function(a,b){for(var c=this.times,d=c.length,e=0,f=d-1;e!==d&&c[e]<a;)++e;for(;-1!==f&&c[f]>b;)--f;++f;if(0!==e||f!==d)e>=f&&(f=Math.max(f,1),e=f-1),a=this.getValueSize(),this.times=sa.arraySlice(c,e,f),this.values=sa.arraySlice(this.values,e*a,f*a);return this},validate:function(){var a=!0,b=this.getValueSize();0!==b-Math.floor(b)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),a=!1);var c=this.times;b=this.values;var d=c.length;0===d&&(console.error("THREE.KeyframeTrack: Track is empty.",
this),a=!1);for(var e=null,f=0;f!==d;f++){var g=c[f];if("number"===typeof g&&isNaN(g)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,f,g);a=!1;break}if(null!==e&&e>g){console.error("THREE.KeyframeTrack: Out of order keys.",this,f,g,e);a=!1;break}e=g}if(void 0!==b&&sa.isTypedArray(b))for(f=0,c=b.length;f!==c;++f)if(d=b[f],isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,f,d);a=!1;break}return a},optimize:function(){for(var a=this.times,b=this.values,
c=this.getValueSize(),d=2302===this.getInterpolation(),e=1,f=a.length-1,g=1;g<f;++g){var h=!1,l=a[g];if(l!==a[g+1]&&(1!==g||l!==l[0]))if(d)h=!0;else{var m=g*c,k=m-c,n=m+c;for(l=0;l!==c;++l){var p=b[m+l];if(p!==b[k+l]||p!==b[n+l]){h=!0;break}}}if(h){if(g!==e)for(a[e]=a[g],h=g*c,m=e*c,l=0;l!==c;++l)b[m+l]=b[h+l];++e}}if(0<f){a[e]=a[f];h=f*c;m=e*c;for(l=0;l!==c;++l)b[m+l]=b[h+l];++e}e!==a.length&&(this.times=sa.arraySlice(a,0,e),this.values=sa.arraySlice(b,0,e*c));return this}});lc.prototype=Object.assign(Object.create(ja.prototype),
{constructor:lc,ValueTypeName:"vector"});Object.assign(Fa,{parse:function(a){for(var b=[],c=a.tracks,d=1/(a.fps||1),e=0,f=c.length;e!==f;++e)b.push(ja.parse(c[e]).scale(d));return new Fa(a.name,a.duration,b)},toJSON:function(a){var b=[],c=a.tracks;a={name:a.name,duration:a.duration,tracks:b,uuid:a.uuid};for(var d=0,e=c.length;d!==e;++d)b.push(ja.toJSON(c[d]));return a},CreateFromMorphTargetSequence:function(a,b,c,d){for(var e=b.length,f=[],g=0;g<e;g++){var h=[],l=[];h.push((g+e-1)%e,g,(g+1)%e);l.push(0,
1,0);var m=sa.getKeyframeOrder(h);h=sa.sortedArray(h,1,m);l=sa.sortedArray(l,1,m);d||0!==h[0]||(h.push(e),l.push(l[0]));f.push((new kc(".morphTargetInfluences["+b[g].name+"]",h,l)).scale(1/c))}return new Fa(a,-1,f)},findByName:function(a,b){var c=a;Array.isArray(a)||(c=a.geometry&&a.geometry.animations||a.animations);for(a=0;a<c.length;a++)if(c[a].name===b)return c[a];return null},CreateClipsFromMorphTargetSequences:function(a,b,c){for(var d={},e=/^([\w-]*?)([\d]+)$/,f=0,g=a.length;f<g;f++){var h=
a[f],l=h.name.match(e);if(l&&1<l.length){var m=l[1];(l=d[m])||(d[m]=l=[]);l.push(h)}}a=[];for(m in d)a.push(Fa.CreateFromMorphTargetSequence(m,d[m],b,c));return a},parseAnimation:function(a,b){if(!a)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var c=function(a,b,c,d,e){if(0!==c.length){var f=[],g=[];sa.flattenJSON(c,f,g,d);0!==f.length&&e.push(new a(b,f,g))}},d=[],e=a.name||"default",f=a.length||-1,g=a.fps||30;a=a.hierarchy||[];for(var h=0;h<a.length;h++){var l=
a[h].keys;if(l&&0!==l.length)if(l[0].morphTargets){f={};for(var m=0;m<l.length;m++)if(l[m].morphTargets)for(var k=0;k<l[m].morphTargets.length;k++)f[l[m].morphTargets[k]]=-1;for(var n in f){var p=[],q=[];for(k=0;k!==l[m].morphTargets.length;++k){var t=l[m];p.push(t.time);q.push(t.morphTarget===n?1:0)}d.push(new kc(".morphTargetInfluence["+n+"]",p,q))}f=f.length*(g||1)}else m=".bones["+b[h].name+"]",c(lc,m+".position",l,"pos",d),c(fd,m+".quaternion",l,"rot",d),c(lc,m+".scale",l,"scl",d)}return 0===
d.length?null:new Fa(e,f,d)}});Object.assign(Fa.prototype,{resetDuration:function(){for(var a=0,b=0,c=this.tracks.length;b!==c;++b){var d=this.tracks[b];a=Math.max(a,d.times[d.times.length-1])}this.duration=a},trim:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this},optimize:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}});Object.assign(Nd.prototype,{load:function(a,b,c,d){var e=this;(new Ka(e.manager)).load(a,function(a){b(e.parse(JSON.parse(a)))},
c,d)},setTextures:function(a){this.textures=a},parse:function(a){function b(a){void 0===c[a]&&console.warn("THREE.MaterialLoader: Undefined texture",a);return c[a]}var c=this.textures,d=new Tg[a.type];void 0!==a.uuid&&(d.uuid=a.uuid);void 0!==a.name&&(d.name=a.name);void 0!==a.color&&d.color.setHex(a.color);void 0!==a.roughness&&(d.roughness=a.roughness);void 0!==a.metalness&&(d.metalness=a.metalness);void 0!==a.emissive&&d.emissive.setHex(a.emissive);void 0!==a.specular&&d.specular.setHex(a.specular);
void 0!==a.shininess&&(d.shininess=a.shininess);void 0!==a.clearCoat&&(d.clearCoat=a.clearCoat);void 0!==a.clearCoatRoughness&&(d.clearCoatRoughness=a.clearCoatRoughness);void 0!==a.uniforms&&(d.uniforms=a.uniforms);void 0!==a.vertexShader&&(d.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(d.fragmentShader=a.fragmentShader);void 0!==a.vertexColors&&(d.vertexColors=a.vertexColors);void 0!==a.fog&&(d.fog=a.fog);void 0!==a.flatShading&&(d.flatShading=a.flatShading);void 0!==a.blending&&(d.blending=
a.blending);void 0!==a.side&&(d.side=a.side);void 0!==a.opacity&&(d.opacity=a.opacity);void 0!==a.transparent&&(d.transparent=a.transparent);void 0!==a.alphaTest&&(d.alphaTest=a.alphaTest);void 0!==a.depthTest&&(d.depthTest=a.depthTest);void 0!==a.depthWrite&&(d.depthWrite=a.depthWrite);void 0!==a.colorWrite&&(d.colorWrite=a.colorWrite);void 0!==a.wireframe&&(d.wireframe=a.wireframe);void 0!==a.wireframeLinewidth&&(d.wireframeLinewidth=a.wireframeLinewidth);void 0!==a.wireframeLinecap&&(d.wireframeLinecap=
a.wireframeLinecap);void 0!==a.wireframeLinejoin&&(d.wireframeLinejoin=a.wireframeLinejoin);void 0!==a.rotation&&(d.rotation=a.rotation);1!==a.linewidth&&(d.linewidth=a.linewidth);void 0!==a.dashSize&&(d.dashSize=a.dashSize);void 0!==a.gapSize&&(d.gapSize=a.gapSize);void 0!==a.scale&&(d.scale=a.scale);void 0!==a.polygonOffset&&(d.polygonOffset=a.polygonOffset);void 0!==a.polygonOffsetFactor&&(d.polygonOffsetFactor=a.polygonOffsetFactor);void 0!==a.polygonOffsetUnits&&(d.polygonOffsetUnits=a.polygonOffsetUnits);
void 0!==a.skinning&&(d.skinning=a.skinning);void 0!==a.morphTargets&&(d.morphTargets=a.morphTargets);void 0!==a.dithering&&(d.dithering=a.dithering);void 0!==a.visible&&(d.visible=a.visible);void 0!==a.userData&&(d.userData=a.userData);void 0!==a.shading&&(d.flatShading=1===a.shading);void 0!==a.size&&(d.size=a.size);void 0!==a.sizeAttenuation&&(d.sizeAttenuation=a.sizeAttenuation);void 0!==a.map&&(d.map=b(a.map));void 0!==a.alphaMap&&(d.alphaMap=b(a.alphaMap),d.transparent=!0);void 0!==a.bumpMap&&
(d.bumpMap=b(a.bumpMap));void 0!==a.bumpScale&&(d.bumpScale=a.bumpScale);void 0!==a.normalMap&&(d.normalMap=b(a.normalMap));if(void 0!==a.normalScale){var e=a.normalScale;!1===Array.isArray(e)&&(e=[e,e]);d.normalScale=(new y).fromArray(e)}void 0!==a.displacementMap&&(d.displacementMap=b(a.displacementMap));void 0!==a.displacementScale&&(d.displacementScale=a.displacementScale);void 0!==a.displacementBias&&(d.displacementBias=a.displacementBias);void 0!==a.roughnessMap&&(d.roughnessMap=b(a.roughnessMap));
void 0!==a.metalnessMap&&(d.metalnessMap=b(a.metalnessMap));void 0!==a.emissiveMap&&(d.emissiveMap=b(a.emissiveMap));void 0!==a.emissiveIntensity&&(d.emissiveIntensity=a.emissiveIntensity);void 0!==a.specularMap&&(d.specularMap=b(a.specularMap));void 0!==a.envMap&&(d.envMap=b(a.envMap));void 0!==a.reflectivity&&(d.reflectivity=a.reflectivity);void 0!==a.lightMap&&(d.lightMap=b(a.lightMap));void 0!==a.lightMapIntensity&&(d.lightMapIntensity=a.lightMapIntensity);void 0!==a.aoMap&&(d.aoMap=b(a.aoMap));
void 0!==a.aoMapIntensity&&(d.aoMapIntensity=a.aoMapIntensity);void 0!==a.gradientMap&&(d.gradientMap=b(a.gradientMap));return d}});Object.assign(ge.prototype,{load:function(a,b,c,d){var e=this;(new Ka(e.manager)).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},parse:function(a){var b=new G,c=a.data.index;void 0!==c&&(c=new Af[c.type](c.array),b.setIndex(new O(c,1)));var d=a.data.attributes;for(f in d){var e=d[f];c=new Af[e.type](e.array);b.addAttribute(f,new O(c,e.itemSize,e.normalized))}var f=
a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==f)for(c=0,d=f.length;c!==d;++c)e=f[c],b.addGroup(e.start,e.count,e.materialIndex);a=a.data.boundingSphere;void 0!==a&&(f=new p,void 0!==a.center&&f.fromArray(a.center),b.boundingSphere=new Ga(f,a.radius));return b}});var Af={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,
Float32Array:Float32Array,Float64Array:Float64Array};mc.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var b=this.handlers,c=0,d=b.length;c<d;c+=2){var e=b[c+1];if(b[c].test(a))return e}return null}};Object.assign(mc.prototype,{crossOrigin:void 0,onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(a,b,c){for(var d=[],e=0;e<a.length;++e)d[e]=this.createMaterial(a[e],b,c);return d},createMaterial:function(){var a=
{NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},b=new K,c=new yd,d=new Nd;return function(e,f,g){function h(a,b,d,e,h){a=f+a;var k=mc.Handlers.get(a);null!==k?a=k.load(a):(c.setCrossOrigin(g),a=c.load(a));void 0!==b&&(a.repeat.fromArray(b),1!==b[0]&&(a.wrapS=1E3),1!==b[1]&&(a.wrapT=1E3));void 0!==d&&a.offset.fromArray(d);void 0!==e&&("repeat"===e[0]&&(a.wrapS=1E3),"mirror"===e[0]&&(a.wrapS=1002),"repeat"===e[1]&&(a.wrapT=1E3),"mirror"===
e[1]&&(a.wrapT=1002));void 0!==h&&(a.anisotropy=h);b=P.generateUUID();l[b]=a;return b}var l={},k={uuid:P.generateUUID(),type:"MeshLambertMaterial"},p;for(p in e){var n=e[p];switch(p){case "DbgColor":case "DbgIndex":case "opticalDensity":case "illumination":break;case "DbgName":k.name=n;break;case "blending":k.blending=a[n];break;case "colorAmbient":case "mapAmbient":console.warn("THREE.Loader.createMaterial:",p,"is no longer supported.");break;case "colorDiffuse":k.color=b.fromArray(n).getHex();break;
case "colorSpecular":k.specular=b.fromArray(n).getHex();break;case "colorEmissive":k.emissive=b.fromArray(n).getHex();break;case "specularCoef":k.shininess=n;break;case "shading":"basic"===n.toLowerCase()&&(k.type="MeshBasicMaterial");"phong"===n.toLowerCase()&&(k.type="MeshPhongMaterial");"standard"===n.toLowerCase()&&(k.type="MeshStandardMaterial");break;case "mapDiffuse":k.map=h(n,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case "mapDiffuseRepeat":case "mapDiffuseOffset":case "mapDiffuseWrap":case "mapDiffuseAnisotropy":break;
case "mapEmissive":k.emissiveMap=h(n,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case "mapEmissiveRepeat":case "mapEmissiveOffset":case "mapEmissiveWrap":case "mapEmissiveAnisotropy":break;case "mapLight":k.lightMap=h(n,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case "mapLightRepeat":case "mapLightOffset":case "mapLightWrap":case "mapLightAnisotropy":break;case "mapAO":k.aoMap=h(n,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,
e.mapAOAnisotropy);break;case "mapAORepeat":case "mapAOOffset":case "mapAOWrap":case "mapAOAnisotropy":break;case "mapBump":k.bumpMap=h(n,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case "mapBumpScale":k.bumpScale=n;break;case "mapBumpRepeat":case "mapBumpOffset":case "mapBumpWrap":case "mapBumpAnisotropy":break;case "mapNormal":k.normalMap=h(n,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case "mapNormalFactor":k.normalScale=n;break;
case "mapNormalRepeat":case "mapNormalOffset":case "mapNormalWrap":case "mapNormalAnisotropy":break;case "mapSpecular":k.specularMap=h(n,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case "mapSpecularRepeat":case "mapSpecularOffset":case "mapSpecularWrap":case "mapSpecularAnisotropy":break;case "mapMetalness":k.metalnessMap=h(n,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case "mapMetalnessRepeat":case "mapMetalnessOffset":case "mapMetalnessWrap":case "mapMetalnessAnisotropy":break;
case "mapRoughness":k.roughnessMap=h(n,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case "mapRoughnessRepeat":case "mapRoughnessOffset":case "mapRoughnessWrap":case "mapRoughnessAnisotropy":break;case "mapAlpha":k.alphaMap=h(n,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case "mapAlphaRepeat":case "mapAlphaOffset":case "mapAlphaWrap":case "mapAlphaAnisotropy":break;case "flipSided":k.side=1;break;case "doubleSided":k.side=
2;break;case "transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity");k.opacity=n;break;case "depthTest":case "depthWrite":case "colorWrite":case "opacity":case "reflectivity":case "transparent":case "visible":case "wireframe":k[p]=n;break;case "vertexColors":!0===n&&(k.vertexColors=2);"face"===n&&(k.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",p,n)}}"MeshBasicMaterial"===k.type&&delete k.emissive;"MeshPhongMaterial"!==
k.type&&delete k.specular;1>k.opacity&&(k.transparent=!0);d.setTextures(l);return d.parse(k)}}()});var De={decodeText:function(a){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(a);for(var b="",c=0,d=a.length;c<d;c++)b+=String.fromCharCode(a[c]);return decodeURIComponent(escape(b))},extractUrlBase:function(a){var b=a.lastIndexOf("/");return-1===b?"./":a.substr(0,b+1)}};Object.assign(he.prototype,{load:function(a,b,c,d){var e=this,f=this.texturePath&&"string"===typeof this.texturePath?
this.texturePath:De.extractUrlBase(a),g=new Ka(this.manager);g.setWithCredentials(this.withCredentials);g.load(a,function(c){c=JSON.parse(c);var d=c.metadata;if(void 0!==d&&(d=d.type,void 0!==d&&"object"===d.toLowerCase())){console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.ObjectLoader instead.");return}c=e.parse(c,f);b(c.geometry,c.materials)},c,d)},setTexturePath:function(a){this.texturePath=a},parse:function(){return function(a,b){void 0!==a.data&&(a=a.data);a.scale=void 0!==a.scale?
1/a.scale:1;var c=new J,d=a,e,f,g,h=d.faces;var l=d.vertices;var k=d.normals,v=d.colors;var n=d.scale;var r=0;if(void 0!==d.uvs){for(e=0;e<d.uvs.length;e++)d.uvs[e].length&&r++;for(e=0;e<r;e++)c.faceVertexUvs[e]=[]}var q=0;for(g=l.length;q<g;)e=new p,e.x=l[q++]*n,e.y=l[q++]*n,e.z=l[q++]*n,c.vertices.push(e);q=0;for(g=h.length;q<g;){l=h[q++];var t=l&1;var u=l&2;e=l&8;var z=l&16;var x=l&32;n=l&64;l&=128;if(t){t=new Xa;t.a=h[q];t.b=h[q+1];t.c=h[q+3];var w=new Xa;w.a=h[q+1];w.b=h[q+2];w.c=h[q+3];q+=4;
u&&(u=h[q++],t.materialIndex=u,w.materialIndex=u);u=c.faces.length;if(e)for(e=0;e<r;e++){var A=d.uvs[e];c.faceVertexUvs[e][u]=[];c.faceVertexUvs[e][u+1]=[];for(f=0;4>f;f++){var C=h[q++];var B=A[2*C];C=A[2*C+1];B=new y(B,C);2!==f&&c.faceVertexUvs[e][u].push(B);0!==f&&c.faceVertexUvs[e][u+1].push(B)}}z&&(z=3*h[q++],t.normal.set(k[z++],k[z++],k[z]),w.normal.copy(t.normal));if(x)for(e=0;4>e;e++)z=3*h[q++],x=new p(k[z++],k[z++],k[z]),2!==e&&t.vertexNormals.push(x),0!==e&&w.vertexNormals.push(x);n&&(n=
h[q++],n=v[n],t.color.setHex(n),w.color.setHex(n));if(l)for(e=0;4>e;e++)n=h[q++],n=v[n],2!==e&&t.vertexColors.push(new K(n)),0!==e&&w.vertexColors.push(new K(n));c.faces.push(t);c.faces.push(w)}else{t=new Xa;t.a=h[q++];t.b=h[q++];t.c=h[q++];u&&(u=h[q++],t.materialIndex=u);u=c.faces.length;if(e)for(e=0;e<r;e++)for(A=d.uvs[e],c.faceVertexUvs[e][u]=[],f=0;3>f;f++)C=h[q++],B=A[2*C],C=A[2*C+1],B=new y(B,C),c.faceVertexUvs[e][u].push(B);z&&(z=3*h[q++],t.normal.set(k[z++],k[z++],k[z]));if(x)for(e=0;3>e;e++)z=
3*h[q++],x=new p(k[z++],k[z++],k[z]),t.vertexNormals.push(x);n&&(n=h[q++],t.color.setHex(v[n]));if(l)for(e=0;3>e;e++)n=h[q++],t.vertexColors.push(new K(v[n]));c.faces.push(t)}}d=a;q=void 0!==d.influencesPerVertex?d.influencesPerVertex:2;if(d.skinWeights)for(g=0,h=d.skinWeights.length;g<h;g+=q)c.skinWeights.push(new U(d.skinWeights[g],1<q?d.skinWeights[g+1]:0,2<q?d.skinWeights[g+2]:0,3<q?d.skinWeights[g+3]:0));if(d.skinIndices)for(g=0,h=d.skinIndices.length;g<h;g+=q)c.skinIndices.push(new U(d.skinIndices[g],
1<q?d.skinIndices[g+1]:0,2<q?d.skinIndices[g+2]:0,3<q?d.skinIndices[g+3]:0));c.bones=d.bones;c.bones&&0<c.bones.length&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&console.warn("When skinning, number of vertices ("+c.vertices.length+"), skinIndices ("+c.skinIndices.length+"), and skinWeights ("+c.skinWeights.length+") should match.");g=a;h=g.scale;if(void 0!==g.morphTargets)for(d=0,q=g.morphTargets.length;d<q;d++)for(c.morphTargets[d]={},c.morphTargets[d].name=
g.morphTargets[d].name,c.morphTargets[d].vertices=[],k=c.morphTargets[d].vertices,v=g.morphTargets[d].vertices,r=0,l=v.length;r<l;r+=3)n=new p,n.x=v[r]*h,n.y=v[r+1]*h,n.z=v[r+2]*h,k.push(n);if(void 0!==g.morphColors&&0<g.morphColors.length)for(console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'),h=c.faces,g=g.morphColors[0].colors,d=0,q=h.length;d<q;d++)h[d].color.fromArray(g,3*d);g=a;d=[];q=[];void 0!==g.animation&&q.push(g.animation);void 0!==g.animations&&
(g.animations.length?q=q.concat(g.animations):q.push(g.animations));for(g=0;g<q.length;g++)(h=Fa.parseAnimation(q[g],c.bones))&&d.push(h);c.morphTargets&&(q=Fa.CreateClipsFromMorphTargetSequences(c.morphTargets,10),d=d.concat(q));0<d.length&&(c.animations=d);c.computeFaceNormals();c.computeBoundingSphere();if(void 0===a.materials||0===a.materials.length)return{geometry:c};a=mc.prototype.initMaterials(a.materials,b,this.crossOrigin);return{geometry:c,materials:a}}}()});Object.assign(lf.prototype,{load:function(a,
b,c,d){""===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var e=this;(new Ka(e.manager)).load(a,function(c){var f=null;try{f=JSON.parse(c)}catch(h){void 0!==d&&d(h);console.error("THREE:ObjectLoader: Can't parse "+a+".",h.message);return}c=f.metadata;void 0===c||void 0===c.type||"geometry"===c.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+a+". Use THREE.JSONLoader instead."):e.parse(f,b)},c,d)},setTexturePath:function(a){this.texturePath=a;return this},
setCrossOrigin:function(a){this.crossOrigin=a;return this},parse:function(a,b){var c=this.parseShape(a.shapes);c=this.parseGeometries(a.geometries,c);var d=this.parseImages(a.images,function(){void 0!==b&&b(e)});d=this.parseTextures(a.textures,d);d=this.parseMaterials(a.materials,d);var e=this.parseObject(a.object,c,d);a.animations&&(e.animations=this.parseAnimations(a.animations));void 0!==a.images&&0!==a.images.length||void 0===b||b(e);return e},parseShape:function(a){var b={};if(void 0!==a)for(var c=
0,d=a.length;c<d;c++){var e=(new jb).fromJSON(a[c]);b[e.uuid]=e}return b},parseGeometries:function(a,b){var c={};if(void 0!==a)for(var d=new he,e=new ge,f=0,g=a.length;f<g;f++){var h=a[f];switch(h.type){case "PlaneGeometry":case "PlaneBufferGeometry":var l=new za[h.type](h.width,h.height,h.widthSegments,h.heightSegments);break;case "BoxGeometry":case "BoxBufferGeometry":case "CubeGeometry":l=new za[h.type](h.width,h.height,h.depth,h.widthSegments,h.heightSegments,h.depthSegments);break;case "CircleGeometry":case "CircleBufferGeometry":l=
new za[h.type](h.radius,h.segments,h.thetaStart,h.thetaLength);break;case "CylinderGeometry":case "CylinderBufferGeometry":l=new za[h.type](h.radiusTop,h.radiusBottom,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case "ConeGeometry":case "ConeBufferGeometry":l=new za[h.type](h.radius,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case "SphereGeometry":case "SphereBufferGeometry":l=new za[h.type](h.radius,h.widthSegments,
h.heightSegments,h.phiStart,h.phiLength,h.thetaStart,h.thetaLength);break;case "DodecahedronGeometry":case "DodecahedronBufferGeometry":case "IcosahedronGeometry":case "IcosahedronBufferGeometry":case "OctahedronGeometry":case "OctahedronBufferGeometry":case "TetrahedronGeometry":case "TetrahedronBufferGeometry":l=new za[h.type](h.radius,h.detail);break;case "RingGeometry":case "RingBufferGeometry":l=new za[h.type](h.innerRadius,h.outerRadius,h.thetaSegments,h.phiSegments,h.thetaStart,h.thetaLength);
break;case "TorusGeometry":case "TorusBufferGeometry":l=new za[h.type](h.radius,h.tube,h.radialSegments,h.tubularSegments,h.arc);break;case "TorusKnotGeometry":case "TorusKnotBufferGeometry":l=new za[h.type](h.radius,h.tube,h.tubularSegments,h.radialSegments,h.p,h.q);break;case "LatheGeometry":case "LatheBufferGeometry":l=new za[h.type](h.points,h.segments,h.phiStart,h.phiLength);break;case "PolyhedronGeometry":case "PolyhedronBufferGeometry":l=new za[h.type](h.vertices,h.indices,h.radius,h.details);
break;case "ShapeGeometry":case "ShapeBufferGeometry":l=[];for(var k=0,p=h.shapes.length;k<p;k++){var n=b[h.shapes[k]];l.push(n)}l=new za[h.type](l,h.curveSegments);break;case "ExtrudeGeometry":case "ExtrudeBufferGeometry":l=[];k=0;for(p=h.shapes.length;k<p;k++)n=b[h.shapes[k]],l.push(n);k=h.options.extrudePath;void 0!==k&&(h.options.extrudePath=(new zf[k.type]).fromJSON(k));l=new za[h.type](l,h.options);break;case "BufferGeometry":l=e.parse(h);break;case "Geometry":l=d.parse(h,this.texturePath).geometry;
break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+h.type+'"');continue}l.uuid=h.uuid;void 0!==h.name&&(l.name=h.name);!0===l.isBufferGeometry&&void 0!==h.userData&&(l.userData=h.userData);c[h.uuid]=l}return c},parseMaterials:function(a,b){var c={};if(void 0!==a){var d=new Nd;d.setTextures(b);b=0;for(var e=a.length;b<e;b++){var f=a[b];if("MultiMaterial"===f.type){for(var g=[],h=0;h<f.materials.length;h++)g.push(d.parse(f.materials[h]));c[f.uuid]=g}else c[f.uuid]=d.parse(f)}}return c},
parseAnimations:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=Fa.parse(d);void 0!==d.uuid&&(e.uuid=d.uuid);b.push(e)}return b},parseImages:function(a,b){function c(a){d.manager.itemStart(a);return f.load(a,function(){d.manager.itemEnd(a)},void 0,function(){d.manager.itemEnd(a);d.manager.itemError(a)})}var d=this,e={};if(void 0!==a&&0<a.length){b=new ce(b);var f=new cd(b);f.setCrossOrigin(this.crossOrigin);b=0;for(var g=a.length;b<g;b++){var h=a[b],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h.url)?
h.url:d.texturePath+h.url;e[h.uuid]=c(l)}}return e},parseTextures:function(a,b){function c(a,b){if("number"===typeof a)return a;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a);return b[a]}var d={};if(void 0!==a)for(var e=0,f=a.length;e<f;e++){var g=a[e];void 0===g.image&&console.warn('THREE.ObjectLoader: No "image" specified for',g.uuid);void 0===b[g.image]&&console.warn("THREE.ObjectLoader: Undefined image",g.image);var h=new ca(b[g.image]);h.needsUpdate=!0;
h.uuid=g.uuid;void 0!==g.name&&(h.name=g.name);void 0!==g.mapping&&(h.mapping=c(g.mapping,Ug));void 0!==g.offset&&h.offset.fromArray(g.offset);void 0!==g.repeat&&h.repeat.fromArray(g.repeat);void 0!==g.center&&h.center.fromArray(g.center);void 0!==g.rotation&&(h.rotation=g.rotation);void 0!==g.wrap&&(h.wrapS=c(g.wrap[0],Bf),h.wrapT=c(g.wrap[1],Bf));void 0!==g.format&&(h.format=g.format);void 0!==g.minFilter&&(h.minFilter=c(g.minFilter,Cf));void 0!==g.magFilter&&(h.magFilter=c(g.magFilter,Cf));void 0!==
g.anisotropy&&(h.anisotropy=g.anisotropy);void 0!==g.flipY&&(h.flipY=g.flipY);d[g.uuid]=h}return d},parseObject:function(a,b,c){function d(a){void 0===b[a]&&console.warn("THREE.ObjectLoader: Undefined geometry",a);return b[a]}function e(a){if(void 0!==a){if(Array.isArray(a)){for(var b=[],d=0,e=a.length;d<e;d++){var f=a[d];void 0===c[f]&&console.warn("THREE.ObjectLoader: Undefined material",f);b.push(c[f])}return b}void 0===c[a]&&console.warn("THREE.ObjectLoader: Undefined material",a);return c[a]}}
switch(a.type){case "Scene":var f=new sd;void 0!==a.background&&Number.isInteger(a.background)&&(f.background=new K(a.background));void 0!==a.fog&&("Fog"===a.fog.type?f.fog=new Tb(a.fog.color,a.fog.near,a.fog.far):"FogExp2"===a.fog.type&&(f.fog=new Sb(a.fog.color,a.fog.density)));break;case "PerspectiveCamera":f=new ea(a.fov,a.aspect,a.near,a.far);void 0!==a.focus&&(f.focus=a.focus);void 0!==a.zoom&&(f.zoom=a.zoom);void 0!==a.filmGauge&&(f.filmGauge=a.filmGauge);void 0!==a.filmOffset&&(f.filmOffset=
a.filmOffset);void 0!==a.view&&(f.view=Object.assign({},a.view));break;case "OrthographicCamera":f=new Mb(a.left,a.right,a.top,a.bottom,a.near,a.far);void 0!==a.zoom&&(f.zoom=a.zoom);void 0!==a.view&&(f.view=Object.assign({},a.view));break;case "AmbientLight":f=new Fd(a.color,a.intensity);break;case "DirectionalLight":f=new Ed(a.color,a.intensity);break;case "PointLight":f=new Cd(a.color,a.intensity,a.distance,a.decay);break;case "RectAreaLight":f=new Gd(a.color,a.intensity,a.width,a.height);break;
case "SpotLight":f=new Bd(a.color,a.intensity,a.distance,a.angle,a.penumbra,a.decay);break;case "HemisphereLight":f=new zd(a.color,a.groundColor,a.intensity);break;case "SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case "Mesh":f=d(a.geometry);var g=e(a.material);f=f.bones&&0<f.bones.length?new ud(f,g):new pa(f,g);break;case "LOD":f=new Gc;break;case "Line":f=new ma(d(a.geometry),e(a.material),a.mode);break;case "LineLoop":f=new vd(d(a.geometry),e(a.material));
break;case "LineSegments":f=new aa(d(a.geometry),e(a.material));break;case "PointCloud":case "Points":f=new Ub(d(a.geometry),e(a.material));break;case "Sprite":f=new Fc(e(a.material));break;case "Group":f=new wd;break;default:f=new B}f.uuid=a.uuid;void 0!==a.name&&(f.name=a.name);void 0!==a.matrix?(f.matrix.fromArray(a.matrix),void 0!==a.matrixAutoUpdate&&(f.matrixAutoUpdate=a.matrixAutoUpdate),f.matrixAutoUpdate&&f.matrix.decompose(f.position,f.quaternion,f.scale)):(void 0!==a.position&&f.position.fromArray(a.position),
void 0!==a.rotation&&f.rotation.fromArray(a.rotation),void 0!==a.quaternion&&f.quaternion.fromArray(a.quaternion),void 0!==a.scale&&f.scale.fromArray(a.scale));void 0!==a.castShadow&&(f.castShadow=a.castShadow);void 0!==a.receiveShadow&&(f.receiveShadow=a.receiveShadow);a.shadow&&(void 0!==a.shadow.bias&&(f.shadow.bias=a.shadow.bias),void 0!==a.shadow.radius&&(f.shadow.radius=a.shadow.radius),void 0!==a.shadow.mapSize&&f.shadow.mapSize.fromArray(a.shadow.mapSize),void 0!==a.shadow.camera&&(f.shadow.camera=
this.parseObject(a.shadow.camera)));void 0!==a.visible&&(f.visible=a.visible);void 0!==a.frustumCulled&&(f.frustumCulled=a.frustumCulled);void 0!==a.renderOrder&&(f.renderOrder=a.renderOrder);void 0!==a.userData&&(f.userData=a.userData);if(void 0!==a.children){g=a.children;for(var h=0;h<g.length;h++)f.add(this.parseObject(g[h],b,c))}if("LOD"===a.type)for(a=a.levels,g=0;g<a.length;g++){h=a[g];var l=f.getObjectByProperty("uuid",h.object);void 0!==l&&f.addLevel(l,h.distance)}return f}});var Ug={UVMapping:300,
CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Bf={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Cf={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};ie.prototype={constructor:ie,setOptions:function(a){this.options=
a;return this},load:function(a,b,c,d){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var e=this,f=Kb.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;fetch(a).then(function(a){return a.blob()}).then(function(a){return createImageBitmap(a,e.options)}).then(function(c){Kb.add(a,c);b&&b(c);e.manager.itemEnd(a)}).catch(function(b){d&&d(b);e.manager.itemEnd(a);e.manager.itemError(a)})},setCrossOrigin:function(){return this},
setPath:function(a){this.path=a;return this}};Object.assign(je.prototype,{moveTo:function(a,b){this.currentPath=new Pa;this.subPaths.push(this.currentPath);this.currentPath.moveTo(a,b)},lineTo:function(a,b){this.currentPath.lineTo(a,b)},quadraticCurveTo:function(a,b,c,d){this.currentPath.quadraticCurveTo(a,b,c,d)},bezierCurveTo:function(a,b,c,d,e,f){this.currentPath.bezierCurveTo(a,b,c,d,e,f)},splineThru:function(a){this.currentPath.splineThru(a)},toShapes:function(a,b){function c(a){for(var b=[],
c=0,d=a.length;c<d;c++){var e=a[c],f=new jb;f.curves=e.curves;b.push(f)}return b}function d(a,b){for(var c=b.length,d=!1,e=c-1,f=0;f<c;e=f++){var g=b[e],h=b[f],l=h.x-g.x,k=h.y-g.y;if(Math.abs(k)>Number.EPSILON){if(0>k&&(g=b[f],l=-l,h=b[e],k=-k),!(a.y<g.y||a.y>h.y))if(a.y===g.y){if(a.x===g.x)return!0}else{e=k*(a.x-g.x)-l*(a.y-g.y);if(0===e)return!0;0>e||(d=!d)}}else if(a.y===g.y&&(h.x<=a.x&&a.x<=g.x||g.x<=a.x&&a.x<=h.x))return!0}return d}var e=Za.isClockWise,f=this.subPaths;if(0===f.length)return[];
if(!0===b)return c(f);b=[];if(1===f.length){var g=f[0];var h=new jb;h.curves=g.curves;b.push(h);return b}var l=!e(f[0].getPoints());l=a?!l:l;h=[];var k=[],p=[],n=0;k[n]=void 0;p[n]=[];for(var r=0,q=f.length;r<q;r++){g=f[r];var t=g.getPoints();var u=e(t);(u=a?!u:u)?(!l&&k[n]&&n++,k[n]={s:new jb,p:t},k[n].s.curves=g.curves,l&&n++,p[n]=[]):p[n].push({h:g,p:t[0]})}if(!k[0])return c(f);if(1<k.length){r=!1;a=[];e=0;for(f=k.length;e<f;e++)h[e]=[];e=0;for(f=k.length;e<f;e++)for(g=p[e],u=0;u<g.length;u++){l=
g[u];n=!0;for(t=0;t<k.length;t++)d(l.p,k[t].p)&&(e!==t&&a.push({froms:e,tos:t,hole:u}),n?(n=!1,h[t].push(l)):r=!0);n&&h[e].push(l)}0<a.length&&(r||(p=h))}r=0;for(e=k.length;r<e;r++)for(h=k[r].s,b.push(h),a=p[r],f=0,g=a.length;f<g;f++)h.holes.push(a[f].h);return b}});Object.assign(ke.prototype,{isFont:!0,generateShapes:function(a,b,c){void 0===b&&(b=100);c=[];var d=b;b=this.data;var e=Array.from?Array.from(a):String(a).split("");d/=b.resolution;var f=(b.boundingBox.yMax-b.boundingBox.yMin+b.underlineThickness)*
d;a=[];for(var g=0,h=0,l=0;l<e.length;l++){var k=e[l];if("\n"===k)g=0,h-=f;else{var p=d;var n=g,r=h;if(k=b.glyphs[k]||b.glyphs["?"]){var q=new je;if(k.o)for(var t=k._cachedOutline||(k._cachedOutline=k.o.split(" ")),u=0,y=t.length;u<y;)switch(t[u++]){case "m":var x=t[u++]*p+n;var w=t[u++]*p+r;q.moveTo(x,w);break;case "l":x=t[u++]*p+n;w=t[u++]*p+r;q.lineTo(x,w);break;case "q":var A=t[u++]*p+n;var C=t[u++]*p+r;var B=t[u++]*p+n;var F=t[u++]*p+r;q.quadraticCurveTo(B,F,A,C);break;case "b":A=t[u++]*p+n,
C=t[u++]*p+r,B=t[u++]*p+n,F=t[u++]*p+r,x=t[u++]*p+n,w=t[u++]*p+r,q.bezierCurveTo(B,F,x,w,A,C)}p={offsetX:k.ha*p,path:q}}else p=void 0;g+=p.offsetX;a.push(p.path)}}b=0;for(e=a.length;b<e;b++)Array.prototype.push.apply(c,a[b].toShapes());return c}});Object.assign(mf.prototype,{load:function(a,b,c,d){var e=this,f=new Ka(this.manager);f.setPath(this.path);f.load(a,function(a){try{var c=JSON.parse(a)}catch(l){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),
c=JSON.parse(a.substring(65,a.length-2))}a=e.parse(c);b&&b(a)},c,d)},parse:function(a){return new ke(a)},setPath:function(a){this.path=a;return this}});var Sd,ne={getContext:function(){void 0===Sd&&(Sd=new (window.AudioContext||window.webkitAudioContext));return Sd},setContext:function(a){Sd=a}};Object.assign(le.prototype,{load:function(a,b,c,d){var e=new Ka(this.manager);e.setResponseType("arraybuffer");e.load(a,function(a){ne.getContext().decodeAudioData(a,function(a){b(a)})},c,d)}});Object.assign(nf.prototype,
{update:function(){var a,b,c,d,e,f,g,h,l=new F,k=new F;return function(m){if(a!==this||b!==m.focus||c!==m.fov||d!==m.aspect*this.aspect||e!==m.near||f!==m.far||g!==m.zoom||h!==this.eyeSep){a=this;b=m.focus;c=m.fov;d=m.aspect*this.aspect;e=m.near;f=m.far;g=m.zoom;var n=m.projectionMatrix.clone();h=this.eyeSep/2;var p=h*e/b,q=e*Math.tan(P.DEG2RAD*c*.5)/g;k.elements[12]=-h;l.elements[12]=h;var t=-q*d+p;var v=q*d+p;n.elements[0]=2*e/(v-t);n.elements[8]=(v+t)/(v-t);this.cameraL.projectionMatrix.copy(n);
t=-q*d-p;v=q*d-p;n.elements[0]=2*e/(v-t);n.elements[8]=(v+t)/(v-t);this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(m.matrixWorld).multiply(k);this.cameraR.matrixWorld.copy(m.matrixWorld).multiply(l)}}()});hd.prototype=Object.create(B.prototype);hd.prototype.constructor=hd;me.prototype=Object.assign(Object.create(B.prototype),{constructor:me,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),
this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination);this.filter=a;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(a){this.gain.gain.setTargetAtTime(a,this.context.currentTime,
.01)},updateMatrixWorld:function(){var a=new p,b=new X,c=new p,d=new p;return function(e){B.prototype.updateMatrixWorld.call(this,e);e=this.context.listener;var f=this.up;this.matrixWorld.decompose(a,b,c);d.set(0,0,-1).applyQuaternion(b);e.positionX?(e.positionX.setValueAtTime(a.x,this.context.currentTime),e.positionY.setValueAtTime(a.y,this.context.currentTime),e.positionZ.setValueAtTime(a.z,this.context.currentTime),e.forwardX.setValueAtTime(d.x,this.context.currentTime),e.forwardY.setValueAtTime(d.y,
this.context.currentTime),e.forwardZ.setValueAtTime(d.z,this.context.currentTime),e.upX.setValueAtTime(f.x,this.context.currentTime),e.upY.setValueAtTime(f.y,this.context.currentTime),e.upZ.setValueAtTime(f.z,this.context.currentTime)):(e.setPosition(a.x,a.y,a.z),e.setOrientation(d.x,d.y,d.z,f.x,f.y,f.z))}}()});nc.prototype=Object.assign(Object.create(B.prototype),{constructor:nc,getOutput:function(){return this.gain},setNodeSource:function(a){this.hasPlaybackControl=!1;this.sourceType="audioNode";
this.source=a;this.connect();return this},setMediaElementSource:function(a){this.hasPlaybackControl=!1;this.sourceType="mediaNode";this.source=this.context.createMediaElementSource(a);this.connect();return this},setBuffer:function(a){this.buffer=a;this.sourceType="buffer";this.autoplay&&this.play();return this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else{var a=this.context.createBufferSource();a.buffer=this.buffer;a.loop=this.loop;a.onended=this.onEnded.bind(this);a.playbackRate.setValueAtTime(this.playbackRate,this.startTime);this.startTime=this.context.currentTime;a.start(this.startTime,this.offset);this.isPlaying=!0;this.source=a;return this.connect()}},pause:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-
this.startTime)*this.playbackRate,this.isPlaying=!1),this},stop:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.source.stop(),this.offset=0,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());
return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(a){a||(a=[]);!0===this.isPlaying?(this.disconnect(),this.filters=a,this.connect()):this.filters=a;return this},getFilter:function(){return this.getFilters()[0]},
setFilter:function(a){return this.setFilters(a?[a]:[])},setPlaybackRate:function(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),
!1):this.loop},setLoop:function(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.loop=a,!0===this.isPlaying&&(this.source.loop=this.loop),this},getVolume:function(){return this.gain.gain.value},setVolume:function(a){this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01);return this}});oe.prototype=Object.assign(Object.create(nc.prototype),{constructor:oe,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},
setRefDistance:function(a){this.panner.refDistance=a},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(a){this.panner.rolloffFactor=a},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(a){this.panner.distanceModel=a},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(a){this.panner.maxDistance=a},updateMatrixWorld:function(){var a=new p;return function(b){B.prototype.updateMatrixWorld.call(this,
b);a.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(a.x,a.y,a.z)}}()});Object.assign(pe.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){for(var a=0,b=this.getFrequencyData(),c=0;c<b.length;c++)a+=b[c];return a/b.length}});Object.assign(qe.prototype,{accumulate:function(a,b){var c=this.buffer,d=this.valueSize;a=a*d+d;var e=this.cumulativeWeight;if(0===e){for(e=0;e!==d;++e)c[a+e]=c[e];e=b}else e+=
b,this._mixBufferRegion(c,a,0,b/e,d);this.cumulativeWeight=e},apply:function(a){var b=this.valueSize,c=this.buffer;a=a*b+b;var d=this.cumulativeWeight,e=this.binding;this.cumulativeWeight=0;1>d&&this._mixBufferRegion(c,a,3*b,1-d,b);d=b;for(var f=b+b;d!==f;++d)if(c[d]!==c[d+b]){e.setValue(c,a);break}},saveOriginalState:function(){var a=this.buffer,b=this.valueSize,c=3*b;this.binding.getValue(a,c);for(var d=b;d!==c;++d)a[d]=a[c+d%b];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,
3*this.valueSize)},_select:function(a,b,c,d,e){if(.5<=d)for(d=0;d!==e;++d)a[b+d]=a[c+d]},_slerp:function(a,b,c,d){X.slerpFlat(a,b,a,b,a,c,d)},_lerp:function(a,b,c,d,e){for(var f=1-d,g=0;g!==e;++g){var h=b+g;a[h]=a[h]*f+a[c+g]*d}}});Object.assign(of.prototype,{getValue:function(a,b){this.bind();var c=this._bindings[this._targetGroup.nCachedObjects_];void 0!==c&&c.getValue(a,b)},setValue:function(a,b){for(var c=this._bindings,d=this._targetGroup.nCachedObjects_,e=c.length;d!==e;++d)c[d].setValue(a,
b)},bind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].bind()},unbind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].unbind()}});Object.assign(oa,{Composite:of,create:function(a,b,c){return a&&a.isAnimationObjectGroup?new oa.Composite(a,b,c):new oa(a,b,c)},sanitizeNodeName:function(){var a=/[\[\]\.:\/]/g;return function(b){return b.replace(/\s/g,"_").replace(a,"")}}(),parseTrackName:function(){var a=
"[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",b=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]");a=/(WCOD+)?/.source.replace("WCOD",a);var c=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),d=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),e=new RegExp("^"+b+a+c+d+"$"),f=["material","materials","bones"];return function(a){var b=e.exec(a);if(!b)throw Error("PropertyBinding: Cannot parse trackName: "+a);b={nodeName:b[2],objectName:b[3],objectIndex:b[4],propertyName:b[5],
propertyIndex:b[6]};var c=b.nodeName&&b.nodeName.lastIndexOf(".");if(void 0!==c&&-1!==c){var d=b.nodeName.substring(c+1);-1!==f.indexOf(d)&&(b.nodeName=b.nodeName.substring(0,c),b.objectName=d)}if(null===b.propertyName||0===b.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+a);return b}}(),findNode:function(a,b){if(!b||""===b||"root"===b||"."===b||-1===b||b===a.name||b===a.uuid)return a;if(a.skeleton){var c=a.skeleton.getBoneByName(b);if(void 0!==c)return c}if(a.children){var d=
function(a){for(var c=0;c<a.length;c++){var e=a[c];if(e.name===b||e.uuid===b||(e=d(e.children)))return e}return null};if(a=d(a.children))return a}return null}});Object.assign(oa.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(a,b){a[b]=this.node[this.propertyName]},function(a,b){for(var c=this.resolvedProperty,
d=0,e=c.length;d!==e;++d)a[b++]=c[d]},function(a,b){a[b]=this.resolvedProperty[this.propertyIndex]},function(a,b){this.resolvedProperty.toArray(a,b)}],SetterByBindingTypeAndVersioning:[[function(a,b){this.targetObject[this.propertyName]=a[b]},function(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==
e;++d)c[d]=a[b++]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.needsUpdate=!0},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty[this.propertyIndex]=a[b]},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.matrixWorldNeedsUpdate=
!0}],[function(a,b){this.resolvedProperty.fromArray(a,b)},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(a,b){this.bind();this.getValue(a,b)},setValue:function(a,b){this.bind();this.setValue(a,b)},bind:function(){var a=this.node,b=this.parsedPath,c=b.objectName,d=b.propertyName,e=b.propertyIndex;a||(this.node=a=oa.findNode(this.rootNode,b.nodeName)||
this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(a){if(c){var f=b.objectIndex;switch(c){case "materials":if(!a.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!a.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}a=a.material.materials;break;case "bones":if(!a.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",
this);return}a=a.skeleton.bones;for(c=0;c<a.length;c++)if(a[c].name===f){f=c;break}break;default:if(void 0===a[c]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}a=a[c]}if(void 0!==f){if(void 0===a[f]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,a);return}a=a[f]}}f=a[d];if(void 0===f)console.error("THREE.PropertyBinding: Trying to update property for track: "+b.nodeName+"."+d+" but it wasn't found.",
a);else{b=this.Versioning.None;void 0!==a.needsUpdate?(b=this.Versioning.NeedsUpdate,this.targetObject=a):void 0!==a.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=a);c=this.BindingType.Direct;if(void 0!==e){if("morphTargetInfluences"===d){if(!a.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(a.geometry.isBufferGeometry){if(!a.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",
this);return}for(c=0;c<this.node.geometry.morphAttributes.position.length;c++)if(a.geometry.morphAttributes.position[c].name===e){e=c;break}}else{if(!a.geometry.morphTargets){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);return}for(c=0;c<this.node.geometry.morphTargets.length;c++)if(a.geometry.morphTargets[c].name===e){e=c;break}}}c=this.BindingType.ArrayElement;this.resolvedProperty=f;this.propertyIndex=e}else void 0!==
f.fromArray&&void 0!==f.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=f):Array.isArray(f)?(c=this.BindingType.EntireArray,this.resolvedProperty=f):this.propertyName=d;this.getValue=this.GetterByBindingType[c];this.setValue=this.SetterByBindingTypeAndVersioning[c][b]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});
Object.assign(oa.prototype,{_getValue_unbound:oa.prototype.getValue,_setValue_unbound:oa.prototype.setValue});Object.assign(pf.prototype,{isAnimationObjectGroup:!0,add:function(){for(var a=this._objects,b=a.length,c=this.nCachedObjects_,d=this._indicesByUUID,e=this._paths,f=this._parsedPaths,g=this._bindings,h=g.length,l=void 0,k=0,p=arguments.length;k!==p;++k){var n=arguments[k],r=n.uuid,q=d[r];if(void 0===q){q=b++;d[r]=q;a.push(n);r=0;for(var t=h;r!==t;++r)g[r].push(new oa(n,e[r],f[r]))}else if(q<
c){l=a[q];var u=--c;t=a[u];d[t.uuid]=q;a[q]=t;d[r]=u;a[u]=n;r=0;for(t=h;r!==t;++r){var y=g[r],x=y[q];y[q]=y[u];void 0===x&&(x=new oa(n,e[r],f[r]));y[u]=x}}else a[q]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c},remove:function(){for(var a=this._objects,b=this.nCachedObjects_,c=this._indicesByUUID,d=this._bindings,e=d.length,f=0,g=arguments.length;f!==g;++f){var h=
arguments[f],l=h.uuid,k=c[l];if(void 0!==k&&k>=b){var p=b++,n=a[p];c[n.uuid]=k;a[k]=n;c[l]=p;a[p]=h;h=0;for(l=e;h!==l;++h){n=d[h];var r=n[k];n[k]=n[p];n[p]=r}}}this.nCachedObjects_=b},uncache:function(){for(var a=this._objects,b=a.length,c=this.nCachedObjects_,d=this._indicesByUUID,e=this._bindings,f=e.length,g=0,h=arguments.length;g!==h;++g){var l=arguments[g].uuid,k=d[l];if(void 0!==k)if(delete d[l],k<c){l=--c;var p=a[l],n=--b,r=a[n];d[p.uuid]=k;a[k]=p;d[r.uuid]=l;a[l]=r;a.pop();p=0;for(r=f;p!==
r;++p){var q=e[p],t=q[n];q[k]=q[l];q[l]=t;q.pop()}}else for(n=--b,r=a[n],d[r.uuid]=k,a[k]=r,a.pop(),p=0,r=f;p!==r;++p)q=e[p],q[k]=q[n],q.pop()}this.nCachedObjects_=c},subscribe_:function(a,b){var c=this._bindingsIndicesByPath,d=c[a],e=this._bindings;if(void 0!==d)return e[d];var f=this._paths,g=this._parsedPaths,h=this._objects,l=this.nCachedObjects_,k=Array(h.length);d=e.length;c[a]=d;f.push(a);g.push(b);e.push(k);c=l;for(d=h.length;c!==d;++c)k[c]=new oa(h[c],a,b);return k},unsubscribe_:function(a){var b=
this._bindingsIndicesByPath,c=b[a];if(void 0!==c){var d=this._paths,e=this._parsedPaths,f=this._bindings,g=f.length-1,h=f[g];b[a[g]]=c;f[c]=h;f.pop();e[c]=e[g];e.pop();d[c]=d[g];d.pop()}}});Object.assign(qf.prototype,{play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&
!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(a){this._startTime=a;return this},setLoop:function(a,b){this.loop=a;this.repetitions=b;return this},setEffectiveWeight:function(a){this.weight=a;this._effectiveWeight=this.enabled?a:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(a){return this._scheduleFading(a,0,1)},fadeOut:function(a){return this._scheduleFading(a,
1,0)},crossFadeFrom:function(a,b,c){a.fadeOut(b);this.fadeIn(b);if(c){c=this._clip.duration;var d=a._clip.duration,e=c/d;a.warp(1,d/c,b);this.warp(e,1,b)}return this},crossFadeTo:function(a,b,c){return a.crossFadeFrom(this,b,c)},stopFading:function(){var a=this._weightInterpolant;null!==a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this},setEffectiveTimeScale:function(a){this.timeScale=a;this._effectiveTimeScale=this.paused?0:a;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},
setDuration:function(a){this.timeScale=this._clip.duration/a;return this.stopWarping()},syncWith:function(a){this.time=a.time;this.timeScale=a.timeScale;return this.stopWarping()},halt:function(a){return this.warp(this._effectiveTimeScale,0,a)},warp:function(a,b,c){var d=this._mixer,e=d.time,f=this._timeScaleInterpolant,g=this.timeScale;null===f&&(this._timeScaleInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;d[1]=e+c;f[0]=a/g;f[1]=b/g;return this},stopWarping:function(){var a=
this._timeScaleInterpolant;null!==a&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(a,b,c,d){if(this.enabled){var e=this._startTime;if(null!==e){b=(a-e)*c;if(0>b||0===c)return;this._startTime=null;b*=c}b*=this._updateTimeScale(a);c=this._updateTime(b);a=this._updateWeight(a);if(0<a){b=this._interpolants;
e=this._propertyBindings;for(var f=0,g=b.length;f!==g;++f)b[f].evaluate(c),e[f].accumulate(d,a)}}else this._updateWeight(a)},_updateWeight:function(a){var b=0;if(this.enabled){b=this.weight;var c=this._weightInterpolant;if(null!==c){var d=c.evaluate(a)[0];b*=d;a>c.parameterPositions[1]&&(this.stopFading(),0===d&&(this.enabled=!1))}}return this._effectiveWeight=b},_updateTimeScale:function(a){var b=0;if(!this.paused){b=this.timeScale;var c=this._timeScaleInterpolant;if(null!==c){var d=c.evaluate(a)[0];
b*=d;a>c.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:this.timeScale=b)}}return this._effectiveTimeScale=b},_updateTime:function(a){var b=this.time+a;if(0===a)return b;var c=this._clip.duration,d=this.loop,e=this._loopCount;if(2200===d)a:{if(-1===e&&(this._loopCount=0,this._setEndings(!0,!0,!1)),b>=c)b=c;else if(0>b)b=0;else break a;this.clampWhenFinished?this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:"finished",action:this,direction:0>a?-1:1})}else{d=2202===d;-1===
e&&(0<=a?(e=0,this._setEndings(!0,0===this.repetitions,d)):this._setEndings(0===this.repetitions,!0,d));if(b>=c||0>b){var f=Math.floor(b/c);b-=c*f;e+=Math.abs(f);var g=this.repetitions-e;0>=g?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,b=0<a?c:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<a?1:-1})):(1===g?(a=0>a,this._setEndings(a,!a,d)):this._setEndings(!1,!1,d),this._loopCount=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:f}))}if(d&&1===(e&1))return this.time=
b,c-b}return this.time=b},_setEndings:function(a,b,c){var d=this._interpolantSettings;c?(d.endingStart=2401,d.endingEnd=2401):(d.endingStart=a?this.zeroSlopeAtStart?2401:2400:2402,d.endingEnd=b?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(a,b,c){var d=this._mixer,e=d.time,f=this._weightInterpolant;null===f&&(this._weightInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;f[0]=b;d[1]=e+a;f[1]=c;return this}});re.prototype=Object.assign(Object.create(ha.prototype),
{constructor:re,_bindAction:function(a,b){var c=a._localRoot||this._root,d=a._clip.tracks,e=d.length,f=a._propertyBindings;a=a._interpolants;var g=c.uuid,h=this._bindingsByRootAndName,l=h[g];void 0===l&&(l={},h[g]=l);for(h=0;h!==e;++h){var k=d[h],p=k.name,n=l[p];if(void 0===n){n=f[h];if(void 0!==n){null===n._cacheIndex&&(++n.referenceCount,this._addInactiveBinding(n,g,p));continue}n=new qe(oa.create(c,p,b&&b._propertyBindings[h].binding.parsedPath),k.ValueTypeName,k.getValueSize());++n.referenceCount;
this._addInactiveBinding(n,g,p)}f[h]=n;a[h].resultBuffer=n.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,c=a._clip.uuid,d=this._actionsByClip[c];this._bindAction(a,d&&d.knownActions[0]);this._addInactiveAction(a,c,b)}b=a._propertyBindings;c=0;for(d=b.length;c!==d;++c){var e=b[c];0===e.useCount++&&(this._lendBinding(e),e.saveOriginalState())}this._lendAction(a)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var b=
a._propertyBindings,c=0,d=b.length;c!==d;++c){var e=b[c];0===--e.useCount&&(e.restoreOriginalState(),this._takeBackBinding(e))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},
get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function(a){a=a._cacheIndex;return null!==a&&a<this._nActiveActions},_addInactiveAction:function(a,b,c){var d=this._actions,e=this._actionsByClip,f=e[b];void 0===f?(f={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,e[b]=f):(b=f.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=d.length;d.push(a);
f.actionByRoot[c]=a},_removeInactiveAction:function(a){var b=this._actions,c=b[b.length-1],d=a._cacheIndex;c._cacheIndex=d;b[d]=c;b.pop();a._cacheIndex=null;b=a._clip.uuid;c=this._actionsByClip;d=c[b];var e=d.knownActions,f=e[e.length-1],g=a._byClipCacheIndex;f._byClipCacheIndex=g;e[g]=f;e.pop();a._byClipCacheIndex=null;delete d.actionByRoot[(a._localRoot||this._root).uuid];0===e.length&&delete c[b];this._removeInactiveBindingsForAction(a)},_removeInactiveBindingsForAction:function(a){a=a._propertyBindings;
for(var b=0,c=a.length;b!==c;++b){var d=a[b];0===--d.referenceCount&&this._removeInactiveBinding(d)}},_lendAction:function(a){var b=this._actions,c=a._cacheIndex,d=this._nActiveActions++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackAction:function(a){var b=this._actions,c=a._cacheIndex,d=--this._nActiveActions,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_addInactiveBinding:function(a,b,c){var d=this._bindingsByRootAndName,e=d[b],f=this._bindings;void 0===e&&(e={},d[b]=
e);e[c]=a;a._cacheIndex=f.length;f.push(a)},_removeInactiveBinding:function(a){var b=this._bindings,c=a.binding,d=c.rootNode.uuid;c=c.path;var e=this._bindingsByRootAndName,f=e[d],g=b[b.length-1];a=a._cacheIndex;g._cacheIndex=a;b[a]=g;b.pop();delete f[c];a:{for(var h in f)break a;delete e[d]}},_lendBinding:function(a){var b=this._bindings,c=a._cacheIndex,d=this._nActiveBindings++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackBinding:function(a){var b=this._bindings,c=a._cacheIndex,
d=--this._nActiveBindings,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_lendControlInterpolant:function(){var a=this._controlInterpolants,b=this._nActiveControlInterpolants++,c=a[b];void 0===c&&(c=new gd(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),c.__cacheIndex=b,a[b]=c);return c},_takeBackControlInterpolant:function(a){var b=this._controlInterpolants,c=a.__cacheIndex,d=--this._nActiveControlInterpolants,e=b[d];a.__cacheIndex=d;b[d]=a;e.__cacheIndex=
c;b[c]=e},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(a,b){var c=b||this._root,d=c.uuid;c="string"===typeof a?Fa.findByName(c,a):a;a=null!==c?c.uuid:a;var e=this._actionsByClip[a],f=null;if(void 0!==e){f=e.actionByRoot[d];if(void 0!==f)return f;f=e.knownActions[0];null===c&&(c=f._clip)}if(null===c)return null;b=new qf(this,c,b);this._bindAction(b,f);this._addInactiveAction(b,a,d);return b},existingAction:function(a,b){var c=b||this._root;b=c.uuid;c="string"===typeof a?
Fa.findByName(c,a):a;a=this._actionsByClip[c?c.uuid:a];return void 0!==a?a.actionByRoot[b]||null:null},stopAllAction:function(){for(var a=this._actions,b=this._nActiveActions,c=this._bindings,d=this._nActiveBindings,e=this._nActiveBindings=this._nActiveActions=0;e!==b;++e)a[e].reset();for(e=0;e!==d;++e)c[e].useCount=0;return this},update:function(a){a*=this.timeScale;for(var b=this._actions,c=this._nActiveActions,d=this.time+=a,e=Math.sign(a),f=this._accuIndex^=1,g=0;g!==c;++g)b[g]._update(d,a,e,
f);a=this._bindings;b=this._nActiveBindings;for(g=0;g!==b;++g)a[g].apply(f);return this},getRoot:function(){return this._root},uncacheClip:function(a){var b=this._actions;a=a.uuid;var c=this._actionsByClip,d=c[a];if(void 0!==d){d=d.knownActions;for(var e=0,f=d.length;e!==f;++e){var g=d[e];this._deactivateAction(g);var h=g._cacheIndex,l=b[b.length-1];g._cacheIndex=null;g._byClipCacheIndex=null;l._cacheIndex=h;b[h]=l;b.pop();this._removeInactiveBindingsForAction(g)}delete c[a]}},uncacheRoot:function(a){a=
a.uuid;var b=this._actionsByClip;for(d in b){var c=b[d].actionByRoot[a];void 0!==c&&(this._deactivateAction(c),this._removeInactiveAction(c))}var d=this._bindingsByRootAndName[a];if(void 0!==d)for(var e in d)a=d[e],a.restoreOriginalState(),this._removeInactiveBinding(a)},uncacheAction:function(a,b){a=this.existingAction(a,b);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}});Od.prototype.clone=function(){return new Od(void 0===this.value.clone?this.value:this.value.clone())};se.prototype=
Object.assign(Object.create(G.prototype),{constructor:se,isInstancedBufferGeometry:!0,copy:function(a){G.prototype.copy.call(this,a);this.maxInstancedCount=a.maxInstancedCount;return this},clone:function(){return(new this.constructor).copy(this)}});Object.defineProperties(te.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(te.prototype,{isInterleavedBufferAttribute:!0,setX:function(a,b){this.data.array[a*this.data.stride+this.offset]=
b;return this},setY:function(a,b){this.data.array[a*this.data.stride+this.offset+1]=b;return this},setZ:function(a,b){this.data.array[a*this.data.stride+this.offset+2]=b;return this},setW:function(a,b){this.data.array[a*this.data.stride+this.offset+3]=b;return this},getX:function(a){return this.data.array[a*this.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*
this.data.stride+this.offset+3]},setXY:function(a,b,c){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;return this},setXYZ:function(a,b,c,d){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;this.data.array[a+3]=e;return this}});Object.defineProperty(oc.prototype,"needsUpdate",
{set:function(a){!0===a&&this.version++}});Object.assign(oc.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(a){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==a?a.length/this.stride:0;this.array=a;return this},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.count=a.count;this.stride=a.stride;this.dynamic=a.dynamic;return this},
copyAt:function(a,b,c){a*=this.stride;c*=b.stride;for(var d=0,e=this.stride;d<e;d++)this.array[a+d]=b.array[c+d];return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(a){this.onUploadCallback=a;return this}});ue.prototype=Object.assign(Object.create(oc.prototype),{constructor:ue,isInstancedInterleavedBuffer:!0,copy:function(a){oc.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;
return this}});ve.prototype=Object.assign(Object.create(O.prototype),{constructor:ve,isInstancedBufferAttribute:!0,copy:function(a){O.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this}});Object.assign(rf.prototype,{linePrecision:1,set:function(a,b){this.ray.set(a,b)},setFromCamera:function(a,b){b&&b.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(b.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(b).sub(this.ray.origin).normalize()):b&&b.isOrthographicCamera?
(this.ray.origin.set(a.x,a.y,(b.near+b.far)/(b.near-b.far)).unproject(b),this.ray.direction.set(0,0,-1).transformDirection(b.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(a,b,c){c=c||[];we(a,this,c,b);c.sort(sf);return c},intersectObjects:function(a,b,c){c=c||[];if(!1===Array.isArray(a))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),c;for(var d=0,e=a.length;d<e;d++)we(a[d],this,c,b);c.sort(sf);return c}});Object.assign(tf.prototype,
{start:function(){this.oldTime=this.startTime=("undefined"===typeof performance?Date:performance).now();this.elapsedTime=0;this.running=!0},stop:function(){this.getElapsedTime();this.autoStart=this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var a=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var b=("undefined"===typeof performance?Date:performance).now();a=(b-this.oldTime)/1E3;this.oldTime=b;this.elapsedTime+=a}return a}});
Object.assign(uf.prototype,{set:function(a,b,c){this.radius=a;this.phi=b;this.theta=c;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.radius=a.radius;this.phi=a.phi;this.theta=a.theta;return this},makeSafe:function(){this.phi=Math.max(1E-6,Math.min(Math.PI-1E-6,this.phi));return this},setFromVector3:function(a){this.radius=a.length();0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(a.x,a.z),this.phi=Math.acos(P.clamp(a.y/this.radius,-1,1)));
return this}});Object.assign(vf.prototype,{set:function(a,b,c){this.radius=a;this.theta=b;this.y=c;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.radius=a.radius;this.theta=a.theta;this.y=a.y;return this},setFromVector3:function(a){this.radius=Math.sqrt(a.x*a.x+a.z*a.z);this.theta=Math.atan2(a.x,a.z);this.y=a.y;return this}});Object.assign(xe.prototype,{set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();
for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new y;return function(b,c){c=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||
this.max.y<this.min.y},getCenter:function(a){void 0===a&&(console.warn("THREE.Box2: .getCenter() target is now required"),a=new y);return this.isEmpty()?a.set(0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){void 0===a&&(console.warn("THREE.Box2: .getSize() target is now required"),a=new y);return this.isEmpty()?a.set(0,0):a.subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);
return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y},getParameter:function(a,b){void 0===b&&(console.warn("THREE.Box2: .getParameter() target is now required"),b=new y);return b.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/
(this.max.y-this.min.y))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function(a,b){void 0===b&&(console.warn("THREE.Box2: .clampPoint() target is now required"),b=new y);return b.copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new y;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);
this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}});id.prototype=Object.create(B.prototype);id.prototype.constructor=id;id.prototype.isImmediateRenderObject=!0;jd.prototype=Object.create(aa.prototype);jd.prototype.constructor=jd;jd.prototype.update=function(){var a=new p,b=new p,c=new ta;return function(){var d=["a","b","c"];this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);
var e=this.object.matrixWorld,f=this.geometry.attributes.position,g=this.object.geometry;if(g&&g.isGeometry)for(var h=g.vertices,l=g.faces,k=g=0,p=l.length;k<p;k++)for(var n=l[k],r=0,q=n.vertexNormals.length;r<q;r++){var t=n.vertexNormals[r];a.copy(h[n[d[r]]]).applyMatrix4(e);b.copy(t).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);f.setXYZ(g,a.x,a.y,a.z);g+=1;f.setXYZ(g,b.x,b.y,b.z);g+=1}else if(g&&g.isBufferGeometry)for(d=g.attributes.position,h=g.attributes.normal,r=g=0,q=d.count;r<
q;r++)a.set(d.getX(r),d.getY(r),d.getZ(r)).applyMatrix4(e),b.set(h.getX(r),h.getY(r),h.getZ(r)),b.applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),f.setXYZ(g,a.x,a.y,a.z),g+=1,f.setXYZ(g,b.x,b.y,b.z),g+=1;f.needsUpdate=!0}}();pc.prototype=Object.create(B.prototype);pc.prototype.constructor=pc;pc.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};pc.prototype.update=function(){var a=new p,b=new p;return function(){this.light.updateMatrixWorld();var c=
this.light.distance?this.light.distance:1E3,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}();qc.prototype=Object.create(aa.prototype);qc.prototype.constructor=qc;qc.prototype.updateMatrixWorld=function(){var a=new p,b=new F,c=new F;return function(d){var e=
this.bones,f=this.geometry,g=f.getAttribute("position");c.getInverse(this.root.matrixWorld);for(var h=0,k=0;h<e.length;h++){var m=e[h];m.parent&&m.parent.isBone&&(b.multiplyMatrices(c,m.matrixWorld),a.setFromMatrixPosition(b),g.setXYZ(k,a.x,a.y,a.z),b.multiplyMatrices(c,m.parent.matrixWorld),a.setFromMatrixPosition(b),g.setXYZ(k+1,a.x,a.y,a.z),k+=2)}f.getAttribute("position").needsUpdate=!0;B.prototype.updateMatrixWorld.call(this,d)}}();rc.prototype=Object.create(pa.prototype);rc.prototype.constructor=
rc;rc.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};rc.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};sc.prototype=Object.create(B.prototype);sc.prototype.constructor=sc;sc.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};sc.prototype.update=function(){var a=.5*this.light.width,b=.5*this.light.height,c=this.line.geometry.attributes.position,
d=c.array;d[0]=a;d[1]=-b;d[2]=0;d[3]=a;d[4]=b;d[5]=0;d[6]=-a;d[7]=b;d[8]=0;d[9]=-a;d[10]=-b;d[11]=0;d[12]=a;d[13]=-b;d[14]=0;c.needsUpdate=!0;void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)};tc.prototype=Object.create(B.prototype);tc.prototype.constructor=tc;tc.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};tc.prototype.update=function(){var a=new p,b=new K,c=new K;return function(){var d=
this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=d.geometry.getAttribute("color");b.copy(this.light.color);c.copy(this.light.groundColor);for(var f=0,g=e.count;f<g;f++){var h=f<g/2?b:c;e.setXYZ(f,h.r,h.g,h.b)}e.needsUpdate=!0}d.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate())}}();kd.prototype=Object.create(aa.prototype);kd.prototype.constructor=kd;Pd.prototype=Object.create(aa.prototype);Pd.prototype.constructor=Pd;ld.prototype=Object.create(aa.prototype);
ld.prototype.constructor=ld;ld.prototype.update=function(){var a=new p,b=new p,c=new ta;return function(){this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);var d=this.object.matrixWorld,e=this.geometry.attributes.position,f=this.object.geometry,g=f.vertices;f=f.faces;for(var h=0,k=0,m=f.length;k<m;k++){var p=f[k],n=p.normal;a.copy(g[p.a]).add(g[p.b]).add(g[p.c]).divideScalar(3).applyMatrix4(d);b.copy(n).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);e.setXYZ(h,
a.x,a.y,a.z);h+=1;e.setXYZ(h,b.x,b.y,b.z);h+=1}e.needsUpdate=!0}}();uc.prototype=Object.create(B.prototype);uc.prototype.constructor=uc;uc.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};uc.prototype.update=function(){var a=new p,b=new p,c=new p;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,
a);this.lightPlane.lookAt(c);void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color));this.targetLine.lookAt(c);this.targetLine.scale.z=c.length()}}();md.prototype=Object.create(aa.prototype);md.prototype.constructor=md;md.prototype.update=function(){function a(a,g,h,k){d.set(g,h,k).unproject(e);a=c[a];if(void 0!==a)for(g=b.getAttribute("position"),
h=0,k=a.length;h<k;h++)g.setXYZ(a[h],d.x,d.y,d.z)}var b,c,d=new p,e=new Qa;return function(){b=this.geometry;c=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);a("c",0,0,-1);a("t",0,0,1);a("n1",-1,-1,-1);a("n2",1,-1,-1);a("n3",-1,1,-1);a("n4",1,1,-1);a("f1",-1,-1,1);a("f2",1,-1,1);a("f3",-1,1,1);a("f4",1,1,1);a("u1",.7,1.1,-1);a("u2",-.7,1.1,-1);a("u3",0,2,-1);a("cf1",-1,0,1);a("cf2",1,0,1);a("cf3",0,-1,1);a("cf4",0,1,1);a("cn1",-1,0,-1);a("cn2",1,0,-1);a("cn3",0,-1,-1);a("cn4",
0,1,-1);b.getAttribute("position").needsUpdate=!0}}();Ib.prototype=Object.create(aa.prototype);Ib.prototype.constructor=Ib;Ib.prototype.update=function(){var a=new Wa;return function(b){void 0!==b&&console.warn("THREE.BoxHelper: .update() has no longer arguments.");void 0!==this.object&&a.setFromObject(this.object);if(!a.isEmpty()){b=a.min;var c=a.max,d=this.geometry.attributes.position,e=d.array;e[0]=c.x;e[1]=c.y;e[2]=c.z;e[3]=b.x;e[4]=c.y;e[5]=c.z;e[6]=b.x;e[7]=b.y;e[8]=c.z;e[9]=c.x;e[10]=b.y;e[11]=
c.z;e[12]=c.x;e[13]=c.y;e[14]=b.z;e[15]=b.x;e[16]=c.y;e[17]=b.z;e[18]=b.x;e[19]=b.y;e[20]=b.z;e[21]=c.x;e[22]=b.y;e[23]=b.z;d.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();Ib.prototype.setFromObject=function(a){this.object=a;this.update();return this};nd.prototype=Object.create(aa.prototype);nd.prototype.constructor=nd;nd.prototype.updateMatrixWorld=function(a){var b=this.box;b.isEmpty()||(b.getCenter(this.position),b.getSize(this.scale),this.scale.multiplyScalar(.5),B.prototype.updateMatrixWorld.call(this,
a))};od.prototype=Object.create(ma.prototype);od.prototype.constructor=od;od.prototype.updateMatrixWorld=function(a){var b=-this.plane.constant;1E-8>Math.abs(b)&&(b=1E-8);this.scale.set(.5*this.size,.5*this.size,b);this.children[0].material.side=0>b?1:0;this.lookAt(this.plane.normal);B.prototype.updateMatrixWorld.call(this,a)};var Qd,ye;Jb.prototype=Object.create(B.prototype);Jb.prototype.constructor=Jb;Jb.prototype.setDirection=function(){var a=new p,b;return function(c){.99999<c.y?this.quaternion.set(0,
0,0,1):-.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();Jb.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);this.line.scale.set(1,Math.max(0,a-b),1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};Jb.prototype.setColor=function(a){this.line.material.color.copy(a);this.cone.material.color.copy(a)};pd.prototype=Object.create(aa.prototype);
pd.prototype.constructor=pd;I.create=function(a,b){console.log("THREE.Curve.create() has been deprecated");a.prototype=Object.create(I.prototype);a.prototype.constructor=a;a.prototype.getPoint=b;return a};Object.assign(ab.prototype,{createPointsGeometry:function(a){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");a=this.getPoints(a);return this.createGeometry(a)},createSpacedPointsGeometry:function(a){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");
a=this.getSpacedPoints(a);return this.createGeometry(a)},createGeometry:function(a){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var b=new J,c=0,d=a.length;c<d;c++){var e=a[c];b.vertices.push(new p(e.x,e.y,e.z||0))}return b}});Object.assign(Pa.prototype,{fromPoints:function(a){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints().");this.setFromPoints(a)}});xf.prototype=Object.create(ra.prototype);
yf.prototype=Object.create(ra.prototype);ze.prototype=Object.create(ra.prototype);Object.assign(ze.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});kd.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};
qc.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(mc.prototype,{extractUrlBase:function(a){console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.");return De.extractUrlBase(a)}});Object.assign(xe.prototype,{center:function(a){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(a)},empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");
return this.isEmpty()},isIntersectionBox:function(a){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},size:function(a){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(a)}});Object.assign(Wa.prototype,{center:function(a){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(a)},empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");
return this.isEmpty()},isIntersectionBox:function(a){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},isIntersectionSphere:function(a){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(a)},size:function(a){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(a)}});Ob.prototype.center=function(a){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");
return this.getCenter(a)};Object.assign(P,{random16:function(){console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead.");return Math.random()},nearestPowerOfTwo:function(a){console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().");return P.floorPowerOfTwo(a)},nextPowerOfTwo:function(a){console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().");return P.ceilPowerOfTwo(a)}});Object.assign(ta.prototype,{flattenToArrayOffset:function(a,
b){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(a,b)},multiplyVector3:function(a){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(a){console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");
return this.applyToBufferAttribute(a)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(F.prototype,{extractPosition:function(a){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(a)},flattenToArrayOffset:function(a,b){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(a,b)},getPosition:function(){var a;
return function(){void 0===a&&(a=new p);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return a.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(a){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(a)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(a){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");
return a.applyMatrix4(this)},multiplyVector4:function(a){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");a.transformDirection(this)},crossVector:function(a){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");
return a.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(a){console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");
return this.applyToBufferAttribute(a)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(a,b,c,d,e,f){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");return this.makePerspective(a,b,d,c,e,f)}});Ha.prototype.isIntersectionLine=function(a){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(a)};
X.prototype.multiplyVector3=function(a){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return a.applyQuaternion(this)};Object.assign(sb.prototype,{isIntersectionBox:function(a){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},isIntersectionPlane:function(a){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(a)},
isIntersectionSphere:function(a){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(a)}});Object.assign(Aa.prototype,{area:function(){console.warn("THREE.Triangle: .area() has been renamed to .getArea().");return this.getArea()},barycoordFromPoint:function(a,b){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return this.getBarycoord(a,b)},midpoint:function(a){console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint().");
return this.getMidpoint(a)},normal:function(a){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return this.getNormal(a)},plane:function(a){console.warn("THREE.Triangle: .plane() has been renamed to .getPlane().");return this.getPlane(a)}});Object.assign(Aa,{barycoordFromPoint:function(a,b,c,d,e){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return Aa.getBarycoord(a,b,c,d,e)},normal:function(a,b,c,d){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");
return Aa.getNormal(a,b,c,d)}});Object.assign(jb.prototype,{extractAllPoints:function(a){console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.");return this.extractPoints(a)},extrude:function(a){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new wb(this,a)},makeGeometry:function(a){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new yb(this,a)}});Object.assign(y.prototype,
{fromAttribute:function(a,b,c){console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(a,b,c)},distanceToManhattan:function(a){console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(a)},lengthManhattan:function(){console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(p.prototype,
{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");
return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(b,a)},applyProjection:function(a){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(a)},fromAttribute:function(a,b,c){console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(a,
b,c)},distanceToManhattan:function(a){console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(a)},lengthManhattan:function(){console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(U.prototype,{fromAttribute:function(a,b,c){console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(a,
b,c)},lengthManhattan:function(){console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(J.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}});Object.assign(B.prototype,{getChildByName:function(a){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");
return this.getObjectByName(a)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(a,b){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(b,a)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}});Object.defineProperties(B.prototype,
{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function(a){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=a}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});
Object.defineProperties(Gc.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}});Object.defineProperty(Hc.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});Object.defineProperty(I.prototype,"__arcLengthDivisions",{get:function(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");
return this.arcLengthDivisions},set:function(a){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");this.arcLengthDivisions=a}});ea.prototype.setLens=function(a,b){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==b&&(this.filmGauge=b);this.setFocalLength(a)};Object.defineProperties(ba.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(a){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");
this.shadow.camera.fov=a}},shadowCameraLeft:{set:function(a){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");
this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");this.shadow.camera.far=a}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(a){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");
this.shadow.bias=a}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(a){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=a}}});Object.defineProperties(O.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");
return this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}});Object.assign(G.prototype,{addIndex:function(a){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(a)},addDrawCall:function(a,b,c){void 0!==c&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(a,b)},
clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(G.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");
return this.groups}}});Object.assign(Sa.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(Od.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},
onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this}}});Object.defineProperties(L.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){console.warn("THREE.Material: .wrapRGB has been removed.");return new K}},shading:{get:function(){console.error("THREE."+this.type+
": .shading has been removed. Use the boolean .flatShading instead.")},set:function(a){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=1===a}}});Object.defineProperties(Ja.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});
Object.defineProperties(Ea.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(a){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=a}}});Object.assign(Zd.prototype,{animate:function(a){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop().");this.setAnimationLoop(a)},getCurrentRenderTarget:function(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");
return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");return this.capabilities.getMaxAnisotropy()},getPrecision:function(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return this.capabilities.precision},resetGLState:function(){console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset().");return this.state.reset()},supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");
return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");
return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");
return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(a){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(a)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},
addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}});Object.defineProperties(Zd.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");
this.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=a}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Ye.prototype,
{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},
renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(kb.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");
this.texture.wrapS=a}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=a}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=
a}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=a}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return this.texture.anisotropy},set:function(a){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=
a}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(a){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=a}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set:function(a){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=a}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");
return this.texture.format},set:function(a){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=a}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return this.texture.type},set:function(a){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=a}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},
set:function(a){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=a}}});Object.defineProperties($e.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}});nc.prototype.load=function(a){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var b=this;(new le).load(a,function(a){b.setBuffer(a)});return this};pe.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");
return this.getFrequencyData()};hd.prototype.updateCubeMap=function(a,b){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(a,b)};k.WebGLRenderTargetCube=Lb;k.WebGLRenderTarget=kb;k.WebGLRenderer=Zd;k.ShaderLib=tb;k.UniformsLib=M;k.UniformsUtils=Ca;k.ShaderChunk=W;k.FogExp2=Sb;k.Fog=Tb;k.Scene=sd;k.Sprite=Fc;k.LOD=Gc;k.SkinnedMesh=ud;k.Skeleton=Hc;k.Bone=td;k.Mesh=pa;k.LineSegments=aa;k.LineLoop=vd;k.Line=ma;k.Points=Ub;k.Group=wd;k.VideoTexture=$d;k.DataTexture=
lb;k.CompressedTexture=Vb;k.CubeTexture=cb;k.CanvasTexture=Qb;k.DepthTexture=Ic;k.Texture=ca;k.CompressedTextureLoader=jf;k.DataTextureLoader=de;k.CubeTextureLoader=ee;k.TextureLoader=yd;k.ObjectLoader=lf;k.MaterialLoader=Nd;k.BufferGeometryLoader=ge;k.DefaultLoadingManager=wa;k.LoadingManager=ce;k.JSONLoader=he;k.ImageLoader=cd;k.ImageBitmapLoader=ie;k.FontLoader=mf;k.FileLoader=Ka;k.Loader=mc;k.LoaderUtils=De;k.Cache=Kb;k.AudioLoader=le;k.SpotLightShadow=Ad;k.SpotLight=Bd;k.PointLight=Cd;k.RectAreaLight=
Gd;k.HemisphereLight=zd;k.DirectionalLightShadow=Dd;k.DirectionalLight=Ed;k.AmbientLight=Fd;k.LightShadow=Hb;k.Light=ba;k.StereoCamera=nf;k.PerspectiveCamera=ea;k.OrthographicCamera=Mb;k.CubeCamera=hd;k.ArrayCamera=Ec;k.Camera=Qa;k.AudioListener=me;k.PositionalAudio=oe;k.AudioContext=ne;k.AudioAnalyser=pe;k.Audio=nc;k.VectorKeyframeTrack=lc;k.StringKeyframeTrack=Hd;k.QuaternionKeyframeTrack=fd;k.NumberKeyframeTrack=kc;k.ColorKeyframeTrack=Kd;k.BooleanKeyframeTrack=Id;k.PropertyMixer=qe;k.PropertyBinding=
oa;k.KeyframeTrack=ja;k.AnimationUtils=sa;k.AnimationObjectGroup=pf;k.AnimationMixer=re;k.AnimationClip=Fa;k.Uniform=Od;k.InstancedBufferGeometry=se;k.BufferGeometry=G;k.Geometry=J;k.InterleavedBufferAttribute=te;k.InstancedInterleavedBuffer=ue;k.InterleavedBuffer=oc;k.InstancedBufferAttribute=ve;k.Face3=Xa;k.Object3D=B;k.Raycaster=rf;k.Layers=Ud;k.EventDispatcher=ha;k.Clock=tf;k.QuaternionLinearInterpolant=Jd;k.LinearInterpolant=gd;k.DiscreteInterpolant=Md;k.CubicInterpolant=Ld;k.Interpolant=ua;
k.Triangle=Aa;k.Math=P;k.Spherical=uf;k.Cylindrical=vf;k.Plane=Ha;k.Frustum=qd;k.Sphere=Ga;k.Ray=sb;k.Matrix4=F;k.Matrix3=ta;k.Box3=Wa;k.Box2=xe;k.Line3=Ob;k.Euler=mb;k.Vector4=U;k.Vector3=p;k.Vector2=y;k.Quaternion=X;k.Color=K;k.ImmediateRenderObject=id;k.VertexNormalsHelper=jd;k.SpotLightHelper=pc;k.SkeletonHelper=qc;k.PointLightHelper=rc;k.RectAreaLightHelper=sc;k.HemisphereLightHelper=tc;k.GridHelper=kd;k.PolarGridHelper=Pd;k.FaceNormalsHelper=ld;k.DirectionalLightHelper=uc;k.CameraHelper=md;
k.BoxHelper=Ib;k.Box3Helper=nd;k.PlaneHelper=od;k.ArrowHelper=Jb;k.AxesHelper=pd;k.Shape=jb;k.Path=Pa;k.ShapePath=je;k.Font=ke;k.CurvePath=ab;k.Curve=I;k.ShapeUtils=Za;k.WebGLUtils=Ze;k.WireframeGeometry=Wb;k.ParametricGeometry=Jc;k.ParametricBufferGeometry=Xb;k.TetrahedronGeometry=Lc;k.TetrahedronBufferGeometry=Yb;k.OctahedronGeometry=Mc;k.OctahedronBufferGeometry=ub;k.IcosahedronGeometry=Nc;k.IcosahedronBufferGeometry=Zb;k.DodecahedronGeometry=Oc;k.DodecahedronBufferGeometry=$b;k.PolyhedronGeometry=
Kc;k.PolyhedronBufferGeometry=va;k.TubeGeometry=Pc;k.TubeBufferGeometry=ac;k.TorusKnotGeometry=Qc;k.TorusKnotBufferGeometry=bc;k.TorusGeometry=Rc;k.TorusBufferGeometry=cc;k.TextGeometry=Wc;k.TextBufferGeometry=dc;k.SphereGeometry=Xc;k.SphereBufferGeometry=xb;k.RingGeometry=Yc;k.RingBufferGeometry=ec;k.PlaneGeometry=Cc;k.PlaneBufferGeometry=rb;k.LatheGeometry=Zc;k.LatheBufferGeometry=fc;k.ShapeGeometry=yb;k.ShapeBufferGeometry=zb;k.ExtrudeGeometry=wb;k.ExtrudeBufferGeometry=Sa;k.EdgesGeometry=gc;k.ConeGeometry=
$c;k.ConeBufferGeometry=ad;k.CylinderGeometry=Ab;k.CylinderBufferGeometry=$a;k.CircleGeometry=bd;k.CircleBufferGeometry=hc;k.BoxGeometry=Nb;k.BoxBufferGeometry=pb;k.ShadowMaterial=Bb;k.SpriteMaterial=ib;k.RawShaderMaterial=ic;k.ShaderMaterial=Ea;k.PointsMaterial=Ia;k.MeshPhysicalMaterial=Cb;k.MeshStandardMaterial=Ta;k.MeshPhongMaterial=Ja;k.MeshToonMaterial=Db;k.MeshNormalMaterial=Eb;k.MeshLambertMaterial=Fb;k.MeshDepthMaterial=eb;k.MeshDistanceMaterial=fb;k.MeshBasicMaterial=ka;k.LineDashedMaterial=
Gb;k.LineBasicMaterial=T;k.Material=L;k.Float64BufferAttribute=Ac;k.Float32BufferAttribute=A;k.Uint32BufferAttribute=ob;k.Int32BufferAttribute=zc;k.Uint16BufferAttribute=nb;k.Int16BufferAttribute=yc;k.Uint8ClampedBufferAttribute=xc;k.Uint8BufferAttribute=wc;k.Int8BufferAttribute=vc;k.BufferAttribute=O;k.ArcCurve=jc;k.CatmullRomCurve3=ra;k.CubicBezierCurve=La;k.CubicBezierCurve3=Ua;k.EllipseCurve=xa;k.LineCurve=ya;k.LineCurve3=Ma;k.QuadraticBezierCurve=Na;k.QuadraticBezierCurve3=Va;k.SplineCurve=Oa;
k.REVISION="93";k.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2};k.CullFaceNone=0;k.CullFaceBack=1;k.CullFaceFront=2;k.CullFaceFrontBack=3;k.FrontFaceDirectionCW=0;k.FrontFaceDirectionCCW=1;k.BasicShadowMap=0;k.PCFShadowMap=1;k.PCFSoftShadowMap=2;k.FrontSide=0;k.BackSide=1;k.DoubleSide=2;k.FlatShading=1;k.SmoothShading=2;k.NoColors=0;k.FaceColors=1;k.VertexColors=2;k.NoBlending=0;k.NormalBlending=1;k.AdditiveBlending=2;k.SubtractiveBlending=3;k.MultiplyBlending=4;k.CustomBlending=5;k.AddEquation=100;k.SubtractEquation=
101;k.ReverseSubtractEquation=102;k.MinEquation=103;k.MaxEquation=104;k.ZeroFactor=200;k.OneFactor=201;k.SrcColorFactor=202;k.OneMinusSrcColorFactor=203;k.SrcAlphaFactor=204;k.OneMinusSrcAlphaFactor=205;k.DstAlphaFactor=206;k.OneMinusDstAlphaFactor=207;k.DstColorFactor=208;k.OneMinusDstColorFactor=209;k.SrcAlphaSaturateFactor=210;k.NeverDepth=0;k.AlwaysDepth=1;k.LessDepth=2;k.LessEqualDepth=3;k.EqualDepth=4;k.GreaterEqualDepth=5;k.GreaterDepth=6;k.NotEqualDepth=7;k.MultiplyOperation=0;k.MixOperation=
1;k.AddOperation=2;k.NoToneMapping=0;k.LinearToneMapping=1;k.ReinhardToneMapping=2;k.Uncharted2ToneMapping=3;k.CineonToneMapping=4;k.UVMapping=300;k.CubeReflectionMapping=301;k.CubeRefractionMapping=302;k.EquirectangularReflectionMapping=303;k.EquirectangularRefractionMapping=304;k.SphericalReflectionMapping=305;k.CubeUVReflectionMapping=306;k.CubeUVRefractionMapping=307;k.RepeatWrapping=1E3;k.ClampToEdgeWrapping=1001;k.MirroredRepeatWrapping=1002;k.NearestFilter=1003;k.NearestMipMapNearestFilter=
1004;k.NearestMipMapLinearFilter=1005;k.LinearFilter=1006;k.LinearMipMapNearestFilter=1007;k.LinearMipMapLinearFilter=1008;k.UnsignedByteType=1009;k.ByteType=1010;k.ShortType=1011;k.UnsignedShortType=1012;k.IntType=1013;k.UnsignedIntType=1014;k.FloatType=1015;k.HalfFloatType=1016;k.UnsignedShort4444Type=1017;k.UnsignedShort5551Type=1018;k.UnsignedShort565Type=1019;k.UnsignedInt248Type=1020;k.AlphaFormat=1021;k.RGBFormat=1022;k.RGBAFormat=1023;k.LuminanceFormat=1024;k.LuminanceAlphaFormat=1025;k.RGBEFormat=
1023;k.DepthFormat=1026;k.DepthStencilFormat=1027;k.RGB_S3TC_DXT1_Format=33776;k.RGBA_S3TC_DXT1_Format=33777;k.RGBA_S3TC_DXT3_Format=33778;k.RGBA_S3TC_DXT5_Format=33779;k.RGB_PVRTC_4BPPV1_Format=35840;k.RGB_PVRTC_2BPPV1_Format=35841;k.RGBA_PVRTC_4BPPV1_Format=35842;k.RGBA_PVRTC_2BPPV1_Format=35843;k.RGB_ETC1_Format=36196;k.RGBA_ASTC_4x4_Format=37808;k.RGBA_ASTC_5x4_Format=37809;k.RGBA_ASTC_5x5_Format=37810;k.RGBA_ASTC_6x5_Format=37811;k.RGBA_ASTC_6x6_Format=37812;k.RGBA_ASTC_8x5_Format=37813;k.RGBA_ASTC_8x6_Format=
37814;k.RGBA_ASTC_8x8_Format=37815;k.RGBA_ASTC_10x5_Format=37816;k.RGBA_ASTC_10x6_Format=37817;k.RGBA_ASTC_10x8_Format=37818;k.RGBA_ASTC_10x10_Format=37819;k.RGBA_ASTC_12x10_Format=37820;k.RGBA_ASTC_12x12_Format=37821;k.LoopOnce=2200;k.LoopRepeat=2201;k.LoopPingPong=2202;k.InterpolateDiscrete=2300;k.InterpolateLinear=2301;k.InterpolateSmooth=2302;k.ZeroCurvatureEnding=2400;k.ZeroSlopeEnding=2401;k.WrapAroundEnding=2402;k.TrianglesDrawMode=0;k.TriangleStripDrawMode=1;k.TriangleFanDrawMode=2;k.LinearEncoding=
3E3;k.sRGBEncoding=3001;k.GammaEncoding=3007;k.RGBEEncoding=3002;k.LogLuvEncoding=3003;k.RGBM7Encoding=3004;k.RGBM16Encoding=3005;k.RGBDEncoding=3006;k.BasicDepthPacking=3200;k.RGBADepthPacking=3201;k.CubeGeometry=Nb;k.Face4=function(a,b,c,d,e,f,g){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new Xa(a,b,c,e,f,g)};k.LineStrip=0;k.LinePieces=1;k.MeshFaceMaterial=function(a){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");
return a};k.MultiMaterial=function(a){void 0===a&&(a=[]);console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");a.isMultiMaterial=!0;a.materials=a;a.clone=function(){return a.slice()};return a};k.PointCloud=function(a,b){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new Ub(a,b)};k.Particle=function(a){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new Fc(a)};k.ParticleSystem=function(a,b){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");
return new Ub(a,b)};k.PointCloudMaterial=function(a){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new Ia(a)};k.ParticleBasicMaterial=function(a){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new Ia(a)};k.ParticleSystemMaterial=function(a){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new Ia(a)};k.Vertex=function(a,b,c){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");
return new p(a,b,c)};k.DynamicBufferAttribute=function(a,b){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return(new O(a,b)).setDynamic(!0)};k.Int8Attribute=function(a,b){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new vc(a,b)};k.Uint8Attribute=function(a,b){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new wc(a,
b)};k.Uint8ClampedAttribute=function(a,b){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new xc(a,b)};k.Int16Attribute=function(a,b){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new yc(a,b)};k.Uint16Attribute=function(a,b){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");return new nb(a,b)};k.Int32Attribute=
function(a,b){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new zc(a,b)};k.Uint32Attribute=function(a,b){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new ob(a,b)};k.Float32Attribute=function(a,b){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");return new A(a,b)};k.Float64Attribute=function(a,b){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");
return new Ac(a,b)};k.ClosedSplineCurve3=xf;k.SplineCurve3=yf;k.Spline=ze;k.AxisHelper=function(a){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");return new pd(a)};k.BoundingBoxHelper=function(a,b){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");return new Ib(a,b)};k.EdgesHelper=function(a,b){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new aa(new gc(a.geometry),new T({color:void 0!==
b?b:16777215}))};k.WireframeHelper=function(a,b){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new aa(new Wb(a.geometry),new T({color:void 0!==b?b:16777215}))};k.XHRLoader=function(a){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");return new Ka(a)};k.BinaryTextureLoader=function(a){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new de(a)};k.GeometryUtils={merge:function(a,b,
c){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");if(b.isMesh){b.matrixAutoUpdate&&b.updateMatrix();var d=b.matrix;b=b.geometry}a.merge(b,d,c)},center:function(a){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return a.center()}};k.ImageUtils={crossOrigin:void 0,loadTexture:function(a,b,c,d){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");
var e=new yd;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a},loadTextureCube:function(a,b,c,d){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var e=new ee;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};
k.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(a,b){console.warn("THREE.Projector: .projectVector() is now vector.project().");a.project(b)};this.unprojectVector=function(a,b){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");a.unproject(b)};this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}};k.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");
this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}};k.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};
k.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")};Object.defineProperty(k,"__esModule",{value:!0})});

THREE.Lensflare=function(){THREE.Mesh.call(this,THREE.Lensflare.Geometry,new THREE.MeshBasicMaterial({opacity:0,transparent:!0})),this.type="Lensflare",this.frustumCulled=!1,this.renderOrder=1/0;var E=new THREE.Vector3,f=new THREE.DataTexture(new Uint8Array(768),16,16,THREE.RGBFormat);f.minFilter=THREE.NearestFilter,f.magFilter=THREE.NearestFilter,f.wrapS=THREE.ClampToEdgeWrapping,f.wrapT=THREE.ClampToEdgeWrapping,f.needsUpdate=!0;var d=new THREE.DataTexture(new Uint8Array(768),16,16,THREE.RGBFormat);d.minFilter=THREE.NearestFilter,d.magFilter=THREE.NearestFilter,d.wrapS=THREE.ClampToEdgeWrapping,d.wrapT=THREE.ClampToEdgeWrapping,d.needsUpdate=!0;var m=THREE.Lensflare.Geometry,T=new THREE.RawShaderMaterial({uniforms:{scale:{value:null},screenPosition:{value:null}},vertexShader:["precision highp float;","uniform vec3 screenPosition;","uniform vec2 scale;","attribute vec3 position;","void main() {"," gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","void main() {"," gl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );","}"].join("\n"),depthTest:!0,depthWrite:!1,transparent:!1}),y=new THREE.RawShaderMaterial({uniforms:{map:{value:f},scale:{value:null},screenPosition:{value:null}},vertexShader:["precision highp float;","uniform vec3 screenPosition;","uniform vec2 scale;","attribute vec3 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {"," vUV = uv;"," gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","uniform sampler2D map;","varying vec2 vUV;","void main() {"," gl_FragColor = texture2D( map, vUV );","}"].join("\n"),depthTest:!1,depthWrite:!1,transparent:!1}),h=new THREE.Mesh(m,T),R=[],e=THREE.LensflareElement.Shader,x=new THREE.RawShaderMaterial({uniforms:{map:{value:null},occlusionMap:{value:d},color:{value:new THREE.Color(16777215)},scale:{value:new THREE.Vector2},screenPosition:{value:new THREE.Vector3}},vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,blending:THREE.AdditiveBlending,transparent:!0,depthWrite:!1}),g=new THREE.Mesh(m,x);this.addElement=function(e){R.push(e)};var H=new THREE.Vector2,w=new THREE.Vector2,b=new THREE.Box2,M=new THREE.Vector4;this.onBeforeRender=function(e,i,r){M.copy(e.getCurrentViewport());var t=M.w/M.z,n=M.z/2,o=M.w/2,a=16/M.w;if(H.set(a*t,a),b.min.set(M.x,M.y),b.max.set(M.x+(M.z-16),M.y+(M.w-16)),E.setFromMatrixPosition(this.matrixWorld),E.applyMatrix4(r.matrixWorldInverse),E.applyMatrix4(r.projectionMatrix),w.x=M.x+E.x*n+n-8,w.y=M.y+E.y*o+o-8,b.containsPoint(w)){e.copyFramebufferToTexture(w,f),(v=T.uniforms).scale.value=H,v.screenPosition.value=E,e.renderBufferDirect(r,null,m,T,h,null),e.copyFramebufferToTexture(w,d),(v=y.uniforms).scale.value=H,v.screenPosition.value=E,e.renderBufferDirect(r,null,m,y,h,null);for(var s=2*-E.x,l=2*-E.y,c=0,u=R.length;c<u;c++){var v,p=R[c];(v=x.uniforms).color.value.copy(p.color),v.map.value=p.texture,v.screenPosition.value.x=E.x+s*p.distance,v.screenPosition.value.y=E.y+l*p.distance;a=p.size/M.w,t=M.w/M.z;v.scale.value.set(a*t,a),x.uniformsNeedUpdate=!0,e.renderBufferDirect(r,null,m,x,g,null)}}},this.dispose=function(){T.dispose(),y.dispose(),x.dispose(),f.dispose(),d.dispose();for(var e=0,i=R.length;e<i;e++)R[e].texture.dispose()}},THREE.Lensflare.prototype=Object.create(THREE.Mesh.prototype),THREE.Lensflare.prototype.constructor=THREE.Lensflare,THREE.Lensflare.prototype.isLensflare=!0,THREE.LensflareElement=function(e,i,r,t){this.texture=e,this.size=i||1,this.distance=r||0,this.color=t||new THREE.Color(16777215)},THREE.LensflareElement.Shader={uniforms:{map:{value:null},occlusionMap:{value:null},color:{value:null},scale:{value:null},screenPosition:{value:null}},vertexShader:["precision highp float;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform sampler2D occlusionMap;","attribute vec3 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {"," vUV = uv;"," vec2 pos = position.xy;"," vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );"," visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );"," visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );"," visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );"," visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );"," visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );"," visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );"," visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );"," visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );"," vVisibility =        visibility.r / 9.0;"," vVisibility *= 1.0 - visibility.g / 9.0;"," vVisibility *=       visibility.b / 9.0;"," gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","uniform sampler2D map;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {"," vec4 texture = texture2D( map, vUV );"," texture.a *= vVisibility;"," gl_FragColor = texture;"," gl_FragColor.rgb *= color;","}"].join("\n")},THREE.Lensflare.Geometry=function(){var e=new THREE.BufferGeometry,i=new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1]),r=new THREE.InterleavedBuffer(i,5);return e.setIndex([0,1,2,0,2,3]),e.addAttribute("position",new THREE.InterleavedBufferAttribute(r,3,0,!1)),e.addAttribute("uv",new THREE.InterleavedBufferAttribute(r,2,3,!1)),e}();

THREE.DeviceOrientationControls=function(e,t){var a=this;this.object=e,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0,this.inIframe=t;function n(e){a.deviceOrientation=e}function i(){a.screenOrientation=window.orientation||0}var r,s,c,d,h=(r=new THREE.Vector3(0,0,1),s=new THREE.Euler,c=new THREE.Quaternion,d=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),function(e,t,n,i,o){s.set(n,t,-i,"YXZ"),e.setFromEuler(s),e.multiply(d),e.multiply(c.setFromAxisAngle(r,-o))});this.connect=function(){i(),this.inIframe||(void 0!==window.DeviceOrientationEvent&&"function"==typeof window.DeviceOrientationEvent.requestPermission?window.DeviceOrientationEvent.requestPermission().then(function(e){"granted"==e?(window.addEventListener("orientationchange",i,!1),window.addEventListener("deviceorientation",n,!1)):alert("You have denied access to the device orientation event. Please clear your browser's cache to authenticate again.")}).catch(function(e){}):(window.addEventListener("orientationchange",i,!1),window.addEventListener("deviceorientation",n,!1))),a.enabled=!0},this.disconnect=function(){this.inIframe||(window.removeEventListener("orientationchange",i,!1),window.removeEventListener("deviceorientation",n,!1)),a.enabled=!1},this.update=function(){if(!1!==a.enabled){var e=a.deviceOrientation;if(e){var t=e.alpha?THREE.Math.degToRad(e.alpha)-a.alphaOffset:0,n=e.beta?THREE.Math.degToRad(e.beta):0,i=e.gamma?THREE.Math.degToRad(e.gamma):0,o=a.screenOrientation?THREE.Math.degToRad(a.screenOrientation):0;h(a.object.quaternion,t,n,i,o)}}},this.updateAlphaOffsetAngle=function(e){this.alphaOffset=e,this.update()},this.dispose=function(){a.disconnect()},this.connect(),this.setEvent=function(e){a.deviceOrientation=e}};

THREE.RenderableObject=function(){this.id=0,this.object=null,this.z=0},THREE.RenderableFace=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.normalModel=new THREE.Vector3,this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.vertexNormalsLength=0,this.color=new THREE.Color,this.material=null,this.uvs=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2],this.z=0},THREE.RenderableVertex=function(){this.position=new THREE.Vector3,this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},THREE.RenderableLine=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.vertexColors=[new THREE.Color,new THREE.Color],this.material=null,this.z=0},THREE.RenderableSprite=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new THREE.Vector2,this.material=null},THREE.Projector=function(){function e(){if(c===x){var e=new THREE.RenderableObject;return d.push(e),x++,c++,e}return d[c++]}function t(){if(p===y){var e=new THREE.RenderableVertex;return T.push(e),y++,p++,e}return T[p++]}function r(){if(u===w){var e=new THREE.RenderableFace;return H.push(e),w++,u++,e}return H[u++]}function i(){if(v===b){var e=new THREE.RenderableLine;return g.push(e),b++,v++,e}return g[v++]}function o(){if(m===S){var e=new THREE.RenderableSprite;return M.push(e),S++,m++,e}return M[m++]}function n(e,t){return e.z!==t.z?t.z-e.z:e.id!==t.id?e.id-t.id:0}function a(e,t){var r=0,i=1,o=e.z+e.w,n=t.z+t.w,a=-e.z+e.w,s=-t.z+t.w;return o>=0&&n>=0&&a>=0&&s>=0?!0:0>o&&0>n||0>a&&0>s?!1:(0>o?r=Math.max(r,o/(o-n)):0>n&&(i=Math.min(i,o/(o-n))),0>a?r=Math.max(r,a/(a-s)):0>s&&(i=Math.min(i,a/(a-s))),r>i?!1:(e.lerp(t,r),t.lerp(e,1-i),!0))}var s,c,l,p,E,u,h,v,f,m,R,d=[],x=0,T=[],y=0,H=[],w=0,g=[],b=0,M=[],S=0,z={objects:[],lights:[],elements:[]},V=new THREE.Vector3,j=new THREE.Vector4,L=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),C=new THREE.Box3,k=new Array(3),N=(new Array(4),new THREE.Matrix4),W=new THREE.Matrix4,B=new THREE.Matrix4,F=new THREE.Matrix3,P=new THREE.Frustum,I=new THREE.Vector4,O=new THREE.Vector4;this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(e,t){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")};var D=function(){var e=[],o=[],n=null,a=null,s=new THREE.Matrix3,c=function(t){n=t,a=n.material,s.getNormalMatrix(n.matrixWorld),e.length=0,o.length=0},p=function(e){var t=e.position,r=e.positionWorld,i=e.positionScreen;r.copy(t).applyMatrix4(R),i.copy(r).applyMatrix4(W);var o=1/i.w;i.x*=o,i.y*=o,i.z*=o,e.visible=i.x>=-1&&i.x<=1&&i.y>=-1&&i.y<=1&&i.z>=-1&&i.z<=1},u=function(e,r,i){l=t(),l.position.set(e,r,i),p(l)},v=function(t,r,i){e.push(t,r,i)},f=function(e,t){o.push(e,t)},m=function(e,t,r){return e.visible===!0||t.visible===!0||r.visible===!0?!0:(k[0]=e.positionScreen,k[1]=t.positionScreen,k[2]=r.positionScreen,L.isIntersectionBox(C.setFromPoints(k)))},d=function(e,t,r){return(r.positionScreen.x-e.positionScreen.x)*(t.positionScreen.y-e.positionScreen.y)-(r.positionScreen.y-e.positionScreen.y)*(t.positionScreen.x-e.positionScreen.x)<0},x=function(e,t){var r=T[e],o=T[t];h=i(),h.id=n.id,h.v1.copy(r),h.v2.copy(o),h.z=(r.positionScreen.z+o.positionScreen.z)/2,h.material=n.material,z.elements.push(h)},y=function(t,i,c){var l=T[t],p=T[i],u=T[c];if(m(l,p,u)!==!1&&(a.side===THREE.DoubleSide||d(l,p,u)===!0)){E=r(),E.id=n.id,E.v1.copy(l),E.v2.copy(p),E.v3.copy(u),E.z=(l.positionScreen.z+p.positionScreen.z+u.positionScreen.z)/3;for(var h=0;3>h;h++){var v=3*arguments[h],f=E.vertexNormalsModel[h];f.set(e[v],e[v+1],e[v+2]),f.applyMatrix3(s).normalize();var R=2*arguments[h],x=E.uvs[h];x.set(o[R],o[R+1])}E.vertexNormalsLength=3,E.material=n.material,z.elements.push(E)}};return{setObject:c,projectVertex:p,checkTriangleVisibility:m,checkBackfaceCulling:d,pushVertex:u,pushNormal:v,pushUv:f,pushLine:x,pushTriangle:y}},G=new D;this.projectScene=function(l,d,x,y){u=0,v=0,m=0,z.elements.length=0,l.autoUpdate===!0&&l.updateMatrixWorld(),void 0===d.parent&&d.updateMatrixWorld(),N.copy(d.matrixWorldInverse.getInverse(d.matrixWorld)),W.multiplyMatrices(d.projectionMatrix,N),P.setFromMatrix(W),c=0,z.objects.length=0,z.lights.length=0,l.traverseVisible(function(t){if(t instanceof THREE.Light)z.lights.push(t);else if(t instanceof THREE.Mesh||t instanceof THREE.Line||t instanceof THREE.Sprite){if(t.material.visible===!1)return;(t.frustumCulled===!1||P.intersectsObject(t)===!0)&&(s=e(),s.id=t.id,s.object=t,V.setFromMatrixPosition(t.matrixWorld),V.applyProjection(W),s.z=V.z,z.objects.push(s))}}),x===!0&&z.objects.sort(n);for(var H=0,w=z.objects.length;w>H;H++){var g=z.objects[H].object,b=g.geometry;if(G.setObject(g),R=g.matrixWorld,p=0,g instanceof THREE.Mesh){if(b instanceof THREE.BufferGeometry){var M=b.attributes,S=b.offsets;if(void 0===M.position)continue;for(var L=M.position.array,C=0,k=L.length;k>C;C+=3)G.pushVertex(L[C],L[C+1],L[C+2]);if(void 0!==M.normal)for(var D=M.normal.array,C=0,k=D.length;k>C;C+=3)G.pushNormal(D[C],D[C+1],D[C+2]);if(void 0!==M.uv)for(var U=M.uv.array,C=0,k=U.length;k>C;C+=2)G.pushUv(U[C],U[C+1]);if(void 0!==M.index){var A=M.index.array;if(S.length>0)for(var H=0;H<S.length;H++)for(var q=S[H],J=q.index,C=q.start,k=q.start+q.count;k>C;C+=3)G.pushTriangle(A[C]+J,A[C+1]+J,A[C+2]+J);else for(var C=0,k=A.length;k>C;C+=3)G.pushTriangle(A[C],A[C+1],A[C+2])}else for(var C=0,k=L.length/3;k>C;C+=3)G.pushTriangle(C,C+1,C+2)}else if(b instanceof THREE.Geometry){var K=b.vertices,Q=b.faces,X=b.faceVertexUvs[0];F.getNormalMatrix(R);for(var Y=g.material,Z=Y instanceof THREE.MeshFaceMaterial,$=Z===!0?g.material:null,_=0,ee=K.length;ee>_;_++){var te=K[_];if(V.copy(te),Y.morphTargets===!0)for(var re=b.morphTargets,ie=g.morphTargetInfluences,oe=0,ne=re.length;ne>oe;oe++){var ae=ie[oe];if(0!==ae){var se=re[oe],ce=se.vertices[_];V.x+=(ce.x-te.x)*ae,V.y+=(ce.y-te.y)*ae,V.z+=(ce.z-te.z)*ae}}G.pushVertex(V.x,V.y,V.z)}for(var le=0,pe=Q.length;pe>le;le++){var Ee=Q[le],Y=Z===!0?$.materials[Ee.materialIndex]:g.material;if(void 0!==Y){var ue=Y.side,he=T[Ee.a],ve=T[Ee.b],fe=T[Ee.c];if(G.checkTriangleVisibility(he,ve,fe)!==!1){var me=G.checkBackfaceCulling(he,ve,fe);if(ue!==THREE.DoubleSide){if(ue===THREE.FrontSide&&me===!1)continue;if(ue===THREE.BackSide&&me===!0)continue}E=r(),E.id=g.id,E.v1.copy(he),E.v2.copy(ve),E.v3.copy(fe),E.normalModel.copy(Ee.normal),me!==!1||ue!==THREE.BackSide&&ue!==THREE.DoubleSide||E.normalModel.negate(),E.normalModel.applyMatrix3(F).normalize();for(var Re=Ee.vertexNormals,de=0,xe=Math.min(Re.length,3);xe>de;de++){var Te=E.vertexNormalsModel[de];Te.copy(Re[de]),me!==!1||ue!==THREE.BackSide&&ue!==THREE.DoubleSide||Te.negate(),Te.applyMatrix3(F).normalize()}E.vertexNormalsLength=Re.length;var ye=X[le];if(void 0!==ye)for(var He=0;3>He;He++)E.uvs[He].copy(ye[He]);E.color=Ee.color,E.material=Y,E.z=(he.positionScreen.z+ve.positionScreen.z+fe.positionScreen.z)/3,z.elements.push(E)}}}}}else if(g instanceof THREE.Line){if(b instanceof THREE.BufferGeometry){var M=b.attributes;if(void 0!==M.position){for(var L=M.position.array,C=0,k=L.length;k>C;C+=3)G.pushVertex(L[C],L[C+1],L[C+2]);if(void 0!==M.index)for(var A=M.index.array,C=0,k=A.length;k>C;C+=2)G.pushLine(A[C],A[C+1]);else for(var we=g.mode===THREE.LinePieces?2:1,C=0,k=L.length/3-1;k>C;C+=we)G.pushLine(C,C+1)}}else if(b instanceof THREE.Geometry){B.multiplyMatrices(W,R);var K=g.geometry.vertices;if(0===K.length)continue;he=t(),he.positionScreen.copy(K[0]).applyMatrix4(B);for(var we=g.mode===THREE.LinePieces?2:1,_=1,ee=K.length;ee>_;_++)he=t(),he.positionScreen.copy(K[_]).applyMatrix4(B),(_+1)%we>0||(ve=T[p-2],I.copy(he.positionScreen),O.copy(ve.positionScreen),a(I,O)===!0&&(I.multiplyScalar(1/I.w),O.multiplyScalar(1/O.w),h=i(),h.id=g.id,h.v1.positionScreen.copy(I),h.v2.positionScreen.copy(O),h.z=Math.max(I.z,O.z),h.material=g.material,g.material.vertexColors===THREE.VertexColors&&(h.vertexColors[0].copy(g.geometry.colors[_]),h.vertexColors[1].copy(g.geometry.colors[_-1])),z.elements.push(h)))}}else if(g instanceof THREE.Sprite){j.set(R.elements[12],R.elements[13],R.elements[14],1),j.applyMatrix4(W);var ge=1/j.w;j.z*=ge,j.z>=-1&&j.z<=1&&(f=o(),f.id=g.id,f.x=j.x*ge,f.y=j.y*ge,f.z=j.z,f.object=g,f.rotation=g.rotation,f.scale.x=g.scale.x*Math.abs(f.x-(j.x+d.projectionMatrix.elements[0])/(j.w+d.projectionMatrix.elements[12])),f.scale.y=g.scale.y*Math.abs(f.y-(j.y+d.projectionMatrix.elements[5])/(j.w+d.projectionMatrix.elements[13])),f.material=g.material,z.elements.push(f))}}return y===!0&&z.elements.sort(n),z}};

var RendererStats=function(){var e=document.createElement("div");e.style.cssText="width:120px;opacity:0.9;cursor:pointer";var t=document.createElement("div");t.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#200;",e.appendChild(t);var n=document.createElement("div");n.style.cssText="color:#fff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",n.innerHTML="WebGLRenderer",t.appendChild(n);for(var o=[],r=0;r<9;r++)o[r]=document.createElement("div"),o[r].style.cssText="color:#fff;background-color:#311;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",t.appendChild(o[r]),o[r].innerHTML="-";var i=Date.now();return{domElement:e,update:function(e){if(console.assert(e instanceof THREE.WebGLRenderer),!(Date.now()-i<1e3/30)){i=Date.now();var t=0;o[t++].textContent="== Memory ==",o[t++].textContent="Geometries: "+e.info.memory.geometries,o[t++].textContent="Textures: "+e.info.memory.textures,o[t++].textContent="== Programs ==",o[t++].textContent="Programs: "+e.info.programs.length,o[t++].textContent="== Render ==",o[t++].textContent="Calls: "+e.info.render.calls,o[t++].textContent="Vertices: "+e.info.render.vertices,o[t++].textContent="Faces: "+e.info.render.faces}}}};

var Stats=function(){function f(a,e,b){a=document.createElement(a);a.id=e;a.style.cssText=b;return a}function l(a,e,b){var c=f("div",a,"padding:0 0 3px 3px;text-align:left;background:"+b),d=f("div",a+"Text","font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:"+e);d.innerHTML=a.toUpperCase();c.appendChild(d);a=f("div",a+"Graph","width:74px;height:30px;background:"+e);c.appendChild(a);for(e=0;74>e;e++)a.appendChild(f("span","","width:1px;height:30px;float:left;opacity:0.9;background:"+
b));return c}function m(a){for(var b=c.children,d=0;d<b.length;d++)b[d].style.display=d===a?"block":"none";n=a}function p(a,b){a.appendChild(a.firstChild).style.height=Math.min(30,30-30*b)+"px"}var q=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,k=q(),r=k,t=0,n=0,c=f("div","stats","width:80px;opacity:0.9;cursor:pointer");c.addEventListener("mousedown",function(a){a.preventDefault();m(++n%c.children.length)},!1);var d=0,u=Infinity,v=0,b=l("fps","#0ff","#002"),
A=b.children[0],B=b.children[1];c.appendChild(b);var g=0,w=Infinity,x=0,b=l("ms","#0f0","#020"),C=b.children[0],D=b.children[1];c.appendChild(b);if(self.performance&&self.performance.memory){var h=0,y=Infinity,z=0,b=l("mb","#f08","#201"),E=b.children[0],F=b.children[1];c.appendChild(b)}m(n);return{REVISION:14,domElement:c,setMode:m,begin:function(){k=q()},end:function(){var a=q();g=a-k;w=Math.min(w,g);x=Math.max(x,g);C.textContent=(g|0)+" MS ("+(w|0)+"-"+(x|0)+")";p(D,g/200);t++;if(a>r+1E3&&(d=Math.round(1E3*
t/(a-r)),u=Math.min(u,d),v=Math.max(v,d),A.textContent=d+" FPS ("+u+"-"+v+")",p(B,d/100),r=a,t=0,void 0!==h)){var b=performance.memory.usedJSHeapSize,c=performance.memory.jsHeapSizeLimit;h=Math.round(9.54E-7*b);y=Math.min(y,h);z=Math.max(z,h);E.textContent=h+" MB ("+y+"-"+z+")";p(F,b/c)}return a},update:function(){k=this.end()}}};"object"===typeof module&&(module.exports=Stats);

!function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(j(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(b,c,d){var e="DEPRECATED METHOD: "+c+"\n"+d+" AT \n";return function(){var c=new Error("get-stack-trace"),d=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",f=a.console&&(a.console.warn||a.console.log);return f&&f.call(a.console,e,d),b.apply(this,arguments)}}function i(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&la(d,c)}function j(a,b){return function(){return a.apply(b,arguments)}}function k(a,b){return typeof a==oa?a.apply(b?b[0]||d:d,b):a}function l(a,b){return a===d?b:a}function m(a,b,c){g(q(b),function(b){a.addEventListener(b,c,!1)})}function n(a,b,c){g(q(b),function(b){a.removeEventListener(b,c,!1)})}function o(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function p(a,b){return a.indexOf(b)>-1}function q(a){return a.trim().split(/\s+/g)}function r(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function s(a){return Array.prototype.slice.call(a,0)}function t(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];r(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function u(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ma.length;){if(c=ma[g],e=c?c+f:b,e in a)return e;g++}return d}function v(){return ua++}function w(b){var c=b.ownerDocument||b;return c.defaultView||c.parentWindow||a}function x(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){k(a.options.enable,[a])&&c.handler(b)},this.init()}function y(a){var b,c=a.options.inputClass;return new(b=c?c:xa?M:ya?P:wa?R:L)(a,z)}function z(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&Ea&&d-e===0,g=b&(Ga|Ha)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,A(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function A(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=D(b)),e>1&&!c.firstMultiple?c.firstMultiple=D(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=E(d);b.timeStamp=ra(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=I(h,i),b.distance=H(h,i),B(c,b),b.offsetDirection=G(b.deltaX,b.deltaY);var j=F(b.deltaTime,b.deltaX,b.deltaY);b.overallVelocityX=j.x,b.overallVelocityY=j.y,b.overallVelocity=qa(j.x)>qa(j.y)?j.x:j.y,b.scale=g?K(g.pointers,d):1,b.rotation=g?J(g.pointers,d):0,b.maxPointers=c.prevInput?b.pointers.length>c.prevInput.maxPointers?b.pointers.length:c.prevInput.maxPointers:b.pointers.length,C(c,b);var k=a.element;o(b.srcEvent.target,k)&&(k=b.srcEvent.target),b.target=k}function B(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};b.eventType!==Ea&&f.eventType!==Ga||(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function C(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ha&&(i>Da||h.velocity===d)){var j=b.deltaX-h.deltaX,k=b.deltaY-h.deltaY,l=F(i,j,k);e=l.x,f=l.y,c=qa(l.x)>qa(l.y)?l.x:l.y,g=G(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function D(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:pa(a.pointers[c].clientX),clientY:pa(a.pointers[c].clientY)},c++;return{timeStamp:ra(),pointers:b,center:E(b),deltaX:a.deltaX,deltaY:a.deltaY}}function E(a){var b=a.length;if(1===b)return{x:pa(a[0].clientX),y:pa(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:pa(c/b),y:pa(d/b)}}function F(a,b,c){return{x:b/a||0,y:c/a||0}}function G(a,b){return a===b?Ia:qa(a)>=qa(b)?0>a?Ja:Ka:0>b?La:Ma}function H(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function I(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function J(a,b){return I(b[1],b[0],Ra)+I(a[1],a[0],Ra)}function K(a,b){return H(b[0],b[1],Ra)/H(a[0],a[1],Ra)}function L(){this.evEl=Ta,this.evWin=Ua,this.pressed=!1,x.apply(this,arguments)}function M(){this.evEl=Xa,this.evWin=Ya,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget=$a,this.evWin=_a,this.started=!1,x.apply(this,arguments)}function O(a,b){var c=s(a.touches),d=s(a.changedTouches);return b&(Ga|Ha)&&(c=t(c.concat(d),"identifier",!0)),[c,d]}function P(){this.evTarget=bb,this.targetIds={},x.apply(this,arguments)}function Q(a,b){var c=s(a.touches),d=this.targetIds;if(b&(Ea|Fa)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=s(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return o(a.target,i)}),b===Ea)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ga|Ha)&&delete d[g[e].identifier],e++;return h.length?[t(f.concat(h),"identifier",!0),h]:void 0}function R(){x.apply(this,arguments);var a=j(this.handler,this);this.touch=new P(this.manager,a),this.mouse=new L(this.manager,a),this.primaryTouch=null,this.lastTouches=[]}function S(a,b){a&Ea?(this.primaryTouch=b.changedPointers[0].identifier,T.call(this,b)):a&(Ga|Ha)&&T.call(this,b)}function T(a){var b=a.changedPointers[0];if(b.identifier===this.primaryTouch){var c={x:b.clientX,y:b.clientY};this.lastTouches.push(c);var d=this.lastTouches,e=function(){var a=d.indexOf(c);a>-1&&d.splice(a,1)};setTimeout(e,cb)}}function U(a){for(var b=a.srcEvent.clientX,c=a.srcEvent.clientY,d=0;d<this.lastTouches.length;d++){var e=this.lastTouches[d],f=Math.abs(b-e.x),g=Math.abs(c-e.y);if(db>=f&&db>=g)return!0}return!1}function V(a,b){this.manager=a,this.set(b)}function W(a){if(p(a,jb))return jb;var b=p(a,kb),c=p(a,lb);return b&&c?jb:b||c?b?kb:lb:p(a,ib)?ib:hb}function X(){if(!fb)return!1;var b={},c=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(d){b[d]=c?a.CSS.supports("touch-action",d):!0}),b}function Y(a){this.options=la({},this.defaults,a||{}),this.id=v(),this.manager=null,this.options.enable=l(this.options.enable,!0),this.state=nb,this.simultaneous={},this.requireFail=[]}function Z(a){return a&sb?"cancel":a&qb?"end":a&pb?"move":a&ob?"start":""}function $(a){return a==Ma?"down":a==La?"up":a==Ja?"left":a==Ka?"right":""}function _(a,b){var c=b.manager;return c?c.get(a):a}function aa(){Y.apply(this,arguments)}function ba(){aa.apply(this,arguments),this.pX=null,this.pY=null}function ca(){aa.apply(this,arguments)}function da(){Y.apply(this,arguments),this._timer=null,this._input=null}function ea(){aa.apply(this,arguments)}function fa(){aa.apply(this,arguments)}function ga(){Y.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ha(a,b){return b=b||{},b.recognizers=l(b.recognizers,ha.defaults.preset),new ia(a,b)}function ia(a,b){this.options=la({},ha.defaults,b||{}),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=a,this.input=y(this),this.touchAction=new V(this,this.options.touchAction),ja(this,!0),g(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ja(a,b){var c=a.element;if(c.style){var d;g(a.options.cssProps,function(e,f){d=u(c.style,f),b?(a.oldCssProps[d]=c.style[d],c.style[d]=e):c.style[d]=a.oldCssProps[d]||""}),b||(a.oldCssProps={})}}function ka(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var la,ma=["","webkit","Moz","MS","ms","o"],na=b.createElement("div"),oa="function",pa=Math.round,qa=Math.abs,ra=Date.now;la="function"!=typeof Object.assign?function(a){if(a===d||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var e=arguments[c];if(e!==d&&null!==e)for(var f in e)e.hasOwnProperty(f)&&(b[f]=e[f])}return b}:Object.assign;var sa=h(function(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a},"extend","Use `assign`."),ta=h(function(a,b){return sa(a,b,!0)},"merge","Use `assign`."),ua=1,va=/mobile|tablet|ip(ad|hone|od)|android/i,wa="ontouchstart"in a,xa=u(a,"PointerEvent")!==d,ya=wa&&va.test(navigator.userAgent),za="touch",Aa="pen",Ba="mouse",Ca="kinect",Da=25,Ea=1,Fa=2,Ga=4,Ha=8,Ia=1,Ja=2,Ka=4,La=8,Ma=16,Na=Ja|Ka,Oa=La|Ma,Pa=Na|Oa,Qa=["x","y"],Ra=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(w(this.element),this.evWin,this.domHandler)}};var Sa={mousedown:Ea,mousemove:Fa,mouseup:Ga},Ta="mousedown",Ua="mousemove mouseup";i(L,x,{handler:function(a){var b=Sa[a.type];b&Ea&&0===a.button&&(this.pressed=!0),b&Fa&&1!==a.which&&(b=Ga),this.pressed&&(b&Ga&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:Ba,srcEvent:a}))}});var Va={pointerdown:Ea,pointermove:Fa,pointerup:Ga,pointercancel:Ha,pointerout:Ha},Wa={2:za,3:Aa,4:Ba,5:Ca},Xa="pointerdown",Ya="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(Xa="MSPointerDown",Ya="MSPointerMove MSPointerUp MSPointerCancel"),i(M,x,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Va[d],f=Wa[a.pointerType]||a.pointerType,g=f==za,h=r(b,a.pointerId,"pointerId");e&Ea&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ga|Ha)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Za={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},$a="touchstart",_a="touchstart touchmove touchend touchcancel";i(N,x,{handler:function(a){var b=Za[a.type];if(b===Ea&&(this.started=!0),this.started){var c=O.call(this,a,b);b&(Ga|Ha)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}}});var ab={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},bb="touchstart touchmove touchend touchcancel";i(P,x,{handler:function(a){var b=ab[a.type],c=Q.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}});var cb=2500,db=25;i(R,x,{handler:function(a,b,c){var d=c.pointerType==za,e=c.pointerType==Ba;if(!(e&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)S.call(this,b,c);else if(e&&U.call(this,c))return;this.callback(a,b,c)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var eb=u(na.style,"touchAction"),fb=eb!==d,gb="compute",hb="auto",ib="manipulation",jb="none",kb="pan-x",lb="pan-y",mb=X();V.prototype={set:function(a){a==gb&&(a=this.compute()),fb&&this.manager.element.style&&mb[a]&&(this.manager.element.style[eb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){k(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),W(a.join(" "))},preventDefaults:function(a){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=p(d,jb)&&!mb[jb],f=p(d,lb)&&!mb[lb],g=p(d,kb)&&!mb[kb];if(e){var h=1===a.pointers.length,i=a.distance<2,j=a.deltaTime<250;if(h&&i&&j)return}return g&&f?void 0:e||f&&c&Na||g&&c&Oa?this.preventSrc(b):void 0},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var nb=1,ob=2,pb=4,qb=8,rb=qb,sb=16,tb=32;Y.prototype={defaults:{},set:function(a){return la(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=_(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=_(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=_(a,this),-1===r(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=_(a,this);var b=r(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(b,a)}var c=this,d=this.state;qb>d&&b(c.options.event+Z(d)),b(c.options.event),a.additionalEvent&&b(a.additionalEvent),d>=qb&&b(c.options.event+Z(d))},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=tb)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(tb|nb)))return!1;a++}return!0},recognize:function(a){var b=la({},a);return k(this.options.enable,[this,b])?(this.state&(rb|sb|tb)&&(this.state=nb),this.state=this.process(b),void(this.state&(ob|pb|qb|sb)&&this.tryEmit(b))):(this.reset(),void(this.state=tb))},process:function(a){},getTouchAction:function(){},reset:function(){}},i(aa,Y,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(ob|pb),e=this.attrTest(a);return d&&(c&Ha||!e)?b|sb:d||e?c&Ga?b|qb:b&ob?b|pb:ob:tb}}),i(ba,aa,{defaults:{event:"pan",threshold:10,pointers:1,direction:Pa},getTouchAction:function(){var a=this.options.direction,b=[];return a&Na&&b.push(lb),a&Oa&&b.push(kb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Na?(e=0===f?Ia:0>f?Ja:Ka,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ia:0>g?La:Ma,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return aa.prototype.attrTest.call(this,a)&&(this.state&ob||!(this.state&ob)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=$(a.direction);b&&(a.additionalEvent=this.options.event+b),this._super.emit.call(this,a)}}),i(ca,aa,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&ob)},emit:function(a){if(1!==a.scale){var b=a.scale<1?"in":"out";a.additionalEvent=this.options.event+b}this._super.emit.call(this,a)}}),i(da,Y,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[hb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ga|Ha)&&!f)this.reset();else if(a.eventType&Ea)this.reset(),this._timer=e(function(){this.state=rb,this.tryEmit()},b.time,this);else if(a.eventType&Ga)return rb;return tb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===rb&&(a&&a.eventType&Ga?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=ra(),this.manager.emit(this.options.event,this._input)))}}),i(ea,aa,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&ob)}}),i(fa,aa,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Na|Oa,pointers:1},getTouchAction:function(){return ba.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Na|Oa)?b=a.overallVelocity:c&Na?b=a.overallVelocityX:c&Oa&&(b=a.overallVelocityY),this._super.attrTest.call(this,a)&&c&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&qa(b)>this.options.velocity&&a.eventType&Ga},emit:function(a){var b=$(a.offsetDirection);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),i(ga,Y,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ib]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&Ea&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Ga)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||H(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=rb,this.tryEmit()},b.interval,this),ob):rb}return tb},failTimeout:function(){return this._timer=e(function(){this.state=tb},this.options.interval,this),tb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==rb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ha.VERSION="2.0.8",ha.defaults={domEvents:!1,touchAction:gb,enable:!0,inputTarget:null,inputClass:null,preset:[[ea,{enable:!1}],[ca,{enable:!1},["rotate"]],[fa,{direction:Na}],[ba,{direction:Na},["swipe"]],[ga],[ga,{event:"doubletap",taps:2},["tap"]],[da]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ub=1,vb=2;ia.prototype={set:function(a){return la(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?vb:ub},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&rb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===vb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(ob|pb|qb)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof Y)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;if(a=this.get(a)){var b=this.recognizers,c=r(b,a);-1!==c&&(b.splice(c,1),this.touchAction.update())}return this},on:function(a,b){if(a!==d&&b!==d){var c=this.handlers;return g(q(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this}},off:function(a,b){if(a!==d){var c=this.handlers;return g(q(a),function(a){b?c[a]&&c[a].splice(r(c[a],b),1):delete c[a]}),this}},emit:function(a,b){this.options.domEvents&&ka(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&ja(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},la(ha,{INPUT_START:Ea,INPUT_MOVE:Fa,INPUT_END:Ga,INPUT_CANCEL:Ha,STATE_POSSIBLE:nb,STATE_BEGAN:ob,STATE_CHANGED:pb,STATE_ENDED:qb,STATE_RECOGNIZED:rb,STATE_CANCELLED:sb,STATE_FAILED:tb,DIRECTION_NONE:Ia,DIRECTION_LEFT:Ja,DIRECTION_RIGHT:Ka,DIRECTION_UP:La,DIRECTION_DOWN:Ma,DIRECTION_HORIZONTAL:Na,DIRECTION_VERTICAL:Oa,DIRECTION_ALL:Pa,Manager:ia,Input:x,TouchAction:V,TouchInput:P,MouseInput:L,PointerEventInput:M,TouchMouseInput:R,SingleTouchInput:N,Recognizer:Y,AttrRecognizer:aa,Tap:ga,Pan:ba,Swipe:fa,Pinch:ca,Rotate:ea,Press:da,on:m,off:n,each:g,merge:ta,extend:sa,assign:la,inherit:i,bindFn:j,prefixed:u});var wb="undefined"!=typeof a?a:"undefined"!=typeof self?self:{};wb.Hammer=ha,"function"==typeof define&&define.amd?define(function(){return ha}):"undefined"!=typeof module&&module.exports?module.exports=ha:a[c]=ha}(window,document,"Hammer");

function d(c){var b,a;if(!this.length)return this;b=this[0];b.ownerDocument?a=b.ownerDocument:(a=b,b=a.documentElement);if(null==c){if(!a.exitFullscreen&&!a.webkitExitFullscreen&&!a.webkitCancelFullScreen&&!a.msExitFullscreen&&!a.mozCancelFullScreen)return null;c=!!a.fullscreenElement||!!a.msFullscreenElement||!!a.webkitIsFullScreen||!!a.mozFullScreen;return!c?c:a.fullscreenElement||a.webkitFullscreenElement||a.webkitCurrentFullScreenElement||a.msFullscreenElement||a.mozFullScreenElement||c}c?(c=
b.requestFullscreen||b.webkitRequestFullscreen||b.webkitRequestFullScreen||b.msRequestFullscreen||b.mozRequestFullScreen)&&c.call(b):(c=a.exitFullscreen||a.webkitExitFullscreen||a.webkitCancelFullScreen||a.msExitFullscreen||a.mozCancelFullScreen)&&c.call(a);return this}jQuery.fn.fullScreen=d;jQuery.fn.toggleFullScreen=function(){return d.call(this,!d.call(this))};var e,f,g;e=document;
e.webkitCancelFullScreen?(f="webkitfullscreenchange",g="webkitfullscreenerror"):e.msExitFullscreen?(f="MSFullscreenChange",g="MSFullscreenError"):e.mozCancelFullScreen?(f="mozfullscreenchange",g="mozfullscreenerror"):(f="fullscreenchange",g="fullscreenerror");jQuery(document).bind(f,function(){jQuery(document).trigger(new jQuery.Event("fullscreenchange"))});jQuery(document).bind(g,function(){jQuery(document).trigger(new jQuery.Event("fullscreenerror"))});

THREE.HorizontalBlurShader={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D tDiffuse;\nuniform float h;\nvarying vec2 vUv;\nvoid main() {\nvec4 sum = vec4( 0.0 );\nsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\nsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\nsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\nsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\nsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\nsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\nsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\nsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\ngl_FragColor = sum;\n}"},THREE.VerticalBlurShader={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D tDiffuse;\nuniform float v;\nvarying vec2 vUv;\nvoid main() {\nvec4 sum = vec4( 0.0 );\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\ngl_FragColor = sum;\n}"},THREE.RgbShader={uniforms:{tDiffuse:{type:"t",value:null},rPower:{type:"f",value:1},gPower:{type:"f",value:1},bPower:{type:"f",value:1}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float rPower;\nuniform float gPower;\nuniform float bPower;\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\nvec4 color = texture2D( tDiffuse, vUv );\nvec3 c = color.rgb;\ncolor.r = color.r*rPower;\ncolor.g = color.g*gPower;\ncolor.b = color.b*bPower;\ngl_FragColor = vec4( min( vec3( 1.0 ), color.rgb ), color.a );\n}"},THREE.NoiseShader={uniforms:{tDiffuse:{type:"t",value:null},time:{type:"f",value:1},amount:{type:"f",value:0}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float time;\nuniform sampler2D tDiffuse;\nuniform float amount;\nvarying vec2 vUv;\nvoid main() {\nvec4 cTextureScreen = texture2D( tDiffuse, vUv );\nfloat x = vUv.x * vUv.y * time * 1000.0;\nx = mod( x, 13.0 ) * mod( x, 123.0 );\nfloat dx = mod( x, 0.01 );\nvec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx * 100.0, 0.0, 1.0 );\ncResult = cTextureScreen.rgb + clamp( amount, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );\ngl_FragColor = vec4( cResult, cTextureScreen.a );\n}"},THREE.RGBShiftShader={uniforms:{tDiffuse:{value:null},amount:{value:.005},angle:{value:0}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D tDiffuse;\nuniform float amount;\nuniform float angle;\nvarying vec2 vUv;\nvoid main() {\nvec2 offset = amount * vec2( cos(angle), sin(angle));\nvec4 cr = texture2D(tDiffuse, vUv + offset);\nvec4 cga = texture2D(tDiffuse, vUv);\nvec4 cb = texture2D(tDiffuse, vUv - offset);\ngl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n}"},THREE.SepiaShader={uniforms:{tDiffuse:{type:"t",value:null},amount:{type:"f",value:1}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float amount;\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\nvec4 color = texture2D( tDiffuse, vUv );\nvec3 c = color.rgb;\ncolor.r = dot( c, vec3( 1.0 - 0.607 * amount, 0.769 * amount, 0.189 * amount ) );\ncolor.g = dot( c, vec3( 0.349 * amount, 1.0 - 0.314 * amount, 0.168 * amount ) );\ncolor.b = dot( c, vec3( 0.272 * amount, 0.534 * amount, 1.0 - 0.869 * amount ) );\ngl_FragColor = vec4( min( vec3( 1.0 ), color.rgb ), color.a );\n}"},THREE.ContrastShader={uniforms:{tDiffuse:{type:"t",value:null},amount:{type:"f",value:0}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D tDiffuse;\nuniform float amount;\nvarying vec2 vUv;\nvoid main() {\ngl_FragColor = texture2D( tDiffuse, vUv );\nif (amount > 0.0) {\ngl_FragColor.rgb = (gl_FragColor.rgb - 0.5) / (1.0 - amount) + 0.5;\n} else {\ngl_FragColor.rgb = (gl_FragColor.rgb - 0.5) * (1.0 + amount) + 0.5;\n}\n}"},THREE.HueShader={uniforms:{tDiffuse:{type:"t",value:null},amount:{type:"f",value:0}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D tDiffuse;\nuniform float amount;\nvarying vec2 vUv;\nvoid main() {\ngl_FragColor = texture2D( tDiffuse, vUv );\nfloat angle = amount * 3.14159265;\nfloat s = sin(angle), c = cos(angle);\nvec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;\nfloat len = length(gl_FragColor.rgb);\ngl_FragColor.rgb = vec3(\ndot(gl_FragColor.rgb, weights.xyz),\ndot(gl_FragColor.rgb, weights.zxy),\ndot(gl_FragColor.rgb, weights.yzx)\n);\n}"},THREE.SaturationShader={uniforms:{tDiffuse:{type:"t",value:null},amount:{type:"f",value:0}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D tDiffuse;\nuniform float amount;\nvarying vec2 vUv;\nvoid main() {\ngl_FragColor = texture2D( tDiffuse, vUv );\nfloat average = (gl_FragColor.r + gl_FragColor.g + gl_FragColor.b) / 3.0;\nif (amount > 0.0) {\ngl_FragColor.rgb += (average - gl_FragColor.rgb) * (1.0 - 1.0 / (1.001 - amount));\n} else {\ngl_FragColor.rgb += (average - gl_FragColor.rgb) * (-amount);\n}\n}"},THREE.BleachBypassShader={uniforms:{tDiffuse:{type:"t",value:null},opacity:{type:"f",value:0}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float opacity;\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\nvec4 base = texture2D( tDiffuse, vUv );\nvec3 lumCoeff = vec3( 0.25, 0.65, 0.1 );\nfloat lum = dot( lumCoeff, base.rgb );\nvec3 blend = vec3( lum );\nfloat L = min( 1.0, max( 0.0, 10.0 * ( lum - 0.45 ) ) );\nvec3 result1 = 2.0 * base.rgb * blend;\nvec3 result2 = 1.0 - 2.0 * ( 1.0 - blend ) * ( 1.0 - base.rgb );\nvec3 newColor = mix( result1, result2, L );\nfloat A2 = opacity * base.a;\nvec3 mixRGB = A2 * newColor.rgb;\nmixRGB += ( ( 1.0 - A2 ) * base.rgb );\ngl_FragColor = vec4( mixRGB, base.a );\n}"},THREE.BrightnessShader={uniforms:{tDiffuse:{type:"t",value:null},amount:{type:"f",value:.5}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D tDiffuse;\nuniform float amount;\nvarying vec2 vUv;\nvoid main() {\nvec4 color = texture2D(tDiffuse, vUv);\ngl_FragColor = color*amount;\n}"},THREE.ExposureShader={uniforms:{tDiffuse:{type:"t",value:null},amount:{type:"f",value:1},brightness:{type:"f",value:1},contrast:{type:"f",value:1}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D tDiffuse;\nuniform float contrast;\nuniform float brightness;\nuniform float amount;\nvarying vec2 vUv;\nvoid main() {\nvec4 color = texture2D(tDiffuse, vUv);\nvec4 newcolor = vec4(0.00, 0.00, 0.00, 1.00);\nfloat gammaCorrection = 1.0 / amount;\nnewcolor.r = 255.0 * pow((color.r * 0.003921569),gammaCorrection);\nnewcolor.g = 255.0 * pow((color.g * 0.003921569),gammaCorrection);\nnewcolor.b = 255.0 * pow((color.b * 0.003921569),gammaCorrection);\ngl_FragColor = newcolor;\n}"},THREE.GammaCorrectionShader={uniforms:{tDiffuse:{value:null},amount:{type:"f",value:1}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D tDiffuse;\nuniform float amount;\nvarying vec2 vUv;\nvoid main() {\nvec4 tex = texture2D( tDiffuse, vec2( vUv.x, vUv.y ) );\ngl_FragColor = LinearToGamma( tex, float( amount ) );\n}"},THREE.VignetteShader={uniforms:{tDiffuse:{type:"t",value:null},offset:{type:"f",value:0},darkness:{type:"f",value:0}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float offset;\nuniform float darkness;\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\nvec4 texel = texture2D( tDiffuse, vUv );\nvec2 uv = ( vUv - vec2( 0.5 ) ) * vec2( offset );\ngl_FragColor = vec4( mix( texel.rgb, vec3( 1.0 - darkness ), dot( uv, uv ) ), texel.a );\n}"},THREE.SharpnessShader={uniforms:{tDiffuse:{value:null},vw:{value:1/1470},vh:{value:1/399}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D tDiffuse;\nuniform float vw;\nuniform float vh;\nvarying vec2 vUv;\nfloat kernel[9];\nvec2 offset[9];\nvoid main() {\noffset[0] = vec2(-vw, -vh);\noffset[1] = vec2(0.0, -vh);\noffset[2] = vec2(vw, -vh);\noffset[3] = vec2(-vw, 0.0);\noffset[4] = vec2(0.0, 0.0);\noffset[5] = vec2(vw, 0.0);\noffset[6] = vec2(-vw, vh);\noffset[7] = vec2(0.0, vh);\noffset[8] = vec2(vw, vh);\nkernel[0] = 0.;\nkernel[1] = -1.;\nkernel[2] = 0.;\nkernel[3] = -1.;\nkernel[4] = 5.;\nkernel[5] = -1.;\nkernel[6] = 0.;\nkernel[7] = -1.;\nkernel[8] = 0.;\nvec4 sum = vec4( 0.0 );\nint i;\nfor( int i = 0; i < 9; i ++ ) {\nsum += texture2D(tDiffuse, vec2( vUv.x, vUv.y)+offset[i] ) * kernel[i];\n}\ngl_FragColor = sum;\n}"},THREE.VibranceShader={uniforms:{tDiffuse:{type:"t",value:null},amount:{type:"f",value:0}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float amount;\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\nvec4 color = texture2D( tDiffuse, vUv );\nfloat average = (color.r + color.g + color.b) / 3.0;\nfloat mx = max(color.r, max(color.g,color.b));\nfloat amt = (mx - average) * (-amount * 3.0);\ncolor.rgb = mix(color.rgb, vec3(mx), amt);\ngl_FragColor = color;\n}"},THREE.TempShader={uniforms:{tDiffuse:{type:"t",value:null},amount:{type:"f",value:0},tint:{type:"f",value:0}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float amount;\nuniform float tint;\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\nvec4 color = texture2D( tDiffuse, vUv );\ncolor.r = color.r + amount;\nif ( color.r > 255.0 ){ color.r = 255.0;}\nif ( color.r < 0.0 ){ color.r = 0.0;}\ncolor.g = color.g - tint;\nif ( color.g > 255.0 ){ color.g = 255.0;}\nif ( color.g < 0.0 ){ color.g = 0.0;}\ncolor.b = color.b - amount;\nif ( color.b > 255.0 ){ color.b = 255.0;}\nif ( color.b < 0.0 ){ color.b = 0.0;}\ngl_FragColor = color;\n}"},THREE.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float opacity;\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\nvec4 texel = texture2D( tDiffuse, vUv );\ngl_FragColor = opacity * texel;\n}"},THREE.EffectComposer=function(e,t){if(this.renderer=e,void 0===t){var o={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:!1},a=e.getDrawingBufferSize();t=new THREE.WebGLRenderTarget(a.width,a.height,o),t.texture.name="EffectComposer.rt1"}this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===THREE.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),void 0===THREE.ShaderPass&&console.error("THREE.EffectComposer relies on THREE.ShaderPass"),this.copyPass=new THREE.ShaderPass(THREE.CopyShader)},Object.assign(THREE.EffectComposer.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e);var t=this.renderer.getDrawingBufferSize();e.setSize(t.width,t.height)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(e){var t=!1,o=this.passes.length,a,r;for(r=0;r<o;r++)if(a=this.passes[r],!1!==a.enabled){if(a.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),a.needsSwap){if(t){var n=this.renderer.context;n.stencilFunc(n.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),n.stencilFunc(n.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==THREE.MaskPass&&(a instanceof THREE.MaskPass?t=!0:a instanceof THREE.ClearMaskPass&&(t=!1))}},reset:function(e){if(e===void 0){var t=this.renderer.getDrawingBufferSize();e=this.renderTarget1.clone(),e.setSize(t.width,t.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this.renderTarget1.setSize(e,t),this.renderTarget2.setSize(e,t);for(var o=0;o<this.passes.length;o++)this.passes[o].setSize(e,t)}}),THREE.Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1},Object.assign(THREE.Pass.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),THREE.RenderPass=function(e,t,o,a,r){THREE.Pass.call(this),this.scene=e,this.camera=t,this.overrideMaterial=o,this.clearColor=a,this.clearAlpha=r===void 0?0:r,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1},THREE.RenderPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.RenderPass,render:function(e,t,o){var a=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial;var r,i;this.clearColor&&(r=e.getClearColor().getHex(),i=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.render(this.scene,this.camera,this.renderToScreen?null:o,this.clear),this.clearColor&&e.setClearColor(r,i),this.scene.overrideMaterial=null,e.autoClear=a}}),THREE.ShaderPass=function(e,t){THREE.Pass.call(this),this.textureID=t===void 0?"tDiffuse":t,e instanceof THREE.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=THREE.UniformsUtils.clone(e.uniforms),this.material=new THREE.ShaderMaterial({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},THREE.ShaderPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.ShaderPass,render:function(e,t,o){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=o.texture),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}}),THREE.MaskPass=function(e,t){THREE.Pass.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1},THREE.MaskPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.MaskPass,render:function(e,t,o){var a=e.context,r=e.state;r.buffers.color.setMask(!1),r.buffers.depth.setMask(!1),r.buffers.color.setLocked(!0),r.buffers.depth.setLocked(!0);var i,n;this.inverse?(i=0,n=1):(i=1,n=0),r.buffers.stencil.setTest(!0),r.buffers.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),r.buffers.stencil.setFunc(a.ALWAYS,i,4294967295),r.buffers.stencil.setClear(n),e.render(this.scene,this.camera,o,this.clear),e.render(this.scene,this.camera,t,this.clear),r.buffers.color.setLocked(!1),r.buffers.depth.setLocked(!1),r.buffers.stencil.setFunc(a.EQUAL,1,4294967295),r.buffers.stencil.setOp(a.KEEP,a.KEEP,a.KEEP)}}),THREE.ClearMaskPass=function(){THREE.Pass.call(this),this.needsSwap=!1},THREE.ClearMaskPass.prototype=Object.create(THREE.Pass.prototype),Object.assign(THREE.ClearMaskPass.prototype,{render:function(e){e.state.buffers.stencil.setTest(!1)}}),THEASYS={},THEASYS.params=void 0,THEASYS.base_url=null,THEASYS.vars=vars,function(){for(var e=0,t=["ms","moz","webkit","o"],o=0;o<t.length&&!window.requestAnimationFrame;++o)window.requestAnimationFrame=window[t[o]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[o]+"CancelAnimationFrame"]||window[t[o]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var o=new Date().getTime(),a=Math.max(0,16-(o-e)),r=window.setTimeout(function(){t(o+a)},a);return e=o+a,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),window.requestInterval=function(e,t){function o(){var i=new Date().getTime(),n=i-a;n>=t&&(e.call(),a=new Date().getTime()),r.value=requestAnimFrame(o)}if(!window.requestAnimationFrame&&!window.webkitRequestAnimationFrame&&!(window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame)&&!window.oRequestAnimationFrame&&!window.msRequestAnimationFrame)return window.setInterval(e,t);var a=new Date().getTime(),r={};return r.value=requestAnimFrame(o),r},window.clearRequestInterval=function(e){window.cancelAnimationFrame?window.cancelAnimationFrame(e.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(e.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(e.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(e.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(e.value):clearInterval(e)},window.requestTimeout=function(e,t){function o(){var i=new Date().getTime();i-a>=t?e.call():r.value=requestAnimFrame(o)}if(!window.requestAnimationFrame&&!window.webkitRequestAnimationFrame&&!(window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame)&&!window.oRequestAnimationFrame&&!window.msRequestAnimationFrame)return window.setTimeout(e,t);var a=new Date().getTime(),r={};return r.value=requestAnimFrame(o),r},window.clearRequestTimeout=function(e){window.cancelAnimationFrame?window.cancelAnimationFrame(e.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(e.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(e.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(e.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(e.value):clearTimeout(e)},Object.assign===void 0&&function(){Object.assign=function(e){if(e===void 0||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),o=1,a;o<arguments.length;o++)if(a=arguments[o],void 0!==a&&null!==a)for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r]);return t}}();var _=function(e){return e};jQuery.fn.simulateClick=function(){return this.each(function(){if("createEvent"in document){var e=this.ownerDocument,t=e.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,e.defaultView,1,0,0,0,0,!1,!1,!1,!1,0,null),this.dispatchEvent(t)}else this.click()})},Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){function a(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}if(null==this)throw new TypeError("\"this\" is null or not defined");var r=Object(this),o=r.length>>>0;if(0===o)return!1;for(var i=0|t,n=Math.max(0<=i?i:o-Math.abs(i),0);n<o;){if(a(r[n],e))return!0;n++}return!1}}),THEASYS.event=function(){return{events:{},trigger:function(e,t,o,a,r,s){if(e in this.events)for(var d=0,c=this.events[e].length;d<c;d++)this.events[e][d](t,o,a,r,s)},on:function(e,t){e in this.events||(this.events[e]=[]),"function"==typeof t&&this.events[e].push(t)},trs:{},getOn:function(e,t,o,a,r,s){var d=[];if(e in this.trs)for(var c=0,l=this.trs[e].length,n;c<l;c++)n=this.trs[e][c](t,o,a,r,s),d.push(n);return d},sendOn:function(e,t){e in this.trs||(this.trs[e]=[]),"function"==typeof t&&this.trs[e].push(t)}}},THREE.StereoEffect=function(e){this.separation=0,this.focalLength=15;var t=new THREE.Vector3,o=new THREE.Quaternion,a=new THREE.Vector3,r,i;this._cameraL=new THREE.PerspectiveCamera,this._cameraR=new THREE.PerspectiveCamera;var n=null,s=null,d,c,l,u,p,m,f,v,_,b;e.autoClear=!1;var h=0;this.setFov=function(e){d=e,h=1},this.setSize=function(t,o){r=t/2,i=o,e.setSize(t,o)},this.resetComposers=function(){this.clearComposer(n),n=null,this.clearComposer(s),s=null},this.clearComposer=function(e){if(!e)return!1;if("passes"in e)for(var t=e.passes.length,o=0,a;o<t;o++){a=e.passes[o].scene.children.length;for(var r=0;r<a;r++)e.passes[o].scene.children[r].geometry.dispose(),e.passes[o].scene.children[r].material.dispose()}if("copyPass"in e){e.copyPass.material.dispose(),e.copyPass.quad.geometry.dispose(),"material"in e.copyPass.quad&&e.copyPass.quad.material&&e.copyPass.quad.material.dispose();for(var t=e.copyPass.scene.children.length,o=0;o<t;o++)e.copyPass.scene.children[o].geometry.dispose()}"readBuffer"in e&&("texture"in e.readBuffer&&e.readBuffer.texture.dispose(),e.readBuffer.dispose()),"writeBuffer"in e&&("texture"in e.writeBuffer&&e.writeBuffer.texture.dispose(),e.writeBuffer.dispose()),"renderTarget1"in e&&("texture"in e.renderTarget1&&e.renderTarget1.texture.dispose(),e.renderTarget1.dispose()),"renderTarget2"in e&&("texture"in e.renderTarget2&&e.renderTarget2.texture.dispose(),e.renderTarget2.dispose()),e.reset()},this.getLeftCamera=function(){},this.render=function(g,j,x){g.updateMatrixWorld(),j.updateMatrixWorld(),x.parent===void 0&&x.updateMatrixWorld(),x.matrixWorld.decompose(t,o,a),h||(d=x.fov),m=x.near/this.focalLength,v=Math.tan(.5*THREE.Math.degToRad(d))*this.focalLength,f=.5*v*x.aspect,u=v*m,p=-u,_=(f+this.separation/2)/(2*f),b=1-_,c=2*f*m*b,l=2*f*m*_,this._cameraL.projectionMatrix.makePerspective(-c,l,u,p,x.near,x.far),this._cameraL.position.copy(t),this._cameraL.quaternion.copy(o),this._cameraL.translateX(-this.separation/2),this._cameraR.projectionMatrix.makePerspective(-l,c,u,p,x.near,x.far),this._cameraR.position.copy(t),this._cameraR.quaternion.copy(o),this._cameraR.translateX(this.separation/2),e.clear(),e.setViewport(0,0,r,i),n||(n=new THREE.EffectComposer(e),n.addPass(new THREE.RenderPass(g,this._cameraL)),THEASYS.renderer.applyEffects(n)),n.render(),e.render(g,this._cameraL),e.clearDepth(),e.render(j,this._cameraL),e.setViewport(r,0,r,i),s||(s=new THREE.EffectComposer(e),s.addPass(new THREE.RenderPass(g,this._cameraR)),THEASYS.renderer.applyEffects(s)),s.render(),e.render(g,this._cameraR),e.clearDepth(),e.render(j,this._cameraR)}},THEASYS.fn={},THEASYS.fn.ajax=function(){var e={url:"",data:"",type:"POST",dataType:"",sessionCheck:!0,stack:[],call:function(e){var o={type:e.type||this.type,url:e.url||this.url,data:e.data||this.data,dataType:e.dataType||this.dataType};return o.sessionCheck="sessionCheck"in e?e.sessionCheck:this.sessionCheck,Object.assign(e,o),t(e)}},t=function(t){return new Promise(function(o,a){t.sessionCheck?$.ajax({url:e.func.u("api","session"),dataType:"json"}).done(function(e){"status"in e?e.status?$.ajax(t).done(function(e){o(e)}).fail(function(e,t){a(Error(t))}):"function"==typeof sessionTimeout&&sessionTimeout():"function"==typeof sessionTimeout&&sessionTimeout()}).fail(function(e,t){a(Error(t))}):$.ajax(t).done(function(e){o(e)}).fail(function(e,t){a(Error(t))})})};return e}(),THEASYS.fn.executeFunctionByName=function(e){var t=new Function(e+"()");try{t()}catch(e){}},THEASYS.fn.hexToRgb=function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,o,a){return t+t+o+o+a+a});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},THEASYS.fn.xyzToDeg=function(e,t,o,a){return a?90-180*Math.acos(t/360)/Math.PI:Math.abs((270+180*Math.atan2(e,o)/Math.PI)%360-360)},THEASYS.fn.latLonToXYZ=function(e,t){e=Math.max(-90,Math.min(90,parseFloat(e,10)));var o=THREE.Math.degToRad(90-e),a=THREE.Math.degToRad(parseFloat(t,10)),r=360,i=r*Math.sin(o)*Math.cos(a),n=r*Math.cos(o),s=r*Math.sin(o)*Math.sin(a);return{x:i,y:n,z:s}},THEASYS.fn.xyzToLatLon=function(e,t,o){var a=90-180*Math.acos(t/360)/Math.PI;isNaN(a)&&(0>this.vars.lat?a=-90:a=90),a=Math.max(-90,Math.min(90,parseFloat(a,10)));var r=Math.abs((270+180*Math.atan2(e,o)/Math.PI)%360-360);return{lat:a,lon:r}},THEASYS.fn.is_empty=function(e){var t=Object.prototype.hasOwnProperty;if(null==e)return!0;if(e.length&&0<e.length)return!1;if(0===e.length)return!0;for(var o in e)if(t.call(e,o))return!1;return!0},THEASYS.fn.isInIframe=function(){try{return window.self!==window.top}catch(t){return!0}},THEASYS.fn.loadCss=function(e,t){return new Promise(function(o){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",t&&(a.id=t),a.onload=function(){o()},a.href=e,document.head.appendChild(a)})},THEASYS.fn.loadJs=function(e,t,o,a,r){return new Promise(function(i){var n=document.createElement("script");t&&(n.id=t),a&&(n.defer=!0),r&&(n.async=!0),n.onload=function(){i()},n.src=e,o?"head"===o?document.head.appendChild(n):document.body.appendChild(n):document.body.appendChild(n)})},THEASYS.fn.objectLength=function(e){if(Object.keys)return Object.keys(e).length;var t=0;for(var o in e)e.hasOwnProperty(o)&&++t;return t},THEASYS.fn.rgbToHex=function(e,t,o){return"#"+(16777216+(e<<16)+(t<<8)+o).toString(16).slice(1)},THEASYS.fn.u=function(e,t){var o="";return vars.trailing_slash&&""!==e&&(o="/"),t&&""!==t&&"/"!==t.charAt(0)&&(t="/"+t),vars.paths.websiteLanguage+e+(t||"")+o},THEASYS.fn.unescapeUnicode=function(e){return e?e.replace(/\\u([a-fA-F0-9]{4})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}):""},THEASYS.fn.parse_url=function(e){if(!e)return"https://www.theasys.io";for(var t=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],o={php:/(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,strict:/(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/\/?)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},a=o["php"].exec(e),r={},n=14;n--;)a[n]&&(r[t[n]]=a[n]);delete r.source;var s="";return"scheme"in r||(s="http://"),s+e},THEASYS.fn.video_embed_url_params=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var o=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),a=o.exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null},THEASYS.fn.video_embed_url=function(e,t){var o=document.createElement("a");o.href=e;var a=THEASYS.fn.video_embed_url_params("start",e);if(a||(a=THEASYS.fn.video_embed_url_params("t",e)),a||(a=THEASYS.fn.video_embed_url_params("time_continue",e)),a||(a=0),"www.youtube.com"==o.host||"www.youtube.com:443"==o.host||"youtube.com"==o.host||"youtube.com:443"==o.host||"youtube-nocookie.com"==o.host||"www.youtube-nocookie.com"==o.host){var r="";if("/watch"==o.pathname||"watch"==o.pathname){for(var s=o.search.substr(1).split("&"),d=0,c=s.length,n;d<c;d++)if(n=s[d].split("="),"v"===n[0]){r=n[1];break}}else{var l=o.pathname.split("/");r=l[l.length-1]}return"https://www.youtube-nocookie.com/embed/"+r+(t?"?autoplay=1&start="+a:"?autoplay=0&start="+a)}if("www.youtu.be"==o.host||"youtu.be"==o.host){var u=o.pathname.split("/");return"https://www.youtube-nocookie.com/embed/"+u[1]+(t?"?autoplay=1&start="+a:"?autoplay=0&start="+a)}return"www.vimeo.com"==o.host||"vimeo.com"==o.host?"//player.vimeo.com/video/"+o.pathname.substr(1)+(t?"?autoplay=1&muted=1":"?autoplay=0"):"player.vimeo.com"==o.host?"//player.vimeo.com/"+o.pathname.substr(1)+(t?"?autoplay=1&muted=1":"?autoplay=0"):"www.facebook.com"==o.host||"facebook.com"==o.host?"https://www.facebook.com/plugins/video.php?href="+encodeURIComponent(e)+(t?"&autoplay=true":"")+"&show_text=false&appId":void 0},function(e){window.console||(window.console={}),window.console.log||(window.console.log=function(){});var t=console.log;e.fn.enableLog=function(){console.log=t},e.fn.disableLog=function(){console.log=function(){}}}(window.THEASYS=window.THEASYS||{},jQuery),THEASYS.fn.haversineDistance=function(e,t,o){function r(e){return e*Math.PI/180}var i=e[0],n=e[1],s=t[0],l=t[1],u=r(l-n),p=r(s-i),m=Math.sin(u/2)*Math.sin(u/2)+Math.cos(r(n))*Math.cos(r(l))*Math.sin(p/2)*Math.sin(p/2),a=2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m)),c=6371*a;return o&&(c/=1.60934),c},THEASYS.fn.isIe=function(){var e=window.navigator.userAgent;return-1<e.indexOf("Trident/7.0")?11:-1<e.indexOf("Trident/6.0")?10:-1<e.indexOf("Trident/5.0")?9:0},THEASYS.fn.replaceLineFeedsWithBr=function(e){return e.replace(/(?:\r\n|\r|\n)/g,"<br />")},THEASYS.fn.map={on:function(e,t,o){return google.maps.event.addListener(t,e,function(e){"function"==typeof o&&o(this,e)}),this},off:function(e,t,o){return google.maps.event.clearListeners(t,e,function(e){"function"==typeof o&&o(this,e)}),this},onDom:function(e,t,o){return google.maps.event.addDomListener(t,e,function(e){"function"==typeof o&&o(this,e)}),this},create:function(e,t){return new google.maps.Map(document.getElementById(e),t)},findDistancesFromOneMarker:function(e,t){if(!e.gps)return!1;if(0==e.getPosition().lat()||0==e.getPosition().lng())return!1;var o={};for(var a in t)if(e.id!=t[a].id&&t[a].gps&&0!=t[a].getPosition().lat()&&0!=t[a].getPosition().lng()){var r=google.maps.geometry.spherical.computeDistanceBetween(e.getPosition(),t[a].getPosition());o[a]=r}var n=0,d=0;for(var c in o)n+=o[c],d++;var l=n/d,u=0;for(var c in o)u+=Math.pow(o[c]-l,2),d++;var p=Math.sqrt(u/(d-1)),s=[];for(var c in o)o[c]>p&&s.push(c);return s},moveMarker:function(e,t){e.setPosition(t)},markers:{findMaxDistance:function(e,t){t="undefined"==typeof t?[]:t;var o=[];for(var a in e)if(!(t.length&&-1==$.inArray(a,t))&&e[a].gps&&0!=e[a].getPosition().lat()&&0!=e[a].getPosition().lng()){var r={};for(var n in e)if(!(t.length&&-1==$.inArray(n,t))&&e[n].gps&&0!=e[n].getPosition().lat()&&0!=e[n].getPosition().lng()){var s=google.maps.geometry.spherical.computeDistanceBetween(e[a].getPosition(),e[n].getPosition());r[a+":"+n]=s}var d=-Infinity,c;for(var l in r)r[l]>d&&(d=r[l],c=l);o[c]=d}var u=-Infinity,p;for(var a in o)o[a]>u&&(u=o[a],p=a);return[p,u]},calculateInterpolation:function(e,t){var o=e[0].split(":"),a=google.maps.geometry.spherical.interpolate(t[o[0]].getPosition(),t[o[1]].getPosition(),.5);return a},edges_by_sd:function(e,t){if(!e.gps)return!1;if(0==e.getPosition().lat()||0==e.getPosition().lng())return!1;var o={};for(var a in t)if(e.id!=t[a].id&&t[a].gps&&0!=t[a].getPosition().lat()&&0!=t[a].getPosition().lng()){var r=google.maps.geometry.spherical.computeDistanceBetween(e.getPosition(),t[a].getPosition());o[a]=r}var n=0,d=0;for(var c in o)n+=o[c],d++;var l=n/d,u=0,p=1/0;for(var c in o)u+=Math.pow(o[c]-l,2),d++,o[c]<p&&(p=o[c]);var m=1.68*p,f=Math.sqrt(u/(d-1)),s=[];for(var c in o)o[c]>f&&f>m&&s.push(c);return s},distances:function(e){var t={};for(var o in e)t[o]=e[o];var a={};for(var r in e)if(e[r].gps&&0!=e[r].getPosition().lat()&&0!=e[r].getPosition().lng()){var i={};for(var n in t)if(e[n].gps&&0!=e[n].getPosition().lat()&&0!=e[n].getPosition().lng()&&r!==n&&r&&n){var s=google.maps.geometry.spherical.computeDistanceBetween(e[r].getPosition(),e[n].getPosition());i[s]=n}a[r]=i}return a},distancesFromMarker:function(e,t,o){o="undefined"==typeof o?[]:o;var a=[];for(var r in t)if(!(o.length&&-1!=$.inArray(r,o))&&t[r].gps&&0!=t[r].getPosition().lat()&&0!=t[r].getPosition().lng()){var n={};for(var s in t)if(!(o.length&&-1!=$.inArray(s,o))&&t[s].gps&&0!=t[s].getPosition().lat()&&0!=t[s].getPosition().lng()){var d=google.maps.geometry.spherical.computeDistanceBetween(t[r].getPosition(),t[s].getPosition());n[r+":"+s]=d}var c=-Infinity,l;for(var u in n)n[u]>c&&(c=n[u],l=u);a[l]=c}var p=-Infinity,m;for(var r in a)a[r]>p&&(p=a[r],m=r);return[m,p]},average_distance:function(e,t){if(!e.gps)return!1;if(0==e.getPosition().lat()||0==e.getPosition().lng())return!1;var o={};for(var a in t)if(e.id!=t[a].id&&t[a].gps&&0!=t[a].getPosition().lat()&&0!=t[a].getPosition().lng()){var r=google.maps.geometry.spherical.computeDistanceBetween(e.getPosition(),t[a].getPosition());o[a]=r}var n=0,s=0;for(var d in o)n+=o[d],s++;var i=n/s;return i},deselect:function(e,t,o){for(var a in t="undefined"==typeof t?markers_color.gps:t,o="undefined"==typeof o?"":o,e)e[a].draggable=!1,e[a].gps&&(e[a].styleIcon.set("color",t),e[a].styleIcon.set("text",o),e[a].active=0);return this},select:function(e,t,o,a){for(var r in o="undefined"==typeof o?markers_color.selected:o,a="undefined"==typeof a?"":a,t="undefined"==typeof t||t,e)e[r].draggable=t,e[r].gps?e[r].styleIcon.set("color",o):e[r].styleIcon.set("color",markers_color.nogps),e[r].styleIcon.set("text",a),e[r].active=1;return this},bounce:{toggle:function(e){for(var t in e)null==e[t].getAnimation()?e[t].setAnimation(google.maps.Animation.BOUNCE):e[t].setAnimation(null)},start:function(e){for(var t in e)e[t].setAnimation(google.maps.Animation.BOUNCE)},stop:function(e){for(var t in e)null!=e[t].getAnimation()&&e[t].setAnimation(null)}},remove:function(e,t){for(var o in t)o==e&&t[o].setMap(null)},removeAll:function(e){for(var t in e)e[t].setMap(null)}},marker:{fromLatLngToPixel:function(e,t){var o=Math.pow(2,t.getZoom()),a=t.getProjection(),r=t.getBounds(),i=a.fromLatLngToPoint(new google.maps.LatLng(r.getNorthEast().lat(),r.getSouthWest().lng())),n=a.fromLatLngToPoint(e);return new google.maps.Point(Math.floor((n.x-i.x)*o),Math.floor((n.y-i.y)*o))},remove:function(e,t){t&&t[e]&&t[e].setMap(null)},move:function(e,t){e.setPosition(t)},moveSmooth:function(e,t,o){var a=0,r=(t[0]-o[0])/10,n=(t[1]-o[1])/10;setTimeout(function(){o[0]+=r,o[1]+=n;var t=new google.maps.LatLng(o[0],o[1]);e.setPosition(t),a!=10&&a++},100)},draggable:function(e,t){return e.draggable=t,this},set:{color:function(e,t){e.styleIcon.set("color",t)}},get:{color:function(e){return e.styleIcon.get("color")}},hide:function(e){e.setVisible(!1)},show:function(e){e.setVisible(!0)}}},THEASYS.fn.findGetParameter=function(e){for(var t=null,o=[],a=location.search.substr(1).split("&"),r=0;r<a.length;r++)o=a[r].split("="),o[0]===e&&(t=decodeURIComponent(o[1]));return t},THEASYS.theme={id:null,info:null,html:null,modules:{},fn:{},vars:{},files_version:"",cache_files_in_browser:!0,autoLoadFns:[],autoLoadFunction:function(e,t){e&&t&&this.autoLoadFns.push(e+"|"+t)},autoLoadFunctions:function(){for(var e=0,t=this.autoLoadFns.length,o;e<t;e++)o=this.autoLoadFns[e].split("|"),o[0]in this.module&&o[1]in this.module[o[0]]&&"function"==typeof this.module[o[0]][o[1]]&&this.module[o[0]][o[1]]()},init:function(e){if(this.id||(this.id=THEASYS.params.t),"modules"in this.info)for(var t=0,o=this.info.modules.length,a;t<o;t++)a=this.info.modules[t].folder,this.modules[a]={},this.fn[a]={},this.vars[a]={};this.cache_files_in_browser||(this.files_version="?v="+Math.random());var r=[];if("css"in this.info)for(var t=0,o=this.info.css.length;t<o;t++)if("file"in this.info.css[t]){var s=this.info.css[t].file,d="version"in this.info.css[t]?"?v="+this.info.css[t].version:this.files_version,c="onLoad"in this.info.css[t]?this.info.css[t].onLoad:"",l="id"in this.info.css[t]?this.info.css[t].id:"",u=THEASYS.fn.loadCss(THEASYS.vars.paths.static+"/themes/"+this.id+"/assets/css/"+s+d,l).then(function(){""!==c&&THEASYS.fn.executeFunctionByName(c)});r.push(u)}if("modules"in this.info)for(var t=0,o=this.info.modules.length;t<o;t++)for(var a=this.info.modules[t].folder,p=this.info.modules[t].files,m=0,f=this.info.modules[t].files.length;m<f;m++)if("css"===this.info.modules[t].files[m].type){var s=this.info.modules[t].files[m].file,d="version"in this.info.modules[t].files[m]?"?v="+this.info.modules[t].files[m].version:this.files_version,c="onLoad"in this.info.modules[t].files[m]?this.info.modules[t].files[m].onLoad:"",l="id"in this.info.modules[t].files[m]?this.info.modules[t].files[m].id:"",u=THEASYS.fn.loadCss(THEASYS.vars.paths.static+"/themes/"+this.id+"/assets/modules/"+a+"/"+s+d,l).then(function(){""!==c&&THEASYS.fn.executeFunctionByName(c)});r.push(u)}this.html||(this.html=""),window.document.body.insertAdjacentHTML("afterbegin",this.html),Promise.all(r).then(function(t){"function"==typeof e&&e(t)})},appendHtml:function(e,t){t?t.insertAdjacentHTML("beforeend",e):window.document.body.insertAdjacentHTML("beforeend",e)},prependHtml:function(e,t){t?t.insertAdjacentHTML("afterbegin",e):window.document.body.insertAdjacentHTML("afterbegin",e)},load:function(e){var t=[];if("js"in this.info)for(var o=0,a=this.info.js.length;o<a;o++)if("file"in this.info.js[o]){var r=this.info.js[o].file,s="position"in this.info.js[o]?this.info.js[o].position:"body",d="version"in this.info.js[o]?"?v="+this.info.js[o].version:this.files_version,c="onLoad"in this.info.js[o]?this.info.js[o].onLoad:"",l="id"in this.info.js[o]?this.info.js[o].id:"",u="defer"in this.info.js[o]?this.info.js[o].defer:"",p="async"in this.info.js[o]?this.info.js[o].async:"",m=THEASYS.fn.loadJs(THEASYS.vars.paths.static+"/themes/"+this.id+"/assets/js/"+r+d,l,s,u,p).then(function(){""!==c&&THEASYS.fn.executeFunctionByName(c)});t.push(m)}if("modules"in this.info)for(var o=0,a=this.info.modules.length;o<a;o++)for(var f=this.info.modules[o].folder,v=this.info.modules[o].files,_=0,b=this.info.modules[o].files.length;_<b;_++)if("js"===this.info.modules[o].files[_].type){var r=this.info.modules[o].files[_].file,s="position"in this.info.modules[o].files[_]?this.info.modules[o].files[_].position:"body",d="version"in this.info.modules[o].files[_]?"?v="+this.info.modules[o].files[_].version:this.files_version,c="onLoad"in this.info.modules[o].files[_]?this.info.modules[o].files[_].onLoad:"",l="id"in this.info.modules[o].files[_]?this.info.modules[o].files[_].id:"",u="defer"in this.info.modules[o].files[_]?this.info.modules[o].files[_].defer:"",p="async"in this.info.modules[o].files[_]?this.info.modules[o].files[_].async:"",m=THEASYS.fn.loadJs(THEASYS.vars.paths.static+"/themes/"+this.id+"/assets/modules/"+f+"/"+r+d,l,s,u,p).then(function(){""!==c&&THEASYS.fn.executeFunctionByName(c)});t.push(m)}Promise.all(t).then(function(t){"function"==typeof e&&e(t)})},exec:function(e,t,o,a,r,i){e in this.modules&&"initialized"in this.modules[e]&&!0===this.modules[e].initialized&&t in this.modules[e]&&"function"==typeof this.modules[e][t]&&this.modules[e][t](o,a,r,i)},listenToEdits:function(e){for(var t in this.modules)"initialized"in this.modules[t]&&!0===this.modules[t].initialized&&"listenToEdits"in this.modules[t]&&"function"==typeof this.modules[t].listenToEdits&&this.modules[t].listenToEdits(e);"applyEditsOnTheFly"in this&&"function"==typeof this.applyEditsOnTheFly&&this.applyEditsOnTheFly(e)},api:function(e,t,o){for(var a in this.modules)"initialized"in this.modules[a]&&!0===this.modules[a].initialized&&"api"in this.modules[a]&&"function"==typeof this.modules[a].api&&this.modules[a].api(t,e,o)}},THEASYS.theme.event={events:{},trigger:function(e,t){if(e in this.events)for(var o=0,a=this.events[e].length;o<a;o++)this.events[e][o](t)},on:function(e,t){e in this.events||(this.events[e]=[]),"function"==typeof t&&this.events[e].push(t)}},THEASYS.cache={type:"localStorage",supported:!1,name:"THEASYS",key:"viewer",obj:{},set:function(e,t){if(!this.obj[e])this.obj[e]=t;else if("object"==typeof t)for(var o in t)this.obj[e][o]=t[o];return this},init:function(){var e={};if(this.supported=this.support(),this.supported&&("localStorage"===this.type||"sessionStorage"===this.type)){var e=this.get();e&&(this.obj=JSON.parse(e))}},support:function(){try{if("localStorage"===this.type)return"localStorage"in window&&null!==window.localStorage;if("sessionStorage"===this.type)return"sessionStorage"in window&&null!==window.sessionStorage}catch(t){return!1}},save:function(){if(!this.supported)return!1;if("localStorage"===this.type)try{return localStorage.setItem(this.key,JSON.stringify(this.obj))}catch(t){}else if("sessionStorage"===this.type)return sessionStorage.setItem(this.key,JSON.stringify(this.obj))},get:function(e){return!!this.supported&&((e||(e=this.key),"localStorage"===this.type)?localStorage.getItem(e):"sessionStorage"===this.type?sessionStorage.getItem(e):void 0)},remove:function(e){if(!this.supported)return!1;return"localStorage"===this.type?localStorage.removeItem(e):"sessionStorage"===this.type?sessionStorage.removeItem(e):void 0},clear:function(){return!!this.supported&&((this.obj={},"localStorage"===this.type)?localStorage.clear():"sessionStorage"===this.type?sessionStorage.clear():void 0)}},THEASYS.api={engine:null,call:null},THEASYS.api.engine=function(e){var t=function(e){for(var t={},o=0,a=e.length;o<a;o++)for(var r in e[o])t[r]=e[o][r];return t},o={};return o.execute=function(o,a,r,s,d){var c=[];if(a&&(c=a.split(",")),c.length){for(var l=[],u=0,p=c.length,n;u<p;u++)n=c[u].trim(),e.theme.api(n,o,r,d),n in e.api.call&&o in e.api.call[n]&&"function"==typeof e.api.call[n][o]&&l.push(new Promise(function(t){e.api.call[n][o](r,function(e){e._id=d||void 0,t(e)})}));l.length?s&&"function"==typeof s&&Promise.all(l).then(function(e){s(t(e))}):s&&"function"==typeof s&&s([])}else s&&"function"==typeof s&&s([])},o}(THEASYS||{}),THEASYS.api.call={},THEASYS.api.call.fov=function(e){return{get:function(t,o){o({fov:e.renderer.vars.get("camera.fov")})},set:function(t){t===void 0||null===t||isNaN(t)||e.renderer.cif("setFov",parseInt(t,10))}}}(THEASYS||{}),THEASYS.api.call.fov_limits=function(e){return{get:function(t,o){o({fov_limits:{min:e.renderer.vars.get("zoom_in"),max:e.renderer.vars.get("zoom_out")}})},set:function(){}}}(THEASYS||{}),THEASYS.api.call.lat=function(e){return{get:function(t,o){o({lat:e.renderer.vars.get("lat")})},set:function(t){if(t!==void 0&&null!==t&&!isNaN(t)){var o=e.renderer.cif("_pitchControl",parseInt(t,10));e.renderer.vars.set("lat",o),0==e.renderer.vars.get("movement.y")&&e.renderer.vars.set("lat",e.renderer.vars.get("current_position.lat")),e.renderer.cif("_setCurrentPosition",e.renderer.vars.get("lat"),e.renderer.vars.get("lon")),e.renderer.cif("_stopAutoRotationOnInteraction"),e.renderer.cif("_stopAutoRotationInterval")}}}}(THEASYS||{}),THEASYS.api.call.lon=function(e){return{get:function(t,o){o({lon:e.renderer.vars.get("lon")})},set:function(t){t===void 0||null===t||isNaN(t)||(360<t&&(t=360),0>t&&(t=0),e.renderer.vars.set("lon",parseInt(t,10)),e.renderer.cif("_setCurrentPosition",e.renderer.vars.get("lat"),e.renderer.vars.get("lon")),e.renderer.cif("_stopAutoRotationOnInteraction"),e.renderer.cif("_stopAutoRotationInterval"))}}}(THEASYS||{}),THEASYS.api.call.menu=function(e){return{get:function(t,o){var a=e.renderer.vars.get("options"),r=e.renderer.vars.get("device"),i=e.renderer.vars.get("editing"),n=e.renderer.vars.get("tour_rnd"),s=~~a.menu_visible;i&&(s=1);var d={},c=0;r.isMobile&&(i?c=1:~~a.gyroscope&&(c=1)),d.gyroscope={exists:c,status:~~a.gyroscope};var l=0;i?l=1:~~a.vr_mode&&(l=1),d.vr={exists:l,status:~~a.vr_mode};var u=0;r.isMobile&&(i?u=1:~~a.quality&&(u=1)),d.quality={exists:u,status:~~a.quality};var p=0;i?p=1:parseInt(a.menu_visible_auto_rotation,10)&&(p=1),d.auto_rotation={exists:p,status:~~a.auto_rotation};var m=0;i?m=1:parseInt(a.fullscreen,10)&&(m=1),d.fullscreen={exists:m,status:~~a.fullscreen};var f=0;i?f=1:parseInt(a.hotspots_display,10)&&(f=1),d.hotspots={exists:f,status:~~a.hotspots_display};var v=0,_=parseInt(a.share_menu,10);0===e.cache.obj.tours[n].tour.domain_specific&&(i?v=1:_&&(v=1)),d.share={exists:v,status:~~a.share_menu};d.audio={exists:1,status:~~a.share_menu},"audio"in e.cache.obj.tours[n].tour&&e.cache.obj.tours[n].tour.audio&&(d.audio.status=~~a.background_sound),o({menu:{status:s,items:d}})},set:function(t){t!==void 0&&null!==t&&"action"in t&&"id"in t&&"trigger"===t.action&&e.theme.exec("menu","trigger",t.id)}}}(THEASYS||{}),THEASYS.api.call.panorama=function(e){return{get:function(){},set:function(t){t!==void 0&&null!==t&&""!==t&&e.renderer.fetchPanorama({q:e.renderer.vars.get("tour_rnd"),l:t})}}}(THEASYS||{}),THEASYS.api.call.panoramas=function(e){return{get:function(t,o){e.fn.ajax.call({url:e.fn.u("api","viewerApi"),data:{action:"fetchPanoramas",params:{t:e.renderer.vars.get("tour_rnd"),h:e.renderer.vars.get("tour_embed_rnd")}},sessionCheck:!1}).then(function(e){o({panoramas:e})},function(){o({panoramas:[]})})}}}(THEASYS||{}),THEASYS.api.call.reload=function(){return{get:function(){},set:function(){window.location.reload()}}}(THEASYS||{}),THEASYS.api.call.thumbnails=function(e){return{get:function(t,o){var a=[],r=e.renderer.vars.get("tour_rnd"),s=e.renderer.vars.get("user_random_uid");if("tour"in e.cache.obj.tours[r]&&"panoramas"in e.cache.obj.tours[r].tour&&e.cache.obj.tours[r].tour.panoramas.length)for(var d=0,c=e.cache.obj.tours[r].tour.panoramas.length,n;d<c;d++)n="",n="is_demo"in e.cache.obj.tours[r].tour.panoramas[d]&&e.cache.obj.tours[r].tour.panoramas[d].is_demo?vars.paths.panoramas+"/demo/"+e.cache.obj.tours[r].tour.panoramas[d].is_demo+"/thumbnails/"+e.cache.obj.tours[r].tour.panoramas[d].thumbnail:vars.paths.panoramas+"/"+s+"/"+r+"/thumbnails/"+e.cache.obj.tours[r].tour.panoramas[d].thumbnail,a.push({image:n,title:e.cache.obj.tours[r].tour.panoramas[d].title,rnd:e.cache.obj.tours[r].tour.panoramas[d].prnd});o({thumbnails:a})},set:function(){}}}(THEASYS||{}),THEASYS.api.call.hotspots=function(e){return{get:function(t,o){var a=e.renderer.vars.get("objects"),r=[];if(!e.fn.is_empty(a))for(var n in a)r.push({data:a[n].data});o({hotspots:r})},set:function(t){t!==void 0&&null!==t&&"action"in t&&"id"in t&&("execute"===t.action?e.renderer.cif("executeObjectAction",parseInt(t.id,10)):"closeImage"===t.action?e.renderer.cif("executeObjectActionCloseImage",parseInt(t.id,10)):"locate"===t.action&&e.renderer.cif("locateObject",parseInt(t.id,10)))}}}(THEASYS||{}),THEASYS.api.call.move=function(e){return{get:function(){},set:function(t){t!==void 0&&null!==t&&"direction"in t&&"value"in t&&e.renderer.move(t.direction,parseFloat(t.value,10))}}}(THEASYS||{}),THEASYS.api.call.developer=function(){return{get:function(e,t){t({developer:"John Barounis"})}}}(THEASYS||{}),THEASYS.api.call.god=function(){return{get:function(e,t){t({god:"\u0396\u0395\u03A5\u03A3"})}}}(THEASYS||{}),THEASYS.api.call.lockViewer=function(e){return{get:function(){},set:function(t){t!==void 0&&null!==t&&e.renderer.lockViewer(parseInt(t,10))}}}(THEASYS||{}),THEASYS.renderer=function(e){"use strict";var t={afterLoad:function(e){return"function"==typeof e&&e(t),this},applyEffects:function(e){return!!Je.id&&!!Je.effects&&void pe(e)},autoClearPanoramsCache:function(){0<Je.maxCachedPanoramas&&e.cache.obj.tours[Je.tour_rnd].panoramas&&e.fn.objectLength(e.cache.obj.tours[Je.tour_rnd].panoramas)>Je.maxCachedPanoramas&&(e.cache.obj.tours[Je.tour_rnd].panoramas={},e.cache.save())},beforeLoad:function(e){if(Ue(),!Je.supports.webgl)return G("It appears that your browser does not support webgl.<br><a target=\"_blank\" rel=\"noopener\" href=\"http://get.webgl.org/troubleshooting/\">Click here for more information.</a>"),"function"==typeof e&&e(t),!1;var o=new MobileDetect(window.navigator.userAgent);return Je.device.androidVersion=parseFloat(o.version("Android"),10),Je.device.isMobile=o.mobile(),Je.device.isPhone=o.phone(),Je.device.isTablet=o.tablet(),Je.device.userAgent=o.userAgent(),Je.detectedDeviceType=Je.device.isPhone?"phone":Je.device.isTablet?"tablet":"desktop",Je.device.isPhone&&(Je.quality="sm"),Je.device.isTablet&&(Je.quality="sm"),ye(),Je.viewer_left_target=$("#viewer_left_target"),Je.viewer_right_target=$("#viewer_right_target"),$(window).on("resize",function(){Re()}).resize(),z(),this.event.trigger("beforeLoad"),this},setFov:function(e){qe(e)},setLon:function(e){Je.lon=e,Xe(Je.lat,e)},setLat:function(e){Je.lat=e,Xe(e,Je.lon)},cif:function(e){var t=Array.prototype.slice.call(arguments,1);switch(e){case"_pitchControl":return we(t[0]);break;case"_setCurrentPosition":return Xe(t[0],t[1]);break;case"_stopAutoRotationOnInteraction":return Ce();break;case"_stopAutoRotationInterval":return Fe();break;case"updateProjectionMatrix":Je.camera.updateProjectionMatrix();break;case"_autoRotationOnAction":c();break;case"_updatePanoramaPosition":Xe();break;case"_setHotspotsPositionsValues":We();break;case"setFov":qe(t[0]);break;case"executeObjectAction":ge.actions.execute(t[0]);break;case"executeObjectActionCloseImage":THEASYS.theme.exec("popup","close");break;case"locateObject":if(~~t[0]in Je.objects){var o=parseFloat(Je.objects[~~t[0]].data.position.lat,10),a=parseFloat(Je.objects[~~t[0]].data.position.lon,10);Xe(o,a)}}return this},callInit:function(o){var a=t.processCached(),r=a[0],i=a[1],n=parseInt(Je.editing,10)?e.fn.u("api","viewer")+"?editing=1":e.fn.u("api","viewer");if(vars.exported){var d=Je.tour_embed_share_id,c=e.fn.findGetParameter("s");c&&"string"==typeof c&&(d=c,Je.tour_embed_share_id="share");var s=e.check.init({t:Je.tour_rnd,h:Je.tour_embed_rnd,e:Je.editing,a:e.params.o,s:parseInt(Je.options.starting_panorama,10)||0,y:Je.tour_password,s_:e.params.l||"",c:0,ce:0,cp:{},p:r,ts:d});"function"==typeof o&&o(s)}else e.fn.ajax.call({url:n,data:{action:"init",params:{t:Je.tour_rnd,h:Je.tour_embed_rnd,e:Je.editing,a:e.params.o,s:parseInt(Je.options.starting_panorama,10)||0,y:Je.tour_password,s_:e.params.l||"",c:t.getTourCache(),ce:t.getEmbedCache(),cp:t.getPanoramasCache(),p:r,ts:Je.tour_embed_share_id,cdn:Je.cdn,prl:e.params.prl}},sessionCheck:!1}).then(function(e){"function"==typeof o&&o(e)},function(e){"function"==typeof o&&o({},e)})},callInitAfterTourNoSuccess:function(e){if(e)if("code"in e){if("ppns"===e.code)return Q(),!1;if("tsz"===e.code)return G("This Virtual Tour has been unpublished!"),!1;if("nle"===e.code)return G("You are in Editing Mode but not Logged In!<div><a class=\"sign-in-button\" target=\"_blank\" rel=\"noopener\" href=\""+vars.paths.website+"signin\">Sign In</a></div>"),!1;if("dsc"===e.code)return G("This Virtual Tour is not allowed to run on this domain!"),!1}else if("tour"in e&&"code"in e.tour){if("ppns"===e.tour.code)return Q(),!1;if("tsz"===e.tour.code)return G("This Virtual Tour has been unpublished!"),!1}G("Virtual Tour not found!")},cObjects:function(e,t){v(e,t)},editing:{},fetchPanorama:function(o,a){if(t.event.trigger("fetchPanorama",o),Je.loadingPanorama)return!1;if(!o&&!("l"in o))return!1;"function"==typeof t.event.beforeLoadingPanorama&&this.event.beforeLoadingPanorama(),de();var r=0;if(!~~Je.editing){for(var n in e.cache.obj.tours[Je.tour_rnd].panoramas)if(o.l===e.cache.obj.tours[Je.tour_rnd].panoramas[n].rnd){r=n;break}r&&r in e.cache.obj.tours[Je.tour_rnd].pc&&e.cache.obj.tours[Je.tour_rnd].pc[r]!==e.cache.obj.tours[Je.tour_rnd].panoramas[r].cache&&(r=0)}if(r&&!vars.exported)t.processPanoramaAfter(e.cache.obj.tours[Je.tour_rnd].panoramas[r],a);else if(vars.exported){var i=e.check.fetch(Je.tour_rnd,o.l);i&&"success"in i?(e.cache.obj.tours[Je.tour_rnd].panoramas[i.success.id]=i.success,e.cache.save(),t.processCached(),t.processPanoramaAfter(i.success,a),i=null):t.callInitAfterTourNoSuccess()}else e.fn.ajax.call({url:e.fn.u("api","viewer"),data:{action:"fetch",params:{q:Je.tour_rnd,qe:Je.tour_embed_rnd,l:o.l,prl:e.params.prl,prl_loaded:Je.panoramas_list_loaded}},sessionCheck:!1}).then(function(o){o&&"success"in o?(e.cache.obj.tours[Je.tour_rnd].panoramas[o.success.id]=o.success,e.cache.save(),t.processCached(),t.processPanoramaAfter(o.success,a),y(Je.id),w(),I(),o=null):t.callInitAfterTourNoSuccess()},function(){t.callInitAfterTourNoSuccess()})},gcvpd:function(){return Je.current_position},hotspotsVisibleApply:function(){R()},load:function(o,a){var r=THEASYS.params;return("cdn"in r&&(Je.cdn=~~r.cdn),"e"in r&&r.e&&(Je.editing=1,W()),!("q"in r)||""===r.q)?(G("Virtual Tour not found!"),!1):"qe"in r&&""!==r.qe?(V(),Je.tour_rnd=r.q,Je.tour_embed_rnd=r.qe,Je.tour_embed_share_id=r.s,Je.tour_password=r.pp||"",Je.cv=r.cv||null,Je.actionLon=o,Je.lockScreen=!0,"tours"in e.cache.obj||(e.cache.obj.tours={}),Je.tour_rnd in e.cache.obj.tours||(e.cache.obj.tours[Je.tour_rnd]={tour:{},embed:{},panoramas:{},pc:{}}),Je.tour_embed_rnd in e.cache.obj.tours[Je.tour_rnd].embed||(e.cache.obj.tours[Je.tour_rnd].embed[Je.tour_embed_rnd]={cache:0,options:{}}),"pc"in e.cache.obj.tours[Je.tour_rnd]||(e.cache.obj.tours[Je.tour_rnd].pc={}),"function"==typeof a&&a(),t.event.trigger("load"),t.processCached(),t.process(),this):(G("Virtual Tour not found!"),!1)},lockViewer:function(e){e?$("#lockViewer").show():$("#lockViewer").hide()},logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",move:function(e,o){if(Je.lockScreen)return!1;if(Je.loadingPanorama)return!1;var a=3;switch(o&&!isNaN(o)&&(360<o?o=360:0>o&&(o=0),a=o),e){case"left":var r=Je.lon;r-=a,Je.lon=r,Xe();break;case"right":var r=Je.lon;r+=a,Je.lon=r,Xe();break;case"up":case"down":var i=a;if("up"===e){var n=Je.lat+i;Je.current_position.lat=n,Je.lat=Math.max(-90,Math.min(90,Je.current_position.lat)),Xe()}else if("down"===e){var n=Je.lat-i;Je.current_position.lat=n,Je.lat=Math.max(-90,Math.min(90,Je.current_position.lat)),Xe()}break;case"out":case"in":var i=a||10;if(Je.isUserInteracting=0,"out"===e){var d=Je.camera.fov+i;if(d<Je.zoom_out){var l=!1;if(!Je.isFull){Je.camera.fov>Je.minEffectiveFov&&(Je.camera.fov=Je.minEffectiveFov);var u=(Je.minEffectiveFov-Je.camera.fov)/2;0<Je.lat?u<Je.lat&&(Je.lat=u,l=!0):0>Je.lat?u<-Je.lat&&(Je.lat=-u,l=!0):(Je.lat=0,l=!0),l||(Je.current_position.lat=Je.lat),Je.current_position.fov+=l?1:1}else l||(Je.current_position.fov+=a);Je.camera.fov=Je.current_position.fov,Je.camera.fov>Je.zoom_out&&(Je.camera.fov=Je.zoom_out,Je.current_position.fov=Je.zoom_out),Je.camera.fov<Je.zoom_in&&(Je.camera.fov=Je.zoom_in,Je.current_position.fov=Je.zoom_in),Xe(),Je.camera.fov>Je.zoom_out&&(Je.camera.fov=Je.zoom_out,Je.current_position.fov=Je.zoom_out),Je.camera.fov<Je.zoom_in&&(Je.camera.fov=Je.zoom_in,Je.current_position.fov=Je.zoom_in)}}else if("in"===e){var d=Je.camera.fov-i;d<Je.zoom_in&&(d=Je.zoom_in);var p=new t.tween;p.from={x:Je.camera.fov},p.to={x:d},p.step={x:1},p.easing={x:.15},p.onUpdate=function(e){Je.current_position.fov=parseInt(e.x,10),Je.camera.fov=Je.current_position.fov,Xe()},p.start(),Je.camera.fov>Je.zoom_out&&(Je.current_position.fov=Je.zoom_out,Je.camera.fov=Je.zoom_out),Je.camera.fov<Je.zoom_in&&(Je.current_position.fov=Je.zoom_in,Je.camera.fov=Je.zoom_in)}H({fov:Je.current_position.fov});}t.event.trigger("userMovePanorama",e),s(),c()},processPanoramaImages:function(){y(),w(),I()},params:{},processCached:function(){var t=0,o=0;return!vars.exported&&Je.tour_rnd in e.cache.obj.tours&&("tour"in e.cache.obj.tours[Je.tour_rnd]&&("cache"in e.cache.obj.tours[Je.tour_rnd].tour&&(Je.tour_cache=e.cache.obj.tours[Je.tour_rnd].tour.cache,t=e.cache.obj.tours[Je.tour_rnd].tour.panorama_id),Je.uid=e.cache.obj.tours[Je.tour_rnd].tour.uid),"embed"in e.cache.obj.tours[Je.tour_rnd]&&Je.tour_embed_rnd in e.cache.obj.tours[Je.tour_rnd].embed&&("cache"in e.cache.obj.tours[Je.tour_rnd].embed[Je.tour_embed_rnd]&&(Je.tour_embed_cache=e.cache.obj.tours[Je.tour_rnd].embed[Je.tour_embed_rnd].cache),"options"in e.cache.obj.tours[Je.tour_rnd].embed[Je.tour_embed_rnd]&&0<~~e.cache.obj.tours[Je.tour_rnd].embed[Je.tour_embed_rnd].options.starting_panorama&&(t=~~e.cache.obj.tours[Je.tour_rnd].embed[Je.tour_embed_rnd].options.starting_panorama)),"panoramas"in e.cache.obj.tours[Je.tour_rnd]&&t in e.cache.obj.tours[Je.tour_rnd].panoramas&&(o=e.cache.obj.tours[Je.tour_rnd].panoramas[t].cache)),[t,o]},process:function(){t.callInit(function(o){if(!o)return t.processTourEmbedOptions(o),t.processPanorama(o),!1;if("s"in o&&(Je.subscribed=parseInt(o.s,10)),vars.exported&&(Je.subscribed=1),"code"in o)return t.callInitAfterTourNoSuccess(o),!1;if("pc"in o&&(e.cache.obj.tours[Je.tour_rnd].pc=o.pc),!("tour"in o)&&!("tour_embed"in o)&&!("tour_panorama"in o))return t.processTourEmbedOptions(o),t.processPanorama(o),!1;if(!("tour"in o))t.processTourEmbedOptions(o),t.processPanorama(o,Je.actionLon);else if("success"in o.tour)if(o.tour.success)Je.uid=o.tour.tour.uid,Je.tour_cache=o.tour.tour.cache,Je.panoramas_movement.s=parseInt(o.tour.tour.panoramas_movement.s,10),Je.panoramas_movement.v=parseFloat(o.tour.tour.panoramas_movement.v,10),Je.panoramas_interaction_direction.h=parseInt(o.tour.tour.panoramas_interaction_direction.h,10),Je.panoramas_interaction_direction.v=parseInt(o.tour.tour.panoramas_interaction_direction.v,10),e.cache.obj.tours[Je.tour_rnd].tour=o.tour.tour,e.cache.save(),t.processTourEmbedOptions(o),t.processPanorama(o,Je.actionLon);else return t.callInitAfterTourNoSuccess(o),!1})},getTourCache:function(){var t=0;return Je.tour_rnd in e.cache.obj.tours&&"tour"in e.cache.obj.tours[Je.tour_rnd]&&"cache"in e.cache.obj.tours[Je.tour_rnd].tour&&(t=e.cache.obj.tours[Je.tour_rnd].tour.cache),t},getPanoramasCache:function(){var t={};if(Je.tour_rnd in e.cache.obj.tours&&"panoramas"in e.cache.obj.tours[Je.tour_rnd])for(var o in e.cache.obj.tours[Je.tour_rnd].panoramas)e.cache.obj.tours[Je.tour_rnd].panoramas[o]&&(t[o]=e.cache.obj.tours[Je.tour_rnd].panoramas[o].cache);return t},getEmbedCache:function(){var t=0;return Je.tour_rnd in e.cache.obj.tours&&"embed"in e.cache.obj.tours[Je.tour_rnd]&&Je.tour_embed_rnd in e.cache.obj.tours[Je.tour_rnd].embed&&"cache"in e.cache.obj.tours[Je.tour_rnd].embed[Je.tour_embed_rnd]&&(t=e.cache.obj.tours[Je.tour_rnd].embed[Je.tour_embed_rnd].cache),t},processTourEmbedOptions:function(t){t?"tour_embed"in t?"ce"in t.tour_embed?(Je.tour_embed_cache=t.tour_embed.ce,"options"in t.tour_embed&&(Je.options=t.tour_embed.options),ze(),e.cache.obj.tours[Je.tour_rnd].embed[Je.tour_embed_rnd].options=Je.options,e.cache.obj.tours[Je.tour_rnd].embed[Je.tour_embed_rnd].cache=Je.tour_embed_cache,e.cache.save()):(Je.options=e.cache.obj.tours[Je.tour_rnd].embed[Je.tour_embed_rnd].options,ze()):(Je.options=e.cache.obj.tours[Je.tour_rnd].embed[Je.tour_embed_rnd].options,ze()):(Je.options=e.cache.obj.tours[Je.tour_rnd].embed[Je.tour_embed_rnd].options,ze())},processPanorama:function(o,a){o?"tour_panorama"in o?"success"in o.tour_panorama&&(e.cache.obj.tours[Je.tour_rnd].panoramas[o.tour_panorama.success.id]=o.tour_panorama.success,e.cache.save(),t.processCached(),t.processPanoramaAfter(o.tour_panorama.success,a,o)):t.processPanoramaAfter(null,a,o):t.processPanoramaAfter(null,a)},processPanoramaAfter:function(o,a,r){if(t.event.trigger("processPanoramaAfterEarly"),Fe(),!o){if(r&&"gt"in r)var i=r.gt._;else{var i=e.cache.obj.tours[Je.tour_rnd].tour.panorama_id;i!==~~Je.options.starting_panorama&&0<~~Je.options.starting_panorama&&(i=~~Je.options.starting_panorama)}i in e.cache.obj.tours[Je.tour_rnd].panoramas&&(o=e.cache.obj.tours[Je.tour_rnd].panoramas[i],r&&"gt"in r&&(o.goTo=r.gt))}if(!o)return G("Panorama not found!"),!1;if(!~~Je.options.autoplay&&!Je.loadedOnce){if(Je.static_image="",!("cover_image_type"in Je.options));else if(1===parseInt(Je.options.cover_image_type,10))Je.static_image=vars.paths.options+"/"+Je.uid+"/"+Je.tour_rnd+"/"+Je.options.cover_image_path+"/"+Je.options.cover_image;else{var s="d";Je.device.isMobile&&(s="m"),Je.static_image=vars.paths.panoramas+"/"+Je.uid+"/"+Je.tour_rnd+"/covers/"+s+"/"+Je.options.cover_image}return!Je.loadedOnce&&!vars.exported&&r&&"pl"in r&&void 0!==r.pl&&(Je.pl_tree=r.pl.tree||{},Je.pl_pids=r.pl.pids||[],Je.pl_resp=r.pl.resp||{}),N(Je.cv,o,a),!1}return!Je.loadedOnce&&!vars.exported&&r&&"pl"in r&&void 0!==r.pl&&(Je.pl_tree=r.pl.tree||{},Je.pl_pids=r.pl.pids||[],Je.pl_resp=r.pl.resp||{}),F(o,a,function(){Je.finishedPanoramaMovement=0,n(),Te(),S(),H({panorama_loaded:o.rnd,lon:Je.lon,lat:Je.lat,fov:Je.current_position.fov,_id:Je.panorama_loaded_mask}),Je.panorama_loaded_mask=void 0}),t.event.trigger("processPanoramaAfter",a),H({panorama:o.rnd}),Je.tr_enabled&&(Je.tr.unshift(new Date().toLocaleString()),Je.tr.unshift(Je.device.isMobile?"m=1":"m=0"),e.fn.ajax.call({url:e.fn.u("api","viewer"),data:Je.tr.join("|"),cache:!1,contentType:!1,processData:!1,sessionCheck:!1}),Je.tr=[]),this},resize:function(e,t,o){return Re(t,o),"function"==typeof e&&e(this),this},toggleProjection:function(e){Ee(e)},toggleAutoRotate:function(e){Je.auto_rotation_enabled=Je.auto_rotation_enabled?0:1,e&&(Je.auto_rotation_enabled=e),Je.auto_rotation_enabled&&(Je.autoRotationDisabledBecauseOfInteraction=0),Pe(),c()},toggleGyroscope:function(){Je.gyroscope?(Je.controls={},Je.gyroscope=0,Je.finishedPanoramaMovement=0):(Je.controls=new THREE.DeviceOrientationControls(Je.camera,e.fn.isInIframe()),Je.gyroscope=1,Je.enable_auto_rotation=0),t.event.trigger("gyroscope",Je.gyroscope)},toggleQuality:function(){if(!Je.current_loaded_panorama_obj)return!1;Z.show();var e="tablet",t="sm",o=T();if(o&&(e="desktop",t="lg"),vars.exported){if("is_demo"in Je.current_loaded_panorama_obj&&Je.current_loaded_panorama_obj.is_demo)var a=vars.paths.panoramas+"/demo/"+Je.current_loaded_panorama_obj.is_demo+"/"+e+"/"+t+"/"+Je.current_loaded_panorama_obj.name;else var a=vars.paths.panoramas+"/"+Je.current_loaded_panorama_obj.uid+"/"+Je.current_loaded_panorama_obj.tour_rnd+"/"+e+"/"+t+"/"+Je.current_loaded_panorama_obj.name;}else if("is_demo"in Je.current_loaded_panorama_obj&&Je.current_loaded_panorama_obj.is_demo)var a=Je.abs_dir_panorama+"/demo/"+Je.current_loaded_panorama_obj.is_demo+"/"+e+"/"+t+"/"+Je.current_loaded_panorama_obj.name;else var a=Je.abs_dir_panorama+"/"+Je.uid+"/"+Je.current_loaded_panorama_obj.tour_rnd+"/"+e+"/"+t+"/"+Je.current_loaded_panorama_obj.name;if(Je.scene&&0<Je.scene.children.length){for(var r=Je.scene.children.length-1;0<=r;r--)if("loaded_panorama"===Je.scene.children[r].name){var n=new THREE.TextureLoader;n.load(a,function(e){e.minFilter=THREE.LinearFilter;var t=new THREE.MeshBasicMaterial({map:e,overdraw:!1,transparent:!0,wireframe:!1});t.blending=THREE.NormalBlending,Je.scene.children[r].material.map.dispose(),Je.scene.children[r].material.map=e,Je.scene.children[r].material.needsUpdate=!0,Z.hide()},function(){Z.hide()});break}}else Z.show()},toggleHotspots:function(){Je.options.hotspots_display=Je.options.hotspots_display?0:1,M()},toggleVr:function(o){Je.vr=Je.vr?0:1,null!=o&&(Je.vr=o),t.event.trigger("toggleVr",Je.vr),Je.vr?Je.device.isMobile&&(Be(),$("#tooltip").hide(),Je.enable_auto_rotation=0,Je.vr_enabled=Je.current_position.fov,!Je.gyroscope&&(Je.controls=new THREE.DeviceOrientationControls(Je.camera,e.fn.isInIframe())),Je.clock=new THREE.Clock(!1),Je.target_num=0,Je.viewer_left_target.css({left:$(window).width()/4-Je.viewer_left_target.width()/2,display:"block"}),Je.viewer_right_target.css({left:$(window).width()/2+$(window).width()/2/2-Je.viewer_right_target.width()/2,display:"block"})):(Je.device.isMobile&&(Le(),Je.linked_to_other_panorama&&(Je.current_position.fov=l(),Je.camera.fov=l()),Je.vr_enabled=0,Je.viewer_left_target.hide(),Je.viewer_right_target.hide(),Je.target_num=0,Je.target=null,Je.clock=0,!Je.gyroscope&&(Je.controls={},Je.enable_auto_rotation=1,Je.finishedPanoramaMovement=0)),window.setTimeout(function(){s()},100)),at(),Re()},toggleFullScreen:function(){Oe()},setTemporarilyFullScreen:function(){Be()},unsetTemporarilyFullScreen:function(){Le()},hotovi:function(){q()},init:function(e,t,o,a){F(e,t,o,a)},processAutoRotation:function(){Te()},animateProcessObjects:function(e){e?(isNaN(e)&&(e=100),window.setTimeout(function(){s()},e)):s()},panoramas:function(){var t={},o=Je.tour_rnd,a=Je.user_random_uid;if("tour"in e.cache.obj.tours[o]&&"panoramas"in e.cache.obj.tours[o].tour&&e.cache.obj.tours[o].tour.panoramas.length)for(var r="",s=0,d=e.cache.obj.tours[o].tour.panoramas.length;s<d;s++)r="",r="is_demo"in e.cache.obj.tours[o].tour.panoramas[s]&&e.cache.obj.tours[o].tour.panoramas[s].is_demo?vars.paths.panoramas+"/demo/"+e.cache.obj.tours[o].tour.panoramas[s].is_demo+"/thumbnails/"+e.cache.obj.tours[o].tour.panoramas[s].thumbnail:vars.paths.panoramas+"/"+a+"/"+o+"/thumbnails/"+e.cache.obj.tours[o].tour.panoramas[s].thumbnail,t[e.cache.obj.tours[o].tour.panoramas[s].prnd]={thumbnail:r,title:e.cache.obj.tours[o].tour.panoramas[s].title,lat:e.cache.obj.tours[o].tour.panoramas[s].lat,lng:e.cache.obj.tours[o].tour.panoramas[s].lng,rnd:e.cache.obj.tours[o].tour.panoramas[s].prnd};return t},vars:{get:function(e){var t=e.split(".");return 3===t.length?Je[t[0]][t[1]][t[2]]:2===t.length?Je[t[0]][t[1]]:1===t.length?Je[t[0]]:void 0},set:function(e,t){var o=e.split(".");return 3===o.length?Je[o[0]][o[1]][o[2]]=t:2===o.length?Je[o[0]][o[1]]=t:1===o.length&&(Je[o[0]]=t),this}}},o=function(e,t){if(!t)return!1;if(t){if("shape"===Je.objects[t].data.type||"line"===Je.objects[t].data.type||"arrow"===Je.objects[t].data.type)return!1;Je.objects[t].data.flip_x?Je.objects[t].scale.set(-e,e,e):Je.objects[t].scale.set(e,e,e),"text3d"===Je.objects[t].data.type&&ge.update.text3dHelper(t,!0)}},a=null,r=0,i=function(){if(!Je.loadedOnce&&Je.auto_rotation.delay&&0===r?!a&&(a=window.requestTimeout(function(){r=1,window.clearRequestTimeout(a),a=null},1e3*Je.auto_rotation.delay)):(r||0>=Je.auto_rotation.delay)&&d(),Je.loadingPanorama&&(Je.finishedPanoramaMovement=0),(Je.vr||Je.gyroscope)&&(Je.finishedPanoramaMovement=0),Je.finishedPanoramaMovement||(Je.panoramas_movement.s&&!Je.noSmoothMovement?(~~Je.current_position.x==~~Je.camera.target.x?He():(Je.camera.target.x+=(Je.current_position.x-Je.camera.target.x)*Je.panoramas_movement.v,We(),t.event.trigger("animate")),~~Je.current_position.y!=~~Je.camera.target.y&&(Je.camera.target.y+=(Je.current_position.y-Je.camera.target.y)*Je.panoramas_movement.v),~~Je.current_position.z!=~~Je.camera.target.z&&(Je.camera.target.z+=(Je.current_position.z-Je.camera.target.z)*Je.panoramas_movement.v)):(Je.camera.target.x=Je.current_position.x,Je.camera.target.z=Je.current_position.z,Je.camera.target.y=Je.current_position.y,He()),Je.camera.fov=Je.current_position.fov,Je.camera.lookAt(Je.camera.target),Je.w&&Je.w.position.set(Je.camera.target.x,Je.camera.target.y,Je.camera.target.z),Je.tr_enabled&&Je.tr_full&&Ve(),Je.stats&&Je.stats.update(),Je.rendererstats&&Je.rendererstats.update(Je.renderer)),Je.vr&&Je.device.isMobile&&!e.fn.is_empty(Je.controls)&&!Je.transition.isActive&&(Je.controls.update(),Je.vr_tracking)){var o=new THREE.Vector3(0,0,-1);o.applyQuaternion(Je.camera.quaternion),o.add(Je.camera.position);var n=new THREE.Raycaster(new THREE.Vector3(Je.camera.rotation.x,Je.camera.rotation.y,Je.camera.rotation.z),o);Je.raycaster.setFromCamera(Je.mouse,Je.stereoEffect._cameraL);var s=be(n);if(0<s.id){var c=s.id,l=Je.objects[c].visible;if(l){var u=!1;Je.objects[c].data.action&&"type"in Je.objects[c].data.action&&"link_to_panorama"===Je.objects[c].data.action.type&&(u=!0);var u=!1;if(Je.objects[c].data.action&&"type"in Je.objects[c].data.action&&"link_to_panorama"===Je.objects[c].data.action.type&&(u=!0),!u)Je.viewer_left_target.find("span").html(""),Je.viewer_right_target.find("span").html(""),Je.viewer_left_target.removeClass("focus"),Je.viewer_right_target.removeClass("focus");else if(!Je.clock.running)Je.clock.start(),Je.viewer_left_target.show(),Je.viewer_right_target.show(),Je.viewer_left_target.addClass("focus"),Je.viewer_right_target.addClass("focus");else{var p=Je.clock.getElapsedTime();Je.viewer_left_target.find("span").html(3-parseInt(p,10)),Je.viewer_right_target.find("span").html(3-parseInt(p,10)),3<=parseInt(p,10)&&(Je.clock.stop(),ge.actions.execute(c),Je.selectedObjectId=0,Je.vr_tracking=0,Je.viewer_left_target.find("span").html(""),Je.viewer_right_target.find("span").html(""))}}}else Je.viewer_left_target.find("span").html(""),Je.viewer_right_target.find("span").html(""),Je.viewer_left_target.removeClass("focus"),Je.viewer_right_target.removeClass("focus"),Je.clock.stop()}Me(),Je.requestAnimationFrameId=window.requestAnimationFrame(i)},n=function(){Je.camera.fov=Je.current_position.fov,Je.camera.updateProjectionMatrix()},s=function(){for(var e in Je.objects){if(!Je.objects[e].transition.scale.request&&~~Je.objects[e].data.scale_auto&&0<Je.objects[e].data.scale_fov){var t=Je.current_position.fov*Je.objects[e].data.scale/Je.objects[e].data.scale_fov;o(t,e)}if("sprite_n"===Je.objects[e].data.type||"sprite_z"===Je.objects[e].data.type||"icon_font_n"===Je.objects[e].data.type||"icon_font_z"===Je.objects[e].data.type||"text_n"===Je.objects[e].data.type||"text_z"===Je.objects[e].data.type||"flare"===Je.objects[e].data.type);else if("text3d"===Je.objects[e].data.type)if(parseInt(Je.objects[e].data.rotation_to_axes.status,10));else if(!parseInt(Je.objects[e].data.transitions.sw.st,10)){var a=new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0,0,1),THREE.Math.degToRad(parseInt(Je.objects[e].data.rotation,10))),r=a.multiplyQuaternions(Je.camera.quaternion,a);Je.objects[e].setRotationFromQuaternion(r),ge.update.text3dHelper(e)}}},d=function(){if(Je.device.isMobile&&Je.gyroscope&&!e.fn.is_empty(Je.controls));else if(Je.device.isMobile&&Je.vr&&!e.fn.is_empty(Je.controls));else if(Je.auto_rotation_enabled&&Je.auto_rotation.status){if(Je.autoRotationTemporarilyDisabled)return!1;if(Je.autoRotationDisabledBecauseOfInteraction)return!1;Je.auto_rotation.direction?Je.lon+=.01*Je.auto_rotation.speed:Je.lon-=.01*Je.auto_rotation.speed,Xe(),s(),_e()}else Fe()},c=function(){Fe(),Je.auto_rotation_enabled&&Je.auto_rotation.status&&(0<Je.auto_rotation.speed&&(Je.auto_rotation.temp_speed=Je.auto_rotation.speed,Je.auto_rotation.speed=0,Fe()),Je.auto_rotation.timeout=window.requestTimeout(function(){Je.auto_rotation.speed=Je.auto_rotation.temp_speed},1e3*Je.auto_rotation.delay))},l=function(){var e=Je.camera.fov;return e},u=function(e,t){if(Je.ex=e,Je.ey=t,Je.vr){var o=Je.rendererWidth;if(e<=o/2)Je.mouse.x=2*(e/(Je.rendererWidth/2))-1,Je.mouse.y=2*-(t/Je.rendererHeight)+1;else{var a=Je.rendererWidth/2-(Je.rendererWidth-e);Je.mouse.x=2*(a/(Je.rendererWidth/2))-1,Je.mouse.y=2*-(t/Je.rendererHeight)+1}}else Je.mouse.x=2*(e/Je.rendererWidth)-1,Je.mouse.y=2*-(t/Je.rendererHeight)+1},p=function(e){if(Je.isFull=parseInt(e.is_full,10),Je.isFull)Je.minEffectiveFov=130,Je.minEffectiveFovTop=Je.minEffectiveFov,Je.minEffectiveFovBottom=Je.minEffectiveFov;else{var t=parseInt(e.heights.original,10),o=parseInt(e.widths.original,10);if("modded_top"in e.heights&&"modded_bottom"in e.heights)var a=parseInt(e.heights.modded_top,10),r=parseInt(e.heights.modded_bottom,10);else{var i=parseInt(e.heights.modded,10),a=(i-t)/2,r=a;Je.minEffectiveFov=360/(o/t),130<Je.minEffectiveFov&&(Je.minEffectiveFov=130)}Je.minEffectiveFovTop=360/(o/(t-(a-r))),130<Je.minEffectiveFovTop&&(Je.minEffectiveFovTop=130),Je.minEffectiveFovBottom=360/(o/(-(t+a)+r)),130<Je.minEffectiveFovBottom&&(Je.minEffectiveFovBottom=130),"modded_top"in e.heights&&"modded_bottom"in e.heights&&(Je.minEffectiveFov=Math.abs(Je.minEffectiveFovTop)<Math.abs(Je.minEffectiveFovBottom)?Je.minEffectiveFovTop:Je.minEffectiveFovBottom)}},m=function(){if("passes"in Je.composer)for(var e=Je.composer.passes.length,t=0,o;t<e;t++){o=Je.composer.passes[t].scene.children.length;for(var a=0;a<o;a++)"material"in Je.composer.passes[t].scene.children[a]&&Je.composer.passes[t].scene.children[a].material&&Je.composer.passes[t].scene.children[a].material.dispose(),"geometry"in Je.composer.passes[t].scene.children[a]&&Je.composer.passes[t].scene.children[a].geometry&&Je.composer.passes[t].scene.children[a].geometry.dispose()}if("copyPass"in Je.composer&&(Je.composer.copyPass.material.dispose(),Je.composer.copyPass&&"quad"in Je.composer.copyPass)){Je.composer.copyPass.quad.geometry.dispose(),"material"in Je.composer.copyPass.quad&&Je.composer.copyPass.quad.material&&Je.composer.copyPass.quad.material.dispose();for(var e=Je.composer.copyPass.scene.children.length,t=0;t<e;t++)Je.composer.copyPass.scene.children[t].geometry.dispose()}"readBuffer"in Je.composer&&("texture"in Je.composer.readBuffer&&Je.composer.readBuffer.texture.dispose(),Je.composer.readBuffer.dispose()),"writeBuffer"in Je.composer&&("texture"in Je.composer.writeBuffer&&Je.composer.writeBuffer.texture.dispose(),Je.composer.writeBuffer.dispose()),"renderTarget1"in Je.composer&&("texture"in Je.composer.renderTarget1&&Je.composer.renderTarget1.texture.dispose(),Je.composer.renderTarget1.dispose()),"renderTarget2"in Je.composer&&("texture"in Je.composer.renderTarget2&&Je.composer.renderTarget2.texture.dispose(),Je.composer.renderTarget2.dispose()),Je.composer.reset()},f=function(){Je.current_loaded_panorama&&("material"in Je.current_loaded_panorama&&("map"in Je.current_loaded_panorama.material&&Je.current_loaded_panorama.material.map.dispose(),Je.current_loaded_panorama.material.dispose()),"geometry"in Je.current_loaded_panorama&&Je.current_loaded_panorama.geometry.dispose(),delete Je.current_loaded_panorama,Je.current_loaded_panorama=null);Je.current_loaded_panoramaWhenNotHavingTMP&&("material"in Je.current_loaded_panoramaWhenNotHavingTMP&&("map"in Je.current_loaded_panoramaWhenNotHavingTMP.material&&Je.current_loaded_panoramaWhenNotHavingTMP.material.map.dispose(),Je.current_loaded_panoramaWhenNotHavingTMP.material.dispose()),"geometry"in Je.current_loaded_panoramaWhenNotHavingTMP&&Je.current_loaded_panoramaWhenNotHavingTMP.geometry.dispose(),delete Je.current_loaded_panoramaWhenNotHavingTMP,Je.current_loaded_panoramaWhenNotHavingTMP=null);Je.current_loaded_panorama_obj&&delete Je.current_loaded_panorama_obj,Je.current_loaded_panoramaWhenNotHavingTMP_obj&&delete Je.current_loaded_panoramaWhenNotHavingTMP_obj},v=function(e,t){var o=0,t=t||0;e&&(o=e);var a=0;for(var r in Je.objects)if(a=0,a=o?t?o===Je.objects[r].pid?0:1:o===Je.objects[r].pid?1:0:1,!!a){if(ge.stopTransitionInterval(r),"PointLight"===Je.objects[r].type&&Je.objects[r].children[0]&&(Je.objects[r].children[0].dispose(),Je.objects[r].children[0].material.dispose(),Je.objects[r].children[0].geometry.dispose()),Je.objects[r]instanceof THREE.Sprite&&Je.objects[r].material.map.dispose(),Je.objects[r]instanceof THREE.Mesh)if("data"in Je.objects[r]&&"text3d"===Je.objects[r].data.type)for(var i=0,s=Je.objects[r].material.length;i<s;i++)Je.objects[r].material[i].map&&Je.objects[r].material[i].map.dispose();else Je.objects[r].material.map&&Je.objects[r].material.map.dispose();if("material"in Je.objects[r]&&!!Je.objects[r].material)if(Je.objects[r].material.constructor===Array)for(var i=0,s=Je.objects[r].material.length;i<s;i++)"map"in Je.objects[r].material[i]&&Je.objects[r].material[i].map&&Je.objects[r].material[i].map.dispose(),"function"==typeof Je.objects[r].material[i].dispose&&Je.objects[r].material[i].dispose();else"map"in Je.objects[r].material&&Je.objects[r].material.map&&Je.objects[r].material.map.dispose(),"function"==typeof Je.objects[r].material.dispose&&Je.objects[r].material.dispose();"geometry"in Je.objects[r]&&Je.objects[r].geometry.dispose(),delete Je.objects[r]}o||(delete Je.objects,Je.objects={})},_=function(){for(var e in Je.shaders)if(Je.shaders[e].material.dispose(),Je.shaders[e].quad&&(Je.shaders[e].quad.geometry.dispose(),Je.shaders[e].quad.material&&Je.shaders[e].quad.material.dispose()),Je.shaders[e].scene)for(var t=Je.shaders[e].scene.children.length,o=0;o<t;o++)Je.shaders[e].scene.children[o].geometry.dispose(),Je.shaders[e].scene.children[o].material&&Je.shaders[e].scene.children[o].material.dispose()},b=function(){h(Je.scene),h(Je.scene_1)},h=function(e){if(e&&0<e.children.length)for(var t=e.children.length-1;0<=t;t--)if("loaded_panorama"===e.children[t].name);else{if("PointLight"===e.children[t].type&&e.children[t].children[0]&&(e.children[t].children[0].dispose(),e.children[t].children[0].material.dispose(),e.children[t].children[0].geometry.dispose()),e.children[t]instanceof THREE.Sprite&&e.children[t].material.map.dispose(),e.children[t]instanceof THREE.Mesh)if("data"in e.children[t]&&"text3d"===e.children[t].data.type)for(var o=0,a=e.children[t].material.length;o<a;o++)e.children[t].material[o].map&&e.children[t].material[o].map.dispose();else e.children[t].material.map&&e.children[t].material.map.dispose();if("material"in e.children[t]&&!!e.children[t].material)if(e.children[t].material.constructor===Array)for(var o=0,a=e.children[t].material.length;o<a;o++)"map"in e.children[t].material[o]&&e.children[t].material[o].map&&e.children[t].material[o].map.dispose(),"function"==typeof e.children[t].material[o].dispose&&e.children[t].material[o].dispose();else"map"in e.children[t].material&&e.children[t].material.map&&e.children[t].material.map.dispose(),"function"==typeof e.children[t].material.dispose&&e.children[t].material.dispose();"geometry"in e.children[t]&&e.children[t].geometry.dispose(),e.remove(e.children[t])}},g=function(e){if(Je.scene&&0<Je.scene.children.length)for(var t=Je.scene.children.length-1,o;0<=t;t--)o=!1,e?Je.scene.children[t].name===e&&(o=!0):("loaded_panorama"===Je.scene.children[t].name||"loaded_panorama_tmp"===Je.scene.children[t].name)&&(o=!0),o&&(Je.scene.children[t]instanceof THREE.Sprite&&Je.scene.children[t].material.map.dispose(),Je.scene.children[t]instanceof THREE.Mesh&&Je.scene.children[t].material.map&&Je.scene.children[t].material.map.dispose(),Je.scene.children[t].material&&Je.scene.children[t].material.dispose(),Je.scene.children[t].geometry&&Je.scene.children[t].geometry.dispose(),Je.scene.remove(Je.scene.children[t]))},j=function(e){var e=e||"default";$("#"+Je.container).css({cursor:e})},x=function(){"0"===e.params.prl||vars.exported||"undefined"==typeof Worker||(Je.ImageLoaderWorker="localhost"===location.hostname||"127.0.0.1"===location.hostname||""===location.hostname?new Worker(vars.paths.static+"/assets/website/js/viewer/workers/image-loader.worker.js"):new Worker(vars.paths.website+"static/assets/website/js/viewer/workers/image-loader.worker.js"),Je.ImageLoaderWorker.addEventListener("message",function(e){const t=e.data,o=URL.createObjectURL(t.blob);Je.panoramasImagesList[t.file]=o,Je.panoramas_list_loaded.push(t.id),Je.pl_incrementor++,Je.panoramas_list[Je.pl_incrementor]&&I()}))},y=function(t){if("0"===e.params.prl||0===e.params.prl)return!1;t||(t=Je.id);var o=[];if(0<Je.pl_pids.length)if("object"==typeof Je.pl_tree&&Je.pl_tree instanceof Object&&t in Je.pl_tree){for(var a in Je.pl_tree[t])o.push(Je.pl_tree[t][a]);var r=2;"full"===e.params.prl&&(r=Je.pl_pids.length);for(var a=0,s=r;a<s;a++)for(var d=0,c=o.length;d<c;d++)if(o[d]in Je.pl_tree)for(var l=0,u=Je.pl_tree[o[d]].length;l<u;l++)Je.pl_tree[o[d]][l]!=t&&(o.includes(Je.pl_tree[o[d]][l])||o.push(Je.pl_tree[o[d]][l]))}else if("object"==typeof Je.pl_tree&&Je.pl_tree instanceof Array&&0>=Je.pl_tree.length)for(var d=0,c=Je.pl_pids.length;d<c;d++)o.push(Je.pl_pids[d]);if(o.length)for(var p=!0,d=0,c=o.length;d<c;d++)if(o[d]in Je.pl_resp){p=!0;for(var a=0,s=Je.pl.length;a<s;a++)if(Je.pl_resp[o[d]].id==Je.pl[a].id){p=!1;break}p&&Je.pl.push(Je.pl_resp[o[d]])}},I=function(){if(Je.ImageLoaderWorker&&"0"!==e.params.prl){var t=!0;if(Je.panoramas_list[Je.pl_incrementor]){t=!0;for(var o=0,a=Je.panoramas_list_loaded.length;o<a;o++)Je.panoramas_list_loaded[o]==Je.panoramas_list[Je.pl_incrementor].id&&(t=!1);t&&Je.ImageLoaderWorker.postMessage(Je.panoramas_list[Je.pl_incrementor])}}},w=function(e){if(e||(e=Je.pl),e&&0<e.length){Je.panoramas_list=[];var t="tablet",o="sm",a=T();a&&(t="desktop",o="lg");for(var r=0,s=e.length;r<s;r++)"is_demo"in e[r]&&e[r].is_demo?Je.panoramas_list.push({id:e[r].id,file:e[r].abs_dir_panorama+"/demo/"+Je.obj.is_demo+"/"+t+"/"+o+"/"+e[r].name}):Je.panoramas_list.push({id:e[r].id,file:e[r].abs_dir_panorama+"/"+e[r].uid+"/"+Je.tour_rnd+"/"+t+"/"+o+"/"+e[r].name})}},k=function(){var e=null;if(Je.scene&&0<Je.scene.children.length)for(var t=Je.scene.children.length-1;0<=t;t--)"loaded_panorama"===Je.scene.children[t].name&&(e=Je.scene.children[t]);return e},T=function(){var e=0;switch(Je.detectedDeviceType){case"tablet":e="opt_tablet"in Je.options?~~Je.options.opt_tablet:0;break;case"phone":e="opt_phone"in Je.options?~~Je.options.opt_phone:0;break;default:e="opt_desktop"in Je.options?~~Je.options.opt_desktop:0;}return e},P=function(e,o){Je.current_position.lat=e,Je.current_position.lon=o,Je.lat=Math.max(-90,Math.min(90,Je.current_position.lat)),Je.lon=Je.current_position.lon,Je.phi=THREE.Math.degToRad(90-Je.current_position.lat),Je.theta=THREE.Math.degToRad(Je.current_position.lon);var a=360*Math.sin(Je.phi)*Math.cos(Je.theta),r=360*Math.cos(Je.phi),i=360*Math.sin(Je.phi)*Math.sin(Je.theta);Je.current_position.x=a,Je.current_position.y=r,Je.current_position.z=i,t.event.trigger("goTo")},z=function(){if(window.location.hash){var e=window.location.hash.substring(1);Je.hashes=e.split(",")}},S=function(){if(Je.hashes.length)for(var e=0,t=Je.hashes.length;e<t;e++)if("vr"===Je.hashes[e]);},R=function(){for(var e in Je.objects)Je.hotspotsDisplay?q(e):Je.objects[e].visible=Je.hotspotsDisplay},M=function(){Je.hotspotsDisplay=!!+parseInt(Je.options.hotspots_display,10),t.event.trigger("hotspotsToggle",Je.hotspotsDisplay),R()},q=function(e){var t=["sprite_z","sprite_n","icon_font_z","icon_font_n","text_z","text_n"];if(!e){for(var o in Je.objects)if(Je.objects[o].default_visible){var a=A(Je.objects[o].data.type,Je.objects[o].data.type_extra),r=-1;r=Je.objects[o].data.action?D(Je.objects[o].data.action_type,Je.objects[o].data.type):1,t.includes(Je.objects[o].data.type)&&(r=1),Je.objects[o].visible=1===a&&1===r}}else if(e in Je.objects&&Je.objects[e].default_visible){var a=A(Je.objects[e].data.type,Je.objects[e].data.type_extra),r=-1;r=Je.objects[e].data.action?D(Je.objects[e].data.action_type,Je.objects[e].data.type):1,t.includes(Je.objects[e].data.type)&&(r=1),Je.objects[e].visible=1===a&&1===r}},D=function(e){var t=-1;return t="link_to_panorama"===e?parseInt(Je.options.hotspots_action_link_to_panorama,10):"link_to_url"===e?parseInt(Je.options.hotspots_action_link_to_external_url,10):"display_video"===e?parseInt(Je.options.hotspots_action_video,10):"display_image"===e?parseInt(Je.options.hotspots_action_image,10):"play_sound"===e?parseInt(Je.options.hotspots_action_sound,10):"display_info_panel"===e?parseInt(Je.options.hotspots_action_info_panel,10):1,t},A=function(e,t){var o=0;return"text_z"===e||"text_n"===e||"icon_font_z"===e||"icon_font_n"===e||"sprite_z"===e||"sprite_n"===e?o=parseInt(Je.options.hotspots_display_nadir_zenith_patch,10):"sprite"===e?o="emoji"===t?parseInt(Je.options.hotspots_type_emoji,10):"flag"===t?parseInt(Je.options.hotspots_type_flag,10):parseInt(Je.options.hotspots_type_image,10):"icon_font"===e?o=parseInt(Je.options.hotspots_type_font,10):"text"===e?o=parseInt(Je.options.hotspots_type_text,10):"text3d"===e?o=parseInt(Je.options.hotspots_type_text3d,10):"flare"===e?o=parseInt(Je.options.hotspots_type_flare,10):"shape"===e?o=parseInt(Je.options.hotspots_type_shape,10):"arrow"===e?o=parseInt(Je.options.hotspots_type_arrow,10):"line"===e?o=parseInt(Je.options.hotspots_type_line,10):void 0,o},F=function(e,o,a,r){Ae(),Je.user_random_uid=e.uid,Je.tr_enabled&&Je.tr.push(e.rnd),Je._isUserInteracting=!1,Je.onMouseDownMouseX=0,Je.onMouseDownMouseY=0,Je.onMouseDownLon=0,Je.onMouseDownLat=0,Je.phi=0,Je.theta=0,Je.minPolarAngle=0,Je.maxPolarAngle=0,Je.viewLimit=1,Je.isFull=1,Je.sx=0,ge.clearInnerAnimations(),Je.mouse={x:0,y:0},Je.id=parseInt(e.id,10),Je.rnd=e.rnd,Object.keys(Je.hotspots_degrees_position).forEach(function(e){delete Je.hotspots_degrees_position[e]}),Object.keys(Je.hotspots_local_position).forEach(function(e){delete Je.hotspots_local_position[e]}),e.level?(Je.panorama_level.x=0,"x"in e.level&&0!==e.level.x&&(Je.panorama_level.x=THREE.Math.degToRad(parseInt(e.level.x,10))),Je.panorama_level.y=0,"y"in e.level&&0!==e.level.y&&(Je.panorama_level.y=THREE.Math.degToRad(parseInt(e.level.y,10))),Je.panorama_level.z=0,"z"in e.level&&0!==e.level.z&&(Je.panorama_level.z=THREE.Math.degToRad(parseInt(e.level.z,10)))):(Je.panorama_level.x=0,Je.panorama_level.y=0,Je.panorama_level.z=0),Je.mouse=new THREE.Vector2,Je.raycaster=new THREE.Raycaster,o&&"fov"in o?!Je.transition_keep_view&&(Je.current_position.fov=parseInt(o.fov,10)):Je.current_position.fov=parseInt(e.fov,10),Je.pitch={s:parseInt(e.pitch.s,10),u:parseInt(e.pitch.u,10),d:parseInt(e.pitch.d,10)},p(e),Je.current_position.fov>Je.minEffectiveFov&&(Je.current_position.fov=Je.minEffectiveFov);var i=e.zoom_limits.zoom_out||e.zoom_out;(Je.current_position.fov<e.zoom_in||Je.current_position.fov>i)&&(Je.current_position.fov<e.zoom_in?Je.current_position.fov=e.zoom_in:Je.current_position.fov>i&&(Je.current_position.fov=i));var n=document.getElementById(Je.container),s=$("#"+Je.container),d=s.innerWidth(),c=s.innerHeight();if(Je.camera||(Je.camera=new THREE.PerspectiveCamera(Je.current_position.fov,d/c,.1,1e3),Je.camera.target=new THREE.Vector3(0,0,0)),s.height($(window).height()),!Je.renderer&&(Je.supports.webgl&&window.WebGLRenderingContext&&(THEASYS.fn.disableLog(),Je.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),THEASYS.fn.enableLog()),Je.renderer.setPixelRatio(window.devicePixelRatio),Je.renderer.autoClear=!1,Je.renderer.setSize(d,c),Je.renderer.sortObjects=!0,!n.firstChild)){for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(Je.renderer.domElement)}if(Je.stereoEffect?Je.stereoEffect.resetComposers():Je.stereoEffect=new THREE.StereoEffect(Je.renderer),Re(),Je.loadedOnce||b(),Je.scene||(Je.scene=new THREE.Scene),Je.scene_1||(Je.scene_1=new THREE.Scene),ke(),Je.panorama_enhancements=e.enhancements,Je.effects=e.effects,Je.typefacesLoaded=!1,Je.noSmoothMovement=!0,Je.loadedOnce&&$e(),Je.obj&&delete Je.obj,Je.obj=e,Je.action_view=o,Je.callback=a,Je.callbackSoon=r,!Je.loadedOnce){Se(),Je.transition=new t.transitions(t,Je.renderer);var l=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(Je.options.load_transition_bg_color);l&&(Je.transition.sceneBColor=Je.options.load_transition_bg_color)}else;t.event.trigger("init"),Je.loadedOnce||de(),Ye(function(){0==Je.options.load_transition?oe():te(function(){oe()})})},C=function(){Je.loadedOnce,De(we()),0===Je.panorama_linking_mode&&Je.loadedOnce,i(),"function"==typeof Je.callbackSoon&&Je.callbackSoon()},U=function(){Je.composer&&m(),vars.has_panorama_enhancements&&(Je.composer=new THREE.EffectComposer(Je.renderer),Je.composer.addPass(new THREE.RenderPass(Je.scene,Je.camera))),pe(),me(),L(),Je.vr_tracking=1,Je.loadedOnce||(Je.device.isMobile?"vr_mode_active_on_load_mobile"in Je.options&&~~Je.options.vr_mode_active_on_load_mobile:"vr_mode_active_on_load_desktop"in Je.options&&~~Je.options.vr_mode_active_on_load_desktop&&t.toggleVr(1)),Je.loadedOnce&&Se(),c(),Je.loadedOnce&&(Je.loadedTwice=1),t.event.trigger("panoramaToScene"),Je.loadedOnce?window.requestTimeout(function(){Je.noSmoothMovement=!1},500):Je.noSmoothMovement=!1},E=function(){Je.loadedOnce,Je.loadedOnce=1,s(),"function"==typeof Je.callback&&Je.callback()},O=function(){return!Je.loadedOnce&&void(x(),t.event.trigger("loadedOnce"),$e(),Je.device.isMobile&&"gyroscope_active_on_load"in Je.options&&~~Je.options.gyroscope_active_on_load,Je.request_loadedOnce&&X(Je.request_loadedOnce,{loaded:1}))},B=function(e){if(!e)return!1;var t=-1;if(Je.scene&&0<Je.scene.children.length)for(var o=Je.scene.children.length-1;0<=o;o--)if("oid"in Je.scene.children[o]&&Je.scene.children[o].oid===e){t=0;break}if(0>t)for(var o=Je.scene_1.children.length-1;0<=o;o--)if("oid"in Je.scene_1.children[o]&&Je.scene_1.children[o].oid===e){t=1;break}return 0==t?Je.scene:1===t&&Je.scene_1},L=function(){if(1===Je.keyboardEventsLoaded)return!1;if(Je.keyboardEventsLoaded=1,!Je.editing&&!~~Je.options.movement_via_keyboard)return!1;var o=$("#"+Je.container);o.on("keydown",function(a){return(!Je.editing||~~Je.options.movement_via_keyboard)&&void(a.preventDefault(),37===a.which&&o.is(":focus")&&t.move("left"),39===a.which&&o.is(":focus")&&t.move("right"),38===a.which&&o.is(":focus")&&t.move("up",a.shiftKey),40===a.which&&o.is(":focus")&&t.move("down"))})},V=function(){window.addEventListener("message",Y)},Y=function(t){if("data"in t&&"type"in t.data)switch(t.data.type){case"vr":break;case"gyroscope":THEASYS.renderer.toggleGyroscope();break;case"loaded":Je.request_loadedOnce=t,Je.loadedOnce&&X(Je.request_loadedOnce,{loaded:1});break;case"deviceorientation":(Je.vr||Je.gyroscope)&&Je.controls&&"function"==typeof Je.controls.setEvent&&Je.controls.setEvent(t.data.deviceorientationEvent);break;case"api":if("action"in t.data&&"key"in t.data){var o=t.data.key;"get"===t.data.action?e.api.engine.execute(t.data.action,o,null,function(e){X(t,e)},"mask"in t.data?t.data.mask:void 0):"set"===t.data.action&&"value"in t.data&&(e.api.engine.execute(t.data.action,o,t.data.value,function(){},"mask"in t.data?t.data.mask:void 0),"panorama"===o&&(Je.panorama_loaded_mask="mask"in t.data?t.data.mask:void 0),H({[o]:t.data.value,_id:"mask"in t.data?t.data.mask:void 0}))}break;default:}},X=function(e,t,o){o||(o="*"),e&&e.source.postMessage(t,o)},H=function(e){Je.loadedOnce&&(!("_id"in e)&&(e._id=void 0),X(Je.request_loadedOnce,e))},W=function(){var e=document.getElementById("editing");e&&(Je.editingInterval=setInterval(function(){if(""!==e.value){var o;try{o=JSON.parse(e.value)}catch(e){}"object"==typeof o&&t.listenToEdits(o),e.value=""}},100))},N=function(e,o,a){t.event.trigger("loadStaticScreen",e,o,a)},G=function(e){t.event.trigger("loadErrorScreen",e)},Q=function(){t.event.trigger("loadPrivateScreen")},Z={show:function(){t.event.trigger("loader","show")},hide:function(){t.event.trigger("loader","hide")}},K=function(e,t){if(e in Je.loadedFonts)return"function"==typeof t&&t(Je.loadedFonts[e]),!1;var o={helvetiker:"helvetiker_regular.typeface.json",helvetiker_bold:"helvetiker_bold.typeface.json",optimer:"optimer_regular.typeface.json",optimer_bold:"optimer_bold.typeface.json",gentilis:"gentilis_regular.typeface.json",gentilis_bold:"gentilis_bold.typeface.json",droid_sans:"droid/droid_sans_regular.typeface.json",droid_sans_bold:"droid/droid_sans_bold.typeface.json",droid_serif:"droid/droid_serif_regular.typeface.json",droid_serif_bold:"droid/droid_serif_bold.typeface.json",ancientHellenic:"ancientHellenic.typeface.json"},a=o.helvetiker;e in o&&(a=o[e]);var r=new THREE.FontLoader(Je.loadingManager);r.load(vars.paths.js+"/editor/threejs/fonts/"+a,function(o){Je.loadedFonts[e]=o,"function"==typeof t&&t(o)},function(){},function(){})},J=function(){Je.abs_dir_panorama=Je.obj.abs_dir_panorama;var e="tablet",t="sm",o=T();o&&(e="desktop",t="lg"),Je.texture_path_q=vars.exported?"is_demo"in Je.obj&&Je.obj.is_demo?vars.paths.panoramas+"/demo/"+Je.obj.is_demo+"/"+e+"/"+t+"/"+Je.obj.name:vars.paths.panoramas+"/"+Je.obj.uid+"/"+Je.obj.tour_rnd+"/"+e+"/"+t+"/"+Je.obj.name:"is_demo"in Je.obj&&Je.obj.is_demo?Je.obj.abs_dir_panorama+"/demo/"+Je.obj.is_demo+"/"+e+"/"+t+"/"+Je.obj.name:Je.obj.abs_dir_panorama+"/"+Je.obj.uid+"/"+Je.obj.tour_rnd+"/"+e+"/"+t+"/"+Je.obj.name},ee=function(e){Je.loadedOnce&&0===Je.panorama_linking_mode&&(b(),v()),$("#tooltips").html(""),ot(function(){ge.load(Je.obj.objects,function(){for(var t in Je.loadedOnce&&b(),Je.objects)Je.objects[t].visible=!1,0===Je.objects[t].data.scene?Je.scene.add(Je.objects[t]):Je.scene_1.add(Je.objects[t]);s(),"function"==typeof e&&e()})})},te=function(e){var t=new THREE.TextureLoader;if(""!==Je.static_image){var o=document.getElementById("psi");if(o){var a=o.toDataURL("image/jpeg");t.load(a,function(t){t.minFilter=THREE.LinearFilter,Je.transition.sceneBTexture=t,"function"==typeof e&&e()})}else"function"==typeof e&&e()}else"function"==typeof e&&e()},oe=function(){J(),ee(function(){Je.loadedOnce?0===Je.panorama_linking_mode?re(Je.transition_notmp):ie(Je.transition_notmp):0==Je.options.load_transition?re(Je.options.load_transition_notmp):ie(Je.options.load_transition_notmp)})},ae=function(){var e=!1;if(Je.geometry){var t=THREE.Math.degToRad(Ie(Je.obj.phi_start));Je.geometry.parameters.phiStart!==t&&(e=!0),e||Je.geometry.parameters.thetaStart===parseFloat(Je.obj.vertical_offset,10)||(e=!0)}e&&(Je.geometry.dispose(),Je.geometry=null),Je.geometry||(Je.geometry=new THREE.SphereGeometry(360,180,90,THREE.Math.degToRad(Ie(Je.obj.phi_start)),2*Math.PI,parseFloat(Je.obj.vertical_offset,10)),Je.geometry.applyMatrix(new THREE.Matrix4().makeScale(-1,1,1)))},re=function(){Ae(),Je.autoRotationTemporarilyDisabled=!0,Je.lockScreen=!1,g("loaded_panorama"),f(),Je.panorama_stack=Je.obj.name,le(function(){C(),U(),R(),ce(),O(),""!==Je.panorama_stack&&(ke(),Je.camera.updateProjectionMatrix()),g("loaded_panorama_tmp"),E(),Z.hide(),Je.autoRotationTemporarilyDisabled=!1})},ie=function(){Ae(),Je.autoRotationTemporarilyDisabled=!0,ae();var e=new THREE.TextureLoader;e.load(ue(),function(e){e.minFilter=THREE.LinearFilter;var t=new THREE.MeshBasicMaterial({map:e,overdraw:!1,transparent:!0,wireframe:!1});t.blending=THREE.NormalBlending,Je.lockScreen=!1;var o=new THREE.Mesh(Je.geometry,t);o.name="loaded_panorama",0!==Je.panorama_level.x&&(o.rotation.x=Je.panorama_level.x),0!==Je.panorama_level.y&&(o.rotation.y=Je.panorama_level.y),0!==Je.panorama_level.z&&(o.rotation.z=Je.panorama_level.z);var a=Je.camera.fov;C(),g("loaded_panorama"),Je.scene.add(o),Je.current_loaded_panoramaWhenNotHavingTMP=o,Je.current_loaded_panoramaWhenNotHavingTMP_obj=Je.obj,U(),R();var r=Je.camera.clone();if(r.current_fov=a,Je.transition_keep_view&&(r.fov=a,Je.camera.fov=a),ne(o.clone(),r),ke(),Je.transition_keep_view){var i=je(a);Je.current_position.fov=i,Je.camera.fov=Je.current_position.fov}Je.camera.updateProjectionMatrix(),Je.panorama_stack=Je.obj.name})},ne=function(e,t){if(!(Je.action_view&&"link_to_panorama"===Je.action_view.type)){var o=THEASYS.fn.latLonToXYZ(parseFloat(Je.obj.default_view.lat,10),parseFloat(Je.obj.default_view.lon,10)),a=parseInt(Je.obj.fov,10);Je.transition_keep_view&&(a=parseInt(Je.camera.fov,10)),!Je.loadedOnce&&""!==Je.tour_embed_share_id&&Je.obj.goTo&&(o=THEASYS.fn.latLonToXYZ(parseFloat(Je.obj.goTo.a,10),parseFloat(Je.obj.goTo.s,10)),a=parseInt(Je.obj.goTo.y,10)),a=je(a),Je.vr&&(a=l()),t.target=new THREE.Vector3(o.x,o.y,o.z),t.fovGo=a}else if(!Je.transition_keep_view){var o=THEASYS.fn.latLonToXYZ(parseFloat(Je.action_view.lat,10),parseFloat(Je.action_view.lon,10)),a=parseInt(Je.action_view.fov,10);a=je(a),Je.vr&&(a=l()),a+=0,t.target=new THREE.Vector3(o.x,o.y,o.z),t.fovGo=a}Je.transition.createScene("A",t),Je.transition.sceneA.add(e),Je.transition.createScene("B"),Je.loadedOnce?(Je.transition.sceneB_useBackground=!1,Je.transition.sceneB.add(Je.current_loaded_panorama),Je.transition.set(Je.panorama_linking_mode,Je.vr),Je.transition.onStop=function(){Je.transition_notmp?(Je.current_loaded_panorama=Je.current_loaded_panoramaWhenNotHavingTMP,Je.current_loaded_panorama_obj=Je.current_loaded_panoramaWhenNotHavingTMP_obj,Je.autoRotationTemporarilyDisabled=!1):se(function(){Je.autoRotationTemporarilyDisabled=!1}),ce(),Je.transition.destroy()}):(Je.transition.sceneB_useBackground=!0,Je.transition.set(Je.options.load_transition,Je.vr),Je.transition.onStop=function(){Je.options.load_transition_notmp?(Je.current_loaded_panorama=Je.current_loaded_panoramaWhenNotHavingTMP,Je.current_loaded_panorama_obj=Je.current_loaded_panoramaWhenNotHavingTMP_obj,Je.autoRotationTemporarilyDisabled=!1,ce(),O(),Je.loadedOnce=1):se(function(){Je.autoRotationTemporarilyDisabled=!1}),Je.transition.destroy(),Je.loaded_static_image=null,Je.static_image="",$("#psi").remove(),Z.hide()}),Z.hide(),Je.transition.start(),e.geometry.dispose(),e.material.map.dispose(),e.material.dispose(),e=null},se=function(e){var t=new THREE.TextureLoader;t.load(ue(),function(t){if(Je.panorama_stack!==Je.obj.name)return!1;t.minFilter=THREE.LinearFilter;var o=new THREE.MeshBasicMaterial({map:t,overdraw:!1,transparent:!0,wireframe:!1});o.blending=THREE.NormalBlending;var a=new THREE.Mesh(Je.geometry,o);a.name="loaded_panorama",0!==Je.panorama_level.x&&(a.rotation.x=Je.panorama_level.x),0!==Je.panorama_level.y&&(a.rotation.y=Je.panorama_level.y),0!==Je.panorama_level.z&&(a.rotation.z=Je.panorama_level.z),Je.scene.add(a),f(),Je.current_loaded_panorama=a,Je.current_loaded_panorama_obj=Je.obj,Z.hide(),g("loaded_panorama_tmp"),ce(),Je.loadedOnce||Je.options.load_transition_notmp||(O(),Je.loadedOnce=1),E(),Z.hide(),"function"==typeof e&&e()})},de=function(){j("progress"),Je.linked_to_other_panorama=1,Je.autoRotationBeforeAction=Je.enable_auto_rotation,Je.enable_auto_rotation=0,Fe(),ge.stopTransitions(),Je.isUserInteracting=!1,Je.isObjectInteracting=!1,Je.blockPanoramaMovement=!1,Je.loadingPanorama=1,Je.previous_id=Je.id,Z.show(),t.event.trigger("loadingPanorama")},ce=function(){Je.loadingPanorama=0,Je.deg=THEASYS.fn.xyzToDeg(Je.current_position.x,Je.current_position.y,Je.current_position.z),We(),fe(),j("default"),Z.hide(),_e(),t.event.trigger("loadedPanorama")},le=function(e){ae();var t=new THREE.TextureLoader;t.load(ue(),function(t){t.minFilter=THREE.LinearFilter;var o=new THREE.MeshBasicMaterial({map:t,overdraw:!1,transparent:!0,wireframe:!1});o.blending=THREE.NormalBlending;var a=new THREE.Mesh(Je.geometry,o);a.name="loaded_panorama",0!==Je.panorama_level.x&&(a.rotation.x=Je.panorama_level.x),0!==Je.panorama_level.y&&(a.rotation.y=Je.panorama_level.y),0!==Je.panorama_level.z&&(a.rotation.z=Je.panorama_level.z),Je.scene.add(a),Je.current_loaded_panorama=a,Je.current_loaded_panorama_obj=Je.obj,Je.current_loaded_panoramaWhenNotHavingTMP=a,Je.current_loaded_panoramaWhenNotHavingTMP_obj=Je.obj,"function"==typeof e&&e()})},ue=function(){return Je.panoramasImagesList[Je.texture_path_q]?Je.panoramasImagesList[Je.texture_path_q]:Je.texture_path_q},pe=function(e){if(_(),!vars.has_panorama_enhancements)return!1;if(!Je.panorama_enhancements)return!1;if(e||(e=Je.composer),!e)return!1;Je.loadingEffects=1;var t=$("#"+Je.container);if("blur"in Je.effects&&0!==parseFloat(Je.effects.blur.value,10)&&(Je.shaders.hblur=new THREE.ShaderPass(THREE.HorizontalBlurShader),Je.shaders.hblur.value=parseFloat(Je.effects.blur.value,10),Je.shaders.hblur.uniforms.h.value=parseFloat(Je.effects.blur.value,10)/t.outerWidth(),e.addPass(Je.shaders.hblur),Je.shaders.vblur=new THREE.ShaderPass(THREE.VerticalBlurShader),Je.shaders.vblur.value=parseFloat(Je.effects.blur.value,10),Je.shaders.vblur.uniforms.v.value=parseFloat(Je.effects.blur.value,10)/t.outerHeight(),e.addPass(Je.shaders.vblur)),"colorcorrection"in Je.effects){var o=!1;"rPower"in Je.effects.colorcorrection&&1!==parseFloat(Je.effects.colorcorrection.rPower,10)&&(o=!0),"gPower"in Je.effects.colorcorrection&&1!==parseFloat(Je.effects.colorcorrection.gPower,10)&&(o=!0),"bPower"in Je.effects.colorcorrection&&1!==parseFloat(Je.effects.colorcorrection.bPower,10)&&(o=!0),o&&(Je.shaders.colorcorrection=new THREE.ShaderPass(THREE.RgbShader),Je.shaders.colorcorrection.uniforms.rPower.value=parseFloat(Je.effects.colorcorrection.rPower,10),Je.shaders.colorcorrection.uniforms.gPower.value=parseFloat(Je.effects.colorcorrection.gPower,10),Je.shaders.colorcorrection.uniforms.bPower.value=parseFloat(Je.effects.colorcorrection.bPower,10),e.addPass(Je.shaders.colorcorrection))}"noise"in Je.effects&&0!==parseFloat(Je.effects.noise.value,10)&&(Je.shaders.noise=new THREE.ShaderPass(THREE.NoiseShader),Je.shaders.noise.uniforms.amount.value=parseFloat(Je.effects.noise.value,10),e.addPass(Je.shaders.noise)),"rgbshift"in Je.effects&&0!==parseFloat(Je.effects.rgbshift.value,10)&&(Je.shaders.rgbshift=new THREE.ShaderPass(THREE.RGBShiftShader),Je.shaders.rgbshift.uniforms.amount.value=parseFloat(Je.effects.rgbshift.value,10),e.addPass(Je.shaders.rgbshift)),"sepia"in Je.effects&&0!==parseFloat(Je.effects.sepia.value,10)&&(Je.shaders.sepia=new THREE.ShaderPass(THREE.SepiaShader),Je.shaders.sepia.uniforms.amount.value=parseFloat(Je.effects.sepia.value,10),e.addPass(Je.shaders.sepia)),"contrast"in Je.effects&&0!==parseFloat(Je.effects.contrast.value,10)&&(Je.shaders.contrast=new THREE.ShaderPass(THREE.ContrastShader),Je.shaders.contrast.uniforms.amount.value=parseFloat(Je.effects.contrast.value,10),e.addPass(Je.shaders.contrast)),"hue"in Je.effects&&0!==parseFloat(Je.effects.hue.value,10)&&(Je.shaders.hue=new THREE.ShaderPass(THREE.HueShader),Je.shaders.hue.uniforms.amount.value=parseFloat(Je.effects.hue.value,10),e.addPass(Je.shaders.hue)),"saturation"in Je.effects&&0!==parseFloat(Je.effects.saturation.value,10)&&(Je.shaders.saturation=new THREE.ShaderPass(THREE.SaturationShader),Je.shaders.saturation.uniforms.amount.value=parseFloat(Je.effects.saturation.value,10),e.addPass(Je.shaders.saturation)),"bleachbypass"in Je.effects&&0!==parseFloat(Je.effects.bleachbypass.value,10)&&(Je.shaders.bleachbypass=new THREE.ShaderPass(THREE.BleachBypassShader),Je.shaders.bleachbypass.uniforms.opacity.value=parseFloat(Je.effects.bleachbypass.value,10),e.addPass(Je.shaders.bleachbypass)),"brightness"in Je.effects&&1!==parseFloat(Je.effects.brightness.value,10)&&(Je.shaders.brightness=new THREE.ShaderPass(THREE.BrightnessShader),Je.shaders.brightness.uniforms.amount.value=parseFloat(Je.effects.brightness.value,10),e.addPass(Je.shaders.brightness)),"exposure"in Je.effects&&1!==parseFloat(Je.effects.exposure.value,10)&&(Je.shaders.exposure=new THREE.ShaderPass(THREE.ExposureShader),Je.shaders.exposure.uniforms.amount.value=parseFloat(Je.effects.exposure.value,10),e.addPass(Je.shaders.exposure)),"gamma"in Je.effects&&1!==parseFloat(Je.effects.gamma.value,10)&&(Je.shaders.gamma=new THREE.ShaderPass(THREE.GammaCorrectionShader),Je.shaders.gamma.uniforms.amount.value=parseFloat(Je.effects.gamma.value,10),e.addPass(Je.shaders.gamma)),"vignette"in Je.effects&&0!==parseFloat(Je.effects.vignette.value,10)&&(Je.shaders.vignette=new THREE.ShaderPass(THREE.VignetteShader),Je.shaders.vignette.uniforms.offset.value=1,Je.shaders.vignette.uniforms.darkness.value=parseFloat(Je.effects.vignette.value,10),e.addPass(Je.shaders.vignette)),"sharpness"in Je.effects&&0!==parseFloat(Je.effects.sharpness.value,10)&&(Je.shaders.sharpness=new THREE.ShaderPass(THREE.SharpnessShader),Je.shaders.sharpness.uniforms.vw.value=parseFloat(Je.effects.sharpness.value,10)/t.outerWidth(),Je.shaders.sharpness.uniforms.vh.value=parseFloat(Je.effects.sharpness.value,10)/t.outerHeight(),e.addPass(Je.shaders.sharpness)),"vibrance"in Je.effects&&0!==parseFloat(Je.effects.vibrance.value,10)&&(Je.shaders.vibrance=new THREE.ShaderPass(THREE.VibranceShader),Je.shaders.vibrance.uniforms.amount.value=parseFloat(Je.effects.vibrance.value,10),e.addPass(Je.shaders.vibrance)),"temp"in Je.effects&&0!==parseFloat(Je.effects.temp.value,10)&&(Je.shaders.temp=new THREE.ShaderPass(THREE.TempShader),Je.shaders.temp.uniforms.amount.value=parseFloat(Je.effects.temp.value,10),e.addPass(Je.shaders.temp)),"tint"in Je.effects&&0!==parseFloat(Je.effects.tint.value,10)&&(Je.shaders.tint=new THREE.ShaderPass(THREE.TempShader),Je.shaders.tint.uniforms.tint.value=parseFloat(Je.effects.tint.value,10),e.addPass(Je.shaders.tint)),Je.shaders.copy=new THREE.ShaderPass(THREE.CopyShader),Je.shaders.copy.renderToScreen=!0,e.addPass(Je.shaders.copy),Je.loadingEffects=0},me=function(){if(1===Je.mouseEventsLoaded)return!1;if(Je.mouseEventsLoaded=1,!Je.editing&&!~~Je.options.movement_via_mouse)return!1;var o=document.getElementById("viewer");if(Je.device.isMobile){var a=new Hammer.Manager(o);a.add(new Hammer.Tap({})),a.add(new Hammer.Press({time:251})),a.add(new Hammer.Pan({direction:Hammer.DIRECTION_ALL,threshold:10})),a.add(new Hammer.Pinch({threshold:0})).recognizeWith([a.get("pan")]),a.add(new Hammer.Tap({event:"doubletap",taps:2})),a.on("pinch",function(e){return!!~~Je.options.zoom_touch&&void(1>e.scale?t.move("out",e.scale):t.move("in",e.scale),Je.interaction=!0)}),a.on("press",function(e){if(Je.lockScreen)return!1;if(!Je.device.isMobile)return!1;if(e.pointers[0]){Je.interaction=!0;var o,a;o=e.pointers[0].clientX,a=e.pointers[0].clientY,u(o,a),Je.raycaster.setFromCamera(Je.mouse,Je.camera);var r=be();if(0<r.id){var i=r.id,n=Je.objects[i].visible;if(n){parseInt(Je.options.hotspots_display_tooltips,10)&&(Je.objects_tooltip[i]&&t.trigger.event("panoramaPress",i,0),Je.action_pressed=!0,Je.isUserInteracting=!1)}}}}),a.on("tap",function(e){if(Je.lockScreen)return!1;if(Je.action_pressed)return!1;if(!Je.isUserInteracting)return!1;if(Je.interaction=!0,$e(),et(),e.pointers[0]){var t,o;t=e.pointers[0].clientX,o=e.pointers[0].clientY,u(t,o),Je.raycaster.setFromCamera(Je.mouse,Je.camera);var a=be();if(0<a.id){var r=a.id,i=Je.objects[r].visible;i&&(Je.selectedObjectId=r,ge.actions.execute(Je.selectedObjectId))}}}),Hammer(o).on("doubletap",function(){t.move("in",30)})}$(Je.renderer.domElement).off("mousedown").off("mousemove").off("mouseup").off("mousewheel").off("click"),$(Je.renderer.domElement).on("touchstart mousedown",function(e){if(Je.lockScreen)return!1;if(Je.editing&&!~~Je.options.movement_via_mouse)return!1;Je.interaction=!0,$e(),et(),~~Je.loadedOnce&&e.preventDefault(),Ce(),Fe();var t,o;if("touchstart"===e.type)e.originalEvent.touches.length&&(t=e.originalEvent.touches[0].clientX,o=e.originalEvent.touches[0].clientY);else{if(1!==e.which)return!1;t=e.offsetX,o=e.offsetY}Je.isUserInteracting=!0,u(t,o),Je.vr?Je.raycaster.setFromCamera(Je.mouse,Je.stereoEffect._cameraL):Je.raycaster.setFromCamera(Je.mouse,Je.camera);var a=k();if(a){var r=Je.raycaster.intersectObject(a);if(r.length){var i=r[0].point;Je.xyzClick.x=i.x,Je.xyzClick.y=i.y,Je.xyzClick.z=i.z}}var n=be();if(0<n.id){var s=n.id,d=Je.objects[s].visible;d&&(Je.selectedObjectId=s)}Je.onPointerDownPointerX=t,Je.onPointerDownPointerY=o,Je.ex=t,Je.ey=o,Je.onPointerDownLon=Je.panoramas_interaction_direction.h?360-parseFloat(Je.lon,10):parseFloat(Je.lon,10),Je.onPointerDownLat=Je.panoramas_interaction_direction.v?-1*parseFloat(Je.lat,10):parseFloat(Je.lat,10),$("#"+Je.container).focus(),Je.deg=THEASYS.fn.xyzToDeg(Je.current_position.x,Je.current_position.y,Je.current_position.z)}).on("touchmove mousemove",function(e){if(Je.editing&&!~~Je.options.movement_via_mouse)return!1;Je.interaction=!0,~~Je.loadedOnce&&e.preventDefault(),Je.onPointerDownLon!=Je.lon&&(Je.selectedObjectId=0);var t,o;"touchmove"===e.type?e.originalEvent.touches.length&&(t=e.originalEvent.touches[0].clientX,o=e.originalEvent.touches[0].clientY):(t=e.offsetX,o=e.offsetY),_e(t,o,e),Qe(e),fe()}),$(Je.renderer.domElement).parent().on("touchend mouseup",function(e){if(Je.lockScreen)return!1;if(Je.editing&&!~~Je.options.movement_via_mouse)return!1;if(~~Je.loadedOnce&&e.preventDefault(),Je.interaction=!1,Je.isUserInteracting=!1,Je.isObjectInteracting=!1,Je.blockPanoramaMovement=!1,!(0<Je.selectedObjectId))Je.isPanoramaMoved||2!==Je.panorama_linking_mode;else if(!Je.action_pressed){if("desktop"!==Je.detectedDeviceType)return!1;ge.actions.execute(Je.selectedObjectId),Je.selectedObjectId=0}if(0>=Je.selectedObjectId&&"nav_mouse"in Je.options&&~~Je.options.nav_mouse&&"nav_mouse_anywhere_click"in Je.options&&~~Je.options.nav_mouse_anywhere_click&&!Je.isPanoramaMoved){var o=ve();ge.actions.execute(o),Je.selectedObjectId=0}Je.isPanoramaMoved=!1,t.event.trigger("panoramaMouseUp",e),Je.action_pressed=!1,Je.loadingPanorama||j("default"),c(),window.setTimeout(function(){s()},100),et()}).on("mousewheel",function(t){return!Je.lockScreen&&(!Je.editing||~~Je.options.movement_via_mouse)&&!!~~Je.options.zoom_mouse_wheel&&void(Je.interaction=!0,e.fn.isInIframe()&&!Je.isFullScreen&&0===Je.editing||(Je.loadedOnce&&t.preventDefault(),Je.current_position.fov-=t.deltaY,qe(Je.current_position.fov)),et())}).on("mouseout",function(e){return!Je.lockScreen&&(!Je.editing||~~Je.options.movement_via_mouse)&&void(Je.isUserInteracting=!1,Je.isObjectInteracting=!1,Je.blockPanoramaMovement=!1,Je.interaction=!1,Je.loadedOnce&&e.preventDefault())}).on("click",function(e){$(Je.renderer.domElement).parent().focus(),he(e)})},fe=function(){if(~~Je.options.nav_mouse){Je.raycaster.setFromCamera(Je.mouse,Je.camera);var e=k();if(e){var t=Je.raycaster.intersectObject(e);if(t.length){var o=t[0].point;Je.deg_mouse=THEASYS.fn.xyzToDeg(o.x,o.y,o.z),Je.deg_mouse_vertical=THEASYS.fn.xyzToDeg(o.x,o.y,o.z,1),Je.closestHotspotId=ve(o.x,o.y,o.z)}}}},ve=function(e,t,o){e===void 0&&(e=Je.xyzClick.x),t===void 0&&(t=Je.xyzClick.y),o===void 0&&(o=Je.xyzClick.z);var a=new THREE.Vector3(e,t,o),r=9999999,n=0,s=0;for(var d in Je.objects)if(Je.objects.hasOwnProperty(d)&&1==~~Je.objects[d].data.visible&&"link_to_panorama"===Je.objects[d].data.action_type&&Ze(Je.objects[d])){var s=a.distanceTo(Je.objects[d].position);s<r&&(r=s,n=~~d)}return n},_e=function(e,o,a){if(void 0===e&&(e=Je.ex),void 0===o&&(o=Je.ey),u(e,o),Je.isUserInteracting&&(Je.isPanoramaMoved=!0),Je.raycaster.setFromCamera(Je.mouse,Je.camera),Je.vr){var r=$("#"+Je.container).width();e<=r?Je.raycaster.setFromCamera(Je.mouse,Je.stereoEffect._cameraL):Je.raycaster.setFromCamera(Je.mouse,Je.stereoEffect._cameraR)}else Je.raycaster.setFromCamera(Je.mouse,Je.camera);var i=be(),n=0;return 0<i.id?(n=i.id,!Je.loadingPanorama&&j("default"),n in Je.objects&&Je.objects[n]&&Je.objects[n].data.action?!Je.loadingPanorama&&j("pointer"):!Je.loadingPanorama&&j("default"),t.event.trigger("hotspotIntersection",n,a)):(t.event.trigger("noHotspotIntersection"),!Je.loadingPanorama&&j("default")),n},be=function(e){e||(e=Je.raycaster);var t={id:0,point:null};if(Je.transition.isActive)return t;if(!Object.values(Je.objects)){var o=[];for(var a in Je.objects)Je.objects.hasOwnProperty(a)&&o.push(Je.objects[a]);var r=e.intersectObjects(o,!0);o.length=0}else var r=e.intersectObjects(Object.values(Je.objects),!0);var n=0;if(0<r.length){if(1<r.length)for(var s=0,a=0,d=r.length;a<d;a++)"data"in r[a].object&&r[a].object.data.order>s&&(s=r[a].object.data.order,n=a);t.point=r[n].point,t.id=r[n].object.oid,r[n].object.parent&&("flare"in r[n].object.parent&&(t.id=r[n].object.parent.oid),"arrow"in r[n].object.parent&&(t.id=r[n].object.parent.oid))}return t.id in Je.objects||(t.id=0),t},he=function(e){var t=THEASYS.fn.xyzToLatLon(Je.xyzClick.x,Je.xyzClick.y,Je.xyzClick.z),o=t.lon,a,r;if("touchstart"===e.type)e.originalEvent.touches.length&&(a=e.originalEvent.touches[0].clientX,r=e.originalEvent.touches[0].clientY);else{if(1!==e.which)return!1;a=e.clientX,r=e.clientY}var i=$("#"+Je.container),n=i.outerHeight(),s=i.outerWidth();Je.clickX=a,Je.clickY=r,Je.clickXx=1*(100*a/s/100),Je.clickYy=1*(100*r/n/100)},ge={startTransitionInterval:function(e){return!!(e in Je.objects)&&void(parseInt(Je.objects[e].data.transitions.op.st,10)&&this.startOpacityTransitionInterval(e),parseInt(Je.objects[e].data.transitions.sc.st,10)&&this.startScaleTransitionInterval(e),parseInt(Je.objects[e].data.rotation_to_axes.status,10)?(parseInt(Je.objects[e].data.transitions.swx.st,10)&&this.startRotationXTransitionInterval(e),parseInt(Je.objects[e].data.transitions.swy.st,10)&&this.startRotationYTransitionInterval(e),parseInt(Je.objects[e].data.transitions.swz.st,10)&&this.startRotationZTransitionInterval(e)):parseInt(Je.objects[e].data.transitions.sw.st,10)&&this.startRotationTransitionInterval(e))},stopTransitionInterval:function(e,t){return!!Je.objects&&!!(e in Je.objects)&&void(this.stopOpacityTransitionInterval(e,t),this.stopScaleTransitionInterval(e,t),parseInt(Je.objects[e].data.rotation_to_axes.status,10)?(this.stopRotationXTransitionInterval(e,t),this.stopRotationYTransitionInterval(e,t),this.stopRotationZTransitionInterval(e,t)):this.stopRotationTransitionInterval(e,t))},stopTransitions:function(){for(var e in Je.objects)this.stopTransitionInterval(e)},opacifyPanoramaObject:function(e,t){if(!(e in Je.objects))return!1;if("flare"===Je.objects[e].data.type)return!1;if("arrow"===Je.objects[e].data.type)return Je.objects[e].cone.material.transparent=!0,Je.objects[e].cone.material.opacity=t/100,Je.objects[e].line.material.transparent=!0,Je.objects[e].line.material.opacity=t/100,Je.objects[e].data.opacity=t,!1;if(Je.objects[e].material.opacity=t/100,"text3d"===Je.objects[e].data.type&&"material"in Je.objects[e])for(var o=Je.objects[e].material.length,a=0;a<o;a++)Je.objects[e].material[a].opacity=t/100,Je.objects[e].material[a].transparent=!0,Je.objects[e].material[a].needsUpdate=!0;Je.objects[e].data.opacity=t},set_object_transition_opacity:function(e){if(!(e in Je.objects))return!1;var t=parseInt(Je.objects[e].data.opacity,10),o=parseInt(Je.objects[e].data.transitions.op.v,10);Je.objects[e].transition.opacity.from=t,Je.objects[e].transition.opacity.to=o,Je.objects[e].transition.opacity.dir=Je.objects[e].transition.opacity.from>Je.objects[e].transition.opacity.to?1:0,Je.objects[e].transition.opacity.value=t},object_transition_opacity:function(e){if(!(e in Je.objects))return!1;if(Je.objects[e].transition.opacity.temp_from=Je.objects[e].transition.opacity.from,Je.objects[e].transition.opacity.temp_to=Je.objects[e].transition.opacity.to,Je.objects[e].transition.opacity.temp_from<Je.objects[e].transition.opacity.temp_to){var t=Je.objects[e].transition.opacity.temp_from;Je.objects[e].transition.opacity.temp_from=Je.objects[e].transition.opacity.temp_to,Je.objects[e].transition.opacity.temp_to=t}if(Je.objects[e].transition.opacity.dir||(--Je.objects[e].transition.opacity.value,Je.objects[e].transition.opacity.value<=Je.objects[e].transition.opacity.temp_to&&(Je.objects[e].transition.opacity.dir=1)),Je.objects[e].transition.opacity.dir&&(++Je.objects[e].transition.opacity.value,Je.objects[e].transition.opacity.value>=Je.objects[e].transition.opacity.temp_from&&(Je.objects[e].transition.opacity.dir=0)),"arrow"===Je.objects[e].data.type?(Je.objects[e].cone.material.transparent=!0,Je.objects[e].cone.material.opacity=Je.objects[e].transition.opacity.value/100,Je.objects[e].line.material.transparent=!0,Je.objects[e].line.material.opacity=Je.objects[e].transition.opacity.value/100):Je.objects[e].material.opacity=Je.objects[e].transition.opacity.value/100,"text3d"===Je.objects[e].data.type&&Je.objects[e].material)for(var o=Je.objects[e].material.length,a=0;a<o;a++)Je.objects[e].material[a].opacity=Je.objects[e].transition.opacity.value/100,Je.objects[e].material[a].transparent=!0,Je.objects[e].material[a].needsUpdate=!0;if("flare"===Je.objects[e].data.type&&Je.objects[e].lensFlare)for(var r=0,s=Je.objects[e].lensFlare.lensFlares.length;r<s;r++)Je.objects[e].lensFlare.lensFlares[r].opacity=Je.objects[e].transition.opacity.value/100},reStartOpacityTransitionInterval:function(e){return!!(e in Je.objects)&&(this.stopOpacityTransitionInterval(e,!0),!!parseInt(Je.objects[e].data.transitions.op.st,10)&&void this.startOpacityTransitionInterval(e))},startOpacityTransitionInterval:function(e){if(!(e in Je.objects))return!1;this.set_object_transition_opacity(e);var t=parseInt(Je.objects[e].transitions.op.s,10);0<t?Je.objects[e].transition.opacity.request=window.requestInterval(function(){ge.object_transition_opacity(e)},101-t):this.stopOpacityTransitionInterval(e,!0)},stopOpacityTransitionInterval:function(e,t){return!!(e in Je.objects)&&void(t&&this.opacifyPanoramaObject(e,parseInt(Je.objects[e].data.opacity,10)),Je.objects[e].transition.opacity.request&&(window.clearRequestInterval(Je.objects[e].transition.opacity.request),Je.objects[e].transition.opacity.request.value=0,Je.objects[e].transition.opacity.request=null))},scalePanoramaObject:function(e,t){return!!(e in Je.objects)&&"shape"!==Je.objects[e].data.type&&void(Je.objects[e].data.flip_x?Je.objects[e].scale.set(-t,t,t):Je.objects[e].scale.set(t,t,t),Je.objects[e].data.flip_y&&(Je.objects[e].texture.flipY=!1,Je.objects[e].texture.needsUpdate=!0),Je.objects[e].data.scale=t)},set_object_transition_scale:function(e){if(!(e in Je.objects))return!1;var t=parseInt(Je.objects[e].data.scale,10),o=parseInt(Je.objects[e].data.transitions.sc.v,10);~~Je.objects[e].data.scale_auto&&0<Je.objects[e].data.scale_fov&&(t=Je.current_position.fov*Je.objects[e].data.scale/Je.objects[e].data.scale_fov),Je.objects[e].transition.scale.from=t,Je.objects[e].transition.scale.to=o,Je.objects[e].transition.scale.dir=Je.objects[e].transition.scale.from>Je.objects[e].transition.scale.to?1:0,Je.objects[e].transition.scale.value=t},object_transition_scale:function(e){if(!(e in Je.objects))return!1;if(Je.objects[e].transition.scale.temp_from=Je.objects[e].transition.scale.from,Je.objects[e].transition.scale.temp_to=Je.objects[e].transition.scale.to,Je.objects[e].transition.scale.temp_from<Je.objects[e].transition.scale.temp_to){var t=Je.objects[e].transition.scale.temp_from;Je.objects[e].transition.scale.temp_from=Je.objects[e].transition.scale.temp_to,Je.objects[e].transition.scale.temp_to=t}Je.objects[e].transition.scale.dir||(--Je.objects[e].transition.scale.value,Je.objects[e].transition.scale.value<=Je.objects[e].transition.scale.temp_to&&(Je.objects[e].transition.scale.dir=1)),Je.objects[e].transition.scale.dir&&(++Je.objects[e].transition.scale.value,Je.objects[e].transition.scale.value>=Je.objects[e].transition.scale.temp_from&&(Je.objects[e].transition.scale.dir=0)),Je.objects[e].data.flip_x?Je.objects[e].scale.set(-Je.objects[e].transition.scale.value,Je.objects[e].transition.scale.value,Je.objects[e].transition.scale.value):Je.objects[e].scale.set(Je.objects[e].transition.scale.value,Je.objects[e].transition.scale.value,Je.objects[e].transition.scale.value),"text3d"===Je.objects[e].data.type&&ge.update.text3dHelper(e,!0),Je.objects[e].scale.set(Je.objects[e].transition.scale.value,Je.objects[e].transition.scale.value,Je.objects[e].transition.scale.value)},reStartScaleTransitionInterval:function(e){return!!(e in Je.objects)&&(this.stopScaleTransitionInterval(e,!0),!!parseInt(Je.objects[e].data.transitions.sc.st,10)&&void this.startScaleTransitionInterval(e))},startScaleTransitionInterval:function(e){if(!(e in Je.objects))return!1;this.set_object_transition_scale(e);var t=parseInt(Je.objects[e].transitions.sc.s,10);0<t?Je.objects[e].transition.scale.request=window.requestInterval(function(){ge.object_transition_scale(e)},101-t):this.stopScaleTransitionInterval(e,!0)},stopScaleTransitionInterval:function(e,t){return!!(e in Je.objects)&&void(t&&this.scalePanoramaObject(e,parseInt(Je.objects[e].data.opacity,10)),Je.objects[e].transition.scale.request&&(window.clearRequestInterval(Je.objects[e].transition.scale.request),Je.objects[e].transition.scale.request.value=0,Je.objects[e].transition.scale.request=null))},rotatePanoramaObject:function(e,t,o){return!!(e in Je.objects)&&!parseInt(Je.objects[e].data.rotation_to_axes.status,10)&&void(ge.setObjectRotation(Je.objects[e].data,t),o||(Je.objects[e].data.rotation=parseInt(t,10)))},set_object_transition_rotation:function(e){if(!(e in Je.objects))return!1;var t=parseInt(Je.objects[e].data.rotation,10),o=parseInt(Je.objects[e].data.transitions.sw.v,10);Je.objects[e].transition.rotation.from=t,Je.objects[e].transition.rotation.to=o,Je.objects[e].transition.rotation.dir=Je.objects[e].transition.rotation.from>Je.objects[e].transition.rotation.to?1:0,Je.objects[e].transition.rotation.value=t,parseInt(Je.objects[e].data.transitions.sw.r,10)?(Je.objects[e].transition.rotation.rotation=1,Je.objects[e].transition.rotation.dir=parseInt(Je.objects[e].data.transitions.sw.d,10)):Je.objects[e].transition.rotation.rotation=0},object_transition_rotation:function(e){if(!(e in Je.objects))return!1;if(Je.objects[e].transition.rotation.rotation)Je.objects[e].transition.rotation.dir?++Je.objects[e].transition.rotation.value:--Je.objects[e].transition.rotation.value,this.rotatePanoramaObject(e,Je.objects[e].transition.rotation.value,!0);else{if(Je.objects[e].transition.rotation.temp_from=Je.objects[e].transition.rotation.from,Je.objects[e].transition.rotation.temp_to=Je.objects[e].transition.rotation.to,Je.objects[e].transition.rotation.temp_from<Je.objects[e].transition.rotation.temp_to){var t=Je.objects[e].transition.rotation.temp_from;Je.objects[e].transition.rotation.temp_from=Je.objects[e].transition.rotation.temp_to,Je.objects[e].transition.rotation.temp_to=t}Je.objects[e].transition.rotation.dir||(--Je.objects[e].transition.rotation.value,Je.objects[e].transition.rotation.value<=Je.objects[e].transition.rotation.temp_to&&(Je.objects[e].transition.rotation.dir=1)),Je.objects[e].transition.rotation.dir&&(++Je.objects[e].transition.rotation.value,Je.objects[e].transition.rotation.value>=Je.objects[e].transition.rotation.temp_from&&(Je.objects[e].transition.rotation.dir=0)),this.rotatePanoramaObject(e,Je.objects[e].transition.rotation.value,!0)}},reStartRotationTransitionInterval:function(e){return!!(e in Je.objects)&&(this.stopRotationTransitionInterval(e,!0),!!parseInt(Je.objects[e].data.transitions.sc.st,10)&&void this.startRotationTransitionInterval(e))},startRotationTransitionInterval:function(e){if(!(e in Je.objects))return!1;this.set_object_transition_rotation(e);var t=parseInt(Je.objects[e].transitions.sw.s,10);0<t?Je.objects[e].transition.rotation.request=window.requestInterval(function(){ge.object_transition_rotation(e)},101-t):this.stopRotationTransitionInterval(e,!0)},stopRotationTransitionInterval:function(e,t){return!!(e in Je.objects)&&void(t&&this.rotatePanoramaObject(e,parseInt(Je.objects[e].data.opacity,10)),Je.objects[e].transition.rotation.request&&(window.clearRequestInterval(Je.objects[e].transition.rotation.request),Je.objects[e].transition.rotation.request.value=0,Je.objects[e].transition.rotation.request=null))},rotateToAxesPanoramaObject:function(e,t,o,a){if(!(e in Je.objects))return!1;if(!parseInt(Je.objects[e].data.rotation_to_axes.status,10))return!1;if("shape"===Je.objects[e].data.type&&"line"===Je.objects[e].data.type)return!1;var r=parseInt(Je.objects[e].data.rtaold,10);if(r)Je.objects[e].rotation[t]=THREE.Math.degToRad(parseInt(o,10));else{var i=Je.objects[e].data.position.lon,n=Je.objects[e].data.position.lat,s=new THREE.Vector3(Math.cos(i)*Math.sin(n),Math.sin(i),Math.cos(i)*Math.cos(n));Je.objects[e].lookAt(s);var d=0,c=0,l=0;"x"===t?(d=parseInt(o,10),c=Je.objects[e].data.rotation_to_axes.y,l=Je.objects[e].data.rotation_to_axes.z,Je.objects[e].rotateOnAxis(new THREE.Vector3(1,0,0),THREE.Math.degToRad(d)),Je.objects[e].rotateOnAxis(new THREE.Vector3(0,1,0),THREE.Math.degToRad(c)),Je.objects[e].rotateOnAxis(new THREE.Vector3(0,0,1),THREE.Math.degToRad(l))):"y"===t?(d=Je.objects[e].data.rotation_to_axes.x,c=parseInt(o,10),l=Je.objects[e].data.rotation_to_axes.z,Je.objects[e].rotateOnAxis(new THREE.Vector3(1,0,0),THREE.Math.degToRad(d)),Je.objects[e].rotateOnAxis(new THREE.Vector3(0,1,0),THREE.Math.degToRad(c)),Je.objects[e].rotateOnAxis(new THREE.Vector3(0,0,1),THREE.Math.degToRad(l))):"z"==t&&(d=Je.objects[e].data.rotation_to_axes.x,c=Je.objects[e].data.rotation_to_axes.y,l=parseInt(o,10),Je.objects[e].rotateOnAxis(new THREE.Vector3(1,0,0),THREE.Math.degToRad(d)),Je.objects[e].rotateOnAxis(new THREE.Vector3(0,1,0),THREE.Math.degToRad(c)),Je.objects[e].rotateOnAxis(new THREE.Vector3(0,0,1),THREE.Math.degToRad(l))),"text3d"===Je.objects[e].data.type&&ge.setObjectRotationToAxesText3dHelper(Je.objects[e].data,d,c,l)}a||(Je.objects[e].data.rotation_to_axes[t]=parseInt(o,10))},set_object_transition_rotation_x:function(e){if(!(e in Je.objects))return!1;var t=parseInt(Je.objects[e].data.rotation_to_axes.x,10),o=parseInt(Je.objects[e].data.transitions.swx.v,10);Je.objects[e].transition.rotation_x.from=t,Je.objects[e].transition.rotation_x.to=o,Je.objects[e].transition.rotation_x.dir=Je.objects[e].transition.rotation_x.from>Je.objects[e].transition.rotation_x.to?1:0,Je.objects[e].transition.rotation_x.value=t,parseInt(Je.objects[e].data.transitions.swx.r,10)?(Je.objects[e].transition.rotation_x.rotation=1,Je.objects[e].transition.rotation_x.dir=parseInt(Je.objects[e].data.transitions.swx.d,10)):Je.objects[e].transition.rotation_x.rotation=0},object_transition_rotation_x:function(e){if(!(e in Je.objects))return!1;if(Je.objects[e].transition.rotation_x.rotation)Je.objects[e].transition.rotation_x.dir?++Je.objects[e].transition.rotation_x.value:--Je.objects[e].transition.rotation_x.value,this.rotateToAxesPanoramaObject(e,"x",Je.objects[e].transition.rotation_x.value,!0);else{if(Je.objects[e].transition.rotation_x.temp_from=Je.objects[e].transition.rotation_x.from,Je.objects[e].transition.rotation_x.temp_to=Je.objects[e].transition.rotation_x.to,Je.objects[e].transition.rotation_x.temp_from<Je.objects[e].transition.rotation_x.temp_to){var t=Je.objects[e].transition.rotation_x.temp_from;Je.objects[e].transition.rotation_x.temp_from=Je.objects[e].transition.rotation_x.temp_to,Je.objects[e].transition.rotation_x.temp_to=t}Je.objects[e].transition.rotation_x.dir||(--Je.objects[e].transition.rotation_x.value,Je.objects[e].transition.rotation_x.value<=Je.objects[e].transition.rotation_x.temp_to&&(Je.objects[e].transition.rotation_x.dir=1)),Je.objects[e].transition.rotation_x.dir&&(++Je.objects[e].transition.rotation_x.value,Je.objects[e].transition.rotation_x.value>=Je.objects[e].transition.rotation_x.temp_from&&(Je.objects[e].transition.rotation_x.dir=0)),this.rotateToAxesPanoramaObject(e,"x",Je.objects[e].transition.rotation_x.value,!0)}},reStartRotationXTransitionInterval:function(e){return!!(e in Je.objects)&&(this.stopRotationXTransitionInterval(e,!0),!!parseInt(Je.objects[e].data.rotation_to_axes.status,10)&&void(parseInt(Je.objects[e].transitions.swx.st,10)&&this.startRotationXTransitionInterval(e)))},startRotationXTransitionInterval:function(e){if(!(e in Je.objects))return!1;this.set_object_transition_rotation_x(e);var t=parseInt(Je.objects[e].transitions.swx.s,10);0<t?Je.objects[e].transition.rotation_x.request=window.requestInterval(function(){ge.object_transition_rotation_x(e)},101-t):this.stopRotationXTransitionInterval(e,!0)},stopRotationXTransitionInterval:function(e,t){return!!(e in Je.objects)&&void(t&&this.rotateToAxesPanoramaObject(e,"x",Je.objects[e].data.rotation_to_axes.x),Je.objects[e].transition.rotation_x.request&&(window.clearRequestInterval(Je.objects[e].transition.rotation_x.request),Je.objects[e].transition.rotation_x.request.value=0,Je.objects[e].transition.rotation_x.request=null))},set_object_transition_rotation_y:function(e){if(!(e in Je.objects))return!1;var t=parseInt(Je.objects[e].data.rotation_to_axes.y,10),o=parseInt(Je.objects[e].data.transitions.swy.v,10);Je.objects[e].transition.rotation_y.from=t,Je.objects[e].transition.rotation_y.to=o,Je.objects[e].transition.rotation_y.dir=Je.objects[e].transition.rotation_y.from>Je.objects[e].transition.rotation_y.to?1:0,Je.objects[e].transition.rotation_y.value=t,parseInt(Je.objects[e].data.transitions.swy.r,10)?(Je.objects[e].transition.rotation_y.rotation=1,Je.objects[e].transition.rotation_y.dir=parseInt(Je.objects[e].data.transitions.swy.d,10)):Je.objects[e].transition.rotation_y.rotation=0},object_transition_rotation_y:function(e){if(!(e in Je.objects))return!1;if(Je.objects[e].transition.rotation_y.rotation)Je.objects[e].transition.rotation_y.dir?++Je.objects[e].transition.rotation_y.value:--Je.objects[e].transition.rotation_y.value,this.rotateToAxesPanoramaObject(e,"y",Je.objects[e].transition.rotation_y.value,!0);else{if(Je.objects[e].transition.rotation_y.temp_from=Je.objects[e].transition.rotation_y.from,Je.objects[e].transition.rotation_y.temp_to=Je.objects[e].transition.rotation_y.to,Je.objects[e].transition.rotation_y.temp_from<Je.objects[e].transition.rotation_y.temp_to){var t=Je.objects[e].transition.rotation_y.temp_from;Je.objects[e].transition.rotation_y.temp_from=Je.objects[e].transition.rotation_y.temp_to,Je.objects[e].transition.rotation_y.temp_to=t}Je.objects[e].transition.rotation_y.dir||(--Je.objects[e].transition.rotation_y.value,Je.objects[e].transition.rotation_y.value<=Je.objects[e].transition.rotation_y.temp_to&&(Je.objects[e].transition.rotation_y.dir=1)),Je.objects[e].transition.rotation_y.dir&&(++Je.objects[e].transition.rotation_y.value,Je.objects[e].transition.rotation_y.value>=Je.objects[e].transition.rotation_y.temp_from&&(Je.objects[e].transition.rotation_y.dir=0)),this.rotateToAxesPanoramaObject(e,"y",Je.objects[e].transition.rotation_y.value,!0)}},reStartRotationYTransitionInterval:function(e){return!!(e in Je.objects)&&(this.stopRotationYTransitionInterval(e,!0),!!parseInt(Je.objects[e].data.rotation_to_axes.status,10)&&void(parseInt(Je.objects[e].transitions.swy.st,10)&&this.startRotationYTransitionInterval(e)))},startRotationYTransitionInterval:function(e){if(!(e in Je.objects))return!1;this.set_object_transition_rotation_y(e);var t=parseInt(Je.objects[e].transitions.swy.s,10);0<t?Je.objects[e].transition.rotation_y.request=window.requestInterval(function(){ge.object_transition_rotation_y(e)},101-t):this.stopRotationYTransitionInterval(e,!0)},stopRotationYTransitionInterval:function(e,t){return!!(e in Je.objects)&&void(t&&this.rotateToAxesPanoramaObject(e,"y",Je.objects[e].data.rotation_to_axes.y),Je.objects[e].transition.rotation_y.request&&(window.clearRequestInterval(Je.objects[e].transition.rotation_y.request),Je.objects[e].transition.rotation_y.request.value=0,Je.objects[e].transition.rotation_y.request=null))},set_object_transition_rotation_z:function(e){if(!(e in Je.objects))return!1;var t=parseInt(Je.objects[e].data.rotation_to_axes.z,10),o=parseInt(Je.objects[e].data.transitions.swz.v,10);Je.objects[e].transition.rotation_z.from=t,Je.objects[e].transition.rotation_z.to=o,Je.objects[e].transition.rotation_z.dir=Je.objects[e].transition.rotation_z.from>Je.objects[e].transition.rotation_z.to?1:0,Je.objects[e].transition.rotation_z.value=t,parseInt(Je.objects[e].data.transitions.swz.r,10)?(Je.objects[e].transition.rotation_z.rotation=1,Je.objects[e].transition.rotation_z.dir=parseInt(Je.objects[e].data.transitions.swz.d,10)):Je.objects[e].transition.rotation_z.rotation=0},object_transition_rotation_z:function(e){if(!(e in Je.objects))return!1;if(Je.objects[e].transition.rotation_z.rotation)Je.objects[e].transition.rotation_z.dir?++Je.objects[e].transition.rotation_z.value:--Je.objects[e].transition.rotation_z.value,this.rotateToAxesPanoramaObject(e,"z",Je.objects[e].transition.rotation_z.value,!0);else{if(Je.objects[e].transition.rotation_z.temp_from=Je.objects[e].transition.rotation_z.from,Je.objects[e].transition.rotation_z.temp_to=Je.objects[e].transition.rotation_z.to,Je.objects[e].transition.rotation_z.temp_from<Je.objects[e].transition.rotation_z.temp_to){var t=Je.objects[e].transition.rotation_z.temp_from;Je.objects[e].transition.rotation_z.temp_from=Je.objects[e].transition.rotation_z.temp_to,Je.objects[e].transition.rotation_z.temp_to=t}Je.objects[e].transition.rotation_z.dir||(--Je.objects[e].transition.rotation_z.value,Je.objects[e].transition.rotation_z.value<=Je.objects[e].transition.rotation_z.temp_to&&(Je.objects[e].transition.rotation_z.dir=1)),Je.objects[e].transition.rotation_z.dir&&(++Je.objects[e].transition.rotation_z.value,Je.objects[e].transition.rotation_z.value>=Je.objects[e].transition.rotation_z.temp_from&&(Je.objects[e].transition.rotation_z.dir=0)),this.rotateToAxesPanoramaObject(e,"z",Je.objects[e].transition.rotation_z.value,!0)}},reStartRotationZTransitionInterval:function(e){return!!(e in Je.objects)&&(this.stopRotationZTransitionInterval(e,!0),!!parseInt(Je.objects[e].data.rotation_to_axes.status,10)&&void(parseInt(Je.objects[e].transitions.swz.st,10)&&this.startRotationZTransitionInterval(e)))},startRotationZTransitionInterval:function(e){if(!(e in Je.objects))return!1;this.set_object_transition_rotation_z(e);var t=parseInt(Je.objects[e].transitions.swz.s,10);0<t?Je.objects[e].transition.rotation_z.request=window.requestInterval(function(){ge.object_transition_rotation_z(e)},101-t):this.stopRotationZTransitionInterval(e,!0)},stopRotationZTransitionInterval:function(e,t){return!!(e in Je.objects)&&void(t&&this.rotateToAxesPanoramaObject(e,"z",Je.objects[e].data.rotation_to_axes.z),Je.objects[e].transition.rotation_z.request&&(window.clearRequestInterval(Je.objects[e].transition.rotation_z.request),Je.objects[e].transition.rotation_z.request.value=0,Je.objects[e].transition.rotation_z.request=null))},transparent_object:function(){return{id:-11111,type:"sprite",type_extra:"transparent",scene:1,name:"hotspot_transparent",tooltip:"",texture:"",value:"hotspot_transparent.png",properties:{value:"hotspot_transparent.png",color:{r:"1",g:"1",b:"1"}},action:null,action_type:"",position:{x:"116.79155703422285",y:"-156.19448031912205",z:"301.50866951052956",lat:"-25.713638163891474",lon:"68.8257640147612"},scale:1,scale_auto:0,scale_fov:90,rotation:0,rotation_to_axes:{status:"1",x:"0",y:"0",z:"0"},rtaold:0,opacity:1,transitions:{op:{v:0,s:1,st:0},sc:{v:0,s:1,st:0},sw:{v:0,s:1,st:0,r:0,d:0},swx:{v:0,s:1,st:0,r:0,d:0},swy:{v:0,s:1,st:0,r:0,d:0},swz:{v:0,s:1,st:0,r:0,d:0}},flip_x:0,flip_y:0,flip:{x:0,y:0},z:0,visible:0,order:0}},load:function(e,t){var o=[],a=!0,r=!0;Je.typefacesLoaded=!1;var s={};for(var d in e)"text3d"===e[d].type&&(e[d].properties.font.family in Je.loadedFonts||(s[e[d].properties.font.family]=1));var c=Object.keys(s);if(c.length){Je.loadingManager=new THREE.LoadingManager,o.push(new Promise(function(t){Je.loadingManager.onLoad=function(){if(!Je.typefacesLoaded){for(var a in e)"text3d"===e[a].type&&e[a].visible&&(o.push(ge.add.text3d(e[a])),ge.add.tooltip(e[a]));Je.typefacesLoaded=!0}t()}}));for(var d=0,l=c.length;d<l;d++)K(c[d],null)}else Je.typefacesLoaded=!0;for(var d in o.push(ge.add.sprite(ge.transparent_object())),e)if(("text3d"!==e[d].type||Je.typefacesLoaded)&&e[d].visible){switch(e[d].type){case"text_z":if(!r)break;case"text_n":if(!a)break;case"text":o.push(ge.add.text(e[d]));break;case"sprite_z":if(!r)break;case"sprite_n":if(!a)break;case"sprite":o.push(ge.add.sprite(e[d]));break;case"icon_font_z":if(!r)break;case"icon_font_n":if(!a)break;case"icon_font":o.push(ge.add.icon_font(e[d]));break;case"text3d":o.push(ge.add.text3d(e[d]));break;case"flare":o.push(ge.add.flare(e[d]));break;case"arrow":o.push(ge.add.arrow(e[d]));break;case"line":o.push(ge.add.line(e[d]));break;case"shape":o.push(ge.add.shape(e[d]));}ge.add.tooltip(e[d])}o.length?Promise.all(o).then(function(e){"function"==typeof t&&t(e)}):"function"==typeof t&&t([])},selectNone:function(){return Je.isUserInteracting=!0,Je.isObjectInteracting=!1,this},clearInnerAnimations:function(){for(var e in Je.objects)"anim"in Je.objects[e]&&Je.objects[e].anim&&(window.clearRequestInterval(Je.objects[e].anim),Je.objects[e].anim=null)},update:{icon_font:function(e){if(!(e in Je.objects))return!1;var t=Je.objects[e].data,o=ge.add.icon_font_image(t),a=new THREE.TextureLoader;a.load(o,function(t){return!!(e in Je.objects)&&void(t.minFilter=THREE.LinearFilter,parseInt(Je.objects[e].data.flip_y,10)&&(t.flipY=!1),Je.objects[e].material.map.dispose(),Je.objects[e].material.map=t,Je.objects[e].texture.needsUpdate=!0)})},text:function(e){if(!(e in Je.objects))return!1;var t=Je.objects[e].data,o=ge.add.text_image(t),a=new THREE.TextureLoader;a.load(o,function(t){return!!(e in Je.objects)&&void(t.minFilter=THREE.LinearFilter,parseInt(Je.objects[e].data.flip_y,10)&&(t.flipY=!1),Je.objects[e].material.map.dispose(),Je.objects[e].material.map=t,Je.objects[e].texture.needsUpdate=!0)})},text3dHelper:function(e,t){if(!e)return!1;if(!(e in Je.objects))return!1;if(Je.objects[e].children.length){if(t){var o=B(e);if(!o)return!1;if(o.children.length)for(var a=o.children.length-1;0<=a;a--)"oid"in o.children[a]&&o.children[a].oid===e&&o.children[a]instanceof THREE.Mesh&&"data"in o.children[a]&&"text3d"===o.children[a].data.type&&o.children[a].children.length&&(o.children[a].children[0].geometry.dispose(),o.children[a].children[0].material.map&&o.children[a].children[0].material.map.dispose(),o.remove(o.children[a].children[0]));Je.objects[e].geometry.computeBoundingBox();var r=(Je.objects[e].geometry.boundingBox.max.x-Je.objects[e].geometry.boundingBox.min.x)*Je.objects[e].scale.x,n=(Je.objects[e].geometry.boundingBox.max.y-Je.objects[e].geometry.boundingBox.min.y)*Je.objects[e].scale.y,s=new THREE.PlaneGeometry(r+20,n+10),d=new THREE.MeshBasicMaterial({color:16776960,side:THREE.DoubleSide,opacity:0,transparent:!0}),c=new THREE.Mesh(s,d);c.position.set(Je.objects[e].position.x,Je.objects[e].position.y,Je.objects[e].position.z),c.data=Je.objects[e].data,c.oid=e,Je.objects[e].children[0]=c}ge.setObjectRotation(Je.objects[e].data)}}},add:{tooltip:function(e){""!==e.tooltip&&t.event.trigger("addHotspotTooltip",parseInt(e.id,10),e.tooltip,"default")},icon_font:function(e){var t=parseInt(e.id,10);return ge.stopTransitionInterval(t),e.properties.value=this.icon_font_image(e),ge.add.sprite(e,function(){var e=parseInt(Je.objects[t].data.properties.stroke.visible,10);if(e){var o=parseInt(Je.objects[t].data.properties.stroke.dashed,10);if(o){var a=parseInt(Je.objects[t].data.properties.stroke.anim,10);a&&(Je.objects[t].anim&&(window.clearRequestInterval(Je.objects[t].anim),Je.objects[t].anim=null),Je.objects[t].anim=window.requestInterval(function(){ge.update.icon_font(t)},101-parseInt(Je.objects[t].data.properties.stroke.anim_speed,10)))}}})},icon_font_image:function(t){var o=parseInt(t.id,10),a=document.createElement("canvas"),r=100*t.properties.size/73;a.height=r,a.width=r;var s=a.getContext("2d");if(s.clearRect(0,0,0,0),"shadow"in t.properties&&parseInt(t.properties.shadow.visible,10)){var d=e.fn.hexToRgb(t.properties.shadow.color);s.shadowColor="rgba("+d.r+", "+d.g+", "+d.b+", "+parseInt(t.properties.shadow.opacity,10)/100+")",s.shadowOffsetX=parseFloat(t.properties.shadow.x,10)||0,s.shadowOffsetY=parseFloat(t.properties.shadow.y,10)||0,s.shadowBlur=parseInt(t.properties.shadow.blur,10)||0}if("background"in t.properties&&parseInt(t.properties.background.visible,10)){s.beginPath(),s.rect(0,0,r,r);var d=e.fn.hexToRgb(t.properties.background.color);s.fillStyle="rgba("+d.r+", "+d.g+", "+d.b+", "+parseInt(t.properties.background.opacity,10)/100+")",s.fillRect(0,0,r,r)}"filter"in t.properties&&parseInt(t.properties.filter.enabled,10)&&(s.filter="blur("+parseInt(t.properties.filter.blur,10)+"px) brightness("+parseInt(t.properties.filter.brightness,10)+"%) contrast("+parseInt(t.properties.filter.contrast,10)+"%) grayscale("+parseInt(t.properties.filter.grayscale,10)+"%) invert("+parseInt(t.properties.filter.invert,10)+"%) saturate("+parseInt(t.properties.filter.saturate,10)+"%) sepia("+parseInt(t.properties.filter.sepia,10)+"%)"),s.font=t.properties.size+"px "+t.properties.iconset,s.textAlign="center",s.textBaseline="middle";var c=t.properties.text;if("td"in t.properties&&parseInt(t.properties.td.visible,10)){var l=parseInt(t.properties.td.x,10),u=parseInt(t.properties.td.y,10),d=e.fn.hexToRgb(t.properties.td.color);s.fillStyle="rgba("+d.r+", "+d.g+", "+d.b+", "+parseInt(t.properties.td.opacity,10)/100+")";for(var p=0,m=parseInt(t.properties.td.size,10);p<m;p++)s.fillText(e.fn.unescapeUnicode(c),a.width/2+(l?p:-p),a.height/2+(u?p:-p))}var n=!0;if("stroke"in t.properties&&parseInt(t.properties.stroke.visible,10)&&parseInt(t.properties.stroke.only,10)&&(n=!1),n&&(s.fillStyle=t.properties.color||"rgba(255,0,0,1)",s.fillText(e.fn.unescapeUnicode(c),a.width/2,a.height/2)),"stroke"in t.properties&&parseInt(t.properties.stroke.visible,10)){parseInt(t.properties.stroke.dashed,10)&&(s.setLineDash([parseInt(t.properties.stroke.lines,10),parseInt(t.properties.stroke.gaps,10)]),o&&o in Je.objects&&Je.objects[o].anim&&(!Je.objects[o].anim.cnt&&(Je.objects[o].anim.cnt=0),1e3<Je.objects[o].anim.cnt&&(Je.objects[o].anim.cnt=0),s.lineDashOffset=Je.objects[o].anim.cnt++));var f=parseInt(t.properties.stroke.caps,10);f&&(1===f?s.lineCap="round":s.lineCap="square"),s.lineWidth=parseInt(t.properties.stroke.width,10);var d=e.fn.hexToRgb(t.properties.stroke.color);s.strokeStyle="rgba("+d.r+", "+d.g+", "+d.b+", "+parseInt(t.properties.stroke.opacity,10)/100+")",s.strokeText(e.fn.unescapeUnicode(c),a.width/2,a.height/2)}return a.toDataURL("image/png")},text:function(e){var t=parseInt(e.id,10);return ge.stopTransitionInterval(t),e.properties.value=this.text_image(e),ge.add.sprite(e,function(){var e=parseInt(Je.objects[t].data.properties.stroke.visible,10);if(e){var o=parseInt(Je.objects[t].data.properties.stroke.dashed,10);if(o){var a=parseInt(Je.objects[t].data.properties.stroke.anim,10);a&&(Je.objects[t].anim&&(window.clearRequestInterval(Je.objects[t].anim),Je.objects[t].anim=null),Je.objects[t].anim=window.requestInterval(function(){ge.update.text(t)},101-parseInt(Je.objects[t].data.properties.stroke.anim_speed,10)))}}})},text_image:function(t){var o=parseInt(t.id,10),a=document.createElement("canvas");a.width=1500,a.height=750;var r=a.getContext("2d");r.clearRect(0,0,a.width,a.height);var s=t.properties.text;if(t.properties.font_weight||(t.properties.font_weight="normal"),r.font=t.properties.font_weight+" "+t.properties.size+"px "+t.properties.font,r.textAlign="center",r.textBaseline="middle","shadow"in t.properties&&parseInt(t.properties.shadow.visible,10)){var d=e.fn.hexToRgb(t.properties.shadow.color);r.shadowColor="rgba("+d.r+", "+d.g+", "+d.b+", "+parseInt(t.properties.shadow.opacity,10)/100+")",r.shadowOffsetX=parseFloat(t.properties.shadow.x,10)||0,r.shadowOffsetY=parseFloat(t.properties.shadow.y,10)||0,r.shadowBlur=parseInt(t.properties.shadow.blur,10)||0}if("background"in t.properties&&parseInt(t.properties.background.visible,10)){r.beginPath(),r.rect(0,0,a.width,a.height);var d=e.fn.hexToRgb(t.properties.background.color);r.fillStyle="rgba("+d.r+", "+d.g+", "+d.b+", "+parseInt(t.properties.background.opacity,10)/100+")",r.fillRect(0,0,a.width,a.height)}"filter"in t.properties&&parseInt(t.properties.filter.enabled,10)&&(r.filter="blur("+parseInt(t.properties.filter.blur,10)+"px) brightness("+parseInt(t.properties.filter.brightness,10)+"%) contrast("+parseInt(t.properties.filter.contrast,10)+"%) grayscale("+parseInt(t.properties.filter.grayscale,10)+"%) invert("+parseInt(t.properties.filter.invert,10)+"%) saturate("+parseInt(t.properties.filter.saturate,10)+"%) sepia("+parseInt(t.properties.filter.sepia,10)+"%)");var c=!0;if("stroke"in t.properties&&parseInt(t.properties.stroke.visible,10)&&parseInt(t.properties.stroke.only,10)&&(c=!1),"td"in t.properties&&parseInt(t.properties.td.visible,10)){var l=parseInt(t.properties.td.x,10),u=parseInt(t.properties.td.y,10),d=e.fn.hexToRgb(t.properties.td.color);r.fillStyle="rgba("+d.r+", "+d.g+", "+d.b+", "+parseInt(t.properties.td.opacity,10)/100+")";for(var p=0,m=parseInt(t.properties.td.size,10);p<m;p++)r.fillText(s,a.width/2+(l?p:-p),a.height/2+(u?p:-p))}if(c&&(r.fillStyle=t.properties.color,r.fillText(s,a.width/2,a.height/2)),"stroke"in t.properties&&parseInt(t.properties.stroke.visible,10)){parseInt(t.properties.stroke.dashed,10)&&(r.setLineDash([parseInt(t.properties.stroke.lines,10),parseInt(t.properties.stroke.gaps,10)]),o&&o in Je.objects&&Je.objects[o].anim&&(!Je.objects[o].anim.cnt&&(Je.objects[o].anim.cnt=0),1e3<Je.objects[o].anim.cnt&&(Je.objects[o].anim.cnt=0),r.lineDashOffset=Je.objects[o].anim.cnt++));var n=parseInt(t.properties.stroke.caps,10);n&&(1===n?r.lineCap="round":r.lineCap="square"),r.lineWidth=parseInt(t.properties.stroke.width,10);var d=e.fn.hexToRgb(t.properties.stroke.color);r.strokeStyle="rgba("+d.r+", "+d.g+", "+d.b+", "+parseInt(t.properties.stroke.opacity,10)/100+")",r.strokeText(s,a.width/2,a.height/2)}return a.toDataURL("image/png")},text3d:function(e,t){return new Promise(function(o){var a=parseInt(e.id,10);ge.stopTransitionInterval(a),K(e.properties.font.family,function(o){var r=new THREE.TextGeometry(e.properties.value,{font:o,size:parseFloat(e.properties.dimensions.size,10),height:parseFloat(e.properties.dimensions.height,10)||0,curveSegments:parseInt(e.properties.dimensions.curveSegments,10),weight:e.properties.font.weight,style:e.properties.font.style,bevelThickness:parseFloat(e.properties.bevel.thickness,10),bevelSize:parseFloat(e.properties.bevel.size,10),bevelEnabled:parseInt(e.properties.bevel.enabled,10),material:0,extrudeMaterial:1});r.center();var n=new THREE.MeshBasicMaterial({color:e.properties.color.front,overdraw:!0}),s=new THREE.MeshBasicMaterial({color:e.properties.color.side,overdraw:!0}),d=new THREE.Mesh(r,[n,s]);d.name=e.name,d.oid=e.id,d.pid=Je.id;for(var c=parseInt(e.opacity,10),l=parseInt(e.scale,10)||6,u=e.rotation||0,p=d.material.length,m=0;m<p;m++)d.material[m].opacity=c/100,d.material[m].transparent=!0,d.material[m].needsUpdate=!0;d.scale.set(l,l,l),d.anim=null,d.transitions=e.transitions,d.transition={opacity:{from:c,to:parseInt(e.transitions.op.v,10),value:0,dir:0,request:null,temp_from:0,temp_to:0},scale:{from:l,to:parseInt(e.transitions.sc.v,10),value:0,dir:0,request:null,temp_from:0,temp_to:0},rotation:{from:u,to:parseInt(e.transitions.sw.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0},rotation_x:{from:parseInt(e.rotation_to_axes.x,10),to:parseInt(e.transitions.swx.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0},rotation_y:{from:parseInt(e.rotation_to_axes.y,10),to:parseInt(e.transitions.swy.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0},rotation_z:{from:parseInt(e.rotation_to_axes.z,10),to:parseInt(e.transitions.swz.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0}};var f=Je.camera.target.x,v=Je.camera.target.y,_=Je.camera.target.z;if(e.position)if("lat"in e.position&&"lon"in e.position){var b=THEASYS.fn.latLonToXYZ(e.position.lat,e.position.lon);f=parseFloat(b.x,10),v=parseFloat(b.y,10),_=parseFloat(b.z,10)}else{f=parseFloat(e.position.x,10),v=parseFloat(e.position.y,10),_=parseFloat(e.position.z,10);var h=THEASYS.fn.xyzToLatLon(f,v,_);e.position.lat=h.lat,e.position.lon=h.lon}d.position.set(f,v,_),d.flip={x:0,y:0},d.flip.x=e.flip_x?e.flip_x||0:0,d.flip.y=e.flip_y?e.flip_y||0:0,d.data=e,d.data.properties.bevel.enabled=parseInt(e.properties.bevel.enabled,10)?1:0,e.position.x=d.position.x,e.position.y=d.position.y,e.position.z=d.position.z,d.ctype="object",d.visible=!!e.visible,d.default_visible=!!e.visible;var g=ge.getObjectOrder(e.order);d.renderOrder=g,d.z=g,0!==e.scene&&(d.onBeforeRender=function(e){e.clearDepth()}),Je.objects[a]=d,Je.objects[a].geometry.computeBoundingBox();var j=(Je.objects[a].geometry.boundingBox.max.x-Je.objects[a].geometry.boundingBox.min.x)*Je.objects[a].scale.x,I=(Je.objects[a].geometry.boundingBox.max.y-Je.objects[a].geometry.boundingBox.min.y)*Je.objects[a].scale.y,w=new THREE.PlaneGeometry(j+20,I+10),k=new THREE.MeshBasicMaterial({color:16776960,side:THREE.DoubleSide,opacity:0,transparent:!0}),T=new THREE.Mesh(w,k);T.position.set(d.position.x,d.position.y,d.position.z),T.data=d.data,T.oid=a,T.pid=Je.id,Je.objects[a].children.push(T),ge.setObjectRotation(e),ge.startTransitionInterval(a),q(a),"function"==typeof t&&t(e)}),o(e)})},flare:function(e,t){return!(Je.device.androidVersion&&5>Je.device.androidVersion)&&new Promise(function(o){var a=parseInt(e.id,10);ge.stopTransitionInterval(a);var r=new THREE.PointLight(16777215,1.5,2e3),i=new THREE.TextureLoader,n=e.properties.spotsType||"hexangle";"hexangle"!==n&&"round"!==n&&(n="hexangle");var s=i.load(vars.paths.static+"/lensflares/"+n+".png"),d=new THREE.Lensflare;d.elements={};var c=parseInt(e.properties.luminance,10),l=new THREE.Color(16777215),u=THREE.NormalBlending;if(parseInt(e.properties.lightSource,10)){var p=i.load(vars.paths.static+"/lensflares/lensflare0.png");d.elements[0]=new THREE.LensflareElement(p,c,0,l,u),d.addElement(d.elements[0])}var m=parseInt(e.properties.spots,10);if(3===m){var f=160*c/1e3,v=120*c/1e3;d.elements[1]=new THREE.LensflareElement(s,f,.5,l,u),d.elements[2]=new THREE.LensflareElement(s,v,.8,l,u),d.elements[3]=new THREE.LensflareElement(s,80*c/1e3,1,l,u),d.addElement(d.elements[1]),d.addElement(d.elements[2]),d.addElement(d.elements[3])}else if(2===m){var f=160*c/1e3,v=120*c/1e3;d.elements[1]=new THREE.LensflareElement(s,f,.5,l,u),d.elements[2]=new THREE.LensflareElement(s,v,.8,l,u),d.addElement(d.elements[1]),d.addElement(d.elements[2])}else if(1===m){var f=160*c/1e3;d.elements[1]=new THREE.LensflareElement(s,f,.8,l,u),d.addElement(d.elements[1])}else if(0===m);r.add(d),r.name=e.name;var _=Je.camera.target.x,b=Je.camera.target.y,h=Je.camera.target.z;if(e.position)if("lat"in e.position&&"lon"in e.position){var g=THEASYS.fn.latLonToXYZ(e.position.lat,e.position.lon);_=parseFloat(g.x,10),b=parseFloat(g.y,10),h=parseFloat(g.z,10)}else{_=parseFloat(e.position.x,10),b=parseFloat(e.position.y,10),h=parseFloat(e.position.z,10);var j=THEASYS.fn.xyzToLatLon(_,b,h);e.position.lat=j.lat,e.position.lon=j.lon}r.position.set(_,b,h);var I=parseInt(e.opacity,10),w=parseInt(e.scale,10)||10,k=parseInt(e.rotation,10)||0;r.anim=null,r.transitions=e.transitions,r.transition={opacity:{from:I,to:parseInt(e.transitions.op.v,10),value:0,dir:0,request:null,temp_from:0,temp_to:0},scale:{from:w,to:parseInt(e.transitions.sc.v,10),value:0,dir:0,request:null,temp_from:0,temp_to:0},rotation:{from:k,to:parseInt(e.transitions.sw.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0},rotation_x:{from:parseInt(e.rotation_to_axes.x,10),to:parseInt(e.transitions.swx.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0},rotation_y:{from:parseInt(e.rotation_to_axes.y,10),to:parseInt(e.transitions.swy.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0},rotation_z:{from:parseInt(e.rotation_to_axes.z,10),to:parseInt(e.transitions.swz.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0}},r.ctype="object",r.data=e,r.foid=a,r.pid=Je.id,r.visible=!!e.visible,r.default_visible=!!e.visible;var T=ge.getObjectOrder(e.order);r.renderOrder=T,r.z=T,0!==e.scene&&(r.onBeforeRender=function(e){e.clearDepth()}),Je.objects[a]=r,ge.setObjectRotation(e),q(a),o(e),"function"==typeof t&&t(e)})},sprite:function(t,o){if(!(Je.id in e.cache.obj.tours[Je.tour_rnd].panoramas))return!1;var a=parseInt(t.id,10);ge.stopTransitionInterval(a);var r=e.cache.obj.tours[Je.tour_rnd].panoramas[Je.id].uid;if("text"===t.type)var i=t.properties.value;else if("icon_font"===t.type||"icon_font_n"===t.type||"icon_font_z"===t.type||"text_n"===t.type||"text_z"===t.type)var i=t.properties.value;else if("emoji"===t.type_extra)var i=vars.paths.static+"/emojis/"+t.properties.value;else if("flag"===t.type_extra)var i=vars.paths.static+"/flags/"+t.properties.value;else if("transparent"===t.type_extra)var i=vars.paths.static+"/hotspot_transparent.png";else var i=vars.paths.hotspots+"/"+r+"/"+t.properties.value;return new Promise(function(e){var r=new THREE.TextureLoader;r.load(i,function(r){r.minFilter=THREE.LinearFilter,t.flip_y&&(r.flipY=!1,r.needsUpdate=!0);var i=ge.returnObjectByType(t,r);i.name=t.name,i.oid=a,i.pid=Je.id,i.texture=r,i.isPanoramaObject=!0;var n=parseInt(t.opacity,10),s=parseInt(t.scale,10)||10,d=parseInt(t.rotation,10)||0;if(i.material.opacity=n/100,t.flip_x?i.scale.set(-s,s,s):i.scale.set(s,s,s),i.anim=null,i.transitions=t.transitions,i.transition={opacity:{from:n,to:parseInt(t.transitions.op.v,10),value:0,dir:0,request:null,temp_from:0,temp_to:0},scale:{from:s,to:parseInt(t.transitions.sc.v,10),value:0,dir:0,request:null,temp_from:0,temp_to:0},rotation:{from:d,to:parseInt(t.transitions.sw.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0},rotation_x:{from:parseInt(t.rotation_to_axes.x,10),to:parseInt(t.transitions.swx.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0},rotation_y:{from:parseInt(t.rotation_to_axes.y,10),to:parseInt(t.transitions.swy.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0},rotation_z:{from:parseInt(t.rotation_to_axes.z,10),to:parseInt(t.transitions.swz.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0}},"sprite_n"===t.type||"sprite_z"===t.type||"icon_font_n"===t.type||"icon_font_z"===t.type||"text_n"===t.type||"text_z"===t.type)"sprite_n"===t.type||"icon_font_n"===t.type||"text_n"===t.type?(i.position.set(0,-360,0),t.position=new THREE.Vector3(0,-360,0)):(i.position.set(0,360,0),t.position=new THREE.Vector3(0,360,0));else{var c=Je.camera.target.x,l=Je.camera.target.y,u=Je.camera.target.z;if(t.position)if("lat"in t.position&&"lon"in t.position){var p=THEASYS.fn.latLonToXYZ(t.position.lat,t.position.lon);c=parseFloat(p.x,10),l=parseFloat(p.y,10),u=parseFloat(p.z,10)}else{c=parseFloat(t.position.x,10),l=parseFloat(t.position.y,10),u=parseFloat(t.position.z,10);var m=THEASYS.fn.xyzToLatLon(c,l,u);t.position.lat=m.lat,t.position.lon=m.lon}i.position.set(c,l,u)}t.z&&(i.z=parseFloat(t.z,10)),i.flip={x:0,y:0},t.flip_x?i.flip.x=t.flip_x||0:i.flip_x=0,t.flip_y?i.flip.y=t.flip_y||0:i.flip_y=0,t.position.x=i.position.x,t.position.y=i.position.y,t.position.z=i.position.z,i.ctype="object",i.data=t,i.visible=!!t.visible,i.default_visible=!!t.visible;var f=ge.getObjectOrder(t.order);i.renderOrder=f,i.z=f,0!==t.scene&&(i.onBeforeRender=function(e){e.clearDepth()}),Je.objects[a]=i,ge.setObjectRotation(t),~~Je.options.hotspots_display_nadir_zenith_patch||"sprite_n"!==t.type&&"sprite_z"!==t.type&&"icon_font_n"!==t.type&&"icon_font_z"!==t.type&&"text_n"!==t.type&&"text_z"!==t.type||(Je.objects[a].visible=!1),ge.startTransitionInterval(a),q(a),e(t),"function"==typeof o&&o(t)},void 0,function(){e(t)})})},arrow:function(e,t){var o=parseInt(e.id,10);ge.stopTransitionInterval(o);var a=e.properties.points||{},r=new THREE.Vector3(a.a1.x,a.a1.y,a.a1.z),i=new THREE.Vector3(a.a2.x,a.a2.y,a.a2.z),n=new THREE.Vector3().subVectors(i,r).normalize(),s=parseInt(e.opacity,10)||100,d=parseInt(e.rotation,10)||0,c=parseInt(e.properties.line.status,10),l=e.properties.line.color||"#ff0000",u=parseInt(e.properties.line.width,10)||1,p=parseInt(e.properties.cone.status,10),m=e.properties.cone.color||"#ff0000",f=parseFloat(e.properties.cone.size,10)||.2,v=new THREE.ArrowHelper(n,r,r.distanceTo(i),"#ff0000",f*r.distanceTo(i));v.line.material.linewidth=u,v.line.material.visible=!!c,v.line.material.transparent=!0,v.line.material.opacity=s/100,v.line.material.color.set(l),v.cone.material.visible=!!p,v.cone.material.transparent=!0,v.cone.material.opacity=s/100,v.cone.material.color.set(m),v.name=e.name,v.oid=o,v.pid=Je.id,v.isPanoramaObject=!0,v.anim=null,v.transitions=e.transitions,v.transition={opacity:{from:s,to:parseInt(e.transitions.op.v,10),value:0,dir:0,request:null,temp_from:0,temp_to:0},scale:{from:0,to:parseInt(e.transitions.sc.v,10),value:0,dir:0,request:null,temp_from:0,temp_to:0},rotation:{from:d,to:parseInt(e.transitions.sw.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0},rotation_x:{from:parseInt(e.rotation_to_axes.x,10),to:parseInt(e.transitions.swx.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0},rotation_y:{from:parseInt(e.rotation_to_axes.y,10),to:parseInt(e.transitions.swy.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0},rotation_z:{from:parseInt(e.rotation_to_axes.z,10),to:parseInt(e.transitions.swz.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0}},v.ctype="object",v.arrow=!0,v.data=e,v.userData=e,v.visible=!!e.visible,v.default_visible=!!e.visible;var _=ge.getObjectOrder(e.order);v.renderOrder=_,v.z=_,0!==e.scene&&(v.onBeforeRender=function(e){e.clearDepth()}),e.z&&(v.z=parseFloat(e.z,10)),Je.objects[o]=v,ge.startTransitionInterval(o),q(o),"function"==typeof t&&t(e,v)},line:function(e,t){return new Promise(function(o){var a=parseInt(e.id,10);ge.stopTransitionInterval(a);var r=e.properties.points||{},n=parseInt(e.opacity,10),s=parseInt(e.rotation,10)||0,d=e.properties.color||"#ff0000",c=parseInt(e.properties.width,10)||1,u=new THREE.LineBasicMaterial({color:d,linewidth:c}),p=new THREE.Geometry,m=[];for(var f in r)m.push(parseInt(f.substr(1),10));m.sort(function(e,t){return e-t});for(var f=0,v=m.length;f<v;f++)p.vertices.push(new THREE.Vector3(parseFloat(r["l"+m[f]].x,10),parseFloat(r["l"+m[f]].y,10),parseFloat(r["l"+m[f]].z,10)));if(~~e.properties.dashed.visible)var u=new THREE.LineDashedMaterial({color:d,dashSize:~~e.properties.dashed.dashSize,gapSize:~~e.properties.dashed.gapSize,scale:~~e.properties.dashed.scale});else var u=new THREE.LineBasicMaterial({color:d});var l=new THREE.Line(p,u);~~e.properties.dashed.visible&&l.computeLineDistances(),l.material.transparent=!0,l.material.opacity=n/100,l.name=e.name,l.oid=a,l.pid=Je.id,l.isPanoramaObject=!0,l.anim=null,l.transitions=e.transitions,l.transition={opacity:{from:n,to:parseInt(e.transitions.op.v,10),value:0,dir:0,request:null,temp_from:0,temp_to:0},scale:{from:0,to:parseInt(e.transitions.sc.v,10),value:0,dir:0,request:null,temp_from:0,temp_to:0},rotation:{from:s,to:parseInt(e.transitions.sw.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0},rotation_x:{from:parseInt(e.rotation_to_axes.x,10),to:parseInt(e.transitions.swx.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0},rotation_y:{from:parseInt(e.rotation_to_axes.y,10),to:parseInt(e.transitions.swy.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0},rotation_z:{from:parseInt(e.rotation_to_axes.z,10),to:parseInt(e.transitions.swz.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0}},l.ctype="object",l.line=!0,l.data=e,l.visible=!!e.visible,l.default_visible=!!e.visible;var _=ge.getObjectOrder(e.order);l.renderOrder=_,l.z=_,0!==e.scene&&(l.onBeforeRender=function(e){e.clearDepth()}),e.z&&(l.z=parseFloat(e.z,10)),Je.objects[a]=l,ge.startTransitionInterval(a),q(a),o(e),"function"==typeof t&&t(e,l)})},shape:function(e,t){return new Promise(function(o){var a=parseInt(e.id,10);ge.stopTransitionInterval(a);var r=e.properties.points||{},n=parseInt(e.opacity,10),s=parseInt(e.scale,10)||10,d=parseInt(e.rotation,10)||0,c=[],u={},p=[];for(var m in r){var f=parseInt(m.substr(1),10);p.push(f)}p.sort(function(e,t){return e-t});for(var m=0,v=p.length;m<v;m++)c.push(new THREE.Vector3(parseFloat(r["s"+p[m]].x,10),parseFloat(r["s"+p[m]].y,10),parseFloat(r["s"+p[m]].z,10))),u["s"+p[m]]=r["s"+p[m]];var l=c,_=[],b=new THREE.Geometry({curveSegments:100}),h=new THREE.MeshBasicMaterial({color:e.properties.color||"#ffffff",overdraw:.5,side:THREE.DoubleSide,transparent:!0,opacity:n/100});b.vertices=l;for(var g=THREE.ShapeUtils.triangulateShape(l,_),m=0;m<g.length;m++)b.faces.push(new THREE.Face3(g[m][0],g[m][1],g[m][2]));var j=new THREE.Mesh(b,h);j.name=e.name,j.oid=a,j.pid=Je.id,j.anchor_points=u,j.isPanoramaObject=!0,j.anim=null,j.transitions=e.transitions,j.transition={opacity:{from:n,to:parseInt(e.transitions.op.v,10),value:0,dir:0,request:null,temp_from:0,temp_to:0},scale:{from:s,to:parseInt(e.transitions.sc.v,10),value:0,dir:0,request:null,temp_from:0,temp_to:0},rotation:{from:d,to:parseInt(e.transitions.sw.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0},rotation_x:{from:parseInt(e.rotation_to_axes.x,10),to:parseInt(e.transitions.swx.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0},rotation_y:{from:parseInt(e.rotation_to_axes.y,10),to:parseInt(e.transitions.swy.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0},rotation_z:{from:parseInt(e.rotation_to_axes.z,10),to:parseInt(e.transitions.swz.v,10),value:0,dir:0,request:null,rotation:0,temp_from:0,temp_to:0}},j.ctype="object",j.data=e,j.visible=!!e.visible,j.default_visible=!!e.visible;var x=ge.getObjectOrder(e.order);j.renderOrder=x,j.z=x,0!==e.scene&&(j.onBeforeRender=function(e){e.clearDepth()}),e.z&&(j.z=parseFloat(e.z,10)),j.isChanged=!1,Je.objects[a]=j,ge.startTransitionInterval(a),q(a),o(e),"function"==typeof t&&t(e,j)})}},actions:{execute:function(e){var e=e||0;if(e&&e in Je.objects){var o=Je.objects[e].data.action||null;if(o&&"type"in o)switch(o.type){case"link_to_panorama":"panorama_id"in o&&o.panorama_id&&(t.fetchPanorama({l:o.panorama_rnd},o),t.event.trigger("hotspotClick",o));break;case"link_to_url":case"call":case"display_info_panel":case"display_image":case"display_video":t.event.trigger("hotspotClick",o);break;case"play_sound":Je.audios[e]&&(Je.audios[e].isPlaying?Je.audios[e].stop():Je.audios[e].play()),t.event.trigger("hotspotClick",o);}}},auto_execute:function(){var e=new THREE.Vector3(Je.xyzClick.x,Je.xyzClick.y,Je.xyzClick.z),t={};for(var o in Je.objects){var a="action"in Je.objects[o].data&&Je.objects[o].data.action||null;if(a&&"type"in a&&"link_to_panorama"===a.type&&"lat"in a&&"lon"in a){var r=THEASYS.fn.latLonToXYZ(a.lat,a.lon),n=new THREE.Vector3(parseFloat(r.x,10),parseFloat(r.y,10),parseFloat(r.z,10));t[o]=e.distanceTo(n)}}var s=Number.MAX_VALUE,d=0;for(var o in t)t[o]<s&&(s=t[o],d=o);0<d&&this.execute(d)}},getObjectOrder:function(e){return e+1},setObjectRotation:function(e,t){if("flare"===e.type||"arrow"===e.type||"line"===e.type)return!1;var o=!1;if(e.rotation_to_axes.status&&(o=!0),("sprite_n"===e.type||"sprite_z"===e.type||"icon_font_n"===e.type||"icon_font_z"===e.type||"text_n"===e.type||"text_z"===e.type)&&(o=!0),void 0===t)var a=parseInt(e.rotation,10)||0;else var a=parseInt(t,10)||0;var r=parseInt(e.id,10),i=parseInt(e.rtaold,10);if(o){if("sprite_n"===e.type||"sprite_z"===e.type||"icon_font_n"===e.type||"icon_font_z"===e.type||"text_n"===e.type||"text_z"===e.type){if(Je.objects[r].rotation.x=THREE.Math.degToRad(90),Je.objects[r].rotation.y=THREE.Math.degToRad(0),Je.objects[r].rotation.z=-THREE.Math.degToRad(a),e.rotation_to_axes.status)if(i)Je.objects[r].rotation.x=THREE.Math.degToRad(parseInt(e.rotation_to_axes.x,10)),Je.objects[r].rotation.y=THREE.Math.degToRad(parseInt(e.rotation_to_axes.y,10)),Je.objects[r].rotation.z=THREE.Math.degToRad(parseInt(e.rotation_to_axes.z,10));else{var n=Je.objects[r].data.position.lon,s=Je.objects[r].data.position.lat,d=new THREE.Vector3(Math.cos(n)*Math.sin(s),Math.sin(n),Math.cos(n)*Math.cos(s));Je.objects[r].lookAt(d),Je.objects[r].rotateOnAxis(new THREE.Vector3(1,0,0),THREE.Math.degToRad(Je.objects[r].data.rotation_to_axes.x)),Je.objects[r].rotateOnAxis(new THREE.Vector3(0,1,0),THREE.Math.degToRad(Je.objects[r].data.rotation_to_axes.y)),Je.objects[r].rotateOnAxis(new THREE.Vector3(0,0,1),THREE.Math.degToRad(Je.objects[r].data.rotation_to_axes.z))}}else if(i)Je.objects[r].rotation.x=THREE.Math.degToRad(parseInt(e.rotation_to_axes.x,10)),Je.objects[r].rotation.y=THREE.Math.degToRad(parseInt(e.rotation_to_axes.y,10)),Je.objects[r].rotation.z=THREE.Math.degToRad(parseInt(e.rotation_to_axes.z,10));else{var n=Je.objects[r].data.position.lon,s=Je.objects[r].data.position.lat,d=new THREE.Vector3(Math.cos(n)*Math.sin(s),Math.sin(n),Math.cos(n)*Math.cos(s));Je.objects[r].lookAt(d),Je.objects[r].rotateOnAxis(new THREE.Vector3(1,0,0),THREE.Math.degToRad(Je.objects[r].data.rotation_to_axes.x)),Je.objects[r].rotateOnAxis(new THREE.Vector3(0,1,0),THREE.Math.degToRad(Je.objects[r].data.rotation_to_axes.y)),Je.objects[r].rotateOnAxis(new THREE.Vector3(0,0,1),THREE.Math.degToRad(Je.objects[r].data.rotation_to_axes.z))}if("text3d"===e.type)if(i)Je.objects[r].rotation.x=THREE.Math.degToRad(parseInt(e.rotation_to_axes.x,10)),Je.objects[r].rotation.y=THREE.Math.degToRad(parseInt(e.rotation_to_axes.y,10)),Je.objects[r].rotation.z=THREE.Math.degToRad(parseInt(e.rotation_to_axes.z,10));else if(Je.objects[r].children.length){var n=Je.objects[r].data.position.lon,s=Je.objects[r].data.position.lat,d=new THREE.Vector3(Math.cos(n)*Math.sin(s),Math.sin(n),Math.cos(n)*Math.cos(s));Je.objects[r].children[0].lookAt(d),Je.objects[r].children[0].rotateOnAxis(new THREE.Vector3(1,0,0),THREE.Math.degToRad(Je.objects[r].children[0].data.rotation_to_axes.x)),Je.objects[r].children[0].rotateOnAxis(new THREE.Vector3(0,1,0),THREE.Math.degToRad(Je.objects[r].children[0].data.rotation_to_axes.y)),Je.objects[r].children[0].rotateOnAxis(new THREE.Vector3(0,0,1),THREE.Math.degToRad(Je.objects[r].children[0].data.rotation_to_axes.z))}}else if("text3d"===Je.objects[r].data.type){var c=new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0,0,1),THREE.Math.degToRad(a)),l=c.multiplyQuaternions(Je.camera.quaternion,c);Je.objects[r].setRotationFromQuaternion(l),Je.objects[r].children.length&&Je.objects[r].children[0].rotation.copy(Je.objects[r].rotation)}else Je.objects[r].material.rotation=-THREE.Math.degToRad(a)},setObjectRotationToAxesText3dHelper:function(e,t,o,a){if("text3d"!==e.type)return!1;var r=parseInt(e.id,10);if(Je.objects[r].children.length){var i=parseInt(e.rtaold,10);if(i)Je.objects[r].rotation.x=THREE.Math.degToRad(parseInt(t,10)),Je.objects[r].rotation.y=THREE.Math.degToRad(parseInt(o,10)),Je.objects[r].rotation.z=THREE.Math.degToRad(parseInt(a,10));else{var n=Je.objects[r].data.position.lon,s=Je.objects[r].data.position.lat,d=new THREE.Vector3(Math.cos(n)*Math.sin(s),Math.sin(n),Math.cos(n)*Math.cos(s));Je.objects[r].children[0].lookAt(d),Je.objects[r].children[0].rotateOnAxis(new THREE.Vector3(1,0,0),THREE.Math.degToRad(t)),Je.objects[r].children[0].rotateOnAxis(new THREE.Vector3(0,1,0),THREE.Math.degToRad(o)),Je.objects[r].children[0].rotateOnAxis(new THREE.Vector3(0,0,1),THREE.Math.degToRad(a))}}},returnObjectByType:function(e,t){var o=!1;e.rotation_to_axes.status&&(o=!0),("sprite_n"===e.type||"sprite_z"===e.type||"icon_font_n"===e.type||"icon_font_z"===e.type||"text_n"===e.type||"text_z"===e.type)&&(o=!0);var a=e.properties.color||{r:1,g:1,b:1};if(o){var r=new THREE.PlaneGeometry(1,1),i=new THREE.MeshBasicMaterial({map:t,opacity:1,side:THREE.DoubleSide,transparent:!0});("sprite"===e.type||"sprite_n"===e.type||"sprite_z"===e.type)&&i.color.setRGB(a.r,a.g,a.b);var n=new THREE.Mesh(r,i)}else{var i=new THREE.SpriteMaterial({map:t});"sprite"===e.type&&i.color.setRGB(a.r,a.g,a.b);var n=new THREE.Sprite(i),s=new Uint16Array([0,1,2,0,2,3]),d=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),c=new Float32Array([0,0,1,0,1,1,0,1]),r=new THREE.BufferGeometry;r.setIndex(new THREE.BufferAttribute(s,1)),r.addAttribute("position",new THREE.BufferAttribute(d,3)),r.addAttribute("uv",new THREE.BufferAttribute(c,2)),n.geometry=r}return n}},je=function(e){return void 0===e?void(Je.current_position.fov>Je.zoom_out&&(Je.current_position.fov=Je.zoom_out),Je.current_position.fov<Je.zoom_in&&(Je.current_position.fov=Je.zoom_in)):(e>Je.zoom_out&&(e=Je.zoom_out),e<Je.zoom_in&&(e=Je.zoom_in),e)},xe=function(e,t){if(void 0===t&&(t=Je.camera.fov<e),t&&!Je.isFull){e>Je.minEffectiveFov&&(Je.current_position.fov=Je.minEffectiveFov);var o=(Je.minEffectiveFov-e)/2;0<Je.lat?o<Je.lat&&(Je.lat=o):0>Je.lat?o<-Je.lat&&(Je.lat=-o):Je.lat=0,Je.current_position.lat=Je.lat}Je.lat=Math.max(-90,Math.min(90,Je.lat)),Je.phi=THREE.Math.degToRad(90-Je.lat),Je.theta=THREE.Math.degToRad(Je.lon),Je.current_position.y=90*Math.cos(Je.phi),Je.current_position.x=90*Math.sin(Je.phi)*Math.cos(Je.theta),Je.current_position.z=90*Math.sin(Je.phi)*Math.sin(Je.theta),Je.current_position.fov=e,je(),Je.camera.fov=Je.current_position.fov,Je.camera.updateProjectionMatrix(),s()},ye=function(){var e=window.location.search.substring(1),t=e.split("&");if(0<t.length)for(var o=0,a;o<t.length;o++)a=t[o].split("="),a[0]&&(Je.url[a[0]]=a[1]);Je.url.nm&&(Je.nm=parseInt(Je.url.nm,10)),Je.url.m&&(Je.mode=parseInt(Je.url.m,10)),Je.url.mof&&(Je.mof=parseInt(Je.url.mof,10)),Je.url.q&&Je.qualities[parseInt(Je.url.q,10)]&&(Je.quality=Je.qualities[parseInt(Je.url.q,10)]),Je.url.pn&&(Je.poi.name=Je.url.pn)},Ie=function(e){return e?(e=parseInt(e,10),0>e?e=360+e:360<e&&(e=360),e):0},we=function(e){if(void 0===e)var e=Je.lat;if(Je.pitch&&"s"in Je.pitch)if(parseInt(Je.pitch.s,10)){var t=parseInt(Je.pitch.u,10),o=parseInt(Je.pitch.d,10);e>=t?e=t:0>e?e<o&&(e=o):e<o&&(e=o)}else Je.isFull||(Je.fovLimitTop=(Je.minEffectiveFovTop-Je.current_position.fov)/2,e>Je.fovLimitTop?e=Je.fovLimitTop:-180===Je.minEffectiveFovBottom||(Je.fovLimitBottom=(Math.abs(Je.minEffectiveFovBottom)-Je.current_position.fov)/2,Math.abs(e)>Je.fovLimitBottom&&(e=-Je.fovLimitBottom)));return 0<e?90<=Math.abs(e)&&(e=89):-90>=e&&(e=-89),Je.panoramas_interaction_direction.v&&(Je.lat*=-1,e*=-1),e},ke=function(){Je.isFull||(Je.viewLimit=45*Je.camera.fov/100)},Te=function(){Je.auto_rotation.status?Je.auto_rotation_enabled||parseInt(Je.options.auto_rotation_active_on_load,10)&&(Je.auto_rotation_enabled=1):Je.auto_rotation_enabled=0,Pe()},Pe=function(){t.event.trigger("autoRotation")},ze=function(){"quality_active_on_load"in Je.options&&Je.options.quality_active_on_load&&(Je.quality_hd_mobile=1),"panoramas_transition_notmp"in Je.options&&(Je.transition_notmp=~~Je.options.panoramas_transition_notmp),"panoramas_transition_keep_view"in Je.options&&(Je.transition_keep_view=~~Je.options.panoramas_transition_keep_view),"maps_geo_show"in Je.options&&(Je.hasMap=~~Je.options.maps_geo_show),"auto_rotation_disable_on_interaction"in Je.options&&(Je.auto_rotation_disable_on_interaction=~~Je.options.auto_rotation_disable_on_interaction),1==~~Je.options.disable_auto_rotation_on_start&&(Je.enable_auto_rotation=0);var e=0;~~Je.options.logo_display&&(e=1),Je.panorama_linking_mode=Je.options.panoramas_transition},Se=function(){if(!Je.obj)return!1;if(Je.vertical_offset=parseFloat(Je.obj.vertical_offset,10),Je.movement.x=Je.obj.movement.x,Je.movement.y=Je.obj.movement.y,Je.movement.x_limit.from=Je.obj.hv_limits.h.from,Je.movement.x_limit.to=Je.obj.hv_limits.h.to,Je.movement.y_limit.from=Je.obj.hv_limits.v.from,Je.movement.y_limit.to=Je.obj.hv_limits.v.to,Je.zoom_in=Je.obj.zoom_limits&&parseInt(Je.obj.zoom_limits.zoom_in,10)||parseInt(Je.obj.zoom_in,10),Je.zoom_out=Je.obj.zoom_limits&&parseInt(Je.obj.zoom_limits.zoom_out,10)||parseInt(Je.obj.zoom_out,10),Je.action_view){var e=parseInt(Je.action_view.fov,10);(e<Je.zoom_in||e>Je.zoom_out)&&(e<Je.zoom_in?e=Je.zoom_in:e>Je.zoom_out&&(e=Je.zoom_out)),Je.transition_keep_view||(!Je.loadedOnce&&(Je.current_position.fov=e,Je.camera.fov=e,Je.camera.updateProjectionMatrix()),P(parseFloat(Je.action_view.lat,10),parseFloat(Je.action_view.lon,10)))}else{var t=0,o=0;if("lat"in Je.obj.default_view&&"lon"in Je.obj.default_view)t=parseFloat(Je.obj.default_view.lat,10),o=parseFloat(Je.obj.default_view.lon,10);else if("x"in Je.obj.default_view&&"y"in Je.obj.default_view&&"z"in Je.obj.default_view){var a=THEASYS.fn.xyzToLatLon(parseFloat(Je.obj.default_view.x,10),parseFloat(Je.obj.default_view.y,10),parseFloat(Je.obj.default_view.z,10));t=parseFloat(a.lat,10),o=parseFloat(a.lon,10)}Je.lat=t,Je.lon=o,!Je.loadedOnce&&""!==Je.tour_embed_share_id&&Je.obj.goTo&&(Je.lat=parseFloat(Je.obj.goTo.a,10),Je.lon=parseFloat(Je.obj.goTo.s,10),Je.current_position.fov=parseInt(Je.obj.goTo.y,10),Je.camera.fov=Je.current_position.fov,Je.camera.updateProjectionMatrix()),P(parseFloat(Je.lat,10),parseFloat(Je.lon,10))}Je.auto_rotation.direction=Je.obj.auto_rotation.direction,Je.auto_rotation.delay=Je.obj.auto_rotation.delay,Je.auto_rotation.speed=Je.obj.auto_rotation.speed,Je.auto_rotation.status=Je.obj.auto_rotation.status;var r=!0;!Je.loadedOnce&&""!==Je.tour_embed_share_id&&Je.obj.goTo&&Je.obj.goTo._!==Je.obj.tour_panorama_id&&(r=!1),r&&Je.options.auto_rotation_starting_panorama&&(Je.options.auto_rotation_starting_panorama_keep?Je.id===Je.options.starting_panorama&&(Je.auto_rotation.direction=Je.options.auto_rotation_starting_panorama_direction,Je.auto_rotation.delay=Je.options.auto_rotation_starting_panorama_delay,Je.auto_rotation.speed=Je.options.auto_rotation_starting_panorama_speed,Je.auto_rotation.status=Je.options.auto_rotation_starting_panorama):!Je.loadedOnce&&(Je.auto_rotation.direction=Je.options.auto_rotation_starting_panorama_direction,Je.auto_rotation.delay=Je.options.auto_rotation_starting_panorama_delay,Je.auto_rotation.speed=Je.options.auto_rotation_starting_panorama_speed,Je.auto_rotation.status=Je.options.auto_rotation_starting_panorama)),Pe(),Je.autoRotationBeforeAction&&(Je.enable_auto_rotation=Je.autoRotationBeforeAction,Je.autoRotationBeforeAction=0)},Re=function(e,o){if(void 0===e&&(e=$(window).width()),void 0===o&&(o=$(window).height()),e=Je.rendererWidth,o=Je.rendererHeight,Je.vr&&(Je.stereoEffect.setSize(Je.rendererWidth,Je.rendererHeight),Je.device.isMobile&&(e=$(window).width(),o=$(window).height(),Je.stereoEffect.setSize(e,o),Je.stereoEffect.setFov(l()),Je.viewer_left_target.css({left:e/4-Je.viewer_left_target.width()/2,display:"block"}),Je.viewer_right_target.css({left:e/2+e/2/2-Je.viewer_right_target.width()/2,display:"block"}),o>e?tt(1):tt(0))),t.event.trigger("resize",Je.rendererWidth,Je.rendererHeight),Je.camera&&(Je.camera.aspect=Je.rendererWidth/Je.rendererHeight,Je.renderer&&Je.renderer.setSize(Je.rendererWidth,Je.rendererHeight),Je.camera.updateProjectionMatrix()),"hblur"in Je.shaders&&"blur"in Je.effects){var e=Je.vr?e/2:e;Je.shaders.hblur.uniforms.h.value=parseFloat(Je.effects.blur.value,10)/e}"vblur"in Je.shaders&&"blur"in Je.effects&&(Je.shaders.vblur.uniforms.v.value=parseFloat(Je.effects.blur.value,10)/o),"sharpness"in Je.shaders&&"sharpness"in Je.effects&&(Je.shaders.sharpness.uniforms.vw.value=parseFloat(Je.effects.sharpness.value,10)/e,Je.shaders.sharpness.uniforms.vh.value=parseFloat(Je.effects.sharpness.value,10)/o)},Me=function(){t.event.trigger("render"),Je.transition.isActive?Je.transition.render():Je.vr?(Je.composer&&Je.composer.render(),Je.renderer.render(Je.scene,Je.camera),Je.renderer.clearDepth(),Je.renderer.render(Je.scene_1,Je.camera),Je.stereoEffect.render(Je.scene,Je.scene_1,Je.camera)):(Je.composer&&Je.composer.render(),Je.renderer.render(Je.scene,Je.camera),Je.renderer.clearDepth(),Je.renderer.render(Je.scene_1,Je.camera))},qe=function(e){Je.current_position.fov=parseInt(e,10),xe(Je.current_position.fov),Je.camera.updateProjectionMatrix(),c(),H({fov:Je.current_position.fov}),We(),t.event.trigger("fovChange",Je.current_position.fov)},De=function(e,t){if(e===void 0)var e=Je.lat;if(void 0===t)var t=Je.lon;Je.lon=t,Je.current_position.lon=Je.lon,Je.current_position.lat=e,Je.lat=Je.current_position.lat,Je.lat=Math.max(-90,Math.min(90,Je.lat)),Je.phi=THREE.Math.degToRad(90-Je.lat),Je.theta=THREE.Math.degToRad(Je.lon);var o=360*Math.sin(Je.phi)*Math.cos(Je.theta),a=360*Math.cos(Je.phi),r=360*Math.sin(Je.phi)*Math.sin(Je.theta);Je.current_position.x=o,Je.current_position.y=a,Je.current_position.z=r,Je.current_position.lat=Je.lat,Je.current_position.lon=Je.lon},Ae=function(){window.cancelAnimationFrame(Je.requestAnimationFrameId)},Fe=function(){Je.auto_rotation.timeout&&window.clearRequestTimeout(Je.auto_rotation.timeout)},Ce=function(){Je.auto_rotation_disable_on_interaction&&(Je.autoRotationDisabledBecauseOfInteraction=1,Je.auto_rotation_enabled=0),Pe(),c()},Ue=function(){Je.supports.webgl=Detector.webgl||0},Ee=function(){Je.projection=Je.projection?0:1},Oe=function(){return void 0===document.webkitFullscreenElement&&Je.device.isMobile?(window.open(window.location.href),!1):void(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?(document.exitFullscreen?document.exitFullscreen().catch(function(e){console.error("Error attempting to disable full-screen mode: "+e.message+" ("+e.name+")")}):document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),Je.isFullScreen=0):(document.documentElement.requestFullscreen?document.documentElement.requestFullscreen().catch(function(e){console.error("Error attempting to enable full-screen mode: "+e.message+" ("+e.name+")")}):document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),Je.isFullScreen=1))},Be=function(){Je.isFullScreen||($("body").css("height","auto"),document.documentElement.requestFullscreen?document.documentElement.requestFullscreen().catch(function(e){console.error("Error attempting to enable full-screen mode: "+e.message+" ("+e.name+")")}):document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),Je.isFullScreen=1)},Le=function(){Je.isFullScreen&&(document.exitFullscreen?document.exitFullscreen().catch(function(e){console.error("Error attempting to disable full-screen mode: "+e.message+" ("+e.name+")")}):document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),Je.isFullScreen=0)},Ve=function(){var e=THEASYS.fn.xyzToLatLon(Je.current_position.x,Je.current_position.y,Je.current_position.z);Je.tr.push(e.lon.toFixed(2)+","+e.lat.toFixed(2)+","+Je.current_position.fov)},Ye=function(e){if(!Je.loadedOnce){var t=new THREE.TextureLoader;if(!(Je.options.load_transition in Je.transition.transitions))t.load(vars.paths.img+"/viewer/transitions/default.jpg",function(t){Je.transition.transition_texture=t,Je.transition.transition_texture.plm=0,Je.transition.transition_texture.wrapS=Je.transition.transition_texture.wrapT=THREE.RepeatWrapping,"function"==typeof e&&e()});else if("texture"in Je.transition.transitions[Je.options.load_transition]){var o=!0;Je.transition.transition_texture&&Je.transition.transition_texture.plm===Je.options.load_transition&&(o=!1),o?t.load(vars.paths.img+"/viewer/transitions/"+Je.transition.transitions[Je.options.load_transition].texture,function(t){Je.transition.transition_texture=t,Je.transition.transition_texture.plm=Je.options.load_transition,Je.transition.transition_texture.wrapS=Je.transition.transition_texture.wrapT=THREE.RepeatWrapping,"function"==typeof e&&e()}):"function"==typeof e&&e()}else"function"==typeof e&&e()}else{var t=new THREE.TextureLoader;if(!(Je.panorama_linking_mode in Je.transition.transitions))t.load(vars.paths.img+"/viewer/transitions/default.jpg",function(t){t.minFilter=THREE.LinearFilter,Je.transition.transition_texture=t,Je.transition.transition_texture.plm=0,Je.transition.transition_texture.wrapS=Je.transition.transition_texture.wrapT=THREE.RepeatWrapping,"function"==typeof e&&e()});else if("texture"in Je.transition.transitions[Je.panorama_linking_mode]){var o=!0;Je.transition.transition_texture&&Je.transition.transition_texture.plm===Je.panorama_linking_mode&&(o=!1),o?Je.transition.transition_texture=t.load(vars.paths.img+"/viewer/transitions/"+Je.transition.transitions[Je.panorama_linking_mode].texture,function(t){Je.transition.transition_texture=t,Je.transition.transition_texture.plm=Je.panorama_linking_mode,Je.transition.transition_texture.wrapS=Je.transition.transition_texture.wrapT=THREE.RepeatWrapping,"function"==typeof e&&e()}):"function"==typeof e&&e()}else"function"==typeof e&&e()}},Xe=function(e,o){if(Je.finishedPanoramaMovement=0,void 0===e)var e=Je.lat;if(void 0===o)var o=Je.lon;Je.lon=o,Je.current_position.lon=Je.lon,Je.current_position.lat=e,Je.lat=Je.current_position.lat,Je.lat=Math.max(-90,Math.min(90,Je.lat)),Je.phi=THREE.Math.degToRad(90-Je.lat),Je.theta=THREE.Math.degToRad(Je.lon);var a=360*Math.sin(Je.phi)*Math.cos(Je.theta),r=360*Math.cos(Je.phi),i=360*Math.sin(Je.phi)*Math.sin(Je.theta);Je.current_position.x=a,Je.current_position.y=r,Je.current_position.z=i,Je.current_position.lat=Je.lat,Je.current_position.lon=Je.lon,Je.camera.updateProjectionMatrix(),H({lon:Je.lon}),H({lat:Je.lat}),Je.deg=THEASYS.fn.xyzToDeg(Je.current_position.x,Je.current_position.y,Je.current_position.z),We(),t.event.trigger("updatePanoramaPosition")},He=function(){We(),Je.finishedPanoramaMovement=1,t.event.trigger("finishedPanoramaMovement")},We=function(){(~~Je.options.nav_arrows||~~Je.options.nav_mouse)&&(Je.camera.updateMatrixWorld(),Ne(),Ge())},Ne=function(){var e;for(var t in Object.keys(Je.hotspots_degrees_position).forEach(function(e){delete Je.hotspots_degrees_position[e]}),Je.objects)1==~~Je.objects[t].data.visible&&"link_to_panorama"===Je.objects[t].data.action_type&&(Ze(Je.objects[t])?(e=Je.objects[t].position,Je.hotspots_degrees_position[t]=[THEASYS.fn.xyzToDeg(e.x,e.y,e.z)]):delete Je.hotspots_degrees_position[t])},Ge=function(){for(var e in Object.keys(Je.hotspots_local_position).forEach(function(e){delete Je.hotspots_local_position[e]}),Je.objects)1==~~Je.objects[e].data.visible&&"link_to_panorama"===Je.objects[e].data.action_type&&(Ze(Je.objects[e])?Je.hotspots_local_position[e]=Ke(Je.objects[e].position):delete Je.hotspots_local_position[e])},Qe=function(o){if(Je.isUserInteracting&&!Je.loadingPanorama){var a,r;"touchmove"===o.type?o.originalEvent.touches.length&&(a=o.originalEvent.touches[0].clientX,r=o.originalEvent.touches[0].clientY):(a=o.offsetX,r=o.offsetY);var i=.3*Je.current_position.fov/Je.minEffectiveFov;(Je.gyroscope||Je.vr)&&(i=.01);var n=Je.device.isMobile?i:.25*Je.current_position.fov/Je.minEffectiveFov;Je.lon=(Je.onPointerDownPointerX-a)*n+Je.onPointerDownLon,Je.panoramas_interaction_direction.h&&(Je.lon=360-Je.lon),0>Je.lon&&(Je.lon+=360),360<Je.lon&&(Je.lon-=360*Math.floor(Je.lon/360)),0==Je.movement.x&&(Je.lon=Je.current_position.lon);var d=(r-Je.onPointerDownPointerY)*n+Je.onPointerDownLat;Je.lat=we(d),0==Je.movement.y&&(Je.lat=Je.current_position.lat),Xe(Je.lat,Je.lon),e.fn.is_empty(Je.controls)||Je.controls.updateAlphaOffsetAngle(Je.lon),Je.tr_enabled&&Ve(),s(),t.event.trigger("userMovePanorama")}},Ze=function(e){if(!Je.isObjectInViewportCheck)return!0;var t=new THREE.Frustum,o=new THREE.Matrix4;return Je.camera.updateMatrixWorld(),Je.camera.matrixWorldInverse.getInverse(Je.camera.matrixWorld),o.multiplyMatrices(Je.camera.projectionMatrix,Je.camera.matrixWorldInverse),t.setFromMatrix(o),t.intersectsObject(e)},Ke=function(e){var t=new THREE.Vector3(e.x,e.y,e.z);if(Je.current_loaded_panorama){var o=Je.current_loaded_panorama.matrixWorld;t.applyMatrix4(o),t.project(Je.camera),t.x=Math.round((t.x+1)*Je.rendererWidth/2),t.y=Math.round((-t.y+1)*Je.rendererHeight/2)}return t},Je={panorama_loaded_mask:void 0,projection:0,globalUserActionTriggeredOnce:0,pl:[],pl_incrementor:0,pl_pids:[],pl_tree:[],pl_resp:[],ImageLoaderWorker:null,panoramas_list_loaded:[],panoramas_list:[],panoramas_list_q:[],panoramasImagesList:{},finishedPanoramaMovement:0,closestHotspotId:0,deg_mouse:0,deg_mouse_vertical:0,isObjectInViewportCheck:0,hotspots_degrees_position:{},hotspots_local_position:{},rendererWidth:0,rendererHeight:0,cdn:0,subscribed:0,hasMap:0,request_loadedOnce:null,hotspotsDisplay:!0,ex:0,ey:0,loaded_static_image:null,static_image:"",clickXx:.5,clickYy:.5,clickX:0,clickY:0,interaction:!1,obj:null,texture_path_xs:"",texture_path_q:"",callback:null,action_view:null,transition_notmp:0,transition_keep_view:0,transition:null,hashes:[],panorama_level:{x:0,y:0,z:0},isFullScreen:0,soundsMenuClickedState:-1,soundModalEventsLoaded:0,pitch:null,fovMovementOffset:30,isPanoramaMoved:!1,xyzClick:{x:0,y:0,z:0},panoramas_interaction_direction:{h:0,v:0},panorama_linking_mode:0,current_loaded_panorama:null,current_loaded_panorama_obj:null,current_loaded_panoramaWhenNotHavingTMP:null,current_loaded_panoramaWhenNotHavingTMP_obj:null,abs_dir_panorama:"",playedBackgroundAudio:0,hasGPSAtLeastOnePanorama:0,autoRotationTemporarilyDisabled:!1,noSmoothMovement:!1,loadingPanorama:0,panoramas_movement:{s:1,v:.1},panorama_enhancements:0,map_gui_mode:0,stats:null,rendererstats:null,loadingManager:void 0,loadedFonts:{},typefacesLoaded:!1,iconLibsLoaded:!1,empty_img:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",tour_password:"",tour_rnd:"",tour_embed_rnd:"",tour_embed_share_id:"",tour_cache:0,tour_embed_cache:0,movement_direction:"",actionLon:{},cv:null,uid:"",poi:{name:"",lat:0,lng:0},panoramaTransition:"none",fontLoaded:!1,lockScreen:!1,renderOrderCounter:2,panorama_stack:"",tr_enabled:0,tr:[],tr_full:1,w:0,mof:0,action_pressed:!1,deg:0,linked_to_other_panorama:0,url:{x:0,y:0,z:0,fov:0,lat:0,lon:0},maxCachedPanoramas:1e3,callbacks:null,container:"viewer",cache:{enabled:!0,type:"localStorage",key:"theasys",value:{}},device:{isMobile:!1,isPhone:!1,isTablet:!1,userAgent:!1,androidVersion:0},detectedDeviceType:"desktop",fullScreenEnabled:!1,supports:{webgl:!1},action:"default",id:0,previous_id:0,rnd:"",quality_hd_mobile:0,quality:"lg",qualities:{1:"lg",2:"md",3:"sm",4:"xs"},camera:null,geometry:null,scene:null,scene_1:null,renderer:null,isUserInteracting:!1,isObjectInteracting:!1,onMouseDownMouseX:0,onMouseDownMouseY:0,lon:0,onMouseDownLon:0,lat:0,onMouseDownLat:0,phi:0,theta:0,minPolarAngle:0,maxPolarAngle:0,viewLimit:1,isFull:1,data:null,zoom_in:60,zoom_out:130,vertical_offset:0,tmp_x:0,current_position:{x:0,y:0,z:0,fov:0,lat:0,lon:0},movement:{x:1,x_limit:{from:0,to:360},y:1,y_limit:{from:-88,to:88}},auto_rotation_enabled:0,auto_rotation:{direction:0,delay:0,speed:0,temp_speed:0,status:0,timeout:null},enable_auto_rotation:1,auto_rotation_disable_on_interaction:0,autoRotationDisabledBecauseOfInteraction:0,view_modes:{},view_mode:"admin",objects:{},objectsTmp:{},object:null,objects_tooltip_gps:{},objects_tooltip:{},objects_tooltip_array:[],controls:{},control:null,plane:null,raycaster:null,mouse:{x:0,y:0},offset:null,mesh:null,innerSphere:null,innerSphereObject:[],outerSphereObject:[],moveTo:{deg:null,dir:0,vel:0,rounds:0},goTo:!1,goToDirection:0,intersected:null,texts:{},mode:0,requestAnimationFrameId:null,selectedObjectId:0,mouseEventsLoaded:0,keyboardEventsLoaded:0,stereoEffect:null,vr:0,vr_enabled:0,vr_tracking:0,target:null,target_num:0,clock:0,controls_target:null,menuCreated:0,loadedOnce:0,loadedTwice:0,loaded_panorama:null,wPositionCoords:{x:50,y:50},nm:-1,options:{autostart:"1",display_zenith_patch:"1",display_nadir_patch:"1",display_objects:"1",disable_auto_rotation_on_start:"0",logo_display:0,logo:"",menu_auto_rotation:"1",menu_fullscreen:"1",menu_map:"1",menu_vr:"1",opt_desktop:0,opt_tablet:0,opt_phone:0},audios:{},audioListener:null,user_random_uid:"",gyroscope:0,minEffectiveFov:180,minEffectiveFovTop:180,minEffectiveFovBottom:180,fovLimitTop:0,fovLimitBottom:0,isTouchingTop:!1,isTouchingBottom:!1,autoRotationBeforeAction:0,editing:0,editingInterval:0,apiInterval:0,thumbnails_loaded:!1,mapsGuiCreated:0,titleEventsCreated:0,shareEventsCreated:0,loadingEffects:0,effects:{},shaders:{},composer:null},$e=function(){t.event.trigger("userAction")},et=function(){t.event.trigger("userGlobalAction")},tt=function(e){t.event.trigger("vrVerticalLock",e)},ot=function(t){if(Je.iconLibsLoaded)return"function"==typeof t&&t(0),!1;var o=vars.icon_libs.length;0>=o&&(Je.iconLibsLoaded=!0,"function"==typeof t&&t(0));for(var a={fontAwesome:"\uF0C8","Elusive-Icons":"\uF13A","foundation-icons":"\uF150",JustVector:"\uF100",Ionicons:"\uF101"},r=0,n=0;n<o;n++){var s=15,d=function(a,i){var n,c;s-=1,n=document.createElement("canvas"),n.width=20,n.height=20,c=n.getContext("2d"),c.fillStyle="rgba(0,0,0,1.0)",c.fillRect(0,0,20,20);try{c.font="16pt \""+a+"\""}catch(t){}c.textAlign="center",c.fillStyle="rgba(255,255,255,1.0)";try{c.fillText(e.fn.unescapeUnicode(i),10,18)}catch(t){}var l=c.getImageData(10,10,1,1).data;255!==l[0]&&255!==l[1]&&255!==l[2]?0<s&&setTimeout(d,200,a,i):(r++,r===o&&(Je.iconLibsLoaded=!0,"function"==typeof t&&t(s)))};d(vars.icon_libs[n],a[vars.icon_libs[n]])}},at=function(){};return t}(THEASYS||{}),THEASYS.renderer.transitions=function(e,t){this.isActive=!1,this.shaderExists=!1,this.clock=new THREE.Clock,this.transitionParams=null,this.vr=null,this.transition_texture=null,this.composer=null,this.sceneA=null,this.sceneB=null,this.sceneB_useBackground=!1,this.sceneBColor=null,this.sceneBTexture=null,this.scene=null,this.renderer=t,this.onBeforeStart=null,this.onStart=null,this.onStop=null,this.fovMappings={1:31.75,2:30.75,3:29.75,4:28.75,5:27.75,6:26.75,7:25.75,8:24.75,9:23.75,10:22.75,11:21.75,12:20.75,13:19.75,14:18.75,15:17.75,16:16.75,17:15.75,18:14.75,19:13.75,20:12.75,21:13.35,22:13.9,23:14.5,24:15,25:15.6,26:16.1,27:16.6,28:17.15,29:17.6,30:18.15,31:18.6,32:19.1,33:19.6,34:20,35:20.45,36:20.9,37:21.3,38:21.7,39:22.1,40:22.5,41:22.9,42:23.2,43:23.6,44:23.9,45:24.3,46:24.6,47:24.9,48:25.2,49:25.4,50:25.7,51:26,52:26.2,53:26.5,54:26.7,55:26.9,56:27.2,57:27.4,58:27.6,59:27.7,60:27.8,61:28,62:28.1,63:28.3,64:28.4,65:28.5,66:28.6,67:28.7,68:28.8,69:28.8,70:28.8,71:28.9,72:29,73:29,74:29,75:29,76:29,77:29,78:29,79:28.9,80:28.9,81:28.9,82:28.8,83:28.8,84:28.7,85:28.6,86:28.5,87:28.4,88:28.3,89:28.2,90:28.1,91:28,92:27.9,93:27.8,94:27.65,95:27.5,96:27.2,97:27.05,98:26.9,99:26.7,100:26.55,101:26.35,102:26.15,103:26,104:25.8,105:25.6,106:25.4,107:25.2,108:24.95,109:24.75,110:24.55,111:24.25,112:23.9,113:23.7,114:23.5,115:23.2,116:22.9,117:22.6,118:22.35,119:22.1,120:21.8,121:21.5,122:21.2,123:20.9,124:20.65,125:20.35,126:20,127:19.7,128:19.4,129:19.1,130:18.75},this.createScene=function(o,t){var a=e.vars.get("container"),r=$("#"+a),i=r.innerWidth(),n=r.innerHeight(),s=new THREE.Scene;if(s.t=o,s.fbo=new THREE.WebGLRenderTarget(i,n,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,stencilBuffer:!1}),!t){var t=e.vars.get("camera");t=t.clone()}s.camera=t,s.renderer=this.renderer,s.fovMappings=this.fovMappings,s.render=function(e){if("A"===this.t){var t=this.camera.fov;"fovGo"in this.camera&&(t=this.camera.fovGo);var o=0;"walkthrough"===this.transitionParams.type&&(o=t in this.fovMappings?this.fovMappings[t]:0),this.camera.fov=t+o,this.camera.updateProjectionMatrix()}"target"in this.camera&&"A"===this.t&&this.camera.lookAt(this.camera.target),e?this.renderer.render(this,this.camera,this.fbo,!0):this.renderer.render(this,this.camera)},o?"A"===o?this.sceneA=s:"B"==o&&(this.sceneB=s):this.sceneA=s},this.resize=function(){},this.set=function(t,o){if(this.sceneB_useBackground&&(this.sceneBTexture?this.sceneB.background=this.sceneBTexture:this.sceneBColor&&(this.sceneB.background=new THREE.Color(this.sceneBColor))),this.scene=new THREE.Scene,this.transitionParams=t in this.transitions?this.transitions[t]:this.transitions[0],this.vr=o,this.clock.stop(),vars.has_panorama_enhancements&&(this.composer=new THREE.EffectComposer(this.renderer)),this._setShader(),this.onStop=null,this.shaderExists){this.cameraOrtho=this.vr?new THREE.OrthographicCamera(window.innerWidth/2/-2,window.innerWidth/2/2,window.innerHeight/2,window.innerHeight/-2,-10,10):new THREE.OrthographicCamera(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,-10,10);var a=new THREE.PlaneBufferGeometry(window.innerWidth,window.innerHeight);this.quad=new THREE.Mesh(a,this.quadmaterial),this.scene.add(this.quad),this.composer&&(this.composer.addPass(new THREE.RenderPass(this.scene,this.cameraOrtho)),e.applyEffects(this.composer)),this.needChange=!1,this.shaderExists=!0;var r=e.vars.get("objects"),n=e.vars.get("id");for(var s in r)r[s].pid===n?this.sceneA.add(r[s]):this.sceneB.add(r[s])}this.sceneA.transitionParams=this.transitionParams,this.sceneB.transitionParams=this.transitionParams},this._setShader=function(){var t=this.transitionParams&&this.transitionParams.type||"";if(!t)return this.shaderExists=!1,!1;if(!(t in this.shaders))return this.shaderExists=!1,!1;switch(this.shaderExists=!0,this.quadmaterial=new THREE.ShaderMaterial({uniforms:this.shaders[t].uniforms,vertexShader:this.shaders[t].vertexShader,fragmentShader:this.shaders[t].fragmentShader,transparent:this.shaders[t].transparent,opacity:this.shaders[t].opacity}),t){case"crossfade_move":this.quadmaterial.uniforms.texture1.value=this.sceneA.fbo.texture,this.quadmaterial.uniforms.texture2.value=this.sceneB.fbo.texture,this.quadmaterial.uniforms.resolution_w.value=window.innerWidth,this.quadmaterial.uniforms.resolution_h.value=window.innerHeight,this.quadmaterial.uniforms.strength.value=this.transitionParams.strength,this.quadmaterial.uniforms.directionX.value=e.vars.get("clickX"),this.quadmaterial.uniforms.directionY.value=e.vars.get("clickY");var o=e.vars.get("container"),a=$("#"+o),r=a.innerWidth(),i=a.innerHeight();e.vars.set("clickX",r/2),e.vars.set("clickY",i/2);break;case"crossfade_mix":this.quadmaterial.uniforms.texture1.value=this.sceneA.fbo.texture,this.quadmaterial.uniforms.texture2.value=this.sceneB.fbo.texture,this.quadmaterial.uniforms.textureMix.value=this.transition_texture,this.quadmaterial.uniforms.threshold.value=this.transitionParams.threshold;break;case"crossfade_ripple":this.quadmaterial.uniforms.texture1.value=this.sceneA.fbo.texture,this.quadmaterial.uniforms.texture2.value=this.sceneB.fbo.texture,this.quadmaterial.uniforms.velocity.value=this.transitionParams.velocity,this.quadmaterial.uniforms.frequency.value=this.transitionParams.frequency,this.quadmaterial.uniforms.amplitude.value=this.transitionParams.amplitude;break;case"crossfade_barrel":this.quadmaterial.uniforms.texture1.value=this.sceneA.fbo.texture,this.quadmaterial.uniforms.texture2.value=this.sceneB.fbo.texture,this.quadmaterial.uniforms.direction.value=this.transitionParams.direction;break;case"distort":this.quadmaterial.uniforms.texture1.value=this.sceneA.fbo.texture,this.quadmaterial.uniforms.texture2.value=this.sceneB.fbo.texture,this.quadmaterial.uniforms.textureMix.value=this.transition_texture,this.quadmaterial.uniforms.effectFactor.value=this.transitionParams.effectFactor,this.quadmaterial.uniforms.direction.value=this.transitionParams.direction,this.quadmaterial.uniforms.directionX.value=e.vars.get("clickXx"),this.quadmaterial.uniforms.directionY.value=e.vars.get("clickYy"),e.vars.set("clickXx",.5),e.vars.set("clickYy",.5);break;case"pixelate":this.quadmaterial.uniforms.texture1.value=this.sceneA.fbo.texture,this.quadmaterial.uniforms.texture2.value=this.sceneB.fbo.texture,this.quadmaterial.uniforms.resolution_w.value=window.innerWidth,this.quadmaterial.uniforms.resolution_h.value=window.innerHeight;break;case"pixelate_circle":case"mosaic":this.quadmaterial.uniforms.texture1.value=this.sceneA.fbo.texture,this.quadmaterial.uniforms.texture2.value=this.sceneB.fbo.texture,this.quadmaterial.uniforms.resolution_w.value=window.innerWidth,this.quadmaterial.uniforms.resolution_h.value=window.innerHeight,this.quadmaterial.uniforms.directionX.value=e.vars.get("clickXx"),this.quadmaterial.uniforms.directionY.value=e.vars.get("clickYy"),e.vars.set("clickXx",.5),e.vars.set("clickYy",.5);break;case"motion_blur":this.quadmaterial.uniforms.texture1.value=this.sceneA.fbo.texture,this.quadmaterial.uniforms.texture2.value=this.sceneB.fbo.texture,this.quadmaterial.uniforms.directionX.value=e.vars.get("clickXx"),this.quadmaterial.uniforms.directionY.value=e.vars.get("clickYy"),e.vars.set("clickXx",.5),e.vars.set("clickYy",.5);break;case"dot":case"speckle_crossfade":case"stipple_crossfade":this.quadmaterial.uniforms.texture1.value=this.sceneB.fbo.texture,this.quadmaterial.uniforms.texture2.value=this.sceneA.fbo.texture;break;case"wipe_cross":this.quadmaterial.uniforms.texture1.value=this.sceneB.fbo.texture,this.quadmaterial.uniforms.texture2.value=this.sceneA.fbo.texture,this.quadmaterial.uniforms.direction.value=this.transitionParams.direction,this.quadmaterial.uniforms.directionX.value=e.vars.get("clickXx"),this.quadmaterial.uniforms.directionY.value=e.vars.get("clickYy"),e.vars.set("clickXx",.5),e.vars.set("clickYy",.5);break;case"wipe_cross":case"bounce":this.quadmaterial.uniforms.texture1.value=this.sceneB.fbo.texture,this.quadmaterial.uniforms.texture2.value=this.sceneA.fbo.texture,this.quadmaterial.uniforms.directionX.value=e.vars.get("clickXx"),this.quadmaterial.uniforms.directionY.value=e.vars.get("clickYy"),e.vars.set("clickXx",.5),e.vars.set("clickYy",.5);break;case"shake3D":this.quadmaterial.uniforms.texture1.value=this.sceneB.fbo.texture,this.quadmaterial.uniforms.texture2.value=this.sceneA.fbo.texture,this.quadmaterial.uniforms.power.value=this.transitionParams.power,this.quadmaterial.uniforms.directionX.value=e.vars.get("clickXx"),this.quadmaterial.uniforms.directionY.value=e.vars.get("clickYy"),e.vars.set("clickXx",.5),e.vars.set("clickYy",.5);break;case"shake":this.quadmaterial.uniforms.texture1.value=this.sceneB.fbo.texture,this.quadmaterial.uniforms.texture2.value=this.sceneA.fbo.texture;break;case"walkthrough":this.quadmaterial.uniforms.texture1.value=this.sceneB.fbo.texture,this.quadmaterial.uniforms.texture2.value=this.sceneA.fbo.texture,this.quadmaterial.uniforms.u_sourceMatrix.value=this.sceneB.matrix,this.quadmaterial.uniforms.u_destMatrix.value=this.sceneA.matrix,this.quadmaterial.uniforms.effect.value=this.transitionParams.effect,this.quadmaterial.uniforms.blur.value=this.transitionParams.blur,this.quadmaterial.uniforms.directionX.value=e.vars.get("clickXx"),this.quadmaterial.uniforms.directionY.value=e.vars.get("clickYy"),e.vars.set("clickXx",.5),e.vars.set("clickYy",.5);break;default:this.quadmaterial.uniforms.texture1.value=this.sceneA.fbo.texture,this.quadmaterial.uniforms.texture2.value=this.sceneB.fbo.texture;}},this.start=function(){return!!this.shaderExists&&void("function"==typeof this.onBeforeStart&&this.onBeforeStart(),this.isActive=!0,this.clock.start(),"function"==typeof this.onStart&&this.onStart())},this.stop=function(){var t=e.vars.get("id");e.cObjects(t,1);var o=e.vars.get("objects"),a=e.vars.get("scene_1");for(var r in o)o[r].pid===t&&a.add(o[r]);this.isActive=!1,"function"==typeof this.onStop&&this.onStop()},this.destroy=function(){this.quad.geometry.dispose(),this.quad.material.dispose(),this.quad.material.uniforms.texture1.value.dispose(),this.quad.material.uniforms.texture2.value.dispose(),"textureMix"in this.quad.material.uniforms&&this.quad.material.uniforms.textureMix.value&&this.quad.material.uniforms.textureMix.value.dispose(),this.quadmaterial.uniforms.texture1.value.dispose(),this.quadmaterial.uniforms.texture2.value.dispose(),"textureMix"in this.quadmaterial.uniforms&&this.quadmaterial.uniforms.textureMix.value&&this.quadmaterial.uniforms.textureMix.value.dispose(),this.quadmaterial.dispose(),this._clearComposer(),this._clearScene(this.sceneA),this._clearScene(this.sceneB),this._clearScene(this.scene),this.sceneA.fbo.texture.dispose(),this.sceneA.fbo.dispose(),this.sceneA=null,this.sceneB.fbo.texture.dispose(),this.sceneB.fbo.dispose(),this.sceneB=null,this.scene=null},this._clearScene=function(e){if(e&&0<e.children.length)for(var t=e.children.length-1;0<=t;t--){if(e.children[t]instanceof THREE.Mesh&&e.children[t].material.map&&"object"==typeof e.children[t].material.map&&e.children[t].material.map.dispose(),"material"in e.children[t]&&!!e.children[t].material)if(e.children[t].material.constructor===Array)for(var o=0,a=e.children[t].material.length;o<a;o++)"map"in e.children[t].material[o]&&e.children[t].material[o].map&&e.children[t].material[o].map.dispose(),"function"==typeof e.children[t].material[o].dispose&&e.children[t].material[o].dispose();else"map"in e.children[t].material&&e.children[t].material.map&&e.children[t].material.map.dispose(),"function"==typeof e.children[t].material.dispose&&e.children[t].material.dispose();"geometry"in e.children[t]&&e.children[t].geometry.dispose(),e.remove(e.children[t])}},this._clearComposer=function(){if(this.composer){if("passes"in this.composer)for(var e=this.composer.passes.length,t=0;t<e;t++)if("scene"in this.composer.passes[t])for(var o=this.composer.passes[t].scene.children.length,a=0;a<o;a++)"material"in this.composer.passes[t].scene.children[a]&&this.composer.passes[t].scene.children[a].material&&this.composer.passes[t].scene.children[a].material.dispose(),"geometry"in this.composer.passes[t].scene.children[a]&&this.composer.passes[t].scene.children[a].geometry&&this.composer.passes[t].scene.children[a].geometry.dispose();if("copyPass"in this.composer&&(this.composer.copyPass.material.dispose(),this.composer.copyPass.quad&&(this.composer.copyPass.quad.geometry.dispose(),"material"in this.composer.copyPass.quad&&this.composer.copyPass.quad.material&&this.composer.copyPass.quad.material.dispose()),"scene"in this.composer.copyPass&&this.composer.copyPass.scene))for(var e=this.composer.copyPass.scene.children.length,t=0;t<e;t++)this.composer.copyPass.scene.children[t].geometry.dispose();"readBuffer"in this.composer&&("texture"in this.composer.readBuffer&&this.composer.readBuffer.texture.dispose(),this.composer.readBuffer.dispose()),"writeBuffer"in this.composer&&("texture"in this.composer.writeBuffer&&this.composer.writeBuffer.texture.dispose(),this.composer.writeBuffer.dispose()),"renderTarget1"in this.composer&&("texture"in this.composer.renderTarget1&&this.composer.renderTarget1.texture.dispose(),this.composer.renderTarget1.dispose()),"renderTarget2"in this.composer&&("texture"in this.composer.renderTarget2&&this.composer.renderTarget2.texture.dispose(),this.composer.renderTarget2.dispose()),this.composer.reset()}},this.counter=0,this.render=function(e){if(!this.isActive)return"function"==typeof e&&e(0),!1;var o=1;"animate"in this.transitionParams&&(o=parseInt(this.transitionParams.animate,10));var a=1;if(this.counter+=.01,o){var r=0;r="walkthrough"===this.transitionParams.type?0+Math.sin(this.transitionParams.speed*this.counter/Math.PI):(1+Math.sin(this.transitionParams.speed*this.clock.getElapsedTime()/Math.PI))/2,a=THREE.Math.smoothstep(r,this.transitionParams.smoothstep[0],this.transitionParams.smoothstep[1]),this.transitionParams.loopTexture&&(0==this.transitionParams.transition||1==this.transitionParams.transition)?this.needChange&&(this.quadmaterial.uniforms.textureMix.value=this.transition_texture,this.needChange=!1):this.needChange=!0,this.quadmaterial.uniforms.mixRatio.value=a,"walkthrough"===this.transitionParams.type&&(this.quadmaterial.uniforms.uf_time.value=a)}0===a?(this.clock.stop(),"function"==typeof e&&e(0),this.stop(),this.counter=0):1===a?(this.clock.stop(),"function"==typeof e&&e(0),this.stop(),this.counter=0):(this.sceneA.render(!0,a),this.sceneB.render(!0,a),this.vr?(this.renderer.setViewport(0,0,window.innerWidth/2,window.innerHeight),this.renderer.render(this.scene,this.cameraOrtho,null,!1),this.composer&&this.composer.render(),this.renderer.setViewport(window.innerWidth/2,0,window.innerWidth/2,window.innerHeight),this.renderer.render(this.scene,this.cameraOrtho,null,!1),this.composer&&this.composer.render()):(this.composer&&this.composer.render(),this.renderer.render(this.scene,this.cameraOrtho,null,!1)),"function"==typeof e&&e(1))},this.transitions={0:{type:"change",speed:1,animate:0,smoothstep:[.5,.8]},2:{type:"crossfade",speed:1.5,smoothstep:[.3,.8]},crossfade:{type:"crossfade",speed:1.5,smoothstep:[.3,.8]},crossfade_move:{type:"crossfade_move",speed:1.5,smoothstep:[.3,.9],strength:.2},motion_blur:{type:"motion_blur",speed:1.5,smoothstep:[.3,.8]},crossfade_ripple:{type:"crossfade_ripple",speed:1.5,smoothstep:[.3,.9],velocity:20,frequency:80,amplitude:60},crossfade_wave:{type:"crossfade_ripple",speed:1.5,smoothstep:[.1,.8],velocity:60,frequency:10,amplitude:60},crossfade_barrel_out:{type:"crossfade_barrel",speed:1.5,smoothstep:[.1,.8],direction:0},crossfade_barrel_in:{type:"crossfade_barrel",speed:1.5,smoothstep:[.1,.8],direction:1},radial_fade:{type:"crossfade_mix",speed:1.5,smoothstep:[.3,.8],texture:"radialfade.jpg",loopTexture:1,threshold:.3},wipe_up:{type:"crossfade_mix",speed:1.5,smoothstep:[.5,.8],texture:"wipe-up.jpg",loopTexture:1,threshold:.3},wipe_right:{type:"crossfade_mix",speed:1.5,smoothstep:[.5,.8],texture:"wipe-right.jpg",loopTexture:1,threshold:.3},wipe_down:{type:"crossfade_mix",speed:1.5,smoothstep:[.5,.8],texture:"wipe-down.jpg",loopTexture:1,threshold:.3},wipe_left:{type:"crossfade_mix",speed:1.5,smoothstep:[.5,.8],texture:"wipe-left.jpg",loopTexture:1,threshold:.3},wipe_cross_in:{type:"wipe_cross",speed:1.5,smoothstep:[.5,.8],direction:1},wipe_cross_out:{type:"wipe_cross",speed:1.5,smoothstep:[.5,.8],direction:0},diagonal_wipe_top_left:{type:"crossfade_mix",speed:1.2,smoothstep:[.5,.8],texture:"top-left-bottom-right.jpg",loopTexture:1,threshold:.3},diagonal_wipe_top_right:{type:"crossfade_mix",speed:1.2,smoothstep:[.3,.8],texture:"top-right-bottom-left.jpg",loopTexture:1,threshold:.1},diagonal_wipe_bottom_left:{type:"crossfade_mix",speed:1.2,smoothstep:[.3,.8],texture:"bottom-left-top-right.jpg",loopTexture:1,threshold:.1},diagonal_wipe_bottom_right:{type:"crossfade_mix",speed:1.2,smoothstep:[.3,.8],texture:"bottom-right-top-left.jpg",loopTexture:1,threshold:.1},clock_wipe:{type:"crossfade_mix",speed:1.2,smoothstep:[.5,.8],texture:"clockwise.jpg",loopTexture:0,threshold:.3},clock_wipe_anti_clockwise:{type:"crossfade_mix",speed:1.2,smoothstep:[.5,.8],texture:"anti-clockwise.jpg",loopTexture:0,threshold:.3},cloud:{type:"crossfade_mix",speed:1.2,smoothstep:[.5,.8],texture:"cloud.jpg",loopTexture:1,threshold:.3},cloud_alternative:{type:"crossfade_mix",speed:1.2,smoothstep:[.5,.8],texture:"cloud2.jpg",loopTexture:1,threshold:.3},pixelate_cloud:{type:"crossfade_mix",speed:1.2,smoothstep:[.5,.8],texture:"pixelate-cloud.jpg",loopTexture:1,threshold:.3},smoke:{type:"crossfade_mix",speed:1.2,smoothstep:[.5,.8],texture:"smoke.jpg",loopTexture:1,threshold:.3},matrix:{type:"crossfade_mix",speed:1.5,smoothstep:[.2,.9],texture:"matrix.jpg",loopTexture:1,threshold:.05},pixelate:{type:"pixelate",speed:1.5,smoothstep:[.4,.8]},shake:{type:"shake",speed:1.5,smoothstep:[.4,.8],power:.03},shake3D:{type:"shake3D",speed:1.5,smoothstep:[.4,.8],power:.03},pyramids:{type:"crossfade_mix",speed:1.2,smoothstep:[.5,.8],texture:"pyramids.jpg",loopTexture:1,threshold:.3},triangles:{type:"crossfade_mix",speed:1.2,smoothstep:[.5,.8],texture:"triangles.jpg",loopTexture:1,threshold:.3},triangles_alternative:{type:"crossfade_mix",speed:1.2,smoothstep:[.5,.8],texture:"triangles_alternative.jpg",loopTexture:1,threshold:.3},paint:{type:"crossfade_mix",speed:1.2,smoothstep:[.5,.8],texture:"paint.jpg",loopTexture:1,threshold:.3},liquify:{type:"distort",speed:1.2,smoothstep:[.5,.8],texture:"distort/1.jpg",loopTexture:1,effectFactor:-.1,direction:-1},liquify_down:{type:"distort",speed:1.2,smoothstep:[.5,.8],texture:"distort/1.jpg",loopTexture:1,effectFactor:.1,direction:1},liquify_up:{type:"distort",speed:1.2,smoothstep:[.5,.8],texture:"distort/1.jpg",loopTexture:1,effectFactor:-.1,direction:1},liquify_left:{type:"distort",speed:1.2,smoothstep:[.5,.8],texture:"distort/1.jpg",loopTexture:1,effectFactor:.1,direction:0},liquify_right:{type:"distort",speed:1.2,smoothstep:[.5,.8],texture:"distort/1.jpg",loopTexture:1,effectFactor:-.1,direction:0},dotify:{type:"distort",speed:1,smoothstep:[.5,.8],texture:"distort/16.jpg",loopTexture:1,effectFactor:.1,direction:-1},dotify_down:{type:"distort",speed:1,smoothstep:[.5,.8],texture:"distort/16.jpg",loopTexture:1,effectFactor:.1,direction:1},dotify_up:{type:"distort",speed:1,smoothstep:[.5,.8],texture:"distort/16.jpg",loopTexture:1,effectFactor:-.1,direction:1},dotify_left:{type:"distort",speed:1,smoothstep:[.5,.8],texture:"distort/16.jpg",loopTexture:1,effectFactor:.1,direction:0},dotify_right:{type:"distort",speed:1,smoothstep:[.5,.8],texture:"distort/16.jpg",loopTexture:1,effectFactor:-.1,direction:0},scratch:{type:"distort",speed:1.2,smoothstep:[.5,.8],texture:"distort/3.jpg",loopTexture:1,effectFactor:.1,direction:-1},scratch_down:{type:"distort",speed:1.2,smoothstep:[.5,.8],texture:"distort/3.jpg",loopTexture:1,effectFactor:.1,direction:1},scratch_up:{type:"distort",speed:1.2,smoothstep:[.5,.8],texture:"distort/3.jpg",loopTexture:1,effectFactor:-.1,direction:1},scratch_left:{type:"distort",speed:1.2,smoothstep:[.5,.8],texture:"distort/3.jpg",loopTexture:1,effectFactor:.1,direction:0},scratch_right:{type:"distort",speed:1.2,smoothstep:[.5,.8],texture:"distort/3.jpg",loopTexture:1,effectFactor:-.1,direction:0},blur:{type:"blur",speed:1.5,smoothstep:[.3,.8]},demo:{type:"test",speed:1,smoothstep:[.3,.8],power:.03},wt:{type:"walkthrough",speed:5,smoothstep:[0,.6],effect:0,blur:0},wt_mb:{type:"walkthrough",speed:5,smoothstep:[0,.6],effect:0,blur:.2},wt_m:{type:"walkthrough",speed:5,smoothstep:[0,.6],effect:.1,blur:0},wt_m_mb:{type:"walkthrough",speed:5,smoothstep:[0,.6],effect:.1,blur:.2},wt_e:{type:"walkthrough",speed:5,smoothstep:[0,.6],effect:.2,blur:0},wt_e_mb:{type:"walkthrough",speed:5,smoothstep:[0,.6],effect:.2,blur:.2},wt_e2:{type:"walkthrough",speed:5,smoothstep:[0,.6],effect:.3,blur:0},wt_e2_mb:{type:"walkthrough",speed:5,smoothstep:[0,.6],effect:.3,blur:.2},wt_v:{type:"walkthrough",speed:5,smoothstep:[0,.6],effect:.4,blur:0},wt_v_mb:{type:"walkthrough",speed:5,smoothstep:[0,.6],effect:.4,blur:.2},wt_radial:{type:"walkthrough",speed:5,smoothstep:[0,.7],effect:0,blur:0,texture:"radialfade.jpg",loopTexture:1,threshold:.3}},this.shaders=function(){return{change:{uniforms:{texture1:{value:null},texture2:{value:null},mixRatio:{value:0}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float mixRatio;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nvarying vec2 vUv;\nvoid main() {\ngl_FragColor = texture2D( texture2, vUv );\n}",transparent:!0,opacity:1},crossfade:{uniforms:{texture1:{value:null},texture2:{value:null},mixRatio:{value:0}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float mixRatio;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nvarying vec2 vUv;\nvoid main() {\nvec4 texel1 = texture2D( texture1, vUv );\nvec4 texel2 = texture2D( texture2, vUv );\ngl_FragColor = mix( texel2, texel1, mixRatio );\n}",transparent:!0,opacity:1},crossfade_mix:{uniforms:{texture1:{value:null},texture2:{value:null},textureMix:{value:null},mixRatio:{value:0},threshold:{value:.1}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float mixRatio;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform sampler2D textureMix;\nuniform float threshold;\nvarying vec2 vUv;\nvoid main() {\nvec4 texel1 = texture2D( texture1, vUv );\nvec4 texel2 = texture2D( texture2, vUv );\nvec4 transitionTexel = texture2D( textureMix, vUv );\nfloat r = mixRatio * (1.0 + threshold * 2.0) - threshold;\nfloat mixf = clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);\ngl_FragColor = mix( texel1, texel2, mixf );\n}",transparent:!0,opacity:1},crossfade_ripple:{uniforms:{texture1:{value:null},texture2:{value:null},mixRatio:{type:"f",value:0},velocity:{type:"f",value:60},frequency:{type:"f",value:10},amplitude:{type:"f",value:60}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"varying vec2 vUv;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform float velocity;\nuniform float frequency;\nuniform float amplitude;\nuniform float mixRatio;\nvoid main() {\nvec2 ripple = vec2(\nsin(  (length( vUv - 0.5 ) * frequency ) + ( ( mixRatio) * velocity ) ),\ncos( ( length( vUv - 0.5 ) * frequency ) + ( ( mixRatio) * velocity ) )\n) * ( amplitude / 4000.0 );\nfloat percent1 = 0.5 + 0.5 * sin( mixRatio );\nfloat percent2 = 0.5 + 0.5 * sin( mixRatio );\ngl_FragColor = mix(\ntexture2D( texture2, vUv - ripple * (percent2) ),\ntexture2D( texture1, vUv + ripple * ( 1.0-percent1 ) ),\npercent1\n);\n}",transparent:!0,opacity:1},crossfade_move:{uniforms:{texture1:{value:null},texture2:{value:null},mixRatio:{type:"f",value:0},strength:{type:"f",value:.6},resolution_w:{type:"f",value:0},resolution_h:{type:"f",value:0},directionX:{type:"f",value:0},directionY:{type:"f",value:0}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"varying vec2 vUv;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform float mixRatio;\nuniform float strength;\nuniform float resolution_w;\nuniform float resolution_h;\nuniform float directionX;\nuniform float directionY;\nfloat random(vec3 scale,float seed){return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);}\nvoid main() {\nvec2 center = vec2(directionX,resolution_h - directionY);\nvec2 resolution = vec2(resolution_w,resolution_h);\nvec4 color=vec4(0.0);\nfloat total=0.0;\nvec2 toCenter=center-vUv*resolution;\nfloat offset=random(vec3(12.9898,78.233,151.7182),0.0);\nfloat percent=((mixRatio*20.0)+offset)/10.0;\nvec4 sample=texture2D(texture2,vUv+toCenter*percent*strength/resolution);\nsample.rgb*=sample.a;\nvec4 texel1 = texture2D( texture1, vUv );\nvec4 texel2 = texture2D( texture2, vUv );\ngl_FragColor = mix( sample, texel1, mixRatio );\n}",transparent:!0,opacity:1},test:{uniforms:{texture1:{value:null},texture2:{value:null},mixRatio:{type:"f",value:0},strength:{type:"f",value:.6},resolution_w:{type:"f",value:0},resolution_h:{type:"f",value:0},directionX:{type:"f",value:0},directionY:{type:"f",value:0}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"varying vec2 vUv;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform float mixRatio;\nuniform float strength;\nuniform float resolution_w;\nuniform float resolution_h;\nuniform float directionX;\nuniform float directionY;\nfloat random(vec3 scale,float seed){return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);}\nvoid main() {\nvec2 center = vec2(directionX,resolution_h - directionY);\nvec2 resolution = vec2(resolution_w,resolution_h);\nvec4 color=vec4(0.0);\nfloat total=0.0;\nvec2 toCenter=center-vUv*resolution;\nfloat offset=1.0;\nfloat percent=((mixRatio*20.0)+offset)/10.0;\nvec4 sample=texture2D(texture2,vUv+toCenter*percent*strength/resolution);\nsample.rgb*=sample.a;\nvec4 texel1 = texture2D( texture1, vUv + 0.5 * (mixRatio) );\nvec4 texel2 = texture2D( texture2, vUv );\nif(mixRatio > 0.3){\n} else {\n}\ngl_FragColor = mix( texel2, texel1, mixRatio );\n}",transparent:!0,opacity:1},crossfade_barrel:{uniforms:{texture1:{value:null},texture2:{value:null},mixRatio:{type:"f",value:0},direction:{type:"i",value:0}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"varying vec2 vUv;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform float mixRatio;\nuniform int direction;\nvec2 Distort(vec2 p, float power)\n{\nfloat theta  = atan(p.y, p.x);\nfloat radius = length(p);\nradius = pow(radius, power);\np.x = radius * cos(theta);\np.y = radius * sin(theta);\nreturn 0.5 * (p + 1.0);\n}\nvoid main() {\nvec2 xy = 2.0 * vUv.xy - 1.0;\nvec2 uv;\nif( direction == 0 ){\nuv = Distort(xy, 2.0 - mixRatio) ;\n} else {\nuv = Distort(xy, mixRatio) ;\n}\nvec4 texel1 = texture2D(texture1, uv);\nvec4 texel2 = texture2D(texture2, vUv);\ngl_FragColor = mix( texel2, texel1, mixRatio );\n}",transparent:!0,opacity:1},distort:{uniforms:{texture1:{value:null},texture2:{value:null},textureMix:{value:null},mixRatio:{value:0},effectFactor:{type:"f",value:1},direction:{value:1},directionX:{value:.5},directionY:{value:.5}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float mixRatio;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform sampler2D textureMix;\nuniform float effectFactor;\nuniform int direction;\nuniform float directionX;\nuniform float directionY;\nvarying vec2 vUv;\nvoid main() {\nvec2 uv = vUv;\nvec4 disp = texture2D(textureMix, uv);\nif (direction==1) {\nvec2 distortedPosition = vec2(uv.x, uv.y);\nvec2 distortedPosition2 = vec2(uv.x, uv.y - (1.0 - mixRatio) * (disp.r*effectFactor));\nvec4 _texture = texture2D(texture2, distortedPosition);\nvec4 _texture2 = texture2D(texture1, distortedPosition2);\ngl_FragColor = mix(_texture, _texture2, mixRatio);\n} else if(direction==0) {\nvec2 distortedPosition = vec2(uv.x, uv.y);\nvec2 distortedPosition2 = vec2(uv.x - (1.0 - mixRatio) * (disp.r*effectFactor), uv.y);\nvec4 _texture = texture2D(texture2, distortedPosition);\nvec4 _texture2 = texture2D(texture1, distortedPosition2);\ngl_FragColor = mix(_texture, _texture2, mixRatio);\n} else {\nfloat v1 = 0.0;\nif(directionX >= 0.5){\nv1 = uv.x - (1.0 - mixRatio) * (disp.r*effectFactor);\n} else {\nv1 = uv.x + (1.0 - mixRatio) * (disp.r*effectFactor);\n}\nfloat v2 = 0.0;\nif(directionY >= 0.5){\nv2 = uv.y + (1.0 - mixRatio) * (disp.r*effectFactor);\n} else {\nv2 = uv.y - (1.0 - mixRatio) * (disp.r*effectFactor);\n}\nvec2 distortedPosition = vec2(uv.x, uv.y);\nvec2 distortedPosition2 = vec2(v1, v2);\nvec4 _texture = texture2D(texture2, distortedPosition);\nvec4 _texture2 = texture2D(texture1, distortedPosition2);\ngl_FragColor = mix(_texture, _texture2, mixRatio);\n}\n}",transparent:!0,opacity:1},pixelate:{uniforms:{texture1:{value:null},texture2:{value:null},mixRatio:{type:"f",value:0},resolution_w:{type:"f",value:0},resolution_h:{type:"f",value:0}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"varying vec2 vUv;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform float mixRatio;\nuniform float resolution_w;\nuniform float resolution_h;\nvoid main() {\nvec2 resolution = vec2(resolution_w,resolution_h);\nfloat amount = ( 255.0 ) * mixRatio;\nfloat d = 1.0 / amount;\nfloat ar = resolution.x / resolution.y;\nfloat u = floor( vUv.x / d ) * d;\nd = ar / amount;\nfloat v = floor( vUv.y / d ) * d;\nvec4 texel1 = texture2D( texture1, vec2( u, v ) );\nvec4 texel2 = texture2D( texture2, vec2( u, v ) );\ngl_FragColor = mix( texel2, texel1, mixRatio );\n}",transparent:!0,opacity:1},pixelate_circle:{uniforms:{texture1:{value:null},texture2:{value:null},mixRatio:{type:"f",value:0},resolution_w:{type:"f",value:0},resolution_h:{type:"f",value:0},directionX:{type:"f",value:0},directionY:{type:"f",value:0}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"varying vec2 vUv;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform float mixRatio;\nuniform float resolution_w;\nuniform float resolution_h;\nuniform float directionX;\nuniform float directionY;\nvoid main() {\nvec2 uv = vUv;\nvec2 resolution = vec2(resolution_w,resolution_h);\nvec2 tc = uv;\nvec2 center = vec2(directionX,directionY);\nvec2 toCenter=center-vUv*resolution;\ntc.x -= directionX;\ntc.y += directionY;\nfloat squares = 50.0;\ntc = floor(tc * squares + 0.5) / squares;\nfloat mask = length(tc);\nmask =  mod(mask + mixRatio*1.1, 2.0);\nmask = step(mask, 1.0);\ngl_FragColor =mix(texture2D(texture1, uv ), texture2D(texture2, uv), mask);\n}",transparent:!0,opacity:1},mosaic:{uniforms:{texture1:{value:null},texture2:{value:null},mixRatio:{type:"f",value:0},resolution_w:{type:"f",value:0},resolution_h:{type:"f",value:0},directionX:{type:"f",value:0},directionY:{type:"f",value:0}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"varying vec2 vUv;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform float mixRatio;\nuniform float resolution_w;\nuniform float resolution_h;\nuniform float directionX;\nuniform float directionY;\nvoid main() {\nvec2 uv = vUv;\nvec2 resolution = vec2(resolution_w,resolution_h);\nvec4 sample0,sample1,sample2,sample3;\nfloat fStep = (0.8 + (sin(mixRatio) + 1.0)*1.5) /100.;\nsample0 = texture2D(texture1,vec2(vUv.x - 0.00,vUv.y + 0.1));\nsample1 = texture2D(texture1,vec2(vUv.x - 0.00,vUv.y + 0.2));\ngl_FragColor =  mix( sample0 , sample1, mixRatio );\n}",transparent:!0,opacity:1},wipe_cross:{uniforms:{texture1:{value:null},texture2:{value:null},mixRatio:{type:"f",value:0},direction:{type:"i",value:0},directionX:{type:"f",value:.5},directionY:{type:"f",value:.5}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"varying vec2 vUv;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform float mixRatio;\nuniform int direction;\nuniform float directionX;\nuniform float directionY;\nvoid main() {\nvec2 p = vUv*2.0 - 1.0;\nfloat w = 0.09;\nfloat g = 1.0;\nvec4 gamma = vec4(g, g, g, 1.0);\nvec4 color0 = vec4(0, 0, 0, 1.0);\nvec4 color1 = vec4(0, 0, 0, 1.0);\nfloat duration = 2.0;\nfloat t = 0.0;\nif( direction == 0 ){\ncolor0 = pow(texture2D(texture1, vUv), gamma);\ncolor1 = texture2D(texture2, vUv);\nt = mod(float(mixRatio), duration) /  duration;\n} else {\ncolor0 = pow(texture2D(texture2, vUv), gamma);\ncolor1 = texture2D(texture1, vUv);\nt = mod(float(1.0-mixRatio), duration) /  duration;\n}\nfloat correction = mix(w, -w, t);\nfloat d = min(abs(vUv.x - directionX), abs(vUv.y - (1.0-directionY)));\nfloat choose = smoothstep(t  - w, t + w, d + correction);\ngl_FragColor = mix(color1, color0, choose);\n}",transparent:!0,opacity:1},motion_blur:{uniforms:{texture1:{value:null},texture2:{value:null},mixRatio:{type:"f",value:0},directionX:{value:.5},directionY:{value:.5}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"varying vec2 vUv;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform float directionX;\nuniform float directionY;\nuniform float mixRatio;\nconst int samples = 1;\nconst float minBlur = .0;\nconst float maxBlur = .3;\nconst float speed = 1.;\nconst int samples2 = 35;\nconst float minBlur2 = .0;\nconst float maxBlur2 = .3;\nconst float speed2 = 1.;\nvoid main() {\nvec2 p = vUv;\nvec4 result1 = vec4(0);\nfloat timeQ1 = mix(minBlur, maxBlur, mixRatio);\nfor (int i=0; i<=samples; i++)\n{\nfloat q = float(i)/float(samples);\nresult1 += texture2D(texture1, p + (vec2(directionX,1.0-directionY)-p)*q*timeQ1)/float(samples);\n}\nvec4 result2 = vec4(0);\nvec2 uv = ( vUv - vec2( 0.5 ) ) * vec2( 5.5 );\nfloat timeQ2 = mix(minBlur2, maxBlur2, mixRatio);\nfor (int i=0; i<=samples2; i++)\n{\nfloat q = float(i)/float(samples2);\nresult2 += texture2D(texture2, p + (vec2(directionX,1.0-directionY)-p)*q*timeQ2)/float(samples2);\n}\nvec4 c1 =  texture2D(texture1, vUv);\ngl_FragColor = mix(result2, c1, mixRatio);\n}",transparent:!0,opacity:1},shake3D:{uniforms:{texture1:{value:null},texture2:{value:null},mixRatio:{type:"f",value:0},directionX:{value:.5},directionY:{value:.5},power:{value:.03}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"varying vec2 vUv;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform float mixRatio;\nuniform float directionX;\nuniform float directionY;\nuniform float power;\nvoid main() {\nvec2 uv = vUv.xy;\nfloat dc = sqrt(pow(uv.x - directionX, 2.0) + pow(uv.y - directionY, 2.0));\nfloat angle = 20.0 * 3.14 * mixRatio;\nfloat mag = power * dc;\nfloat ox = mag * sin(angle);\nfloat oy = mag * sin(angle);\nif( directionX > 0.5 ){\nuv.x += ox;\n} else {\nuv.x -= ox;\n}\nif( directionY > 0.5 ){\nuv.y += oy;\n} else {\nuv.y -= oy;\n}\nvec4 tex1 = texture2D(texture1, uv);\nvec4 tex2 = texture2D(texture2, uv);\ngl_FragColor = mix(tex1,tex2,mixRatio);\n}",transparent:!0,opacity:1},shake:{uniforms:{texture1:{value:null},texture2:{value:null},mixRatio:{type:"f",value:0},intensity:{value:.1},magnitude:{value:.1}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"varying vec2 vUv;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform float mixRatio;\nuniform float intensity;\nuniform float magnitude;\nconst float pi = 3.14159265359;\nfloat rand(vec2 co) {\nreturn fract(sin(dot(co.xy, vec2(12.9898,78.233))) * 43758.5453);\n}\nvoid main() {\nvec2 uv = vUv.xy;\nfloat intensity = 0.1 ;\nfloat magnitude = 0.1;\nfloat offset = 0.1 * magnitude;\nfloat rotation = intensity * 2.0 * pi * rand(vec2(magnitude, mixRatio));\nfloat yOffset = offset * sin(mixRatio * 1.0 * cos(mixRatio * intensity) + rotation) * rand(vec2(magnitude, mixRatio));\nfloat xOffset = offset * cos(mixRatio * 1.0 * cos(mixRatio * intensity) + rotation) * rand(vec2(1.0-magnitude, mixRatio));\nfloat zoom = 1.0 + offset;\nuv = (uv - 0.5) / zoom + 0.5;\nuv.y += yOffset;\nuv.x += xOffset;\nvec4 tex1 = texture2D(texture1, uv);\nvec4 tex2 = texture2D(texture2, uv);\ngl_FragColor = mix(tex1,tex2,mixRatio);\n}",transparent:!0,opacity:1},blur:{uniforms:{texture1:{value:null},texture2:{value:null},mixRatio:{type:"f",value:0},directionX:{value:.5},directionY:{value:.5},resolution_w:{type:"f",value:1560},resolution_h:{type:"f",value:560},power:{value:.03}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"varying vec2 vUv;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform float mixRatio;\nuniform float directionX;\nuniform float directionY;\nuniform float resolution_w;\nuniform float resolution_h;\nuniform float power;\nvec4 blur(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\nvec4 color = vec4(0.0);\nvec2 off1 = vec2(1.3846153846) * direction;\nvec2 off2 = vec2(3.2307692308) * direction;\ncolor += texture2D(image, uv) * 0.2270270270;\ncolor += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\ncolor += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\ncolor += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\ncolor += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\nreturn color;\n}\nvec4 blur1(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\nvec4 color = vec4(0.0);\nvec2 off1 = vec2(1.411764705882353) * direction;\nvec2 off2 = vec2(3.2941176470588234) * direction;\nvec2 off3 = vec2(5.176470588235294) * direction;\ncolor += texture2D(image, uv) * 0.1964825501511404;\ncolor += texture2D(image, uv + (off1 / resolution)) * 0.2969069646728344;\ncolor += texture2D(image, uv - (off1 / resolution)) * 0.2969069646728344;\ncolor += texture2D(image, uv + (off2 / resolution)) * 0.09447039785044732;\ncolor += texture2D(image, uv - (off2 / resolution)) * 0.09447039785044732;\ncolor += texture2D(image, uv + (off3 / resolution)) * 0.010381362401148057;\ncolor += texture2D(image, uv - (off3 / resolution)) * 0.010381362401148057;\nreturn color;\n}\nvec4 blur2(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\nvec4 color = vec4(0.0);\nvec2 off1 = vec2(1.3333333333333333) * direction;\ncolor += texture2D(image, uv) * 0.29411764705882354;\ncolor += texture2D(image, uv + (off1 / resolution)) * 0.35294117647058826;\ncolor += texture2D(image, uv - (off1 / resolution)) * 0.35294117647058826;\nreturn color;\n}\nvoid main() {\nfloat radius = (1.0 ) * mixRatio;\nvec2 direction = vec2(radius,radius);\nvec2 resolution = vec2(resolution_w,resolution_h);\nvec4 a = blur1(texture1, vUv, resolution.xy, direction);\nvec4 b = blur1(texture2, vUv, resolution.xy, direction);\ngl_FragColor = mix(b,a,mixRatio);\n}",transparent:!0,opacity:1},walkthrough:{uniforms:{texture1:{value:null},texture2:{value:null},mixRatio:{type:"f",value:0},directionX:{type:"f",value:.5},directionY:{type:"f",value:.5},u_sourceMatrix:{value:null},u_destMatrix:{value:null},uf_time:{type:"f",value:0},effect:{type:"f",value:0},blur:{type:"f",value:0}},vertexShader:"precision highp sampler2D;\nvarying vec2 vUv;\nvarying vec2 vUv1;\nuniform float directionX;\nuniform float directionY;\nuniform float uf_time;\nuniform float effect;\nfloat ease(float t, float b, float c, float d, float e) {\nfloat ts=(t/=d)*t;\nfloat tc=ts*t;\nif( e == 0.0 ){\nreturn b+c*(-3.8675*tc*ts + 14.8675*ts*ts + -20.0*tc + 10.0*ts);\n} else if( e == 0.1 ) {\nreturn b+c*(tc*ts);\n} else if( e == 0.2 ) {\nreturn b+c*(3.7975*tc*ts + -7.745*ts*ts + 8.595*tc + -8.095*ts + 4.4475*t);\n} else if( e == 0.3 ) {\nfloat f = t < 0.5 ? 2.0 * t : 1.0 - (2.0 * t - 1.0);\nfloat g = pow(f, 3.0) - f * sin(f * 3.141592653589793);\nreturn t < 0.5 ? 0.5 * g: 0.5 * (1.0 - g) + 0.5;\n} else if( e == 0.4 ) {\nreturn b+c*(0.664999999999998*tc*ts + -0.397499999999997*ts*ts + 0.4*tc + 0.264999999999998*ts + 0.0675000000000011*t);\n} else {\nreturn b+c*(tc*ts);\n}\n}\nvoid main() {\nvUv = uv;\nvUv1 = uv;\nvec2 tex_coord = vUv;\nfloat e_uf_tim = ease(uf_time, 0.0,1.0,1.0, effect);\nif( tex_coord.y > 1.0 ){\n}\nfloat f_time = (e_uf_tim * 0.20);\nif (tex_coord.x == 1.0){\ntex_coord.x -= f_time;\n} else {\ntex_coord.x += f_time;\n}\nif (tex_coord.y == 1.0){\ntex_coord.y -= f_time;\n} else {\ntex_coord.y += f_time;\n}\nvUv = tex_coord;\nvUv1 = tex_coord;\ngl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"precision highp sampler2D;\nvarying vec2 vUv;\nvarying vec2 vUv1;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform float threshold;\nvarying vec3 v_source;\nvarying vec3 v_dest;\nuniform float power;\nuniform float mixRatio;\nuniform float blur;\nvoid main() {\nvec4 sourceColor = texture2D( texture1, vUv );\nvec4 destColor = texture2D( texture2, vUv1 );\nif( blur == 0.0 ){\ngl_FragColor = mix( sourceColor, destColor, mixRatio );\n} else {\nconst int samples = 10;\nconst float minBlur = .0;\nfloat maxBlur = blur;\nconst float speed = 1.0;\nvec2 p = vUv;\nvec4 result1 = vec4(0);\nfloat timeQ1 = mix(minBlur, maxBlur, (sin(mixRatio*speed)+1.)/2.);\nfor (int i=0; i<=samples; i++){\nfloat q = float(i)/float(samples);\nresult1 += texture2D(texture1, p + (vec2(0.5,1.0-0.5)-p)*q*timeQ1)/float(samples);\n}\nvec4 c2 =  texture2D(texture2, vUv);\ngl_FragColor = mix(result1, c2 , mixRatio);\n}\n}",transparent:!0,opacity:1}}}()},THEASYS.renderer.tween=function(){var e={from:{},to:{},step:{},finished:{},easing:{},onUpdate:null,onComplete:null,animationFrame:null,killAnimation:function(){window.cancelAnimationFrame(e.animationFrame)},animate:function(){e.animationFrame=window.requestAnimationFrame(e.animate),e.update()},start:function(e){for(var t in"function"==typeof e&&e(),this.from)this.finished[t]=0;this.animate()},update:function(){for(var e in"function"==typeof this.onUpdate&&this.onUpdate(this.from,this.to,this.step),this.from)1!=this.finished[e]&&(parseFloat(this.from[e],10)<parseFloat(this.to[e],10)?(this.easing[e]?this.from[e]+=(this.to[e]-this.from[e])*this.easing[e]:this.step[e]?this.from[e]+=this.step[e]:this.from[e]++,parseFloat(this.from[e])+.1>=parseFloat(this.to[e],10)&&(this.finished[e]=1)):parseFloat(this.from[e],10)>parseFloat(this.to[e],10)?(this.easing[e]?this.from[e]+=(this.to[e]-this.from[e])*this.easing[e]:this.step[e]?this.from[e]-=this.step[e]:this.from[e]--,parseFloat(this.from[e])<=parseFloat(this.to[e],10)+.1&&(this.finished[e]=1)):this.finished[e]=1);var t=!0;for(var e in this.finished)if(!this.finished[e]){t=!1;break}t&&this.end()},end:function(e){"function"==typeof e&&e(),"function"==typeof this.onComplete&&this.onComplete(this.from,this.to,this.step),this.killAnimation()},stop:function(){this.killAnimation()}};return e},THEASYS.renderer.event=new THEASYS.event,THEASYS.renderer.listenToEdits=function(e){for(var t in THEASYS.theme.listenToEdits(e),e)switch(t){case"panoramas_transition":var o=e[t];this.vars.set("options.panoramas_transition",o),this.vars.set("panorama_linking_mode",o);break;case"panoramas_transition_keep_view":var o=+e[t];this.vars.set("options.panoramas_transition_keep_view",o),this.vars.set("transition_keep_view",~~o);break;case"panoramas_transition_notmp":var o=+e[t];this.vars.set("options.panoramas_transition_notmp",o),this.vars.set("transition_notmp",~~o);break;case"zoom_touch":this.vars.set("options.zoom_touch",+e[t]);break;case"zoom_mouse_wheel":this.vars.set("options.zoom_mouse_wheel",+e[t]);break;case"movement_via_keyboard":this.vars.set("options.movement_via_keyboard",+e[t]);break;case"movement_via_mouse":this.vars.set("options.movement_via_mouse",+e[t]);break;case"hotspots_display_nadir_zenith_patch":var o=+e[t];this.vars.set("options.hotspots_display_nadir_zenith_patch",o);var a=!!o,r=this.vars.get("options.hotspots_display");if(a&&!parseInt(r,10))return!1;this.hotovi();break;case"hotspots_display_tooltips":this.vars.set("options.hotspots_display_tooltips",+e[t]);break;case"hotspots_action_link_to_panorama":case"hotspots_action_link_to_external_url":case"hotspots_action_video":case"hotspots_action_image":case"hotspots_action_sound":case"hotspots_action_info_panel":this.vars.set("options."+t,+e[t]),this.hotovi();break;case"hotspots_type_image":case"hotspots_type_font":case"hotspots_type_text":case"hotspots_type_text3d":case"hotspots_type_flare":case"hotspots_type_emoji":case"hotspots_type_flag":case"hotspots_type_shape":case"hotspots_type_arrow":case"hotspots_type_line":this.vars.set("options."+t,+e[t]),this.hotovi();break;case"auto_rotation_active_on_load":var o=+e[t];this.toggleAutoRotate(o),this.vars.set("options.auto_rotation_active_on_load",o);break;case"vr_mode_active_on_load_desktop":this.vars.get("device.isMobile")||(this.toggleVr(+e[t]),this.vars.set("options.vr_mode_active_on_load_desktop",1));break;case"vr_mode_active_on_load_mobile":if(this.vars.get("device.isMobile")){var o=+e[t];this.toggleVr(o),this.vars.set("options.vr_mode_active_on_load_mobile",o)}break;case"gyroscope_active_on_load":var o=+e[t];this.vars.get("device.isMobile")&&this.toggleGyroscope(o),this.vars.set("options.gyroscope_active_on_load",o);break;case"quality_active_on_load":var o=+e[t];this.vars.get("device.isMobile")&&this.toggleQuality(o),this.vars.set("options.quality_active_on_load",o);break;case"opt_desktop":var o=~~e[t];this.vars.set("options.opt_desktop",o),this.toggleQuality(o);break;case"opt_tablet":var o=~~e[t];this.vars.set("options.opt_tablet",o),this.toggleQuality(o);break;case"opt_phone":var o=~~e[t];this.vars.set("options.opt_phone",o),this.toggleQuality(o);break;default:}},THEASYS.check={init:function(e){var t="t"in e&&void 0!==e.t?e.t:null,a="h"in e&&void 0!==e.h?e.h:null,r="p"in e&&void 0!==e.p?e.p:null,s="c"in e&&void 0!==e.c?e.c:null,d="ce"in e&&void 0!==e.ce?e.ce:null,c="cp"in e&&void 0!==e.cp?e.cp:[],u="pc"in e&&void 0!==e.pc?e.pc:[],p="ts"in e&&void 0!==e.ts?e.ts:null,m="e"in e&void 0!==e.e?e.e:null,f="a"in e&&void 0!==e.a?e.a:null,o="s_"in e&&void 0!==e.s_?e.s_:null,v="y"in e&&void 0!==e.y?e.y:null,u=1,_={};if(!t||!a)return _.code="nvd",_;var b=this.isTourLocked(v);if(""!==b)return _.code=b,_;var h=null;if(p&&"string"==typeof p){var g=p.split(",");h={f:g[0],lt:g[1],ln:g[2],p:g[3],r:g[4]},h.ter=a,o=h.r}var _={};_.tour=this.fetchTour(t,a,v,m,f);var r=0;if("success"in _.tour&&_.tour.success&&"tour"in _.tour&&"panorama_id"in _.tour.tour&&(r=_.tour.tour.panorama_id),_.tour_embed=this.fetchTourEmbedOptions(t,a,m),THEASYS.fn.is_empty(_.tour_embed.options)&&0===_.tour_embed.ce)return _.code="nfteo",_;"options"in _.tour_embed&&!THEASYS.fn.is_empty(_.tour_embed.options)&&"starting_panorama"in _.tour_embed.options&&parseInt(_.tour_embed.options.starting_panorama,10)&&(r=parseInt(_.tour_embed.options.starting_panorama,10));var j=vars.db.tour.id;if(j)for(var x={},y=0,I=vars.db.panoramas.length;y<I;y++)x[vars.db.panoramas[y].id]=vars.db.panoramas[y].cache;_.pc=x;var n=0;r in c?r in x&&x[r]!==parseInt(c[r],10)&&(n=r):n=r,m&&(n=r);var w=!0;return(n||m)&&(_.tour_panorama=this.fetch(t,o,n)),"tour_panorama"in _&&"success"in _.tour_panorama&&(h?(_.tour_panorama.success.goTo={a:parseFloat(h.lt,10),s:parseFloat(h.ln,10),y:parseFloat(h.f,10),s_:h.r,_:parseInt(h.p,10),__:h.ter},w=!1):_.tour_panorama.success.goTo=null),w&&h&&(_.gt={a:parseFloat(h.lt,10),s:parseFloat(h.ln,10),y:parseFloat(h.f,10),s_:h.r,_:parseInt(h.p,10),__:h.ter}),_},isTourLocked:function(e){var t="",o=0;return 0<vars.db.tour.panorama_id&&""!==vars.db.tour.private_password&&(o=vars.db.tour.private),o&&(e?0<vars.db.tour.panorama_id&&e!==vars.db.tour.private_password&&(t="ppnv"):t="ppns"),t},fetchTour:function(t,a,r,s,e){var d={success:0,tour:{},code:""},t=t===void 0?null:t,a=a===void 0?null:a;if(!t)return d;var c=s===void 0?0:parseInt(s,10),e=e===void 0?null:e;if(!vars.db.tour.status)return d.code="tsz",d;if(t){var l={id:vars.db.tour.id,cache:vars.db.tour.cache,title:vars.db.tour.title,description:vars.db.tour.description,map_status:vars.db.tour.map,map_latitude:vars.db.tour.map_latitude,map_longitude:vars.db.tour.map_longitude,map_zoom:vars.db.tour.map_zoom,audio:vars.db.tour.audio,domain_specific:vars.db.tour.domain_specific,floorplan:vars.db.tour.floorplan,rnd:vars.db.tour.random_id,panoramas_movement:vars.db.tour.panoramas_movement,panoramas_interaction_direction:vars.db.tour.panoramas_interaction_direction,panorama_id:vars.db.tour.panorama_id,uid:vars.db.user.uid};if(0<vars.db.panoramas.length){for(var u=[],p="",m=0,f=vars.db.panoramas.length;m<f;m++)p="",p=vars.db.panoramas[m].thumbnail?"custom/"+vars.db.panoramas[m].thumbnail:vars.db.panoramas[m].name,u.push({thumbnail:p,title:vars.db.panoramas[m].title,prnd:vars.db.panoramas[m].prnd,cache:vars.db.panoramas[m].cache,id:vars.db.panoramas[m].id,lat:vars.db.panoramas[m].latitude,lng:vars.db.panoramas[m].longitude,is_demo:vars.db.panoramas[m].is_demo});l.panoramas=u,l.thh=this.tourHasHostpots(l.id),d={success:1,tour:l}}}return d},fetchTourEmbedOptions:function(t,o,a){var t=t===void 0?null:t,o=o===void 0?null:o,e=a===void 0?0:parseInt(a,10),r={ce:0,options:{}};if(t&&o){var i=vars.db.embed.options,n=vars.db.embed.cache;i&&(r.ce=n,r.options=i)}return r},fetch:function(e,t,o){var a=e===void 0?null:e,r=t===void 0?null:t,s=o===void 0?0:parseInt(o,10),d=0;if(a){if(vars.db.tour.random_id===a){if(0<=s&&(d=s),r)for(var c=0,l=vars.db.panoramas.length;c<l;c++)if(vars.db.panoramas[c].rnd===r){d=vars.db.panoramas[c].id;break}for(var u=null,c=0,l=vars.db.panoramas.length;c<l;c++)if(vars.db.panoramas[c].id===d){u=vars.db.panoramas[c];break}if(!u)return{error:"Virtual tour not found!",code:"nfpid"};for(var p={user_id:vars.db.user.id,uid:vars.db.user.uid,first_name:vars.db.user.first_name,last_name:vars.db.user.last_name,dir_panorama:"",rel_dir_panorama:"",abs_dir_panorama:"",tour_rnd:vars.db.tour.random_id,tour_alias:vars.db.tour.alias,tour_map:vars.db.tour.map,tour_map_latitude:vars.db.tour.map_latitude,tour_map_longitude:vars.db.tour.map_longitude,tour_map_zoom:vars.db.tour.map_zoom,tour_cache:vars.db.tour.cache,panorama_id:vars.db.tour.panorama_id,id:u.id,cache:u.cache,folder:u.folder,longitude:u.longitude,latitude:u.latitude,name:u.name,title:u.title,description:u.description,rnd:u.rnd,x:u.x,y:u.y,default_view:u.default_view,fov:u.fov,orientation:u.orientation,vertical_offset:u.vertical_offset,zoom_in:u.zoom_in,zoom_out:u.zoom_out,enhancements:u.enhancements,is_demo:u.is_demo,is_full:u.is_full,phi_start:u.phi_start,heights:u.heights,widths:u.widths,default_view:u.default_view,auto_rotation:u.auto_rotation,zoom_limits:u.zoom_limits,movement:u.movement,hv_limits:u.hv_limits,streetview_orientation:u.streetview_orientation,effects:u.effects,pitch:u.pitch,audio:u.audio,level:u.level},m=[],c=0,l=vars.db.panoramas_objects.length;c<l;c++)vars.db.panoramas_objects[c].panorama_id===p.id&&m.push(vars.db.panoramas_objects[c]);var f={};if(m.length)for(var c=0,l=m.length,v;c<l;c++)v=m[c].id,f[v]={id:m[c].id,type:m[c].type,type_extra:m[c].type_extra,scene:m[c].scene,name:m[c].name,tooltip:m[c].tooltip,texture:m[c].texture,value:m[c].value,properties:m[c].properties,action:m[c].action,action_type:m[c].action_type,position:m[c].position,scale:m[c].scale,scale_auto:m[c].scale_auto,scale_fov:m[c].scale_fov,rotation:m[c].rotation,rotation_to_axes:m[c].rotation_to_axes,rtaold:m[c].rtaold,opacity:m[c].opacity,transitions:m[c].transitions,flip_x:m[c].flip_x,flip_y:m[c].flip_y,flip:m[c].flip,z:m[c].z,visible:m[c].visible,order:m[c].order},f[v].properties.value=m[c].value;return p.objects=f,{success:p}}return{error:"Virtual tour not found!",code:"nfpid"}}return{error:"Virtual tour not found!",code:"nfpid"}},tourHasHostpots:function(e){var t=0;if(0>=e)return t;for(var o=[],a=0,r=vars.db.panoramas.length;a<r;a++)o.push(vars.db.panoramas[a].id);if(o.length){for(var s=0,a=0,r=vars.db.panoramas_objects.length;a<r;a++)o.includes(vars.db.panoramas_objects[a].panorama_id)&&s++;t=0<s}return t},newTourEmbedViewShare:function(o,t,r,e,a,i,n,s,d,c){var l={status:0,rnd:"",data:{}},u=o===void 0?null:o,p=t===void 0?null:t,m=r===void 0?null:r,f=e===void 0?null:e,v=s===void 0?0:parseFloat(s),_=d===void 0?0:parseFloat(d),b=c===void 0?0:parseFloat(c);if(u&&p&&m&&f){var h=vars.db.tour.id;if(h){l.status=1,l.rnd="",l.data={f:v,lt:_,ln:b,p:m,r:f}}}return l}},THEASYS.load=function(){};
 
vars.cookiesconsent=``;
 
vars.db = {"user":{"id":11555,"uid":"3316591886","type_id":1,"first_name":"***","last_name":"***","email":"***","status":1},"tour":{"id":91101,"user_id":11555,"panorama_id":737890,"cache":56,"random_id":"yGbpjiI8pi4Am5K","random_id_extra":"","size":11,"title":"Vegan Sailing - Monohull - Private Vegan Sailing","alias":"more-55","description":"","image":"","map":1,"map_type":"gmap","map_latitude":43.545446666667,"map_longitude":16.402205,"map_zoom":6,"audio":null,"floorplan":null,"floorplan_status":1,"date":1610737513,"status":1,"domain_specific":0,"private":0,"private_password":"","google_analytics_key":"","seo_title":"","seo_description":"","no_index":0,"options":"","options_date":0,"shaders":0,"panoramas_movement":{"s":1,"v":0.05},"panoramas_interaction_direction":{"h":0,"v":0},"uid":"3316591886"},"embed":{"id":90314,"tour_id":91101,"rnd":"Xu0ic6kHoeSrzlu","rnd_short":"wuIzk7","cache":29,"name":"More 55 (auto-generated)","options":{"opt_desktop":1,"opt_tablet":1,"start_screen_custom_logo_display_image":"KJKiJsNUQFm6qkfjKKOP1DE5pK42Vk.png","logo_uploaded_once":1,"load_transition":"crossfade","load_transition_bg_color":"#000000","panoramas_transition":"crossfade","auto_rotation_starting_panorama":1,"auto_rotation_starting_panorama_speed":1,"gyroscope":0,"copyright_context_menu_title":"www.paras.hr","copyright_context_menu_url":"www.paras.hr","copyright_viewer":0,"logo_url":"www.paras.hr","start_screen_custom_logo_url":"https:\/\/www.adriatic-sailing.hr\/","auto_rotation_disable_on_interaction":1,"menu_opened_by_default":1,"logo_image":"oq1AglcJgkcCSWrZg99h3hXlkW2gfe.png","auto_rotation_starting_panorama_direction":1,"theme":"theasys","opt_phone":"0","opt_preloading":"ongoing","hide_linking_hotspots":"0","nav_arrows":"0","nav_arrows_hide_level":"90","nav_arrows_height_placement":"-186","nav_arrows_dowiv":"0","nav_arrows_type":"sv","nav_arrows_type_d":"M 0 -200 L 0 -200 l -30 30 l 0 30 l 30 -30 l 30 30 l 0 -30 Z|M 60 -170 a 60 60 0 1 0 0 1 Z","nav_arrows_perspective":"1","nav_arrows_color":"#ffffff","nav_arrows_opacity":"1","nav_arrows_scale":"0.85","nav_arrows_stroke_color":"#ffffff","nav_arrows_stroke_width":"0","nav_arrows_shadow":"1","nav_arrows_shadow_color":"#000000","nav_arrows_shadow_opacity":"0.5","nav_arrows_circle":"1","nav_arrows_circle_color":"#ffffff","nav_arrows_circle_opacity":"0.3","nav_arrows_circle_stroke_color":"#ffffff","nav_arrows_circle_stroke_width":"4","nav_arrows_hover_color":"#d4d4d4","nav_arrows_hover_opacity":"1","nav_arrows_hover_stroke_color":"#ffffff","nav_arrows_hover_stroke_width":"0","nav_arrows_hover_shadow":"1","nav_arrows_hover_shadow_color":"#000000","nav_arrows_hover_shadow_opacity":"1","nav_arrows_hover_circle":"0","nav_arrows_hover_circle_color":"#000000","nav_arrows_hover_circle_opacity":"0.5","nav_arrows_hover_circle_stroke_color":"#ffffff","nav_arrows_hover_circle_stroke_width":"4","nav_arrows_titles":"1","nav_arrows_titles_text":"0","nav_arrows_titles_visible_on_hover":"0","nav_arrows_titles_color":"#ffffff","nav_arrows_titles_size":"12","nav_arrows_titles_placement":"top","nav_arrows_titles_offsetX":"0","nav_arrows_titles_offsetY":"15","nav_arrows_titles_background_opacity":"0.4","nav_arrows_titles_background_color":"#000000","nav_arrows_titles_paddingX":"8","nav_arrows_titles_paddingY":"5","nav_arrows_titles_background_border_size":"2","nav_arrows_titles_background_border_style":"solid","nav_arrows_titles_background_radius":"20","nav_arrows_titles_background_border_color":"#ffffff","copyright_start_screen":1,"copyright_context_menu":1,"logo_display":1,"autoplay":1,"start_screen_overlay":1,"start_screen_cover_pano":0,"start_screen_cover_custom":1,"start_screen_cover_custom_image":"","start_screen_logo_display":1,"start_screen_custom_logo_display":1,"start_screen_tour_title":1,"start_screen_tour_description":1,"start_screen_website":"0","start_screen_website_url":"","start_screen_map":"0","start_screen_map_url":"","start_screen_tel":"0","start_screen_tel_url":"","starting_panorama":0,"starting_panorama_auto_rotation_overide":0,"starting_panorama_auto_rotation_status":0,"starting_panorama_auto_rotation_speed":1,"starting_panorama_auto_rotation_direction":0,"starting_panorama_auto_rotation_delay":0,"titles_tour":1,"titles_tour_description":1,"titles_panorama":1,"titles_panorama_description":0,"titles_open_by_default":0,"thumbnails_enabled":1,"thumbnails_visible_by_default":0,"thumbnails_show_panorama_title_on_hover":1,"thumbnails_sticky_panorama_title":0,"thumbnails_close_on_action":0,"maps_opended":0,"maps_close_on_actions":0,"maps_geo_show":0,"maps_geo_radar":1,"maps_geo_markers_show_panorama_title_on_hover":1,"maps_custom_show":1,"maps_custom_radar":1,"maps_custom_markers_show_panorama_title_on_hover":1,"maps_custom_zoom":1,"maps_custom_position":"{\"0\":{\"x\":0,\"y\":0,\"scale\":1}}","hotspots_display":1,"hotspots_display_tooltips":1,"hotspots_display_nadir_zenith_patch":1,"hotspots_action_link_to_panorama":1,"hotspots_action_link_to_external_url":1,"hotspots_action_video":1,"hotspots_action_image":1,"hotspots_action_sound":1,"hotspots_action_info_panel":1,"hotspots_type_image":1,"hotspots_type_font":1,"hotspots_type_text":1,"hotspots_type_text3d":1,"hotspots_type_flare":1,"hotspots_type_emoji":1,"hotspots_type_flag":1,"hotspots_type_shape":1,"hotspots_type_arrow":1,"hotspots_type_line":1,"zoom_mouse_wheel":1,"zoom_touch":1,"movement_via_keyboard":1,"movement_via_mouse":1,"menu_visible":1,"menu_close_on_actions":1,"menu_visible_auto_rotation":1,"menu_visible_fullscreen":1,"menu_visible_audio":1,"menu_visible_quality_selection":1,"auto_rotation":1,"auto_rotation_active_on_load":1,"auto_rotation_starting_panorama_delay":0,"auto_rotation_starting_panorama_keep":0,"background_sound":1,"background_sound_active_on_load":0,"background_sound_loop":1,"background_sound_delay":0,"background_sound_force":0,"gyroscope_active_on_load":0,"vr_mode":1,"vr_mode_active_on_load_desktop":0,"vr_mode_active_on_load_mobile":0,"vr_mode_toggle_on_shake_mobile":1,"fullscreen":1,"share_menu":1,"share_context_menu":1,"quality":1,"quality_active_on_load":0,"panoramas_transition_notmp":0,"panoramas_transition_keep_view":0,"load_transition_notmp":0,"load_transition_bg_img":"","cookiesconsent":0,"cookiesconsent_days":365,"cookiesconsent_url":"","cookiesconsent_bgcolor":"#d679b5","cookiesconsent_color":"#fff","cookiesconsent_button_bgcolor":"#fff","cookiesconsent_button_color":"#263772","loader_color":"#d679b5","loader_size":50,"loader_border_size":5,"loader_duration":0.9,"logo_path":"images\/oq1AglcJgkcCSWrZg99h3hXlkW2gfe.png","start_screen_custom_logo_display_image_path":"images\/KJKiJsNUQFm6qkfjKKOP1DE5pK42Vk.png","cover_image":"cIPM18NfPldbyPE-cJg73B4csZ.jpg","cover_image_path":"","cover_image_type":0},"options_date":1610991821,"date":1603716727,"google_analytics_key":"","title":"","description":"","seo_title":"","seo_description":"","no_index":0,"use_globals":{"title":1,"description":1,"seo_title":1,"seo_description":1,"no_index":1,"google_analytics_key":1},"status":1},"domains":[],"panoramas":[{"id":737890,"cache":94,"folder":0,"longitude":16.394133333333,"latitude":43.545755,"name":"cIPM18NfPldbyPE-cJg73B4csZ.jpg","title":"Cockpit","thumbnail":"","description":"","rnd":"7JTqsu9yuo3jA01","prnd":"7JTqsu9yuo3jA01","x":0,"y":0,"default_view":{"lat":"-28.666574777586803","lon":"99.79157082059666"},"fov":100.051,"orientation":0,"movement":{"x":1,"y":1},"heights":{"original":3648,"modded":3648,"desktop":{"t":65,"xs":500,"d":250}},"widths":{"original":7296,"modded":7296,"desktop":{"t":130,"xs":1000,"d":500}},"vertical_offset":0,"zoom_in":20,"zoom_out":100,"auto_rotation":{"direction":0,"delay":0,"speed":1,"status":0},"zoom_limits":{"to_image_resolution":0,"zoom_in":90,"zoom_out":119},"hv_limits":{"h":{"from":0,"to":360},"v":{"from":-88,"to":88}},"effects":[],"enhancements":0,"is_demo":0,"is_full":1,"streetview_orientation":{"lat":0,"lon":0},"phi_start":0,"pitch":{"s":0,"d":-90,"u":90},"audio":null,"level":null,"scale":null},{"id":737896,"cache":53,"folder":0,"longitude":16.394071666667,"latitude":43.545996666667,"name":"dOone1hML0FDdDj-9yxctNRknY.jpg","title":"Bow","thumbnail":"","description":"","rnd":"a3ktzDDRySeE9M0","prnd":"a3ktzDDRySeE9M0","x":0,"y":0,"default_view":{"lat":"-41.38338196487273","lon":"325.3440265250843"},"fov":100.553,"orientation":0,"movement":{"x":1,"y":1},"heights":{"original":3648,"modded":3648,"desktop":{"t":65,"xs":500,"d":250}},"widths":{"original":7296,"modded":7296,"desktop":{"t":130,"xs":1000,"d":500}},"vertical_offset":0,"zoom_in":20,"zoom_out":100,"auto_rotation":{"direction":0,"delay":0,"speed":1,"status":0},"zoom_limits":{"to_image_resolution":0,"zoom_in":90,"zoom_out":119},"hv_limits":{"h":{"from":0,"to":360},"v":{"from":-88,"to":88}},"effects":[],"enhancements":0,"is_demo":0,"is_full":1,"streetview_orientation":{"lat":0,"lon":0},"phi_start":0,"pitch":{"s":0,"d":-90,"u":90},"audio":null,"level":null,"scale":null},{"id":737899,"cache":195,"folder":0,"longitude":16.40225,"latitude":43.545445,"name":"nScOTl4Nic9Fwzd-PgIOxnyvab.jpg","title":"Saloon","thumbnail":"","description":"","rnd":"LCJpHF859UI9tPG","prnd":"LCJpHF859UI9tPG","x":0,"y":0,"default_view":{"lat":"-20.35473306053974","lon":"19.00975758581525"},"fov":100.804,"orientation":0,"movement":{"x":1,"y":1},"heights":{"original":3648,"modded":3648,"desktop":{"t":65,"xs":500,"d":250}},"widths":{"original":7296,"modded":7296,"desktop":{"t":130,"xs":1000,"d":500}},"vertical_offset":0,"zoom_in":20,"zoom_out":100,"auto_rotation":{"direction":0,"delay":0,"speed":1,"status":0},"zoom_limits":{"to_image_resolution":0,"zoom_in":89,"zoom_out":119},"hv_limits":{"h":{"from":0,"to":360},"v":{"from":-88,"to":88}},"effects":[],"enhancements":0,"is_demo":0,"is_full":1,"streetview_orientation":{"lat":0,"lon":0},"phi_start":0,"pitch":{"s":0,"d":-90,"u":90},"audio":null,"level":null,"scale":null},{"id":737891,"cache":35,"folder":0,"longitude":16.40223,"latitude":43.545446666667,"name":"y0xQwPowGMIFOCH-eCl7luKWPk.jpg","title":"Cabin (Starboard - Aft) ","thumbnail":"","description":"","rnd":"gkUUfav4lmyyUVh","prnd":"gkUUfav4lmyyUVh","x":0,"y":0,"default_view":{"lat":"-34.42174118306842","lon":"355.8874980328928"},"fov":100.804,"orientation":0,"movement":{"x":1,"y":1},"heights":{"original":3648,"modded":3648,"desktop":{"t":65,"xs":500,"d":250}},"widths":{"original":7296,"modded":7296,"desktop":{"t":130,"xs":1000,"d":500}},"vertical_offset":0,"zoom_in":20,"zoom_out":100,"auto_rotation":{"direction":0,"delay":0,"speed":1,"status":0},"zoom_limits":{"to_image_resolution":0,"zoom_in":89,"zoom_out":119},"hv_limits":{"h":{"from":0,"to":360},"v":{"from":-88,"to":88}},"effects":[],"enhancements":0,"is_demo":0,"is_full":1,"streetview_orientation":{"lat":0,"lon":0},"phi_start":0,"pitch":{"s":0,"d":-90,"u":90},"audio":null,"level":null,"scale":null},{"id":737892,"cache":39,"folder":0,"longitude":16.40223,"latitude":43.545425,"name":"lITxjK2ke878eyk-pGPdb2XE8K.jpg","title":"Cabin (Port side - Aft) ","thumbnail":"","description":"","rnd":"bYur4KOPtwziAX9","prnd":"bYur4KOPtwziAX9","x":0,"y":0,"default_view":{"lat":"-34.97658369414495","lon":"179.57286145072442"},"fov":100.528,"orientation":0,"movement":{"x":1,"y":1},"heights":{"original":3648,"modded":3648,"desktop":{"t":65,"xs":500,"d":250}},"widths":{"original":7296,"modded":7296,"desktop":{"t":130,"xs":1000,"d":500}},"vertical_offset":0,"zoom_in":20,"zoom_out":100,"auto_rotation":{"direction":0,"delay":0,"speed":1,"status":0},"zoom_limits":{"to_image_resolution":0,"zoom_in":90,"zoom_out":119},"hv_limits":{"h":{"from":0,"to":360},"v":{"from":-88,"to":88}},"effects":[],"enhancements":0,"is_demo":0,"is_full":1,"streetview_orientation":{"lat":0,"lon":0},"phi_start":0,"pitch":{"s":0,"d":-90,"u":90},"audio":null,"level":null,"scale":null},{"id":737889,"cache":37,"folder":0,"longitude":16.402205,"latitude":43.545446666667,"name":"pSvmnJ6DGOiQ5Rp-Oxc0REtNwJ.jpg","title":"Cabin (bunk bed) ","thumbnail":"","description":"","rnd":"SpjAJ9UtVo1br5f","prnd":"SpjAJ9UtVo1br5f","x":0,"y":0,"default_view":{"lat":"-37.89718553257621","lon":"354.8049043760434"},"fov":100,"orientation":0,"movement":{"x":1,"y":1},"heights":{"original":3648,"modded":3648,"desktop":{"t":65,"xs":500,"d":250}},"widths":{"original":7296,"modded":7296,"desktop":{"t":130,"xs":1000,"d":500}},"vertical_offset":0,"zoom_in":20,"zoom_out":100,"auto_rotation":{"direction":0,"delay":0,"speed":1,"status":0},"zoom_limits":{"to_image_resolution":0,"zoom_in":90,"zoom_out":118},"hv_limits":{"h":{"from":0,"to":360},"v":{"from":-88,"to":88}},"effects":[],"enhancements":0,"is_demo":0,"is_full":1,"streetview_orientation":{"lat":0,"lon":0},"phi_start":0,"pitch":{"s":0,"d":-90,"u":90},"audio":null,"level":null,"scale":null},{"id":737893,"cache":46,"folder":0,"longitude":16.40223,"latitude":43.54542,"name":"yD52O35STswpjMn-ylVjzVBY5D.jpg","title":"Bathroom (Aft) ","thumbnail":"","description":"","rnd":"fYysCBVAu5sRYsl","prnd":"fYysCBVAu5sRYsl","x":0,"y":0,"default_view":{"lat":"-35.86348908337183","lon":"138.55123062007854"},"fov":110.199,"orientation":0,"movement":{"x":1,"y":1},"heights":{"original":3648,"modded":3648,"desktop":{"t":65,"xs":500,"d":250}},"widths":{"original":7296,"modded":7296,"desktop":{"t":130,"xs":1000,"d":500}},"vertical_offset":0,"zoom_in":20,"zoom_out":100,"auto_rotation":{"direction":0,"delay":0,"speed":1,"status":0},"zoom_limits":{"to_image_resolution":0,"zoom_in":90,"zoom_out":119},"hv_limits":{"h":{"from":0,"to":360},"v":{"from":-88,"to":88}},"effects":[],"enhancements":0,"is_demo":0,"is_full":1,"streetview_orientation":{"lat":0,"lon":0},"phi_start":0,"pitch":{"s":0,"d":-90,"u":90},"audio":null,"level":null,"scale":null},{"id":737897,"cache":52,"folder":0,"longitude":16.402211666667,"latitude":43.545436666667,"name":"pQF78YcqND0mFsn-pKv5IWBwhh.jpg","title":"Cabin (Starboard - Bow) ","thumbnail":"","description":"","rnd":"fAwNA9XTtv7O0gT","prnd":"fAwNA9XTtv7O0gT","x":0,"y":0,"default_view":{"lat":"-33.29399994726472","lon":"210.11538461538458"},"fov":100.051,"orientation":0,"movement":{"x":1,"y":1},"heights":{"original":3648,"modded":3648,"desktop":{"t":65,"xs":500,"d":250}},"widths":{"original":7296,"modded":7296,"desktop":{"t":130,"xs":1000,"d":500}},"vertical_offset":0,"zoom_in":20,"zoom_out":100,"auto_rotation":{"direction":0,"delay":0,"speed":1,"status":0},"zoom_limits":{"to_image_resolution":0,"zoom_in":89,"zoom_out":119},"hv_limits":{"h":{"from":0,"to":360},"v":{"from":-88,"to":88}},"effects":[],"enhancements":0,"is_demo":0,"is_full":1,"streetview_orientation":{"lat":0,"lon":0},"phi_start":0,"pitch":{"s":0,"d":-90,"u":90},"audio":null,"level":null,"scale":null},{"id":737895,"cache":57,"folder":0,"longitude":16.402196666667,"latitude":43.545446666667,"name":"VLqnWx0pO5XXIxV-owuawlUEo4.jpg","title":"Bathroom (Starboard - Bow) ","thumbnail":"","description":"","rnd":"fci2cKlY9BO8ynC","prnd":"fci2cKlY9BO8ynC","x":0,"y":0,"default_view":{"lat":"-32.34279310534154","lon":"155.6417214899435"},"fov":110.64,"orientation":0,"movement":{"x":1,"y":1},"heights":{"original":3648,"modded":3648,"desktop":{"t":65,"xs":500,"d":250}},"widths":{"original":7296,"modded":7296,"desktop":{"t":130,"xs":1000,"d":500}},"vertical_offset":0,"zoom_in":20,"zoom_out":100,"auto_rotation":{"direction":0,"delay":0,"speed":1,"status":0},"zoom_limits":{"to_image_resolution":0,"zoom_in":90,"zoom_out":119},"hv_limits":{"h":{"from":0,"to":360},"v":{"from":-88,"to":88}},"effects":[],"enhancements":0,"is_demo":0,"is_full":1,"streetview_orientation":{"lat":0,"lon":0},"phi_start":0,"pitch":{"s":0,"d":-90,"u":90},"audio":null,"level":null,"scale":null},{"id":737898,"cache":51,"folder":0,"longitude":16.402183333333,"latitude":43.545425,"name":"fwMbFI34sxRE4Dv-CxauhtGD7w.jpg","title":"Cabin (Port side - Bow) ","thumbnail":"","description":"","rnd":"tuONAiihIOTw8Sl","prnd":"tuONAiihIOTw8Sl","x":0,"y":0,"default_view":{"lat":"-36.94771087458573","lon":"168.47659946823384"},"fov":100.553,"orientation":0,"movement":{"x":1,"y":1},"heights":{"original":3648,"modded":3648,"desktop":{"t":65,"xs":500,"d":250}},"widths":{"original":7296,"modded":7296,"desktop":{"t":130,"xs":1000,"d":500}},"vertical_offset":0,"zoom_in":20,"zoom_out":100,"auto_rotation":{"direction":0,"delay":0,"speed":1,"status":0},"zoom_limits":{"to_image_resolution":0,"zoom_in":90,"zoom_out":119},"hv_limits":{"h":{"from":0,"to":360},"v":{"from":-88,"to":88}},"effects":[],"enhancements":0,"is_demo":0,"is_full":1,"streetview_orientation":{"lat":0,"lon":0},"phi_start":0,"pitch":{"s":0,"d":-90,"u":90},"audio":null,"level":null,"scale":null},{"id":737894,"cache":43,"folder":0,"longitude":16.402196666667,"latitude":43.545446666667,"name":"qXDCycSE2lMCjh8-PaaKtkpmvZ.jpg","title":"Bathroom (Port side - Bow) ","thumbnail":"","description":"","rnd":"aIP3qNThlV5knhj","prnd":"aIP3qNThlV5knhj","x":0,"y":0,"default_view":{"lat":"-27.692307692307693","lon":"199.55769230769232"},"fov":110.199,"orientation":0,"movement":{"x":1,"y":1},"heights":{"original":3648,"modded":3648,"desktop":{"t":65,"xs":500,"d":250}},"widths":{"original":7296,"modded":7296,"desktop":{"t":130,"xs":1000,"d":500}},"vertical_offset":0,"zoom_in":20,"zoom_out":100,"auto_rotation":{"direction":0,"delay":0,"speed":1,"status":0},"zoom_limits":{"to_image_resolution":0,"zoom_in":90,"zoom_out":119},"hv_limits":{"h":{"from":0,"to":360},"v":{"from":-88,"to":88}},"effects":[],"enhancements":0,"is_demo":0,"is_full":1,"streetview_orientation":{"lat":0,"lon":0},"phi_start":0,"pitch":{"s":0,"d":-90,"u":90},"audio":null,"level":null,"scale":null}],"panoramas_objects":[{"id":1416689,"panorama_id":737889,"type":"sprite","type_extra":"","scene":1,"name":"JGjCYORBKqfLmjLpJrfb0AqvpWlU7F","tooltip":"","texture":"","value":"JGjCYORBKqfLmjLpJrfb0AqvpWlU7F.png","properties":{"value":"JGjCYORBKqfLmjLpJrfb0AqvpWlU7F.png","color":{"r":"1","g":"1","b":"1"}},"action":{"lat":"-20.35473306053974","lon":"19.00975758581525","fov":"100.804","panorama_id":737899,"panorama_rnd":"LCJpHF859UI9tPG","type":"link_to_panorama","status":1},"action_type":"link_to_panorama","position":{"x":"-358.2478726240609","y":"-27.40901827898294","z":"19.937362442340564","lat":"-4.36650625919448","lon":"176.81463684408746"},"scale":70,"scale_fov":0,"scale_auto":0,"rotation":0,"rotation_to_axes":{"status":0,"x":"0","y":"0","z":"0"},"rotation_to_axes_old":0,"rtaold":0,"opacity":100,"transitions":{"op":{"v":"0","s":"1","st":"0"},"sc":{"v":"85","s":"1","st":"1"},"sw":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swx":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swy":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swz":{"v":"0","s":"1","st":"0","r":"0","d":"0"}},"flip_x":0,"flip_y":0,"z":0,"visible":1,"locked":0,"backwards_auto_linked":0,"date":1610740571,"order":1,"flip":{"x":0,"y":0}},{"id":1416665,"panorama_id":737890,"type":"sprite","type_extra":"","scene":1,"name":"JGjCYORBKqfLmjLpJrfb0AqvpWlU7F","tooltip":"","texture":"","value":"JGjCYORBKqfLmjLpJrfb0AqvpWlU7F.png","properties":{"value":"JGjCYORBKqfLmjLpJrfb0AqvpWlU7F.png","color":{"r":"1","g":"1","b":"1"}},"action":{"lat":"-20.35473306053974","lon":"19.00975758581525","fov":"100.804","panorama_id":737899,"panorama_rnd":"LCJpHF859UI9tPG","type":"link_to_panorama","status":1},"action_type":"link_to_panorama","position":{"x":"-54.36569778384767","y":"-88.50817814667363","z":"344.6119079503212","lat":"-14.232429280141147","lon":"98.96504948036994"},"scale":70,"scale_fov":0,"scale_auto":0,"rotation":0,"rotation_to_axes":{"status":0,"x":"0","y":"0","z":"0"},"rotation_to_axes_old":0,"rtaold":0,"opacity":100,"transitions":{"op":{"v":"0","s":"1","st":"0"},"sc":{"v":"85","s":"1","st":"1"},"sw":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swx":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swy":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swz":{"v":"0","s":"1","st":"0","r":"0","d":"0"}},"flip_x":0,"flip_y":0,"z":0,"visible":1,"locked":0,"backwards_auto_linked":0,"date":1610740304,"order":1,"flip":{"x":0,"y":0}},{"id":1416666,"panorama_id":737890,"type":"sprite","type_extra":"","scene":1,"name":"OESalqV0wQ6fRZmK6SepYZ6eq3cNUr","tooltip":"","texture":"","value":"OESalqV0wQ6fRZmK6SepYZ6eq3cNUr.png","properties":{"value":"OESalqV0wQ6fRZmK6SepYZ6eq3cNUr.png","color":{"r":"1","g":"1","b":"1"}},"action":{"lat":"-41.38338196487273","lon":"325.3440265250843","fov":"100.553","panorama_id":737896,"panorama_rnd":"a3ktzDDRySeE9M0","type":"link_to_panorama","status":1},"action_type":"link_to_panorama","position":{"x":"-54.16658894049799","y":"53.35903807143588","z":"352.2762860474243","lat":"8.523760960208989","lon":"98.74143338000619"},"scale":60,"scale_fov":0,"scale_auto":0,"rotation":0,"rotation_to_axes":{"status":0,"x":"0","y":"0","z":"0"},"rotation_to_axes_old":0,"rtaold":0,"opacity":100,"transitions":{"op":{"v":"0","s":"1","st":"0"},"sc":{"v":"75","s":"1","st":"1"},"sw":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swx":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swy":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swz":{"v":"0","s":"1","st":"0","r":"0","d":"0"}},"flip_x":0,"flip_y":0,"z":0,"visible":1,"locked":0,"backwards_auto_linked":0,"date":1610740315,"order":0,"flip":{"x":0,"y":0}},{"id":1416685,"panorama_id":737891,"type":"sprite","type_extra":"","scene":1,"name":"JGjCYORBKqfLmjLpJrfb0AqvpWlU7F","tooltip":"","texture":"","value":"JGjCYORBKqfLmjLpJrfb0AqvpWlU7F.png","properties":{"value":"JGjCYORBKqfLmjLpJrfb0AqvpWlU7F.png","color":{"r":"1","g":"1","b":"1"}},"action":{"lat":"-20.35473306053974","lon":"19.00975758581525","fov":"100.804","panorama_id":737899,"panorama_rnd":"LCJpHF859UI9tPG","type":"link_to_panorama","status":1},"action_type":"link_to_panorama","position":{"x":"-316.5806330671242","y":"-6.495388021022525","z":"171.9395090414643","lat":"-1.0338292082553977","lon":"151.4929766908086"},"scale":70,"scale_fov":0,"scale_auto":0,"rotation":0,"rotation_to_axes":{"status":0,"x":"0","y":"0","z":"0"},"rotation_to_axes_old":0,"rtaold":0,"opacity":100,"transitions":{"op":{"v":"0","s":"1","st":"0"},"sc":{"v":"85","s":"1","st":"1"},"sw":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swx":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swy":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swz":{"v":"0","s":"1","st":"0","r":"0","d":"0"}},"flip_x":0,"flip_y":0,"z":0,"visible":1,"locked":0,"backwards_auto_linked":0,"date":1610740514,"order":1,"flip":{"x":0,"y":0}},{"id":1416686,"panorama_id":737892,"type":"sprite","type_extra":"","scene":1,"name":"JGjCYORBKqfLmjLpJrfb0AqvpWlU7F","tooltip":"","texture":"","value":"JGjCYORBKqfLmjLpJrfb0AqvpWlU7F.png","properties":{"value":"JGjCYORBKqfLmjLpJrfb0AqvpWlU7F.png","color":{"r":"1","g":"1","b":"1"}},"action":{"lat":"-20.35473306053974","lon":"19.00975758581525","fov":"100.804","panorama_id":737899,"panorama_rnd":"LCJpHF859UI9tPG","type":"link_to_panorama","status":1},"action_type":"link_to_panorama","position":{"x":"328.91842471266926","y":"-16.746147761502314","z":"145.4252401829713","lat":"-2.6661943197891276","lon":"23.85173773903182"},"scale":70,"scale_fov":0,"scale_auto":0,"rotation":0,"rotation_to_axes":{"status":0,"x":"0","y":"0","z":"0"},"rotation_to_axes_old":0,"rtaold":0,"opacity":100,"transitions":{"op":{"v":"0","s":"1","st":"0"},"sc":{"v":"85","s":"1","st":"1"},"sw":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swx":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swy":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swz":{"v":"0","s":"1","st":"0","r":"0","d":"0"}},"flip_x":0,"flip_y":0,"z":0,"visible":1,"locked":0,"backwards_auto_linked":0,"date":1610740546,"order":1,"flip":{"x":0,"y":0}},{"id":1416690,"panorama_id":737893,"type":"sprite","type_extra":"","scene":1,"name":"JGjCYORBKqfLmjLpJrfb0AqvpWlU7F","tooltip":"","texture":"","value":"JGjCYORBKqfLmjLpJrfb0AqvpWlU7F.png","properties":{"value":"JGjCYORBKqfLmjLpJrfb0AqvpWlU7F.png","color":{"r":"1","g":"1","b":"1"}},"action":{"lat":"-20.35473306053974","lon":"19.00975758581525","fov":"100.804","panorama_id":737899,"panorama_rnd":"LCJpHF859UI9tPG","type":"link_to_panorama","status":1},"action_type":"link_to_panorama","position":{"x":"337.31445338030017","y":"-12.840869216211868","z":"-126.16458113308587","lat":"-2.044121415983213","lon":"339.49286572087556"},"scale":70,"scale_fov":0,"scale_auto":0,"rotation":0,"rotation_to_axes":{"status":0,"x":"0","y":"0","z":"0"},"rotation_to_axes_old":0,"rtaold":0,"opacity":100,"transitions":{"op":{"v":"0","s":"1","st":"0"},"sc":{"v":"85","s":"1","st":"1"},"sw":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swx":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swy":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swz":{"v":"0","s":"1","st":"0","r":"0","d":"0"}},"flip_x":0,"flip_y":0,"z":0,"visible":1,"locked":0,"backwards_auto_linked":0,"date":1610740600,"order":1,"flip":{"x":0,"y":0}},{"id":1416706,"panorama_id":737894,"type":"sprite","type_extra":"","scene":1,"name":"7q6idjixYiURnI6tEB4NHKYxCrtsFl","tooltip":"","texture":"","value":"7q6idjixYiURnI6tEB4NHKYxCrtsFl.png","properties":{"value":"7q6idjixYiURnI6tEB4NHKYxCrtsFl.png","color":{"r":"1","g":"1","b":"1"}},"action":{"lat":"-36.94771087458573","lon":"168.47659946823384","fov":"100.553","panorama_id":737898,"panorama_rnd":"tuONAiihIOTw8Sl","type":"link_to_panorama","status":1},"action_type":"link_to_panorama","position":{"x":"347.41860609914585","y":"37.78448165354508","z":"86.41932586129616","lat":"6.024683015752743","lon":"13.96865342045885"},"scale":60,"scale_fov":0,"scale_auto":0,"rotation":0,"rotation_to_axes":{"status":0,"x":"0","y":"0","z":"0"},"rotation_to_axes_old":0,"rtaold":0,"opacity":100,"transitions":{"op":{"v":"0","s":"1","st":"0"},"sc":{"v":"75","s":"1","st":"1"},"sw":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swx":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swy":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swz":{"v":"0","s":"1","st":"0","r":"0","d":"0"}},"flip_x":0,"flip_y":0,"z":0,"visible":1,"locked":0,"backwards_auto_linked":0,"date":1610741109,"order":1,"flip":{"x":0,"y":0}},{"id":1416700,"panorama_id":737895,"type":"sprite","type_extra":"","scene":1,"name":"7q6idjixYiURnI6tEB4NHKYxCrtsFl","tooltip":"","texture":"","value":"7q6idjixYiURnI6tEB4NHKYxCrtsFl.png","properties":{"value":"7q6idjixYiURnI6tEB4NHKYxCrtsFl.png","color":{"r":"1","g":"1","b":"1"}},"action":{"lat":"-33.29399994726472","lon":"210.11538461538458","fov":"100.051","panorama_id":737897,"panorama_rnd":"fAwNA9XTtv7O0gT","type":"link_to_panorama","status":1},"action_type":"link_to_panorama","position":{"x":"346.0706560983487","y":"-23.43235449263495","z":"-96.68699051519482","lat":"-3.732013447711381","lon":"344.3904277456289"},"scale":60,"scale_fov":0,"scale_auto":0,"rotation":0,"rotation_to_axes":{"status":0,"x":"0","y":"0","z":"0"},"rotation_to_axes_old":0,"rtaold":0,"opacity":100,"transitions":{"op":{"v":"0","s":"1","st":"0"},"sc":{"v":"75","s":"1","st":"1"},"sw":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swx":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swy":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swz":{"v":"0","s":"1","st":"0","r":"0","d":"0"}},"flip_x":0,"flip_y":0,"z":0,"visible":1,"locked":0,"backwards_auto_linked":0,"date":1610741036,"order":1,"flip":{"x":0,"y":0}},{"id":1416667,"panorama_id":737896,"type":"sprite","type_extra":"","scene":1,"name":"pZGVVOsX3E7vgPAPPtPXN6GKoI6M1h","tooltip":"","texture":"","value":"pZGVVOsX3E7vgPAPPtPXN6GKoI6M1h.png","properties":{"value":"pZGVVOsX3E7vgPAPPtPXN6GKoI6M1h.png","color":{"r":"1","g":"1","b":"1"}},"action":{"lat":"-28.666574777586803","lon":"99.79157082059666","fov":"100.051","panorama_id":737890,"panorama_rnd":"7JTqsu9yuo3jA01","type":"link_to_panorama","status":1},"action_type":"link_to_panorama","position":{"x":"-311.26152487270986","y":"-39.54837185329609","z":"176.53854692064905","lat":"-6.30704859275599","lon":"150.4393447473625"},"scale":60,"scale_fov":0,"scale_auto":0,"rotation":0,"rotation_to_axes":{"status":0,"x":"0","y":"0","z":"0"},"rotation_to_axes_old":0,"rtaold":0,"opacity":100,"transitions":{"op":{"v":"0","s":"1","st":"0"},"sc":{"v":"70","s":"1","st":"1"},"sw":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swx":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swy":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swz":{"v":"0","s":"1","st":"0","r":"0","d":"0"}},"flip_x":0,"flip_y":0,"z":0,"visible":1,"locked":0,"backwards_auto_linked":0,"date":1610740334,"order":1,"flip":{"x":0,"y":0}},{"id":1416695,"panorama_id":737897,"type":"sprite","type_extra":"","scene":1,"name":"JGjCYORBKqfLmjLpJrfb0AqvpWlU7F","tooltip":"","texture":"","value":"JGjCYORBKqfLmjLpJrfb0AqvpWlU7F.png","properties":{"value":"JGjCYORBKqfLmjLpJrfb0AqvpWlU7F.png","color":{"r":"1","g":"1","b":"1"}},"action":{"lat":"-20.35473306053974","lon":"19.00975758581525","fov":"100.804","panorama_id":737899,"panorama_rnd":"LCJpHF859UI9tPG","type":"link_to_panorama","status":1},"action_type":"link_to_panorama","position":{"x":"355.34861674658396","y":"-53.17932830692172","z":"18.145901265687886","lat":"-8.494840906449042","lon":"2.923273689872815"},"scale":70,"scale_fov":0,"scale_auto":0,"rotation":0,"rotation_to_axes":{"status":0,"x":"0","y":"0","z":"0"},"rotation_to_axes_old":0,"rtaold":0,"opacity":100,"transitions":{"op":{"v":"0","s":"1","st":"0"},"sc":{"v":"85","s":"1","st":"1"},"sw":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swx":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swy":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swz":{"v":"0","s":"1","st":"0","r":"0","d":"0"}},"flip_x":0,"flip_y":0,"z":0,"visible":1,"locked":0,"backwards_auto_linked":0,"date":1610740936,"order":1,"flip":{"x":0,"y":0}},{"id":1416696,"panorama_id":737897,"type":"sprite","type_extra":"","scene":1,"name":"7l0rNkoVMUb832hBId9NdMzRsxmMgF","tooltip":"","texture":"","value":"7l0rNkoVMUb832hBId9NdMzRsxmMgF.png","properties":{"value":"7l0rNkoVMUb832hBId9NdMzRsxmMgF.png","color":{"r":"1","g":"1","b":"1"}},"action":{"lat":"-32.34279310534154","lon":"155.6417214899435","fov":"110.64","panorama_id":737895,"panorama_rnd":"fci2cKlY9BO8ynC","type":"link_to_panorama","status":1},"action_type":"link_to_panorama","position":{"x":"323.9615620281443","y":"-37.56572981809764","z":"-152.3126601019921","lat":"-5.989675344820455","lon":"334.81912774777055"},"scale":60,"scale_fov":0,"scale_auto":0,"rotation":0,"rotation_to_axes":{"status":0,"x":"0","y":"0","z":"0"},"rotation_to_axes_old":0,"rtaold":0,"opacity":100,"transitions":{"op":{"v":"0","s":"1","st":"0"},"sc":{"v":"75","s":"1","st":"1"},"sw":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swx":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swy":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swz":{"v":"0","s":"1","st":"0","r":"0","d":"0"}},"flip_x":0,"flip_y":0,"z":0,"visible":1,"locked":0,"backwards_auto_linked":0,"date":1610740947,"order":4,"flip":{"x":0,"y":0}},{"id":1416702,"panorama_id":737898,"type":"sprite","type_extra":"","scene":1,"name":"7l0rNkoVMUb832hBId9NdMzRsxmMgF","tooltip":"","texture":"","value":"7l0rNkoVMUb832hBId9NdMzRsxmMgF.png","properties":{"value":"7l0rNkoVMUb832hBId9NdMzRsxmMgF.png","color":{"r":"1","g":"1","b":"1"}},"action":{"lat":"-27.692307692307693","lon":"199.55769230769232","fov":"110.199","panorama_id":737894,"panorama_rnd":"aIP3qNThlV5knhj","type":"link_to_panorama","status":1},"action_type":"link_to_panorama","position":{"x":"343.765814078725","y":"-19.99256263823567","z":"106.70265030359101","lat":"-3.183553013588508","lon":"17.24399945673275"},"scale":60,"scale_fov":0,"scale_auto":0,"rotation":0,"rotation_to_axes":{"status":0,"x":"0","y":"0","z":"0"},"rotation_to_axes_old":0,"rtaold":0,"opacity":100,"transitions":{"op":{"v":"0","s":"1","st":"0"},"sc":{"v":"75","s":"1","st":"1"},"sw":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swx":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swy":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swz":{"v":"0","s":"1","st":"0","r":"0","d":"0"}},"flip_x":0,"flip_y":0,"z":0,"visible":1,"locked":0,"backwards_auto_linked":0,"date":1610741062,"order":4,"flip":{"x":0,"y":0}},{"id":1416703,"panorama_id":737898,"type":"sprite","type_extra":"","scene":1,"name":"JGjCYORBKqfLmjLpJrfb0AqvpWlU7F","tooltip":"","texture":"","value":"JGjCYORBKqfLmjLpJrfb0AqvpWlU7F.png","properties":{"value":"JGjCYORBKqfLmjLpJrfb0AqvpWlU7F.png","color":{"r":"1","g":"1","b":"1"}},"action":{"lat":"-20.35473306053974","lon":"19.00975758581525","fov":"100.804","panorama_id":737899,"panorama_rnd":"LCJpHF859UI9tPG","type":"link_to_panorama","status":1},"action_type":"link_to_panorama","position":{"x":"352.1732067865073","y":"-65.82796149567108","z":"-33.32677115791974","lat":"-10.536125988507052","lon":"354.5940979866472"},"scale":70,"scale_fov":0,"scale_auto":0,"rotation":0,"rotation_to_axes":{"status":0,"x":"0","y":"0","z":"0"},"rotation_to_axes_old":0,"rtaold":0,"opacity":100,"transitions":{"op":{"v":"0","s":"1","st":"0"},"sc":{"v":"85","s":"1","st":"1"},"sw":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swx":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swy":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swz":{"v":"0","s":"1","st":"0","r":"0","d":"0"}},"flip_x":0,"flip_y":0,"z":0,"visible":1,"locked":0,"backwards_auto_linked":0,"date":1610741083,"order":1,"flip":{"x":0,"y":0}},{"id":1416670,"panorama_id":737899,"type":"sprite","type_extra":"","scene":1,"name":"7q6idjixYiURnI6tEB4NHKYxCrtsFl","tooltip":"","texture":"","value":"7q6idjixYiURnI6tEB4NHKYxCrtsFl.png","properties":{"value":"7q6idjixYiURnI6tEB4NHKYxCrtsFl.png","color":{"r":"1","g":"1","b":"1"}},"action":{"lat":"-33.29399994726472","lon":"210.11538461538458","fov":"100.051","panorama_id":737897,"panorama_rnd":"fAwNA9XTtv7O0gT","type":"link_to_panorama","status":1},"action_type":"link_to_panorama","position":{"x":"277.4250867775724","y":"1.7944297524453212","z":"-229.30417909746933","lat":"0.2855935477607261","lon":"320.4247536884207"},"scale":60,"scale_fov":0,"scale_auto":0,"rotation":0,"rotation_to_axes":{"status":0,"x":"0","y":"0","z":"0"},"rotation_to_axes_old":0,"rtaold":0,"opacity":100,"transitions":{"op":{"v":"0","s":"1","st":"0"},"sc":{"v":"75","s":"1","st":"1"},"sw":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swx":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swy":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swz":{"v":"0","s":"1","st":"0","r":"0","d":"0"}},"flip_x":0,"flip_y":0,"z":0,"visible":1,"locked":0,"backwards_auto_linked":0,"date":1610740363,"order":1,"flip":{"x":0,"y":0}},{"id":1416671,"panorama_id":737899,"type":"sprite","type_extra":"","scene":1,"name":"7q6idjixYiURnI6tEB4NHKYxCrtsFl","tooltip":"","texture":"","value":"7q6idjixYiURnI6tEB4NHKYxCrtsFl.png","properties":{"value":"7q6idjixYiURnI6tEB4NHKYxCrtsFl.png","color":{"r":"1","g":"1","b":"1"}},"action":{"lat":"-36.94771087458573","lon":"168.47659946823384","fov":"100.553","panorama_id":737898,"panorama_rnd":"tuONAiihIOTw8Sl","type":"link_to_panorama","status":1},"action_type":"link_to_panorama","position":{"x":"213.9263607742852","y":"-0.0756818336249534","z":"-289.9673506103599","lat":"-0.012045138012396706","lon":"306.418428374073"},"scale":60,"scale_fov":0,"scale_auto":0,"rotation":0,"rotation_to_axes":{"status":0,"x":"0","y":"0","z":"0"},"rotation_to_axes_old":0,"rtaold":0,"opacity":100,"transitions":{"op":{"v":"0","s":"1","st":"0"},"sc":{"v":"75","s":"1","st":"1"},"sw":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swx":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swy":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swz":{"v":"0","s":"1","st":"0","r":"0","d":"0"}},"flip_x":0,"flip_y":0,"z":0,"visible":1,"locked":0,"backwards_auto_linked":0,"date":1610740371,"order":1,"flip":{"x":0,"y":0}},{"id":1416673,"panorama_id":737899,"type":"sprite","type_extra":"","scene":1,"name":"ommkk90uLobktZLdyw07WHjdbfoWkP","tooltip":"","texture":"","value":"ommkk90uLobktZLdyw07WHjdbfoWkP.png","properties":{"value":"ommkk90uLobktZLdyw07WHjdbfoWkP.png","color":{"r":"1","g":"1","b":"1"}},"action":{"lat":"-37.89718553257621","lon":"354.8049043760434","fov":"100","panorama_id":737889,"panorama_rnd":"SpjAJ9UtVo1br5f","type":"link_to_panorama","status":1},"action_type":"link_to_panorama","position":{"x":"-54.308800176425954","y":"-2.646695664555133","z":"355.7267174128134","lat":"-0.4212384926526056","lon":"98.68032047158653"},"scale":60,"scale_fov":0,"scale_auto":0,"rotation":0,"rotation_to_axes":{"status":0,"x":"0","y":"0","z":"0"},"rotation_to_axes_old":0,"rtaold":0,"opacity":100,"transitions":{"op":{"v":"0","s":"1","st":"0"},"sc":{"v":"75","s":"1","st":"1"},"sw":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swx":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swy":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swz":{"v":"0","s":"1","st":"0","r":"0","d":"0"}},"flip_x":0,"flip_y":0,"z":0,"visible":1,"locked":0,"backwards_auto_linked":0,"date":1610740414,"order":2,"flip":{"x":0,"y":0}},{"id":1416676,"panorama_id":737899,"type":"sprite","type_extra":"","scene":1,"name":"7q6idjixYiURnI6tEB4NHKYxCrtsFl","tooltip":"","texture":"","value":"7q6idjixYiURnI6tEB4NHKYxCrtsFl.png","properties":{"value":"7q6idjixYiURnI6tEB4NHKYxCrtsFl.png","color":{"r":"1","g":"1","b":"1"}},"action":{"lat":"-34.42174118306842","lon":"355.8874980328928","fov":"100.804","panorama_id":737891,"panorama_rnd":"gkUUfav4lmyyUVh","type":"link_to_panorama","status":1},"action_type":"link_to_panorama","position":{"x":"-170.31705162096964","y":"14.828269735485303","z":"316.94966087399456","lat":"2.360660257693155","lon":"118.25194355157959"},"scale":60,"scale_fov":0,"scale_auto":0,"rotation":0,"rotation_to_axes":{"status":0,"x":"0","y":"0","z":"0"},"rotation_to_axes_old":0,"rtaold":0,"opacity":100,"transitions":{"op":{"v":"0","s":"1","st":"0"},"sc":{"v":"75","s":"1","st":"1"},"sw":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swx":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swy":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swz":{"v":"0","s":"1","st":"0","r":"0","d":"0"}},"flip_x":0,"flip_y":0,"z":0,"visible":1,"locked":0,"backwards_auto_linked":0,"date":1610740436,"order":1,"flip":{"x":0,"y":0}},{"id":1416678,"panorama_id":737899,"type":"sprite","type_extra":"","scene":1,"name":"7q6idjixYiURnI6tEB4NHKYxCrtsFl","tooltip":"","texture":"","value":"7q6idjixYiURnI6tEB4NHKYxCrtsFl.png","properties":{"value":"7q6idjixYiURnI6tEB4NHKYxCrtsFl.png","color":{"r":"1","g":"1","b":"1"}},"action":{"lat":"-34.97658369414495","lon":"179.57286145072442","fov":"100.528","panorama_id":737892,"panorama_rnd":"bYur4KOPtwziAX9","type":"link_to_panorama","status":1},"action_type":"link_to_panorama","position":{"x":"-313.08085248911505","y":"12.65923908953468","z":"178.41359272905595","lat":"2.0151959361562035","lon":"150.32272968050617"},"scale":60,"scale_fov":0,"scale_auto":0,"rotation":0,"rotation_to_axes":{"status":0,"x":"0","y":"0","z":"0"},"rotation_to_axes_old":0,"rtaold":0,"opacity":100,"transitions":{"op":{"v":"0","s":"1","st":"0"},"sc":{"v":"75","s":"1","st":"1"},"sw":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swx":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swy":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swz":{"v":"0","s":"1","st":"0","r":"0","d":"0"}},"flip_x":0,"flip_y":0,"z":0,"visible":1,"locked":0,"backwards_auto_linked":0,"date":1610740458,"order":1,"flip":{"x":0,"y":0}},{"id":1416680,"panorama_id":737899,"type":"sprite","type_extra":"","scene":1,"name":"7l0rNkoVMUb832hBId9NdMzRsxmMgF","tooltip":"","texture":"","value":"7l0rNkoVMUb832hBId9NdMzRsxmMgF.png","properties":{"value":"7l0rNkoVMUb832hBId9NdMzRsxmMgF.png","color":{"r":"1","g":"1","b":"1"}},"action":{"lat":"-35.86348908337183","lon":"138.55123062007854","fov":"110.199","panorama_id":737893,"panorama_rnd":"fYysCBVAu5sRYsl","type":"link_to_panorama","status":1},"action_type":"link_to_panorama","position":{"x":"-343.0439624615589","y":"-53.806742762116066","z":"95.96945708482171","lat":"-8.59581801709723","lon":"164.37058645778225"},"scale":60,"scale_fov":0,"scale_auto":0,"rotation":0,"rotation_to_axes":{"status":0,"x":"0","y":"0","z":"0"},"rotation_to_axes_old":0,"rtaold":0,"opacity":100,"transitions":{"op":{"v":"0","s":"1","st":"0"},"sc":{"v":"75","s":"1","st":"1"},"sw":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swx":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swy":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swz":{"v":"0","s":"1","st":"0","r":"0","d":"0"}},"flip_x":0,"flip_y":0,"z":0,"visible":1,"locked":0,"backwards_auto_linked":0,"date":1610740471,"order":4,"flip":{"x":0,"y":0}},{"id":1416681,"panorama_id":737899,"type":"sprite","type_extra":"","scene":1,"name":"pZGVVOsX3E7vgPAPPtPXN6GKoI6M1h","tooltip":"","texture":"","value":"pZGVVOsX3E7vgPAPPtPXN6GKoI6M1h.png","properties":{"value":"pZGVVOsX3E7vgPAPPtPXN6GKoI6M1h.png","color":{"r":"1","g":"1","b":"1"}},"action":{"lat":"-28.666574777586803","lon":"99.79157082059666","fov":"100.051","panorama_id":737890,"panorama_rnd":"7JTqsu9yuo3jA01","type":"link_to_panorama","status":1},"action_type":"link_to_panorama","position":{"x":"-246.9276941574231","y":"53.67406129842596","z":"256.64820134222145","lat":"8.574461812697066","lon":"133.89415898658825"},"scale":60,"scale_fov":0,"scale_auto":0,"rotation":0,"rotation_to_axes":{"status":0,"x":"0","y":"0","z":"0"},"rotation_to_axes_old":0,"rtaold":0,"opacity":100,"transitions":{"op":{"v":"0","s":"1","st":"0"},"sc":{"v":"70","s":"1","st":"1"},"sw":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swx":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swy":{"v":"0","s":"1","st":"0","r":"0","d":"0"},"swz":{"v":"0","s":"1","st":"0","r":"0","d":"0"}},"flip_x":0,"flip_y":0,"z":0,"visible":1,"locked":0,"backwards_auto_linked":0,"date":1610740490,"order":1,"flip":{"x":0,"y":0}}]}